[
  {
    "id": "fimo_2006_algebra_p1",
    "enunciado": "A sequence of real numbers $a_{0}, a_{1}, a_{2}, \\ldots$ is defined by the formula\n\n$$\na_{i+1}=\\left\\lfloor a_{i}\\right\\rfloor \\cdot\\left\\langle a_{i}\\right\\rangle \\quad \\text { for } \\quad i \\geq 0 ;\n$$\n\nhere $a_{0}$ is an arbitrary real number, $\\left\\lfloor a_{i}\\right\\rfloor$ denotes the greatest integer not exceeding $a_{i}$, and $\\left\\langle a_{i}\\right\\rangle=a_{i}-\\left\\lfloor a_{i}\\right\\rfloor$. Prove that $a_{i}=a_{i+2}$ for $i$ sufficiently large.",
    "solucao": "First note that if $a_{0} \\geq 0$, then all $a_{i} \\geq 0$. For $a_{i} \\geq 1$ we have (in view of $\\left\\langle a_{i}\\right\\rangle<1$ and $\\left.\\left\\lfloor a_{i}\\right\\rfloor>0\\right)$\n\n$$\n\\left\\lfloor a_{i+1}\\right\\rfloor \\leq a_{i+1}=\\left\\lfloor a_{i}\\right\\rfloor \\cdot\\left\\langle a_{i}\\right\\rangle<\\left\\lfloor a_{i}\\right\\rfloor ;\n$$\n\nthe sequence $\\left\\lfloor a_{i}\\right\\rfloor$ is strictly decreasing as long as its terms are in $[1, \\infty)$. Eventually there appears a number from the interval $[0,1)$ and all subsequent terms are 0 .\n\nNow pass to the more interesting situation where $a_{0}<0$; then all $a_{i} \\leq 0$. Suppose the sequence never hits 0 . Then we have $\\left\\lfloor a_{i}\\right\\rfloor \\leq-1$ for all $i$, and so\n\n$$\n1+\\left\\lfloor a_{i+1}\\right\\rfloor>a_{i+1}=\\left\\lfloor a_{i}\\right\\rfloor \\cdot\\left\\langle a_{i}\\right\\rangle>\\left\\lfloor a_{i}\\right\\rfloor ;\n$$\n\nthis means that the sequence $\\left\\lfloor a_{i}\\right\\rfloor$ is nondecreasing. And since all its terms are integers from $(-\\infty,-1]$, this sequence must be constant from some term on:\n\n$$\n\\left\\lfloor a_{i}\\right\\rfloor=c \\quad \\text { for } \\quad i \\geq i_{0} ; \\quad c \\text { a negative integer. }\n$$\n\nThe defining formula becomes\n\n$$\na_{i+1}=c \\cdot\\left\\langle a_{i}\\right\\rangle=c\\left(a_{i}-c\\right)=c a_{i}-c^{2} .\n$$\n\nConsider the sequence\n\n$$\nb_{i}=a_{i}-\\frac{c^{2}}{c-1} .\n$$\n\nIt satisfies the recursion rule\n\n$$\nb_{i+1}=a_{i+1}-\\frac{c^{2}}{c-1}=c a_{i}-c^{2}-\\frac{c^{2}}{c-1}=c b_{i},\n$$\n\nimplying\n\n$$\nb_{i}=c^{i-i_{0}} b_{i_{0}} \\quad \\text { for } \\quad i \\geq i_{0} .\n$$\n\nSince all the numbers $a_{i}$ (for $\\left.i \\geq i_{0}\\right)$ lie in $\\left[c, c+1\\right.$ ), the sequence $\\left(b_{i}\\right)$ is bounded. The equation (2) can be satisfied only if either $b_{i_{0}}=0$ or $|c|=1$, i.e., $c=-1$. In the first case, $b_{i}=0$ for all $i \\geq i_{0}$, so that\n\n$$\na_{i}=\\frac{c^{2}}{c-1} \\quad \\text { for } \\quad i \\geq i_{0} .\n$$\n\nIn the second case, $c=-1$, equations (1) and (2) say that\n\n$$\na_{i}=-\\frac{1}{2}+(-1)^{i-i_{0}} b_{i_{0}}= \\begin{cases}a_{i_{0}} & \\text { for } i=i_{0}, i_{0}+2, i_{0}+4, \\ldots, \\\\ 1-a_{i_{0}} & \\text { for } i=i_{0}+1, i_{0}+3, i_{0}+5, \\ldots\\end{cases}\n$$\n\nSummarising, we see that (from some point on) the sequence $\\left(a_{i}\\right)$ either is constant or takes alternately two values from the interval $(-1,0)$. The result follows."
  },
  {
    "id": "fimo_2006_algebra_p2",
    "enunciado": "The sequence of real numbers $a_{0}, a_{1}, a_{2}, \\ldots$ is defined recursively by\n\n$$\na_{0}=-1, \\quad \\sum_{k=0}^{n} \\frac{a_{n-k}}{k+1}=0 \\quad \\text { for } \\quad n \\geq 1 .\n$$\n\nShow that $a_{n}>0$ for $n \\geq 1$",
    "solucao": "The proof goes by induction. For $n=1$ the formula yields $a_{1}=1 / 2$. Take $n \\geq 1$, assume $a_{1}, \\ldots, a_{n}>0$ and write the recurrence formula for $n$ and $n+1$, respectively as\n\n$$\n\\sum_{k=0}^{n} \\frac{a_{k}}{n-k+1}=0 \\quad \\text { and } \\quad \\sum_{k=0}^{n+1} \\frac{a_{k}}{n-k+2}=0 .\n$$\n\nSubtraction yields\n\n$$\n\\begin{aligned}\n0=(n+2) \\sum_{k=0}^{n+1} \\frac{a_{k}}{n-k+2}-(n+1) \\sum_{k=0}^{n} \\frac{a_{k}}{n-k+1} \\\\\n=(n+2) a_{n+1}+\\sum_{k=0}^{n}\\left(\\frac{n+2}{n-k+2}-\\frac{n+1}{n-k+1}\\right) a_{k} .\n\\end{aligned}\n$$\n\nThe coefficient of $a_{0}$ vanishes, so\n\n$$\na_{n+1}=\\frac{1}{n+2} \\sum_{k=1}^{n}\\left(\\frac{n+1}{n-k+1}-\\frac{n+2}{n-k+2}\\right) a_{k}=\\frac{1}{n+2} \\sum_{k=1}^{n} \\frac{k}{(n-k+1)(n-k+2)} a_{k} .\n$$\n\nThe coefficients of $a_{1}, \\ldots, a_{n}$ are all positive. Therefore, $a_{1}, \\ldots, a_{n}>0$ implies $a_{n+1}>0$."
  },
  {
    "id": "fimo_2006_algebra_p3",
    "enunciado": "The sequence $c_{0}, c_{1}, \\ldots, c_{n}, \\ldots$ is defined by $c_{0}=1, c_{1}=0$ and $c_{n+2}=c_{n+1}+c_{n}$ for $n \\geq 0$. Consider the set $S$ of ordered pairs $(x, y)$ for which there is a finite set $J$ of positive integers such that $x=\\sum_{j \\in J} c_{j}, y=\\sum_{j \\in J} c_{j-1}$. Prove that there exist real numbers $\\alpha, \\beta$ and $m, M$ with the following property: An ordered pair of nonnegative integers $(x, y)$ satisfies the inequality\n\n$$\nm<\\alpha x+\\beta y<M\n$$\n\nif and only if $(x, y) \\in S$.\n\nN. B. A sum over the elements of the empty set is assumed to be 0 .",
    "solucao": "Let $\\varphi=(1+\\sqrt{5}) / 2$ and $\\psi=(1-\\sqrt{5}) / 2$ be the roots of the quadratic equation $t^{2}-t-1=0$. So $\\varphi \\psi=-1, \\varphi+\\psi=1$ and $1+\\psi=\\psi^{2}$. An easy induction shows that the general term $c_{n}$ of the given sequence satisfies\n\n$$\nc_{n}=\\frac{\\varphi^{n-1}-\\psi^{n-1}}{\\varphi-\\psi} \\quad \\text { for } n \\geq 0 .\n$$\n\nSuppose that the numbers $\\alpha$ and $\\beta$ have the stated property, for appropriately chosen $m$ and $M$. Since $\\left(c_{n}, c_{n-1}\\right) \\in S$ for each $n$, the expression\n\n$\\alpha c_{n}+\\beta c_{n-1}=\\frac{\\alpha}{\\sqrt{5}}\\left(\\varphi^{n-1}-\\psi^{n-1}\\right)+\\frac{\\beta}{\\sqrt{5}}\\left(\\varphi^{n-2}-\\psi^{n-2}\\right)=\\frac{1}{\\sqrt{5}}\\left[(\\alpha \\varphi+\\beta) \\varphi^{n-2}-(\\alpha \\psi+\\beta) \\psi^{n-2}\\right]$ is bounded as $n$ grows to infinity. Because $\\varphi>1$ and $-1<\\psi<0$, this implies $\\alpha \\varphi+\\beta=0$.\n\nTo satisfy $\\alpha \\varphi+\\beta=0$, one can set for instance $\\alpha=\\psi, \\beta=1$. We now find the required $m$ and $M$ for this choice of $\\alpha$ and $\\beta$.\n\nNote first that the above displayed equation gives $c_{n} \\psi+c_{n-1}=\\psi^{n-1}, n \\geq 1$. In the sequel, we denote the pairs in $S$ by $\\left(a_{J}, b_{J}\\right)$, where $J$ is a finite subset of the set $\\mathbb{N}$ of positive integers and $a_{J}=\\sum_{j \\in J} c_{j}, b_{J}=\\sum_{j \\in J} c_{j-1}$. Since $\\psi a_{J}+b_{J}=\\sum_{j \\in J}\\left(c_{j} \\psi+c_{j-1}\\right)$, we obtain\n\n$$\n\\psi a_{J}+b_{J}=\\sum_{j \\in J} \\psi^{j-1} \\quad \\text { for each }\\left(a_{J}, b_{J}\\right) \\in S .\n$$\n\nOn the other hand, in view of $-1<\\psi<0$,\n\n$$\n-1=\\frac{\\psi}{1-\\psi^{2}}=\\sum_{j=0}^{\\infty} \\psi^{2 j+1}<\\sum_{j \\in J} \\psi^{j-1}<\\sum_{j=0}^{\\infty} \\psi^{2 j}=\\frac{1}{1-\\psi^{2}}=1-\\psi=\\varphi .\n$$\n\nTherefore, according to (1),\n\n$$\n-1<\\psi a_{J}+b_{J}<\\varphi \\quad \\text { for each }\\left(a_{J}, b_{J}\\right) \\in S .\n$$\n\nThus $m=-1$ and $M=\\varphi$ is an appropriate choice.\n\nConversely, we prove that if an ordered pair of nonnegative integers $(x, y)$ satisfies the inequality $-1<\\psi x+y<\\varphi$ then $(x, y) \\in S$. Lemma. Let $x, y$ be nonnegative integers such that $-1<\\psi x+y<\\varphi$. Then there exists a subset $J$ of $\\mathbb{N}$ such that\n\n$$\n\\psi x+y=\\sum_{j \\in J} \\psi^{j-1}\n$$\n\nProof. For $x=y=0$ it suffices to choose the empty subset of $\\mathbb{N}$ as $J$, so let at least one of $x, y$ be nonzero. There exist representations of $\\psi x+y$ of the form\n\n$$\n\\psi x+y=\\psi^{i_{1}}+\\cdots+\\psi^{i_{k}}\n$$\n\nwhere $i_{1} \\leq \\cdots \\leq i_{k}$ is a sequence of nonnegative integers, not necessarily distinct. For instance, we can take $x$ summands $\\psi^{1}=\\psi$ and $y$ summands $\\psi^{0}=1$. Consider all such representations of minimum length $k$ and focus on the ones for which $i_{1}$ has the minimum possible value $j_{1}$. Among them, consider the representations where $i_{2}$ has the minimum possible value $j_{2}$. Upon choosing $j_{3}, \\ldots, j_{k}$ analogously, we obtain a sequence $j_{1} \\leq \\cdots \\leq j_{k}$ which clearly satisfies $\\psi x+y=\\sum_{r=1}^{k} \\psi^{j_{r}}$. To prove the lemma, it suffices to show that $j_{1}, \\ldots, j_{k}$ are pairwise distinct.\n\nSuppose on the contrary that $j_{r}=j_{r+1}$ for some $r=1, \\ldots, k-1$. Let us consider the case $j_{r} \\geq 2$ first. Observing that $2 \\psi^{2}=1+\\psi^{3}$, we replace $j_{r}$ and $j_{r+1}$ by $j_{r}-2$ and $j_{r}+1$, respectively. Since\n\n$$\n\\psi^{j_{r}}+\\psi^{j_{r+1}}=2 \\psi^{j_{r}}=\\psi^{j_{r}-2}\\left(1+\\psi^{3}\\right)=\\psi^{j_{r}-2}+\\psi^{j_{r}+1},\n$$\n\nthe new sequence also represents $\\psi x+y$ as needed, and the value of $i_{r}$ in it contradicts the minimum choice of $j_{r}$.\n\nLet $j_{r}=j_{r+1}=0$. Then the sum $\\psi x+y=\\sum_{r=1}^{k} \\psi^{j_{r}}$ contains at least two summands equal to $\\psi^{0}=1$. On the other hand $j_{s} \\neq 1$ for all $s$, because the equality $1+\\psi=\\psi^{2}$ implies that a representation of minimum length cannot contain consecutive $i_{r}$ 's. It follows that\n\n$$\n\\psi x+y=\\sum_{r=1}^{k} \\psi^{j_{r}}>2+\\psi^{3}+\\psi^{5}+\\psi^{7}+\\cdots=2-\\psi^{2}=\\varphi\n$$\n\ncontradicting the condition of the lemma.\n\nLet $j_{r}=j_{r+1}=1$; then $\\sum_{r=1}^{k} \\psi^{j_{r}}$ contains at least two summands equal to $\\psi^{1}=\\psi$. Like in the case $j_{r}=j_{r+1}=0$, we also infer that $j_{s} \\neq 0$ and $j_{s} \\neq 2$ for all $s$. Therefore\n\n$$\n\\psi x+y=\\sum_{r=1}^{k} \\psi^{j_{r}}<2 \\psi+\\psi^{4}+\\psi^{6}+\\psi^{8}+\\cdots=2 \\psi-\\psi^{3}=-1,\n$$\n\nwhich is a contradiction again. The conclusion follows.\n\nNow let the ordered pair $(x, y)$ satisfy $-1<\\psi x+y<\\varphi$; hence the lemma applies to $(x, y)$. Let $J \\subset \\mathbb{N}$ be such that (2) holds. Comparing (1) and (2), we conclude that $\\psi x+y=\\psi a_{J}+b_{J}$. Now, $x, y, a_{J}$ and $b_{J}$ are integers, and $\\psi$ is irrational. So the last equality implies $x=a_{J}$ and $y=b_{J}$. This shows that the numbers $\\alpha=\\psi, \\beta=1, m=-1, M=\\varphi$ meet the requirements."
  },
  {
    "id": "fimo_2006_algebra_p4",
    "enunciado": "Prove the inequality\n\n$$\n\\sum_{i<j} \\frac{a_{i} a_{j}}{a_{i}+a_{j}} \\leq \\frac{n}{2\\left(a_{1}+a_{2}+\\cdots+a_{n}\\right)} \\sum_{i<j} a_{i} a_{j}\n$$\n\nfor positive real numbers $a_{1}, a_{2}, \\ldots, a_{n}$.",
    "solucao": "Let $S=\\sum_{i} a_{i}$. Denote by $L$ and $R$ the expressions on the left and right hand side of the proposed inequality. We transform $L$ and $R$ using the identity\n\n$$\n\\sum_{i<j}\\left(a_{i}+a_{j}\\right)=(n-1) \\sum_{i} a_{i} .\n$$\n\nAnd thus:\n\n$$\nL=\\sum_{i<j} \\frac{a_{i} a_{j}}{a_{i}+a_{j}}=\\sum_{i<j} \\frac{1}{4}\\left(a_{i}+a_{j}-\\frac{\\left(a_{i}-a_{j}\\right)^{2}}{a_{i}+a_{j}}\\right)=\\frac{n-1}{4} \\cdot S-\\frac{1}{4} \\sum_{i<j} \\frac{\\left(a_{i}-a_{j}\\right)^{2}}{a_{i}+a_{j}} .\n$$\n\nTo represent $R$ we express the sum $\\sum_{i<j} a_{i} a_{j}$ in two ways; in the second transformation identity (1) will be applied to the squares of the numbers $a_{i}$ :\n\n$$\n\\begin{gathered}\n\\sum_{i<j} a_{i} a_{j}=\\frac{1}{2}\\left(S^{2}-\\sum_{i} a_{i}^{2}\\right) ; \\\\\n\\sum_{i<j} a_{i} a_{j}=\\frac{1}{2} \\sum_{i<j}\\left(a_{i}^{2}+a_{j}^{2}-\\left(a_{i}-a_{j}\\right)^{2}\\right)=\\frac{n-1}{2} \\cdot \\sum_{i} a_{i}^{2}-\\frac{1}{2} \\sum_{i<j}\\left(a_{i}-a_{j}\\right)^{2} .\n\\end{gathered}\n$$\n\nMultiplying the first of these equalities by $n-1$ and adding the second one we obtain\n\n$$\nn \\sum_{i<j} a_{i} a_{j}=\\frac{n-1}{2} \\cdot S^{2}-\\frac{1}{2} \\sum_{i<j}\\left(a_{i}-a_{j}\\right)^{2} .\n$$\n\nHence\n\n$$\nR=\\frac{n}{2 S} \\sum_{i<j} a_{i} a_{j}=\\frac{n-1}{4} \\cdot S-\\frac{1}{4} \\sum_{i<j} \\frac{\\left(a_{i}-a_{j}\\right)^{2}}{S}\n$$\n\nNow compare (2) and (3). Since $S \\geq a_{i}+a_{j}$ for any $i<j$, the claim $L \\geq R$ results."
  },
  {
    "id": "fimo_2006_algebra_p5",
    "enunciado": "Let $a, b, c$ be the sides of a triangle. Prove that\n\n$$\n\\frac{\\sqrt{b+c-a}}{\\sqrt{b}+\\sqrt{c}-\\sqrt{a}}+\\frac{\\sqrt{c+a-b}}{\\sqrt{c}+\\sqrt{a}-\\sqrt{b}}+\\frac{\\sqrt{a+b-c}}{\\sqrt{a}+\\sqrt{b}-\\sqrt{c}} \\leq 3\n$$",
    "solucao": "Note first that the denominators are all positive, e.g. $\\sqrt{a}+\\sqrt{b}>\\sqrt{a+b}>\\sqrt{c}$. Let $x=\\sqrt{b}+\\sqrt{c}-\\sqrt{a}, y=\\sqrt{c}+\\sqrt{a}-\\sqrt{b}$ and $z=\\sqrt{a}+\\sqrt{b}-\\sqrt{c}$. Then\n\n$b+c-a=\\left(\\frac{z+x}{2}\\right)^{2}+\\left(\\frac{x+y}{2}\\right)^{2}-\\left(\\frac{y+z}{2}\\right)^{2}=\\frac{x^{2}+x y+x z-y z}{2}=x^{2}-\\frac{1}{2}(x-y)(x-z)$\n\nand\n\n$$\n\\frac{\\sqrt{b+c-a}}{\\sqrt{b}+\\sqrt{c}-\\sqrt{a}}=\\sqrt{1-\\frac{(x-y)(x-z)}{2 x^{2}}} \\leq 1-\\frac{(x-y)(x-z)}{4 x^{2}}\n$$\n\napplying $\\sqrt{1+2 u} \\leq 1+u$ in the last step. Similarly we obtain\n\n$$\n\\frac{\\sqrt{c+a-b}}{\\sqrt{c}+\\sqrt{a}-\\sqrt{b}} \\leq 1-\\frac{(z-x)(z-y)}{4 z^{2}} \\quad \\text { and } \\quad \\frac{\\sqrt{a+b-c}}{\\sqrt{a}+\\sqrt{b}-\\sqrt{c}} \\leq 1-\\frac{(y-z)(y-x)}{4 y^{2}}\n$$\n\nSubstituting these quantities into the statement, it is sufficient to prove that\n\n$$\n\\frac{(x-y)(x-z)}{x^{2}}+\\frac{(y-z)(y-x)}{y^{2}}+\\frac{(z-x)(z-y)}{z^{2}} \\geq 0 .\n$$\n\nBy symmetry we can assume $x \\leq y \\leq z$. Then\n\n$$\n\\begin{gathered}\n\\frac{(x-y)(x-z)}{x^{2}}=\\frac{(y-x)(z-x)}{x^{2}} \\geq \\frac{(y-x)(z-y)}{y^{2}}=-\\frac{(y-z)(y-x)}{y^{2}}, \\\\\n\\frac{(z-x)(z-y)}{z^{2}} \\geq 0\n\\end{gathered}\n$$\n\nand (1) follows."
  },
  {
    "id": "fimo_2006_algebra_p6",
    "enunciado": "Determine the smallest number $M$ such that the inequality\n\n$$\n\\left|a b\\left(a^{2}-b^{2}\\right)+b c\\left(b^{2}-c^{2}\\right)+c a\\left(c^{2}-a^{2}\\right)\\right| \\leq M\\left(a^{2}+b^{2}+c^{2}\\right)^{2}\n$$\n\nholds for all real numbers $a, b, c$.\n\nThe final answer is $M=\\frac{9}{32} \\sqrt{2}$.",
    "solucao": "We first consider the cubic polynomial\n\n$$\nP(t)=t b\\left(t^{2}-b^{2}\\right)+b c\\left(b^{2}-c^{2}\\right)+c t\\left(c^{2}-t^{2}\\right) .\n$$\n\nIt is easy to check that $P(b)=P(c)=P(-b-c)=0$, and therefore\n\n$$\nP(t)=(b-c)(t-b)(t-c)(t+b+c),\n$$\n\nsince the cubic coefficient is $b-c$. The left-hand side of the proposed inequality can therefore be written in the form\n\n$$\n\\left|a b\\left(a^{2}-b^{2}\\right)+b c\\left(b^{2}-c^{2}\\right)+c a\\left(c^{2}-a^{2}\\right)\\right|=|P(a)|=|(b-c)(a-b)(a-c)(a+b+c)| .\n$$\n\nThe problem comes down to finding the smallest number $M$ that satisfies the inequality\n\n$$\n|(b-c)(a-b)(a-c)(a+b+c)| \\leq M \\cdot\\left(a^{2}+b^{2}+c^{2}\\right)^{2} .\n$$\n\nNote that this expression is symmetric, and we can therefore assume $a \\leq b \\leq c$ without loss of generality. With this assumption,\n\n$$\n|(a-b)(b-c)|=(b-a)(c-b) \\leq\\left(\\frac{(b-a)+(c-b)}{2}\\right)^{2}=\\frac{(c-a)^{2}}{4}\n$$\n\nwith equality if and only if $b-a=c-b$, i.e. $2 b=a+c$. Also\n\n$$\n\\left(\\frac{(c-b)+(b-a)}{2}\\right)^{2} \\leq \\frac{(c-b)^{2}+(b-a)^{2}}{2}\n$$\n\nor equivalently,\n\n$$\n3(c-a)^{2} \\leq 2 \\cdot\\left[(b-a)^{2}+(c-b)^{2}+(c-a)^{2}\\right],\n$$\n\nagain with equality only for $2 b=a+c$. From (2) and (3) we get\n\n$$\n\\begin{aligned}\n& |(b-c)(a-b)(a-c)(a+b+c)| \\\\\n\\leq & \\frac{1}{4} \\cdot\\left|(c-a)^{3}(a+b+c)\\right| \\\\\n= & \\frac{1}{4} \\cdot \\sqrt{(c-a)^{6}(a+b+c)^{2}} \\\\\n\\leq & \\frac{1}{4} \\cdot \\sqrt{\\left(\\frac{2 \\cdot\\left[(b-a)^{2}+(c-b)^{2}+(c-a)^{2}\\right]}{3}\\right)^{3} \\cdot(a+b+c)^{2}} \\\\\n= & \\frac{\\sqrt{2}}{2} \\cdot\\left(\\sqrt[4]{\\left(\\frac{(b-a)^{2}+(c-b)^{2}+(c-a)^{2}}{3}\\right)^{3} \\cdot(a+b+c)^{2}}\\right)^{2} .\n\\end{aligned}\n$$\n\nBy the weighted AM-GM inequality this estimate continues as follows:\n\n$$\n\\begin{aligned}\n& |(b-c)(a-b)(a-c)(a+b+c)| \\\\\n\\leq & \\frac{\\sqrt{2}}{2} \\cdot\\left(\\frac{(b-a)^{2}+(c-b)^{2}+(c-a)^{2}+(a+b+c)^{2}}{4}\\right)^{2} \\\\\n= & \\frac{9 \\sqrt{2}}{32} \\cdot\\left(a^{2}+b^{2}+c^{2}\\right)^{2} .\n\\end{aligned}\n$$\n\nWe see that the inequality (1) is satisfied for $M=\\frac{9}{32} \\sqrt{2}$, with equality if and only if $2 b=a+c$ and\n\n$$\n\\frac{(b-a)^{2}+(c-b)^{2}+(c-a)^{2}}{3}=(a+b+c)^{2} .\n$$\n\nPlugging $b=(a+c) / 2$ into the last equation, we bring it to the equivalent form\n\n$$\n2(c-a)^{2}=9(a+c)^{2} .\n$$\n\nThe conditions for equality can now be restated as\n\n$$\n2 b=a+c \\quad \\text { and } \\quad(c-a)^{2}=18 b^{2} .\n$$\n\nSetting $b=1$ yields $a=1-\\frac{3}{2} \\sqrt{2}$ and $c=1+\\frac{3}{2} \\sqrt{2}$. We see that $M=\\frac{9}{32} \\sqrt{2}$ is indeed the smallest constant satisfying the inequality, with equality for any triple $(a, b, c)$ proportional to $\\left(1-\\frac{3}{2} \\sqrt{2}, 1,1+\\frac{3}{2} \\sqrt{2}\\right)$, up to permutation."
  },
  {
    "id": "fimo_2006_number_theory_p1",
    "enunciado": "Determine all pairs $(x, y)$ of integers satisfying the equation\n\n$$\n1+2^{x}+2^{2 x+1}=y^{2} .\n$$\n\nThe final answers are $(x, y):(0,2),(0,-2),(4,23),(4,-23)$.",
    "solucao": "If $(x, y)$ is a solution then obviously $x \\geq 0$ and $(x,-y)$ is a solution too. For $x=0$ we get the two solutions $(0,2)$ and $(0,-2)$.\n\nNow let $(x, y)$ be a solution with $x>0$; without loss of generality confine attention to $y>0$. The equation rewritten as\n\n$$\n2^{x}\\left(1+2^{x+1}\\right)=(y-1)(y+1)\n$$\n\nshows that the factors $y-1$ and $y+1$ are even, exactly one of them divisible by 4 . Hence $x \\geq 3$ and one of these factors is divisible by $2^{x-1}$ but not by $2^{x}$. So\n\n$$\ny=2^{x-1} m+\\epsilon, \\quad m \\text { odd }, \\quad \\epsilon=\\pm 1 .\n$$\n\nPlugging this into the original equation we obtain\n\n$$\n2^{x}\\left(1+2^{x+1}\\right)=\\left(2^{x-1} m+\\epsilon\\right)^{2}-1=2^{2 x-2} m^{2}+2^{x} m \\epsilon\n$$\n\nor, equivalently\n\n$$\n1+2^{x+1}=2^{x-2} m^{2}+m \\epsilon\n$$\n\nTherefore\n\n$$\n1-\\epsilon m=2^{x-2}\\left(m^{2}-8\\right) .\n$$\n\nFor $\\epsilon=1$ this yields $m^{2}-8 \\leq 0$, i.e., $m=1$, which fails to satisfy (2).\n\nFor $\\epsilon=-1$ equation (2) gives us\n\n$$\n1+m=2^{x-2}\\left(m^{2}-8\\right) \\geq 2\\left(m^{2}-8\\right)\n$$\n\nimplying $2 m^{2}-m-17 \\leq 0$. Hence $m \\leq 3$; on the other hand $m$ cannot be 1 by (2). Because $m$ is odd, we obtain $m=3$, leading to $x=4$. From (1) we get $y=23$. These values indeed satisfy the given equation. Recall that then $y=-23$ is also good. Thus we have the complete list of solutions $(x, y):(0,2),(0,-2),(4,23),(4,-23)$."
  },
  {
    "id": "fimo_2006_number_theory_p2",
    "enunciado": "For $x \\in(0,1)$ let $y \\in(0,1)$ be the number whose $n$th digit after the decimal point is the $\\left(2^{n}\\right)$ th digit after the decimal point of $x$. Show that if $x$ is rational then so is $y$.\n",
    "solucao": "Since $x$ is rational, its digits repeat periodically starting at some point. We wish to show that this is also true for the digits of $y$, implying that $y$ is rational.\n\nLet $d$ be the length of the period of $x$ and let $d=2^{u} \\cdot v$, where $v$ is odd. There is a positive integer $w$ such that\n\n$$\n2^{w} \\equiv 1 \\quad(\\bmod v) .\n$$\n\n(For instance, one can choose $w$ to be $\\varphi(v)$, the value of Euler's function at $v$.) Therefore\n\n$$\n2^{n+w}=2^{n} \\cdot 2^{w} \\equiv 2^{n} \\quad(\\bmod v)\n$$\n\nfor each $n$. Also, for $n \\geq u$ we have\n\n$$\n2^{n+w} \\equiv 2^{n} \\equiv 0 \\quad\\left(\\bmod 2^{u}\\right) .\n$$\n\nIt follows that, for all $n \\geq u$, the relation\n\n$$\n2^{n+w} \\equiv 2^{n} \\quad(\\bmod d)\n$$\n\nholds. Thus, for $n$ sufficiently large, the $2^{n+w}$ th digit of $x$ is in the same spot in the cycle of $x$ as its $2^{n}$ th digit, and so these digits are equal. Hence the $(n+w)$ th digit of $y$ is equal to its $n$th digit. This means that the digits of $y$ repeat periodically with period $w$ from some point on, as required."
  },
  {
    "id": "fimo_2006_number_theory_p3",
    "enunciado": "The sequence $f(1), f(2), f(3), \\ldots$ is defined by\n\n$$\nf(n)=\\frac{1}{n}\\left(\\left\\lfloor\\frac{n}{1}\\right\\rfloor+\\left\\lfloor\\frac{n}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{n}{n}\\right\\rfloor\\right),\n$$\n\nwhere $\\lfloor x\\rfloor$ denotes the integer part of $x$.\n\n(a) Prove that $f(n+1)>f(n)$ infinitely often.\n\n(b) Prove that $f(n+1)<f(n)$ infinitely often.",
    "solucao": "Let $g(n)=n f(n)$ for $n \\geq 1$ and $g(0)=0$. We note that, for $k=1, \\ldots, n$,\n\n$$\n\\left\\lfloor\\frac{n}{k}\\right\\rfloor-\\left\\lfloor\\frac{n-1}{k}\\right\\rfloor=0\n$$\n\nif $k$ is not a divisor of $n$ and\n\n$$\n\\left\\lfloor\\frac{n}{k}\\right\\rfloor-\\left\\lfloor\\frac{n-1}{k}\\right\\rfloor=1\n$$\n\nif $k$ divides $n$. It therefore follows that if $d(n)$ is the number of positive divisors of $n \\geq 1$ then\n\n$$\n\\begin{aligned}\ng(n) & =\\left\\lfloor\\frac{n}{1}\\right\\rfloor+\\left\\lfloor\\frac{n}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{n}{n-1}\\right\\rfloor+\\left\\lfloor\\frac{n}{n}\\right\\rfloor \\\\\n& =\\left\\lfloor\\frac{n-1}{1}\\right\\rfloor+\\left\\lfloor\\frac{n-1}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{n-1}{n-1}\\right\\rfloor+\\left\\lfloor\\frac{n-1}{n}\\right\\rfloor+d(n) \\\\\n& =g(n-1)+d(n) .\n\\end{aligned}\n$$\n\nHence\n\n$$\ng(n)=g(n-1)+d(n)=g(n-2)+d(n-1)+d(n)=\\cdots=d(1)+d(2)+\\cdots+d(n)\n$$\n\nmeaning that\n\n$$\nf(n)=\\frac{d(1)+d(2)+\\cdots+d(n)}{n} .\n$$\n\nIn other words, $f(n)$ is equal to the arithmetic mean of $d(1), d(2), \\ldots, d(n)$. In order to prove the claims, it is therefore sufficient to show that $d(n+1)>f(n)$ and $d(n+1)<f(n)$ both hold infinitely often.\n\nWe note that $d(1)=1$. For $n>1, d(n) \\geq 2$ holds, with equality if and only if $n$ is prime. Since $f(6)=7 / 3>2$, it follows that $f(n)>2$ holds for all $n \\geq 6$.\n\nSince there are infinitely many primes, $d(n+1)=2$ holds for infinitely many values of $n$, and for each such $n \\geq 6$ we have $d(n+1)=2<f(n)$. This proves claim (b).\n\nTo prove (a), notice that the sequence $d(1), d(2), d(3), \\ldots$ is unbounded (e. g. $d\\left(2^{k}\\right)=k+1$ for all $k)$. Hence $d(n+1)>\\max \\{d(1), d(2), \\ldots, d(n)\\}$ for infinitely many $n$. For all such $n$, we have $d(n+1)>f(n)$. This completes the solution."
  },
  {
    "id": "fimo_2006_number_theory_p4",
    "enunciado": "Let $P$ be a polynomial of degree $n>1$ with integer coefficients and let $k$ be any positive integer. Consider the polynomial $Q(x)=P(P(\\ldots P(P(x)) \\ldots))$, with $k$ pairs of parentheses. Prove that $Q$ has no more than $n$ integer fixed points, i.e. integers satisfying the equation $Q(x)=x$",
    "solucao": "The claim is obvious if every integer fixed point of $Q$ is a fixed point of $P$ itself. For the sequel assume that this is not the case. Take any integer $x_{0}$ such that $Q\\left(x_{0}\\right)=x_{0}$, $P\\left(x_{0}\\right) \\neq x_{0}$ and define inductively $x_{i+1}=P\\left(x_{i}\\right)$ for $i=0,1,2, \\ldots ;$ then $x_{k}=x_{0}$.\n\nIt is evident that\n\n$$\nP(u)-P(v) \\text { is divisible by } u-v \\text { for distinct integers } u, v \\text {. }\n$$\n\n(Indeed, if $P(x)=\\sum a_{i} x^{i}$ then each $a_{i}\\left(u^{i}-v^{i}\\right)$ is divisible by $u-v$.) Therefore each term in the chain of (nonzero) differences\n\n$$\nx_{0}-x_{1}, \\quad x_{1}-x_{2}, \\quad \\ldots, \\quad x_{k-1}-x_{k}, \\quad x_{k}-x_{k+1}\n$$\n\nis a divisor of the next one; and since $x_{k}-x_{k+1}=x_{0}-x_{1}$, all these differences have equal absolute values. For $x_{m}=\\min \\left(x_{1}, \\ldots, x_{k}\\right)$ this means that $x_{m-1}-x_{m}=-\\left(x_{m}-x_{m+1}\\right)$. Thus $x_{m-1}=x_{m+1}\\left(\\neq x_{m}\\right)$. It follows that consecutive differences in the sequence (2) have opposite signs. Consequently, $x_{0}, x_{1}, x_{2}, \\ldots$ is an alternating sequence of two distinct values. In other words, every integer fixed point of $Q$ is a fixed point of the polynomial $P(P(x))$. Our task is to prove that there are at most $n$ such points.\n\nLet $a$ be one of them so that $b=P(a) \\neq a$ (we have assumed that such an $a$ exists); then $a=P(b)$. Take any other integer fixed point $\\alpha$ of $P(P(x))$ and let $P(\\alpha)=\\beta$, so that $P(\\beta)=\\alpha$; the numbers $\\alpha$ and $\\beta$ need not be distinct ( $\\alpha$ can be a fixed point of $P$ ), but each of $\\alpha, \\beta$ is different from each of $a, b$. Applying property (1) to the four pairs of integers $(\\alpha, a),(\\beta, b)$, $(\\alpha, b),(\\beta, a)$ we get that the numbers $\\alpha-a$ and $\\beta-b$ divide each other, and also $\\alpha-b$ and $\\beta-a$ divide each other. Consequently\n\n$$\n\\alpha-b=\\pm(\\beta-a), \\quad \\alpha-a=\\pm(\\beta-b) .\n$$\n\nSuppose we have a plus in both instances: $\\alpha-b=\\beta-a$ and $\\alpha-a=\\beta-b$. Subtraction yields $a-b=b-a$, a contradiction, as $a \\neq b$. Therefore at least one equality in (3) holds with a minus sign. For each of them this means that $\\alpha+\\beta=a+b$; equivalently $a+b-\\alpha-P(\\alpha)=0$.\n\nDenote $a+b$ by $C$. We have shown that every integer fixed point of $Q$ other that $a$ and $b$ is a root of the polynomial $F(x)=C-x-P(x)$. This is of course true for $a$ and $b$ as well. And since $P$ has degree $n>1$, the polynomial $F$ has the same degree, so it cannot have more than $n$ roots. Hence the result."
  },
  {
    "id": "fimo_2006_number_theory_p5",
    "enunciado": "Find all integer solutions of the equation\n\n$$\n\\frac{x^{7}-1}{x-1}=y^{5}-1 \\text {. }\n$$\n\nThe final answer is that the given equation has no integer solutions.",
    "solucao": "The equation has no integer solutions. To show this, we first prove a lemma.\n\nLemma. If $x$ is an integer and $p$ is a prime divisor of $\\frac{x^{7}-1}{x-1}$ then either $p \\equiv 1(\\bmod 7)$ or $p=7$.\n\nProof. Both $x^{7}-1$ and $x^{p-1}-1$ are divisible by $p$, by hypothesis and by Fermat's little theorem, respectively. Suppose that 7 does not divide $p-1$. Then $\\operatorname{gcd}(p-1,7)=1$, so there exist integers $k$ and $m$ such that $7 k+(p-1) m=1$. We therefore have\n\n$$\nx \\equiv x^{7 k+(p-1) m} \\equiv\\left(x^{7}\\right)^{k} \\cdot\\left(x^{p-1}\\right)^{m} \\equiv 1 \\quad(\\bmod p),\n$$\n\nand so\n\n$$\n\\frac{x^{7}-1}{x-1}=1+x+\\cdots+x^{6} \\equiv 7 \\quad(\\bmod p) .\n$$\n\nIt follows that $p$ divides 7 , hence $p=7$ must hold if $p \\equiv 1(\\bmod 7)$ does not, as stated.\n\nThe lemma shows that each positive divisor $d$ of $\\frac{x^{7}-1}{x-1}$ satisfies either $d \\equiv 0(\\bmod 7)$ or $d \\equiv 1(\\bmod 7)$\n\nNow assume that $(x, y)$ is an integer solution of the original equation. Notice that $y-1>0$, because $\\frac{x^{7}-1}{x-1}>0$ for all $x \\neq 1$. Since $y-1$ divides $\\frac{x^{7}-1}{x-1}=y^{5}-1$, we have $y \\equiv 1(\\bmod 7)$ or $y \\equiv 2(\\bmod 7)$ by the previous paragraph. In the first case, $1+y+y^{2}+y^{3}+y^{4} \\equiv 5(\\bmod 7)$, and in the second $1+y+y^{2}+y^{3}+y^{4} \\equiv 3(\\bmod 7)$. Both possibilities contradict the fact that the positive divisor $1+y+y^{2}+y^{3}+y^{4}$ of $\\frac{x^{7}-1}{x-1}$ is congruent to 0 or 1 modulo 7 . So the given equation has no integer solutions."
  },
  {
    "id": "fimo_2006_number_theory_p6",
    "enunciado": "Let $a>b>1$ be relatively prime positive integers. Define the weight of an integer $c$, denoted by $w(c)$, to be the minimal possible value of $|x|+|y|$ taken over all pairs of integers $x$ and $y$ such that\n\n$$\na x+b y=c .\n$$\n\nAn integer $c$ is called a local champion if $w(c) \\geq w(c \\pm a)$ and $w(c) \\geq w(c \\pm b)$.\n\nFind all local champions and determine their number.\n\nThe final answer is $b-1$ if both $a$ and $b$ are odd and $2(b-1)$ otherwise.",
    "solucao": "Call the pair of integers $(x, y)$ a representation of $c$ if $a x+b y=c$ and $|x|+|y|$ has the smallest possible value, i.e. $|x|+|y|=w(c)$.\n\nWe characterise the local champions by the following three observations.\n\nLemma 1. If $(x, y)$ a representation of a local champion $c$ then $x y<0$.\n\nProof. Suppose indirectly that $x \\geq 0$ and $y \\geq 0$ and consider the values $w(c)$ and $w(c+a)$. All representations of the numbers $c$ and $c+a$ in the form $a u+b v$ can be written as\n\n$$\nc=a(x-k b)+b(y+k a), \\quad c+a=a(x+1-k b)+b(y+k a)\n$$\n\nwhere $k$ is an arbitrary integer.\n\nSince $|x|+|y|$ is minimal, we have\n\n$$\nx+y=|x|+|y| \\leq|x-k b|+|y+k a|\n$$\n\nfor all $k$. On the other hand, $w(c+a) \\leq w(c)$, so there exists a $k$ for which\n\n$$\n|x+1-k b|+|y+k a| \\leq|x|+|y|=x+y .\n$$\n\nThen\n\n$$\n(x+1-k b)+(y+k a) \\leq|x+1-k b|+|y+k a| \\leq x+y \\leq|x-k b|+|y+k a| .\n$$\n\nComparing the first and the third expressions, we find $k(a-b)+1 \\leq 0$ implying $k<0$. Comparing the second and fourth expressions, we get $|x+1-k b| \\leq|x-k b|$, therefore $k b>x$; this is a contradiction.\n\nIf $x, y \\leq 0$ then we can switch to $-c,-x$ and $-y$.\n\nFrom this point, write $c=a x-b y$ instead of $c=a x+b y$ and consider only those cases where $x$ and $y$ are nonzero and have the same sign. By Lemma 1, there is no loss of generality in doing so.\n\nLemma 2. Let $c=a x-b y$ where $|x|+|y|$ is minimal and $x, y$ have the same sign. The number $c$ is a local champion if and only if $|x|<b$ and $|x|+|y|=\\left\\lfloor\\frac{a+b}{2}\\right\\rfloor$.\n\nProof. Without loss of generality we may assume $x, y>0$.\n\nThe numbers $c-a$ and $c+b$ can be written as\n\n$$\nc-a=a(x-1)-b y \\quad \\text { and } \\quad c+b=a x-b(y-1)\n$$\n\nand trivially $w(c-a) \\leq(x-1)+y<w(c)$ and $w(c+b) \\leq x+(y-1)<w(c)$ in all cases.\n\nNow assume that $c$ is a local champion and consider $w(c+a)$. Since $w(c+a) \\leq w(c)$, there exists an integer $k$ such that\n\n$$\nc+a=a(x+1-k b)-b(y-k a) \\text { and }|x+1-k b|+|y-k a| \\leq x+y .\n$$\n\nThis inequality cannot hold if $k \\leq 0$, therefore $k>0$. We prove that we can choose $k=1$.\n\nConsider the function $f(t)=|x+1-b t|+|y-a t|-(x+y)$. This is a convex function and we have $f(0)=1$ and $f(k) \\leq 0$. By Jensen's inequality, $f(1) \\leq\\left(1-\\frac{1}{k}\\right) f(0)+\\frac{1}{k} f(k)<1$. But $f(1)$ is an integer. Therefore $f(1) \\leq 0$ and\n\n$$\n|x+1-b|+|y-a| \\leq x+y .\n$$\n\nKnowing $c=a(x-b)-b(y-a)$, we also have\n\n$$\nx+y \\leq|x-b|+|y-a| .\n$$\n\nCombining the two inequalities yields $|x+1-b| \\leq|x-b|$ which is equivalent to $x<b$.\n\nConsidering $w(c-b)$, we obtain similarly that $y<a$.\n\nNow $|x-b|=b-x,|x+1-b|=b-x-1$ and $|y-a|=a-y$, therefore we have\n\n$$\n\\begin{aligned}\n(b-x-1)+(a-y) \\leq x+y & \\leq(b-x)+(a-y), \\\\\n\\frac{a+b-1}{2} & \\leq x+y \\leq \\frac{a+b}{2} .\n\\end{aligned}\n$$\n\nHence $x+y=\\left\\lfloor\\frac{a+b}{2}\\right\\rfloor$.\n\nTo prove the opposite direction, assume $0<x<b$ and $x+y=\\left\\lfloor\\frac{a+b}{2}\\right\\rfloor$. Since $a>b$, we also have $0<y<a$. Then\n\n$$\nw(c+a) \\leq|x+1-b|+|y-a|=a+b-1-(x+y) \\leq x+y=w(c)\n$$\n\nand\n\n$$\nw(c-b) \\leq|x-b|+|y+1-a|=a+b-1-(x+y) \\leq x+y=w(c)\n$$\n\ntherefore $c$ is a local champion indeed.\n\nLemma 3. Let $c=a x-b y$ and assume that $x$ and $y$ have the same sign, $|x|<b,|y|<a$ and $|x|+|y|=\\left\\lfloor\\frac{a+b}{2}\\right\\rfloor$. Then $w(c)=x+y$.\n\nProof. By definition $w(c)=\\min \\{|x-k b|+|y-k a|: \\quad k \\in \\mathbb{Z}\\}$. If $k \\leq 0$ then obviously $|x-k b|+|y-k a| \\geq x+y$. If $k \\geq 1$ then\n\n$$\n|x-k b|+|y-k a|=(k b-x)+(k a-y)=k(a+b)-(x+y) \\geq(2 k-1)(x+y) \\geq x+y .\n$$\n\nTherefore $w(c)=x+y$ indeed.\n\nLemmas 1, 2 and 3 together yield that the set of local champions is\n\n$$\nC=\\left\\{\\pm(a x-b y): 0<x<b, x+y=\\left\\lfloor\\frac{a+b}{2}\\right\\rfloor\\right\\} .\n$$\n\nDenote by $C^{+}$and $C^{-}$the two sets generated by the expressions $+(a x-b y)$ and $-(a x-b y)$, respectively. It is easy to see that both sets are arithmetic progressions of length $b-1$, with difference $a+b$.\n\nIf $a$ and $b$ are odd, then $C^{+}=C^{-}$, because $a(-x)-b(-y)=a(b-x)-b(a-y)$ and $x+y=\\frac{a+b}{2}$ is equivalent to $(b-x)+(a-y)=\\frac{a+b}{2}$. In this case there exist $b-1$ local champions.\n\nIf $a$ and $b$ have opposite parities then the answer is different. For any $c_{1} \\in C^{+}$and $c_{2} \\in C^{-}$,\n\n$$\n2 c_{1} \\equiv-2 c_{2} \\equiv 2\\left(a \\frac{a+b-1}{2}-b \\cdot 0\\right) \\equiv-a \\quad(\\bmod a+b)\n$$\n\nand\n\n$$\n2 c_{1}-2 c_{2} \\equiv-2 a \\quad(\\bmod a+b) .\n$$\n\nThe number $a+b$ is odd and relatively prime to $a$, therefore the elements of $C^{+}$and $C^{-}$belong to two different residue classes modulo $a+b$. Hence, the set $C$ is the union of two disjoint arithmetic progressions and the number of all local champions is $2(b-1)$.\n\nSo the number of local champions is $b-1$ if both $a$ and $b$ are odd and $2(b-1)$ otherwise."
  },
  {
    "id": "fimo_2006_number_theory_p7",
    "enunciado": "Prove that, for every positive integer $n$, there exists an integer $m$ such that $2^{m}+m$ is divisible by $n$.",
    "solucao": "We will prove by induction on $d$ that, for every positive integer $N$, there exist positive integers $b_{0}, b_{1}, \\ldots, b_{d-1}$ such that, for each $i=0,1,2, \\ldots, d-1$, we have $b_{i}>N$ and\n\n$$\n2^{b_{i}}+b_{i} \\equiv i \\quad(\\bmod d)\n$$\n\nThis yields the claim for $m=b_{0}$.\n\nThe base case $d=1$ is trivial. Take an $a>1$ and assume that the statement holds for all $d<a$. Note that the remainders of $2^{i}$ modulo a repeat periodically starting with some exponent $M$. Let $k$ be the length of the period; this means that $2^{M+k^{\\prime}} \\equiv 2^{M}(\\bmod a)$ holds only for those $k^{\\prime}$ which are multiples of $k$. Note further that the period cannot contain all the $a$ remainders, since 0 either is missing or is the only number in the period. Thus $k<a$.\n\nLet $d=\\operatorname{gcd}(a, k)$ and let $a^{\\prime}=a / d, k^{\\prime}=k / d$. Since $0<k<a$, we also have $0<d<a$. By the induction hypothesis, there exist positive integers $b_{0}, b_{1}, \\ldots, b_{d-1}$ such that $b_{i}>\\max \\left(2^{M}, N\\right)$ and\n\n$$\n2^{b_{i}}+b_{i} \\equiv i \\quad(\\bmod d) \\quad \\text { for } \\quad i=0,1,2, \\ldots, d-1 .\n$$\n\nFor each $i=0,1, \\ldots, d-1$ consider the sequence\n\n$$\n2^{b_{i}}+b_{i}, \\quad 2^{b_{i}+k}+\\left(b_{i}+k\\right), \\ldots, \\quad 2^{b_{i}+\\left(a^{\\prime}-1\\right) k}+\\left(b_{i}+\\left(a^{\\prime}-1\\right) k\\right) .\n$$\n\nModulo $a$, these numbers are congruent to\n\n$$\n2^{b_{i}}+b_{i}, \\quad 2^{b_{i}}+\\left(b_{i}+k\\right), \\quad \\ldots, \\quad 2^{b_{i}}+\\left(b_{i}+\\left(a^{\\prime}-1\\right) k\\right),\n$$\n\nrespectively. The $d$ sequences contain $a^{\\prime} d=a$ numbers altogether. We shall now prove that no two of these numbers are congruent modulo $a$.\n\nSuppose that\n\n$$\n2^{b_{i}}+\\left(b_{i}+m k\\right) \\equiv 2^{b_{j}}+\\left(b_{j}+n k\\right) \\quad(\\bmod a)\n$$\n\nfor some values of $i, j \\in\\{0,1, \\ldots, d-1\\}$ and $m, n \\in\\left\\{0,1, \\ldots, a^{\\prime}-1\\right\\}$. Since $d$ is a divisor of $a$, we also have\n\n$$\n2^{b_{i}}+\\left(b_{i}+m k\\right) \\equiv 2^{b_{j}}+\\left(b_{j}+n k\\right) \\quad(\\bmod d) .\n$$\n\nBecause $d$ is a divisor of $k$ and in view of $(1)$, we obtain $i \\equiv j(\\bmod d)$. As $i, j \\in\\{0,1, \\ldots, d-1\\}$, this just means that $i=j$. Substituting this into (3) yields $m k \\equiv n k(\\bmod a)$. Therefore $m k^{\\prime} \\equiv n k^{\\prime}\\left(\\bmod a^{\\prime}\\right) ;$ and since $a^{\\prime}$ and $k^{\\prime}$ are coprime, we get $m \\equiv n\\left(\\bmod a^{\\prime}\\right)$. Hence also $m=n$.\n\nIt follows that the $a$ numbers that make up the $d$ sequences (2) satisfy all the requirements; they are certainly all greater than $N$ because we chose each $b_{i}>\\max \\left(2^{M}, N\\right)$. So the statement holds for $a$, completing the induction."
  },
  {
    "id": "fimo_2007_algebra_p1_1",
    "enunciado": "Given a sequence $a_{1}, a_{2}, \\ldots, a_{n}$ of real numbers. For each $i(1 \\leq i \\leq n)$ define\n\n$$\nd_{i}=\\max \\left\\{a_{j}: 1 \\leq j \\leq i\\right\\}-\\min \\left\\{a_{j}: i \\leq j \\leq n\\right\\}\n$$\n\nand let\n\n$$\nd=\\max \\left\\{d_{i}: 1 \\leq i \\leq n\\right\\} .\n$$\n\nProve that for arbitrary real numbers $x_{1} \\leq x_{2} \\leq \\ldots \\leq x_{n}$,\n\n$$\n\\max \\left\\{\\left|x_{i}-a_{i}\\right|: 1 \\leq i \\leq n\\right\\} \\geq \\frac{d}{2}\n$$",
    "solucao": "Let $1 \\leq p \\leq q \\leq r \\leq n$ be indices for which\n\n$$\nd=d_{q}, \\quad a_{p}=\\max \\left\\{a_{j}: 1 \\leq j \\leq q\\right\\}, \\quad a_{r}=\\min \\left\\{a_{j}: q \\leq j \\leq n\\right\\}\n$$\n\nand thus $d=a_{p}-a_{r}$. (These indices are not necessarily unique.)\n\n\\begin{center}\n\\includegraphics[max width=\\textwidth]{2023_02_23_0a73d5130c90f55fd4ffg-08}\n\\end{center}\n\nFor arbitrary real numbers $x_{1} \\leq x_{2} \\leq \\ldots \\leq x_{n}$, consider just the two quantities $\\left|x_{p}-a_{p}\\right|$ and $\\left|x_{r}-a_{r}\\right|$. Since\n\n$$\n\\left(a_{p}-x_{p}\\right)+\\left(x_{r}-a_{r}\\right)=\\left(a_{p}-a_{r}\\right)+\\left(x_{r}-x_{p}\\right) \\geq a_{p}-a_{r}=d,\n$$\n\nwe have either $a_{p}-x_{p} \\geq \\frac{d}{2}$ or $x_{r}-a_{r} \\geq \\frac{d}{2}$. Hence,\n\n$$\n\\max \\left\\{\\left|x_{i}-a_{i}\\right|: 1 \\leq i \\leq n\\right\\} \\geq \\max \\left\\{\\left|x_{p}-a_{p}\\right|,\\left|x_{r}-a_{r}\\right|\\right\\} \\geq \\max \\left\\{a_{p}-x_{p}, x_{r}-a_{r}\\right\\} \\geq \\frac{d}{2}\n$$"
  },
  {
    "id": "fimo_2007_algebra_p1_2",
    "enunciado": "Given a sequence $a_{1}, a_{2}, \\ldots, a_{n}$ of real numbers. For each $i(1 \\leq i \\leq n)$ define\n\n$$\nd_{i}=\\max \\left\\{a_{j}: 1 \\leq j \\leq i\\right\\}-\\min \\left\\{a_{j}: i \\leq j \\leq n\\right\\}\n$$\n\nand let\n\n$$\nd=\\max \\left\\{d_{i}: 1 \\leq i \\leq n\\right\\} .\n$$\n\n$$\n\\max \\left\\{\\left|x_{i}-a_{i}\\right|: 1 \\leq i \\leq n\\right\\} \\geq \\frac{d}{2}\n$$\n\nShow that there exists a sequence $x_{1} \\leq x_{2} \\leq \\ldots \\leq x_{n}$ of real numbers such that we have equality in (1).",
    "solucao": "Define the sequence $\\left(x_{k}\\right)$ as\n\n$$\nx_{1}=a_{1}-\\frac{d}{2}, \\quad x_{k}=\\max \\left\\{x_{k-1}, a_{k}-\\frac{d}{2}\\right\\} \\quad \\text { for } 2 \\leq k \\leq n .\n$$\n\nWe show that we have equality in (1) for this sequence.\n\nBy the definition, sequence $\\left(x_{k}\\right)$ is non-decreasing and $x_{k}-a_{k} \\geq-\\frac{d}{2}$ for all $1 \\leq k \\leq n$. Next we prove that\n\n$$\nx_{k}-a_{k} \\leq \\frac{d}{2} \\quad \\text { for all } 1 \\leq k \\leq n .\n$$\n\nConsider an arbitrary index $1 \\leq k \\leq n$. Let $\\ell \\leq k$ be the smallest index such that $x_{k}=x_{\\ell}$. We have either $\\ell=1$, or $\\ell \\geq 2$ and $x_{\\ell}>x_{\\ell-1}$. In both cases,\n\n$$\nx_{k}=x_{\\ell}=a_{\\ell}-\\frac{d}{2} .\n$$\n\nSince\n\n$$\na_{\\ell}-a_{k} \\leq \\max \\left\\{a_{j}: 1 \\leq j \\leq k\\right\\}-\\min \\left\\{a_{j}: k \\leq j \\leq n\\right\\}=d_{k} \\leq d\n$$\n\nequality (3) implies\n\n$$\nx_{k}-a_{k}=a_{\\ell}-a_{k}-\\frac{d}{2} \\leq d-\\frac{d}{2}=\\frac{d}{2} .\n$$\n\nWe obtained that $-\\frac{d}{2} \\leq x_{k}-a_{k} \\leq \\frac{d}{2}$ for all $1 \\leq k \\leq n$, so\n\n$$\n\\max \\left\\{\\left|x_{i}-a_{i}\\right|: 1 \\leq i \\leq n\\right\\} \\leq \\frac{d}{2}\n$$\n\nWe have equality because $\\left|x_{1}-a_{1}\\right|=\\frac{d}{2}$"
  },
  {
    "id": "fimo_2007_algebra_p2",
    "enunciado": "Consider those functions $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ which satisfy the condition\n\n$$\nf(m+n) \\geq f(m)+f(f(n))-1\n$$\n\nfor all $m, n \\in \\mathbb{N}$. Find all possible values of $f(2007)$.\n\n$(\\mathbb{N}$ denotes the set of all positive integers.)\n\nThe final answers are 1, 2, .., 2008.",
    "solucao": "Suppose that a function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ satisfies (1). For arbitrary positive integers $m>n$, by (1) we have\n\n$$\nf(m)=f(n+(m-n)) \\geq f(n)+f(f(m-n))-1 \\geq f(n),\n$$\n\nso $f$ is nondecreasing.\n\nFunction $f \\equiv 1$ is an obvious solution. To find other solutions, assume that $f \\not \\equiv 1$ and take the smallest $a \\in \\mathbb{N}$ such that $f(a)>1$. Then $f(b) \\geq f(a)>1$ for all integer $b \\geq a$.\n\nSuppose that $f(n)>n$ for some $n \\in \\mathbb{N}$. Then we have\n\n$$\nf(f(n))=f((f(n)-n)+n) \\geq f(f(n)-n)+f(f(n))-1\n$$\n\nso $f(f(n)-n) \\leq 1$ and hence $f(n)-n<a$. Then there exists a maximal value of the expression $f(n)-n$; denote this value by $c$, and let $f(k)-k=c \\geq 1$. Applying the monotonicity together with (1), we get\n\n$$\n\\begin{aligned}\n2 k+c \\geq f(2 k)=f(k+k) & \\geq f(k)+f(f(k))-1 \\\\\n& \\geq f(k)+f(k)-1=2(k+c)-1=2 k+(2 c-1),\n\\end{aligned}\n$$\n\nhence $c \\leq 1$ and $f(n) \\leq n+1$ for all $n \\in \\mathbb{N}$. In particular, $f(2007) \\leq 2008$.\n\nNow we present a family of examples showing that all values from 1 to 2008 can be realized. Let\n\n$$\nf_{j}(n)=\\max \\{1, n+j-2007\\} \\quad \\text { for } j=1,2, \\ldots, 2007 ; \\quad f_{2008}(n)= \\begin{cases}n, & 2007 \\backslash n \\\\ n+1, & 2007 \\mid n .\\end{cases}\n$$\n\nWe show that these functions satisfy the condition (1) and clearly $f_{j}(2007)=j$.\n\nTo check the condition (1) for the function $f_{j}(j \\leq 2007)$, note first that $f_{j}$ is nondecreasing and $f_{j}(n) \\leq n$, hence $f_{j}\\left(f_{j}(n)\\right) \\leq f_{j}(n) \\leq n$ for all $n \\in \\mathbb{N}$. Now, if $f_{j}(m)=1$, then the inequality (1) is clear since $f_{j}(m+n) \\geq f_{j}(n) \\geq f_{j}\\left(f_{j}(n)\\right)=f_{j}(m)+f_{j}\\left(f_{j}(n)\\right)-1$. Otherwise,\n\n$$\nf_{j}(m)+f_{j}\\left(f_{j}(n)\\right)-1 \\leq(m+j-2007)+n=(m+n)+j-2007=f_{j}(m+n) .\n$$\n\nIn the case $j=2008$, clearly $n+1 \\geq f_{2008}(n) \\geq n$ for all $n \\in \\mathbb{N}$; moreover, $n+1 \\geq$ $f_{2008}\\left(f_{2008}(n)\\right)$ as well. Actually, the latter is trivial if $f_{2008}(n)=n$; otherwise, $f_{2008}(n)=n+1$, which implies $2007 \\nmid n+1$ and hence $n+1=f_{2008}(n+1)=f_{2008}\\left(f_{2008}(n)\\right)$.\n\nSo, if $2007 \\mid m+n$, then\n\n$$\nf_{2008}(m+n)=m+n+1=(m+1)+(n+1)-1 \\geq f_{2008}(m)+f_{2008}\\left(f_{2008}(n)\\right)-1 .\n$$\n\nOtherwise, $2007 \\nmid m+n$, hence $2007 \\Varangle m$ or $2007 \\nless n$. In the former case we have $f_{2008}(m)=m$, while in the latter one $f_{2008}\\left(f_{2008}(n)\\right)=f_{2008}(n)=n$, providing\n\n$$\nf_{2008}(m)+f_{2008}\\left(f_{2008}(n)\\right)-1 \\leq(m+n+1)-1=f_{2008}(m+n) .\n$$"
  },
  {
    "id": "fimo_2007_algebra_p3",
    "enunciado": "Let $n$ be a positive integer, and let $x$ and $y$ be positive real numbers such that $x^{n}+y^{n}=1$. Prove that\n\n$$\n\\left(\\sum_{k=1}^{n} \\frac{1+x^{2 k}}{1+x^{4 k}}\\right)\\left(\\sum_{k=1}^{n} \\frac{1+y^{2 k}}{1+y^{4 k}}\\right)<\\frac{1}{(1-x)(1-y)} .\n$$",
    "solucao": "For each real $t \\in(0,1)$,\n\n$$\n\\frac{1+t^{2}}{1+t^{4}}=\\frac{1}{t}-\\frac{(1-t)\\left(1-t^{3}\\right)}{t\\left(1+t^{4}\\right)}<\\frac{1}{t} .\n$$\n\nSubstituting $t=x^{k}$ and $t=y^{k}$\n\n$$\n0<\\sum_{k=1}^{n} \\frac{1+x^{2 k}}{1+x^{4 k}}<\\sum_{k=1}^{n} \\frac{1}{x^{k}}=\\frac{1-x^{n}}{x^{n}(1-x)} \\quad \\text { and } \\quad 0<\\sum_{k=1}^{n} \\frac{1+y^{2 k}}{1+y^{4 k}}<\\sum_{k=1}^{n} \\frac{1}{y^{k}}=\\frac{1-y^{n}}{y^{n}(1-y)} .\n$$\n\nSince $1-y^{n}=x^{n}$ and $1-x^{n}=y^{n}$\n\n$$\n\\frac{1-x^{n}}{x^{n}(1-x)}=\\frac{y^{n}}{x^{n}(1-x)}, \\quad \\frac{1-y^{n}}{y^{n}(1-y)}=\\frac{x^{n}}{y^{n}(1-y)}\n$$\n\nand therefore\n\n$$\n\\left(\\sum_{k=1}^{n} \\frac{1+x^{2 k}}{1+x^{4 k}}\\right)\\left(\\sum_{k=1}^{n} \\frac{1+y^{2 k}}{1+y^{4 k}}\\right)<\\frac{y^{n}}{x^{n}(1-x)} \\cdot \\frac{x^{n}}{y^{n}(1-y)}=\\frac{1}{(1-x)(1-y)} .\n$$"
  },
  {
    "id": "fimo_2007_algebra_p4",
    "enunciado": "Find all functions $f: \\mathbb{R}^{+} \\rightarrow \\mathbb{R}^{+}$such that\n\n$$\nf(x+f(y))=f(x+y)+f(y)\n$$\n\nfor all $x, y \\in \\mathbb{R}^{+}$. (Symbol $\\mathbb{R}^{+}$denotes the set of all positive real numbers.)\n\nThe final answer is $f(x)=2 x$.",
    "solucao": "First we show that $f(y)>y$ for all $y \\in \\mathbb{R}^{+}$. Functional equation (1) yields $f(x+f(y))>f(x+y)$ and hence $f(y) \\neq y$ immediately. If $f(y)<y$ for some $y$, then setting $x=y-f(y)$ we get\n\n$$\nf(y)=f((y-f(y))+f(y))=f((y-f(y))+y)+f(y)>f(y)\n$$\n\ncontradiction. Therefore $f(y)>y$ for all $y \\in \\mathbb{R}^{+}$.\n\nFor $x \\in \\mathbb{R}^{+}$define $g(x)=f(x)-x$; then $f(x)=g(x)+x$ and, as we have seen, $g(x)>0$. Transforming (1) for function $g(x)$ and setting $t=x+y$,\n\n$$\n\\begin{aligned}\nf(t+g(y)) & =f(t)+f(y) \\\\\ng(t+g(y))+t+g(y) & =(g(t)+t)+(g(y)+y)\n\\end{aligned}\n$$\n\nand therefore\n\n$$\ng(t+g(y))=g(t)+y \\quad \\text { for all } t>y>0\n$$\n\nNext we prove that function $g(x)$ is injective. Suppose that $g\\left(y_{1}\\right)=g\\left(y_{2}\\right)$ for some numbers $y_{1}, y_{2} \\in \\mathbb{R}^{+}$. Then by $(2)$\n\n$$\ng(t)+y_{1}=g\\left(t+g\\left(y_{1}\\right)\\right)=g\\left(t+g\\left(y_{2}\\right)\\right)=g(t)+y_{2}\n$$\n\nfor all $t>\\max \\left\\{y_{1}, y_{2}\\right\\}$. Hence, $g\\left(y_{1}\\right)=g\\left(y_{2}\\right)$ is possible only if $y_{1}=y_{2}$.\n\nNow let $u, v$ be arbitrary positive numbers and $t>u+v$. Applying (2) three times,\n\n$$\ng(t+g(u)+g(v))=g(t+g(u))+v=g(t)+u+v=g(t+g(u+v)) .\n$$\n\nBy the injective property we conclude that $t+g(u)+g(v)=t+g(u+v)$, hence\n\n$$\ng(u)+g(v)=g(u+v) .\n$$\n\nSince function $g(v)$ is positive, equation (3) also shows that $g$ is an increasing function.\n\nFinally we prove that $g(x)=x$. Combining $(2)$ and (3), we obtain\n\n$$\ng(t)+y=g(t+g(y))=g(t)+g(g(y))\n$$\n\nand hence\n\n$$\ng(g(y))=y .\n$$\n\nSuppose that there exists an $x \\in \\mathbb{R}^{+}$such that $g(x) \\neq x$. By the monotonicity of $g$, if $x>g(x)$ then $g(x)>g(g(x))=x$. Similarly, if $x<g(x)$ then $g(x)<g(g(x))=x$. Both cases lead to contradiction, so there exists no such $x$.\n\nWe have proved that $g(x)=x$ and therefore $f(x)=g(x)+x=2 x$ for all $x \\in \\mathbb{R}^{+}$. This function indeed satisfies the functional equation (1)."
  },
  {
    "id": "fimo_2007_algebra_p5",
    "enunciado": "Let $c>2$, and let $a(1), a(2), \\ldots$ be a sequence of nonnegative real numbers such that\n\n$$\na(m+n) \\leq 2 a(m)+2 a(n) \\text { for all } m, n \\geq 1,\n$$\n\nand\n\n$$\na\\left(2^{k}\\right) \\leq \\frac{1}{(k+1)^{c}} \\quad \\text { for all } k \\geq 0 .\n$$\n\nProve that the sequence $a(n)$ is bounded.",
    "solucao": "For convenience, define $a(0)=0$; then condition (1) persists for all pairs of nonnegative indices.\n\nLemma 1. For arbitrary nonnegative indices $n_{1}, \\ldots, n_{k}$, we have\n\n$$\na\\left(\\sum_{i=1}^{k} n_{i}\\right) \\leq \\sum_{i=1}^{k} 2^{i} a\\left(n_{i}\\right)\n$$\n\nand\n\n$$\na\\left(\\sum_{i=1}^{k} n_{i}\\right) \\leq 2 k \\sum_{i=1}^{k} a\\left(n_{i}\\right) .\n$$\n\nProof. Inequality (3) is proved by induction on $k$. The base case $k=1$ is trivial, while the induction step is provided by\n\n$$\na\\left(\\sum_{i=1}^{k+1} n_{i}\\right)=a\\left(n_{1}+\\sum_{i=2}^{k+1} n_{i}\\right) \\leq 2 a\\left(n_{1}\\right)+2 a\\left(\\sum_{i=1}^{k} n_{i+1}\\right) \\leq 2 a\\left(n_{1}\\right)+2 \\sum_{i=1}^{k} 2^{i} a\\left(n_{i+1}\\right)=\\sum_{i=1}^{k+1} 2^{i} a\\left(n_{i}\\right) .\n$$\n\nTo establish (4), first the inequality\n\n$$\na\\left(\\sum_{i=1}^{2^{d}} n_{i}\\right) \\leq 2^{d} \\sum_{i=1}^{2^{d}} a\\left(n_{i}\\right)\n$$\n\ncan be proved by an obvious induction on $d$. Then, turning to (4), we find an integer $d$ such that $2^{d-1}<k \\leq 2^{d}$ to obtain\n\n$$\na\\left(\\sum_{i=1}^{k} n_{i}\\right)=a\\left(\\sum_{i=1}^{k} n_{i}+\\sum_{i=k+1}^{2^{d}} 0\\right) \\leq 2^{d}\\left(\\sum_{i=1}^{k} a\\left(n_{i}\\right)+\\sum_{i=k+1}^{2^{d}} a(0)\\right)=2^{d} \\sum_{i=1}^{k} a\\left(n_{i}\\right) \\leq 2 k \\sum_{i=1}^{k} a\\left(n_{i}\\right) .\n$$\n\nFix an increasing unbounded sequence $0=M_{0}<M_{1}<M_{2}<\\ldots$ of real numbers; the exact values will be defined later. Let $n$ be an arbitrary positive integer and write\n\n$$\nn=\\sum_{i=0}^{d} \\varepsilon_{i} \\cdot 2^{i}, \\quad \\text { where } \\varepsilon_{i} \\in\\{0,1\\} .\n$$\n\nSet $\\varepsilon_{i}=0$ for $i>d$, and take some positive integer $f$ such that $M_{f}>d$. Applying (3), we get\n\n$$\na(n)=a\\left(\\sum_{k=1}^{f} \\sum_{M_{k-1} \\leq i<M_{k}} \\varepsilon_{i} \\cdot 2^{i}\\right) \\leq \\sum_{k=1}^{f} 2^{k} a\\left(\\sum_{M_{k-1} \\leq i<M_{k}} \\varepsilon_{i} \\cdot 2^{i}\\right) .\n$$\n\nNote that there are less than $M_{k}-M_{k-1}+1$ integers in interval $\\left[M_{k-1}, M_{k}\\right)$; hence, using (4) we have\n\n$$\n\\begin{aligned}\na(n) & \\leq \\sum_{k=1}^{f} 2^{k} \\cdot 2\\left(M_{k}-M_{k-1}+1\\right) \\sum_{M_{k-1} \\leq i<M_{k}} \\varepsilon_{i} \\cdot a\\left(2^{i}\\right) \\\\\n& \\leq \\sum_{k=1}^{f} 2^{k} \\cdot 2\\left(M_{k}-M_{k-1}+1\\right)^{2} \\max _{M_{k-1} \\leq i<M_{k}} a\\left(2^{i}\\right) \\\\\n& \\leq \\sum_{k=1}^{f} 2^{k+1}\\left(M_{k}+1\\right)^{2} \\cdot \\frac{1}{\\left(M_{k-1}+1\\right)^{c}}=\\sum_{k=1}^{f}\\left(\\frac{M_{k}+1}{M_{k-1}+1}\\right)^{2} \\frac{2^{k+1}}{\\left(M_{k-1}+1\\right)^{c-2}} .\n\\end{aligned}\n$$\n\nSetting $M_{k}=4^{k /(c-2)}-1$, we obtain\n\n$$\na(n) \\leq \\sum_{k=1}^{f} 4^{2 /(c-2)} \\frac{2^{k+1}}{\\left(4^{(k-1) /(c-2)}\\right)^{c-2}}=8 \\cdot 4^{2 /(c-2)} \\sum_{k=1}^{f}\\left(\\frac{1}{2}\\right)^{k}<8 \\cdot 4^{2 /(c-2)},\n$$\n\nand the sequence $a(n)$ is bounded."
  },
  {
    "id": "fimo_2007_algebra_p6",
    "enunciado": "Let $a_{1}, a_{2}, \\ldots, a_{100}$ be nonnegative real numbers such that $a_{1}^{2}+a_{2}^{2}+\\ldots+a_{100}^{2}=1$. Prove that\n\n$$\na_{1}^{2} a_{2}+a_{2}^{2} a_{3}+\\ldots+a_{100}^{2} a_{1}<\\frac{12}{25} .\n$$",
    "solucao": "Let $S=\\sum_{k=1}^{100} a_{k}^{2} a_{k+1}$. (As usual, we consider the indices modulo 100, e.g. we set $a_{101}=a_{1}$ and $\\left.a_{102}=a_{2}.\\right)$\n\nApplying the Cauchy-Schwarz inequality to sequences $\\left(a_{k+1}\\right)$ and $\\left(a_{k}^{2}+2 a_{k+1} a_{k+2}\\right)$, and then the AM-GM inequality to numbers $a_{k+1}^{2}$ and $a_{k+2}^{2}$,\n\n$$\n\\begin{aligned}\n(3 S)^{2} & =\\left(\\sum_{k=1}^{100} a_{k+1}\\left(a_{k}^{2}+2 a_{k+1} a_{k+2}\\right)\\right)^{2} \\leq\\left(\\sum_{k=1}^{100} a_{k+1}^{2}\\right)\\left(\\sum_{k=1}^{100}\\left(a_{k}^{2}+2 a_{k+1} a_{k+2}\\right)^{2}\\right) \\\\\n& =1 \\cdot \\sum_{k=1}^{100}\\left(a_{k}^{2}+2 a_{k+1} a_{k+2}\\right)^{2}=\\sum_{k=1}^{100}\\left(a_{k}^{4}+4 a_{k}^{2} a_{k+1} a_{k+2}+4 a_{k+1}^{2} a_{k+2}^{2}\\right) \\\\\n& \\leq \\sum_{k=1}^{100}\\left(a_{k}^{4}+2 a_{k}^{2}\\left(a_{k+1}^{2}+a_{k+2}^{2}\\right)+4 a_{k+1}^{2} a_{k+2}^{2}\\right)=\\sum_{k=1}^{100}\\left(a_{k}^{4}+6 a_{k}^{2} a_{k+1}^{2}+2 a_{k}^{2} a_{k+2}^{2}\\right)\n\\end{aligned}\n$$\n\nApplying the trivial estimates\n\n$$\n\\sum_{k=1}^{100}\\left(a_{k}^{4}+2 a_{k}^{2} a_{k+1}^{2}+2 a_{k}^{2} a_{k+2}^{2}\\right) \\leq\\left(\\sum_{k=1}^{100} a_{k}^{2}\\right)^{2} \\quad \\text { and } \\quad \\sum_{k=1}^{100} a_{k}^{2} a_{k+1}^{2} \\leq\\left(\\sum_{i=1}^{50} a_{2 i-1}^{2}\\right)\\left(\\sum_{j=1}^{50} a_{2 j}^{2}\\right)\n$$\n\nwe obtain that\n\n$$\n(3 S)^{2} \\leq\\left(\\sum_{k=1}^{100} a_{k}^{2}\\right)^{2}+4\\left(\\sum_{i=1}^{50} a_{2 i-1}^{2}\\right)\\left(\\sum_{j=1}^{50} a_{2 j}^{2}\\right) \\leq 1+\\left(\\sum_{i=1}^{50} a_{2 i-1}^{2}+\\sum_{j=1}^{50} a_{2 j}^{2}\\right)^{2}=2\n$$\n\nhence\n\n$$\nS \\leq \\frac{\\sqrt{2}}{3} \\approx 0.4714<\\frac{12}{25}=0.48 .\n$$"
  },
  {
    "id": "fimo_2007_algebra_p7",
    "enunciado": "Let $n>1$ be an integer. In the space, consider the set\n\n$$\nS=\\{(x, y, z) \\mid x, y, z \\in\\{0,1, \\ldots, n\\}, x+y+z>0\\}\n$$\n\nFind the smallest number of planes that jointly contain all $(n+1)^{3}-1$ points of $S$ but none of them passes through the origin.\n\nThe final answer is 3n planes.",
    "solucao": "It is easy to find $3 n$ such planes. For example, planes $x=i, y=i$ or $z=i$ $(i=1,2, \\ldots, n)$ cover the set $S$ but none of them contains the origin. Another such collection consists of all planes $x+y+z=k$ for $k=1,2, \\ldots, 3 n$.\n\nWe show that $3 n$ is the smallest possible number.\n\nLemma 1. Consider a nonzero polynomial $P\\left(x_{1}, \\ldots, x_{k}\\right)$ in $k$ variables. Suppose that $P$ vanishes at all points $\\left(x_{1}, \\ldots, x_{k}\\right)$ such that $x_{1}, \\ldots, x_{k} \\in\\{0,1, \\ldots, n\\}$ and $x_{1}+\\cdots+x_{k}>0$, while $P(0,0, \\ldots, 0) \\neq 0$. Then $\\operatorname{deg} P \\geq k n$.\n\nProof. We use induction on $k$. The base case $k=0$ is clear since $P \\neq 0$. Denote for clarity $y=x_{k}$.\n\nLet $R\\left(x_{1}, \\ldots, x_{k-1}, y\\right)$ be the residue of $P$ modulo $Q(y)=y(y-1) \\ldots(y-n)$. Polynomial $Q(y)$ vanishes at each $y=0,1, \\ldots, n$, hence $P\\left(x_{1}, \\ldots, x_{k-1}, y\\right)=R\\left(x_{1}, \\ldots, x_{k-1}, y\\right)$ for all $x_{1}, \\ldots, x_{k-1}, y \\in\\{0,1, \\ldots, n\\}$. Therefore, $R$ also satisfies the condition of the Lemma; moreover, $\\operatorname{deg}_{y} R \\leq n$. Clearly, $\\operatorname{deg} R \\leq \\operatorname{deg} P$, so it suffices to prove that $\\operatorname{deg} R \\geq n k$.\n\nNow, expand polynomial $R$ in the powers of $y$ :\n\n$$\nR\\left(x_{1}, \\ldots, x_{k-1}, y\\right)=R_{n}\\left(x_{1}, \\ldots, x_{k-1}\\right) y^{n}+R_{n-1}\\left(x_{1}, \\ldots, x_{k-1}\\right) y^{n-1}+\\cdots+R_{0}\\left(x_{1}, \\ldots, x_{k-1}\\right) .\n$$\n\nWe show that polynomial $R_{n}\\left(x_{1}, \\ldots, x_{k-1}\\right)$ satisfies the condition of the induction hypothesis.\n\nConsider the polynomial $T(y)=R(0, \\ldots, 0, y)$ of degree $\\leq n$. This polynomial has $n$ roots $y=1, \\ldots, n$; on the other hand, $T(y) \\not \\equiv 0$ since $T(0) \\neq 0$. Hence $\\operatorname{deg} T=n$, and its leading coefficient is $R_{n}(0,0, \\ldots, 0) \\neq 0$. In particular, in the case $k=1$ we obtain that coefficient $R_{n}$ is nonzero.\n\nSimilarly, take any numbers $a_{1}, \\ldots, a_{k-1} \\in\\{0,1, \\ldots, n\\}$ with $a_{1}+\\cdots+a_{k-1}>0$. Substituting $x_{i}=a_{i}$ into $R\\left(x_{1}, \\ldots, x_{k-1}, y\\right)$, we get a polynomial in $y$ which vanishes at all points $y=0, \\ldots, n$ and has degree $\\leq n$. Therefore, this polynomial is null, hence $R_{i}\\left(a_{1}, \\ldots, a_{k-1}\\right)=0$ for all $i=0,1, \\ldots, n$. In particular, $R_{n}\\left(a_{1}, \\ldots, a_{k-1}\\right)=0$.\n\nThus, the polynomial $R_{n}\\left(x_{1}, \\ldots, x_{k-1}\\right)$ satisfies the condition of the induction hypothesis. So, we have $\\operatorname{deg} R_{n} \\geq(k-1) n$ and $\\operatorname{deg} P \\geq \\operatorname{deg} R \\geq \\operatorname{deg} R_{n}+n \\geq k n$.\n\nNow we can finish the solution. Suppose that there are $N$ planes covering all the points of $S$ but not containing the origin. Let their equations be $a_{i} x+b_{i} y+c_{i} z+d_{i}=0$. Consider the polynomial\n\n$$\nP(x, y, z)=\\prod_{i=1}^{N}\\left(a_{i} x+b_{i} y+c_{i} z+d_{i}\\right) .\n$$\n\nIt has total degree $N$. This polynomial has the property that $P\\left(x_{0}, y_{0}, z_{0}\\right)=0$ for any $\\left(x_{0}, y_{0}, z_{0}\\right) \\in S$, while $P(0,0,0) \\neq 0$. Hence by Lemma 1 we get $N=\\operatorname{deg} P \\geq 3 n$, as desired."
  },
  {
    "id": "fimo_2007_number_theory_p1",
    "enunciado": "Find all pairs $(k, n)$ of positive integers for which $7^{k}-3^{n}$ divides $k^{4}+n^{2}$.\n\nThe final answer is $(2,4)$.",
    "solucao": " Suppose that a pair $(k, n)$ satisfies the condition of the problem. Since $7^{k}-3^{n}$ is even, $k^{4}+n^{2}$ is also even, hence $k$ and $n$ have the same parity. If $k$ and $n$ are odd, then $k^{4}+n^{2} \\equiv 1+1=2(\\bmod 4)$, while $7^{k}-3^{n} \\equiv 7-3 \\equiv 0(\\bmod 4)$, so $k^{4}+n^{2}$ cannot be divisible by $7^{k}-3^{n}$. Hence, both $k$ and $n$ must be even.\n\nWrite $k=2 a, n=2 b$. Then $7^{k}-3^{n}=7^{2 a}-3^{2 b}=\\frac{7^{a}-3^{b}}{2} \\cdot 2\\left(7^{a}+3^{b}\\right)$, and both factors are integers. So $2\\left(7^{a}+3^{b}\\right) \\mid 7^{k}-3^{n}$ and $7^{k}-3^{n} \\mid k^{4}+n^{2}=2\\left(8 a^{4}+2 b^{2}\\right)$, hence\n\n$$\n7^{a}+3^{b} \\leq 8 a^{4}+2 b^{2} .\n$$\n\nWe prove by induction that $8 a^{4}<7^{a}$ for $a \\geq 4,2 b^{2}<3^{b}$ for $b \\geq 1$ and $2 b^{2}+9 \\leq 3^{b}$ for $b \\geq 3$. In the initial cases $a=4, b=1, b=2$ and $b=3$ we have $8 \\cdot 4^{4}=2048<7^{4}=2401,2<3$, $2 \\cdot 2^{2}=8<3^{2}=9$ and $2 \\cdot 3^{2}+9=3^{3}=27$, respectively.\n\nIf $8 a^{4}<7^{a}(a \\geq 4)$ and $2 b^{2}+9 \\leq 3^{b}(b \\geq 3)$, then\n\n$$\n\\begin{gathered}\n8(a+1)^{4}=8 a^{4}\\left(\\frac{a+1}{a}\\right)^{4}<7^{a}\\left(\\frac{5}{4}\\right)^{4}=7^{a} \\frac{625}{256}<7^{a+1} \\quad \\text { and } \\\\\n2(b+1)^{2}+9<\\left(2 b^{2}+9\\right)\\left(\\frac{b+1}{b}\\right)^{2} \\leq 3^{b}\\left(\\frac{4}{3}\\right)^{2}=3^{b} \\frac{b}{9}<3^{b+1},\n\\end{gathered}\n$$\n\nas desired.\n\nFor $a \\geq 4$ we obtain $7^{a}+3^{b}>8 a^{4}+2 b^{2}$ and inequality (1) cannot hold. Hence $a \\leq 3$, and three cases are possible.\n\nCase 1: $a=1$. Then $k=2$ and $8+2 b^{2} \\geq 7+3^{b}$, thus $2 b^{2}+1 \\geq 3^{b}$. This is possible only if $b \\leq 2$. If $b=1$ then $n=2$ and $\\frac{k^{4}+n^{2}}{7^{k}-3^{n}}=\\frac{2^{4}+2^{2}}{7^{2}-3^{2}}=\\frac{1}{2}$, which is not an integer. If $b=2$ then $n=4$ and $\\frac{k^{4}+n^{2}}{7^{k}-3^{n}}=\\frac{2^{4}+4^{2}}{7^{2}-3^{4}}=-1$, so $(k, n)=(2,4)$ is a solution.\n\nCase 2: $a=2$. Then $k=4$ and $k^{4}+n^{2}=256+4 b^{2} \\geq\\left|7^{4}-3^{n}\\right|=\\left|49-3^{b}\\right| \\cdot\\left(49+3^{b}\\right)$. The smallest value of the first factor is 22 , attained at $b=3$, so $128+2 b^{2} \\geq 11\\left(49+3^{b}\\right)$, which is impossible since $3^{b}>2 b^{2}$.\n\nCase 3: $a=3$. Then $k=6$ and $k^{4}+n^{2}=1296+4 b^{2} \\geq\\left|7^{6}-3^{n}\\right|=\\left|343-3^{b}\\right| \\cdot\\left(343+3^{b}\\right)$. Analogously, $\\left|343-3^{b}\\right| \\geq 100$ and we have $324+b^{2} \\geq 25\\left(343+3^{b}\\right)$, which is impossible again.\n\nWe find that there exists a unique solution $(k, n)=(2,4)$."
  },
  {
    "id": "fimo_2007_number_theory_p2",
    "enunciado": "Let $b, n>1$ be integers. Suppose that for each $k>1$ there exists an integer $a_{k}$ such that $b-a_{k}^{n}$ is divisible by $k$. Prove that $b=A^{n}$ for some integer $A$.",
    "solucao": "Let the prime factorization of $b$ be $b=p_{1}^{\\alpha_{1}} \\ldots p_{s}^{\\alpha_{s}}$, where $p_{1}, \\ldots, p_{s}$ are distinct primes. Our goal is to show that all exponents $\\alpha_{i}$ are divisible by $n$, then we can set $A=p_{1}^{\\alpha_{1} / n} \\ldots p_{s}^{\\alpha_{s} / n}$.\n\nApply the condition for $k=b^{2}$. The number $b-a_{k}^{n}$ is divisible by $b^{2}$ and hence, for each $1 \\leq i \\leq s$, it is divisible by $p_{i}^{2 \\alpha_{i}}>p_{i}^{\\alpha_{i}}$ as well. Therefore\n\n$$\na_{k}^{n} \\equiv b \\equiv 0 \\quad\\left(\\bmod p_{i}^{\\alpha_{i}}\\right)\n$$\n\nand\n\n$$\na_{k}^{n} \\equiv b \\not \\equiv 0 \\quad\\left(\\bmod p_{i}^{\\alpha_{i}+1}\\right),\n$$\n\nwhich implies that the largest power of $p_{i}$ dividing $a_{k}^{n}$ is $p_{i}^{\\alpha_{i}}$. Since $a_{k}^{n}$ is a complete $n$th power, this implies that $\\alpha_{i}$ is divisible by $n$."
  },
  {
    "id": "fimo_2007_number_theory_p3",
    "enunciado": "Let $X$ be a set of 10000 integers, none of them is divisible by 47 . Prove that there exists a 2007-element subset $Y$ of $X$ such that $a-b+c-d+e$ is not divisible by 47 for any $a, b, c, d, e \\in Y$.",
    "solucao": "Call a set $M$ of integers good if $47 \\nmid a-b+c-d+e$ for any $a, b, c, d, e \\in M$.\n\nConsider the set $J=\\{-9,-7,-5,-3,-1,1,3,5,7,9\\}$. We claim that $J$ is good. Actually, for any $a, b, c, d, e \\in J$ the number $a-b+c-d+e$ is odd and\n\n$$\n-45=(-9)-9+(-9)-9+(-9) \\leq a-b+c-d+e \\leq 9-(-9)+9-(-9)+9=45\n$$\n\nBut there is no odd number divisible by 47 between $-45$ and 45 .\n\nFor any $k=1, \\ldots, 46$ consider the set\n\n$$\nA_{k}=\\{x \\in X \\mid \\exists j \\in J: \\quad k x \\equiv j(\\bmod 47)\\}\n$$\n\nIf $A_{k}$ is not good, then $47 \\mid a-b+c-d+e$ for some $a, b, c, d, e \\in A_{k}$, hence $47 \\mid k a-k b+$ $k c-k d+k e$. But set $J$ contains numbers with the same residues modulo 47 , so $J$ also is not good. This is a contradiction; therefore each $A_{k}$ is a good subset of $X$.\n\nThen it suffices to prove that there exists a number $k$ such that $\\left|A_{k}\\right| \\geq 2007$. Note that each $x \\in X$ is contained in exactly 10 sets $A_{k}$. Then\n\n$$\n\\sum_{k=1}^{46}\\left|A_{k}\\right|=10|X|=100000\n$$\n\nhence for some value of $k$ we have\n\n$$\n\\left|A_{k}\\right| \\geq \\frac{100000}{46}>2173>2007 .\n$$\n\nThis completes the proof."
  },
  {
    "id": "fimo_2007_number_theory_p4",
    "enunciado": "For every integer $k \\geq 2$, prove that $2^{3 k}$ divides the number\n\n$$\n\\left(\\begin{array}{c}\n2^{k+1} \\\\\n2^{k}\n\\end{array}\\right)-\\left(\\begin{array}{c}\n2^{k} \\\\\n2^{k-1}\n\\end{array}\\right)\n$$\n\nbut $2^{3 k+1}$ does not.",
    "solucao": "We use the notation $(2 n-1) ! !=1 \\cdot 3 \\cdots(2 n-1)$ and $(2 n) ! !=2 \\cdot 4 \\cdots(2 n)=2^{n} n$ ! for any positive integer $n$. Observe that $(2 n) !=(2 n) ! !(2 n-1) ! !=2^{n} n !(2 n-1) ! !$.\n\nFor any positive integer $n$ we have\n\n$$\n\\begin{aligned}\n\\left(\\begin{array}{c}\n4 n \\\\\n2 n\n\\end{array}\\right) & =\\frac{(4 n) !}{(2 n) !^{2}}=\\frac{2^{2 n}(2 n) !(4 n-1) ! !}{(2 n) !^{2}}=\\frac{2^{2 n}}{(2 n) !}(4 n-1) ! ! \\\\\n\\left(\\begin{array}{c}\n2 n \\\\\nn\n\\end{array}\\right) & =\\frac{1}{(2 n) !}\\left(\\frac{(2 n) !}{n !}\\right)^{2}=\\frac{1}{(2 n) !}\\left(2^{n}(2 n-1) ! !\\right)^{2}=\\frac{2^{2 n}}{(2 n) !}(2 n-1) ! !^{2}\n\\end{aligned}\n$$\n\nThen expression (1) can be rewritten as follows:\n\n$$\n\\begin{aligned}\n\\left(\\begin{array}{c}\n2^{k+1} \\\\\n2^{k}\n\\end{array}\\right) & -\\left(\\begin{array}{c}\n2^{k} \\\\\n2^{k-1}\n\\end{array}\\right)=\\frac{2^{2^{k}}}{\\left(2^{k}\\right) !}\\left(2^{k+1}-1\\right) ! !-\\frac{2^{2^{k}}}{\\left(2^{k}\\right) !}\\left(2^{k}-1\\right) ! !^{2} \\\\\n& =\\frac{2^{2^{k}}\\left(2^{k}-1\\right) ! !}{\\left(2^{k}\\right) !} \\cdot\\left(\\left(2^{k}+1\\right)\\left(2^{k}+3\\right) \\ldots\\left(2^{k}+2^{k}-1\\right)-\\left(2^{k}-1\\right)\\left(2^{k}-3\\right) \\ldots\\left(2^{k}-2^{k}+1\\right)\\right) .\n\\end{aligned}\n$$\n\nWe compute the exponent of 2 in the prime decomposition of each factor (the first one is a rational number but not necessarily an integer; it is not important).\n\nFirst, we show by induction on $n$ that the exponent of 2 in $\\left(2^{n}\\right)$ ! is $2^{n}-1$. The base case $n=1$ is trivial. Suppose that $\\left(2^{n}\\right) !=2^{2^{n}-1}(2 d+1)$ for some integer $d$. Then we have\n\n$$\n\\left(2^{n+1}\\right) !=2^{2^{n}}\\left(2^{n}\\right) !\\left(2^{n+1}-1\\right) ! !=2^{2^{n}} 2^{2^{n}-1} \\cdot(2 d+1)\\left(2^{n+1}-1\\right) ! !=2^{2^{n+1}-1} \\cdot(2 q+1)\n$$\n\nfor some integer $q$. This finishes the induction step.\n\nHence, the exponent of 2 in the first factor in $(2)$ is $2^{k}-\\left(2^{k}-1\\right)=1$.\n\nThe second factor in (2) can be considered as the value of the polynomial\n\n$$\nP(x)=(x+1)(x+3) \\ldots\\left(x+2^{k}-1\\right)-(x-1)(x-3) \\ldots\\left(x-2^{k}+1\\right) .\n$$\n\nat $x=2^{k}$. Now we collect some information about $P(x)$.\n\nObserve that $P(-x)=-P(x)$, since $k \\geq 2$. So $P(x)$ is an odd function, and it has nonzero coefficients only at odd powers of $x$. Hence $P(x)=x^{3} Q(x)+c x$, where $Q(x)$ is a polynomial with integer coefficients.\n\nCompute the exponent of 2 in $c$. We have\n\n$$\n\\begin{aligned}\nc & =2\\left(2^{k}-1\\right) ! ! \\sum_{i=1}^{2^{k-1}} \\frac{1}{2 i-1}=\\left(2^{k}-1\\right) ! ! \\sum_{i=1}^{2^{k-1}}\\left(\\frac{1}{2 i-1}+\\frac{1}{2^{k}-2 i+1}\\right) \\\\\n& =\\left(2^{k}-1\\right) ! ! \\sum_{i=1}^{2^{k-1}} \\frac{2^{k}}{(2 i-1)\\left(2^{k}-2 i+1\\right)}=2^{k} \\sum_{i=1}^{2^{k-1}} \\frac{\\left(2^{k}-1\\right) ! !}{(2 i-1)\\left(2^{k}-2 i+1\\right)}=2^{k} S\n\\end{aligned}\n$$\n\nFor any integer $i=1, \\ldots, 2^{k-1}$, denote by $a_{2 i-1}$ the residue inverse to $2 i-1$ modulo $2^{k}$. Clearly, when $2 i-1$ runs through all odd residues, so does $a_{2 i-1}$, hence\n\n$$\n\\begin{gathered}\nS=\\sum_{i=1}^{2^{k-1}} \\frac{\\left(2^{k}-1\\right) ! !}{(2 i-1)\\left(2^{k}-2 i+1\\right)} \\equiv-\\sum_{i=1}^{2^{k-1}} \\frac{\\left(2^{k}-1\\right) ! !}{(2 i-1)^{2}} \\equiv-\\sum_{i=1}^{2^{k-1}}\\left(2^{k}-1\\right) ! ! a_{2 i-1}^{2} \\\\\n=-\\left(2^{k}-1\\right) ! ! \\sum_{i=1}^{2^{k-1}}(2 i-1)^{2}=-\\left(2^{k}-1\\right) ! ! \\frac{2^{k-1}\\left(2^{2 k}-1\\right)}{3} \\quad\\left(\\bmod 2^{k}\\right) .\n\\end{gathered}\n$$\n\nTherefore, the exponent of 2 in $S$ is $k-1$, so $c=2^{k} S=2^{2 k-1}(2 t+1)$ for some integer $t$.\n\nFinally we obtain that\n\n$$\nP\\left(2^{k}\\right)=2^{3 k} Q\\left(2^{k}\\right)+2^{k} c=2^{3 k} Q\\left(2^{k}\\right)+2^{3 k-1}(2 t+1),\n$$\n\nwhich is divisible exactly by $2^{3 k-1}$. Thus, the exponent of 2 in $(2)$ is $1+(3 k-1)=3 k$."
  },
  {
    "id": "fimo_2007_number_theory_p5",
    "enunciado": "Find all surjective functions $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ such that for every $m, n \\in \\mathbb{N}$ and every prime $p$, the number $f(m+n)$ is divisible by $p$ if and only if $f(m)+f(n)$ is divisible by $p$.\n\n( $\\mathbb{N}$ is the set of all positive integers.)\n\nThe final answer is $f(n)=n$.",
    "solucao": "Suppose that function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ satisfies the problem conditions.\n\nLemma. For any prime $p$ and any $x, y \\in \\mathbb{N}$, we have $x \\equiv y(\\bmod p)$ if and only if $f(x) \\equiv f(y)$ $(\\bmod p)$. Moreover, $p \\mid f(x)$ if and only if $p \\mid x$.\n\nProof. Consider an arbitrary prime $p$. Since $f$ is surjective, there exists some $x \\in \\mathbb{N}$ such that $p \\mid f(x)$. Let\n\n$$\nd=\\min \\{x \\in \\mathbb{N}: p \\mid f(x)\\} .\n$$\n\nBy induction on $k$, we obtain that $p \\mid f(k d)$ for all $k \\in \\mathbb{N}$. The base is true since $p \\mid f(d)$. Moreover, if $p \\mid f(k d)$ and $p \\mid f(d)$ then, by the problem condition, $p \\mid f(k d+d)=f((k+1) d)$ as required.\n\nSuppose that there exists an $x \\in \\mathbb{N}$ such that $d \\nmid x$ but $p \\mid f(x)$. Let\n\n$$\ny=\\min \\{x \\in \\mathbb{N}: d \\backslash x, p \\mid f(x)\\} .\n$$\n\nBy the choice of $d$, we have $y>d$, and $y-d$ is a positive integer not divisible by $d$. Then $p \\nmid f(y-d)$, while $p \\mid f(d)$ and $p \\mid f(d+(y-d))=f(y)$. This contradicts the problem condition. Hence, there is no such $x$, and\n\n$$\np|f(x) \\Longleftrightarrow d| x .\n$$\n\nTake arbitrary $x, y \\in \\mathbb{N}$ such that $x \\equiv y(\\bmod d)$. We have $p \\mid f(x+(2 x d-x))=f(2 x d)$; moreover, since $d \\mid 2 x d+(y-x)=y+(2 x d-x)$, we get $p \\mid f(y+(2 x d-x))$. Then by the problem condition $p|f(x)+f(2 x d-x), p| f(y)+f(2 x d-x)$, and hence $f(x) \\equiv-f(2 x d-x) \\equiv f(y)$ $(\\bmod p)$\n\nOn the other hand, assume that $f(x) \\equiv f(y)(\\bmod p)$. Again we have $p \\mid f(x)+f(2 x d-x)$ which by our assumption implies that $p \\mid f(x)+f(2 x d-x)+(f(y)-f(x))=f(y)+f(2 x d-x)$. Hence by the problem condition $p \\mid f(y+(2 x d-x))$. Using (1) we get $0 \\equiv y+(2 x d-x) \\equiv y-x$ $(\\bmod d)$\n\nThus, we have proved that\n\n$$\nx \\equiv y \\quad(\\bmod d) \\Longleftrightarrow f(x) \\equiv f(y) \\quad(\\bmod p) .\n$$\n\nWe are left to show that $p=d$ : in this case (1) and (2) provide the desired statements.\n\nThe numbers $1,2, \\ldots, d$ have distinct residues modulo $d$. By $(2)$, numbers $f(1), f(2), \\ldots$, $f(d)$ have distinct residues modulo $p$; hence there are at least $d$ distinct residues, and $p \\geq d$. On the other hand, by the surjectivity of $f$, there exist $x_{1}, \\ldots, x_{p} \\in \\mathbb{N}$ such that $f\\left(x_{i}\\right)=i$ for any $i=1,2, \\ldots, p$. By $(2)$, all these $x_{i}$ 's have distinct residues modulo $d$. For the same reasons, $d \\geq p$. Hence, $d=p$.\n\nNow we prove that $f(n)=n$ by induction on $n$. If $n=1$ then, by the Lemma, $p \\nmid f(1)$ for any prime $p$, so $f(1)=1$, and the base is established. Suppose that $n>1$ and denote $k=f(n)$. Note that there exists a prime $q \\mid n$, so by the Lemma $q \\mid k$ and $k>1$.\n\nIf $k>n$ then $k-n+1>1$, and there exists a prime $p \\mid k-n+1$; we have $k \\equiv n-1$ $(\\bmod p)$. By the induction hypothesis we have $f(n-1)=n-1 \\equiv k=f(n)(\\bmod p)$. Now, by the Lemma we obtain $n-1 \\equiv n(\\bmod p)$ which cannot be true. Analogously, if $k<n$, then $f(k-1)=k-1$ by induction hypothesis. Moreover, $n-k+1>1$, so there exists a prime $p \\mid n-k+1$ and $n \\equiv k-1(\\bmod p)$. By the Lemma again, $k=f(n) \\equiv$ $f(k-1)=k-1(\\bmod p)$, which is also false. The only remaining case is $k=n$, so $f(n)=n$.\n\nFinally, the function $f(n)=n$ obviously satisfies the condition."
  },
  {
    "id": "fimo_2007_number_theory_p6",
    "enunciado": "Let $k$ be a positive integer. Prove that the number $\\left(4 k^{2}-1\\right)^{2}$ has a positive divisor of the form $8 k n-1$ if and only if $k$ is even.",
    "solucao": "The statement follows from the following fact.\n\nLemma. For arbitrary positive integers $x$ and $y$, the number $4 x y-1$ divides $\\left(4 x^{2}-1\\right)^{2}$ if and only if $x=y$.\n\nProof. If $x=y$ then $4 x y-1=4 x^{2}-1$ obviously divides $\\left(4 x^{2}-1\\right)^{2}$ so it is sufficient to consider the opposite direction.\n\nCall a pair $(x, y)$ of positive integers bad if $4 x y-1$ divides $\\left(4 x^{2}-1\\right)^{2}$ but $x \\neq y$. In order to prove that bad pairs do not exist, we present two properties of them which provide an infinite descent.\n\nProperty (i). If $(x, y)$ is a bad pair and $x<y$ then there exists a positive integer $z<x$ such that $(x, z)$ is also bad.\n\nLet $r=\\frac{\\left(4 x^{2}-1\\right)^{2}}{4 x y-1}$. Then\n\n$$\nr=-r \\cdot(-1) \\equiv-r(4 x y-1)=-\\left(4 x^{2}-1\\right)^{2} \\equiv-1 \\quad(\\bmod 4 x)\n$$\n\nand $r=4 x z-1$ with some positive integer $z$. From $x<y$ we obtain that\n\n$$\n4 x z-1=\\frac{\\left(4 x^{2}-1\\right)^{2}}{4 x y-1}<4 x^{2}-1\n$$\n\nand therefore $z<x$. By the construction, the number $4 x z-1$ is a divisor of $\\left(4 x^{2}-1\\right)^{2}$ so $(x, z)$ is a bad pair.\n\nProperty (ii). If $(x, y)$ is a bad pair then $(y, x)$ is also bad.\n\nSince $1=1^{2} \\equiv(4 x y)^{2}(\\bmod 4 x y-1)$, we have\n\n$$\n\\left(4 y^{2}-1\\right)^{2} \\equiv\\left(4 y^{2}-(4 x y)^{2}\\right)^{2}=16 y^{4}\\left(4 x^{2}-1\\right)^{2} \\equiv 0 \\quad(\\bmod 4 x y-1) .\n$$\n\nHence, the number $4 x y-1$ divides $\\left(4 y^{2}-1\\right)^{2}$ as well.\n\nNow suppose that there exists at least one bad pair. Take a bad pair $(x, y)$ such that $2 x+y$ attains its smallest possible value. If $x<y$ then property (i) provides a bad pair $(x, z)$ with $z<y$ and thus $2 x+z<2 x+y$. Otherwise, if $y<x$, property (ii) yields that pair $(y, x)$ is also bad while $2 y+x<2 x+y$. Both cases contradict the assumption that $2 x+y$ is minimal; the Lemma is proved.\n\nTo prove the problem statement, apply the Lemma for $x=k$ and $y=2 n$; the number $8 k n-1$ divides $\\left(4 k^{2}-1\\right)^{2}$ if and only if $k=2 n$. Hence, there is no such $n$ if $k$ is odd and $n=k / 2$ is the only solution if $k$ is even."
  },
  {
    "id": "fimo_2007_number_theory_p7",
    "enunciado": "For a prime $p$ and a positive integer $n$, denote by $\\nu_{p}(n)$ the exponent of $p$ in the prime factorization of $n$ !. Given a positive integer $d$ and a finite set $\\left\\{p_{1}, \\ldots, p_{k}\\right\\}$ of primes. Show that there are infinitely many positive integers $n$ such that $d \\mid \\nu_{p_{i}}(n)$ for all $1 \\leq i \\leq k$.",
    "solucao": "For arbitrary prime $p$ and positive integer $n$, denote by $\\operatorname{ord}_{p}(n)$ the exponent of $p$ in $n$. Thus,\n\n$$\n\\nu_{p}(n)=\\operatorname{ord}_{p}(n !)=\\sum_{i=1}^{n} \\operatorname{ord}_{p}(i) .\n$$\n\nLemma. Let $p$ be a prime number, $q$ be a positive integer, $k$ and $r$ be positive integers such that $p^{k}>r$. Then $\\nu_{p}\\left(q p^{k}+r\\right)=\\nu_{p}\\left(q p^{k}\\right)+\\nu_{p}(r)$.\n\nProof. We claim that $\\operatorname{ord}_{p}\\left(q p^{k}+i\\right)=\\operatorname{ord}_{p}(i)$ for all $0<i<p^{k}$. Actually, if $d=\\operatorname{ord}_{p}(i)$ then $d<k$, so $q p^{k}+i$ is divisible by $p^{d}$, but only the first term is divisible by $p^{d+1}$; hence the sum is not.\n\nUsing this claim, we obtain\n\n$$\n\\nu_{p}\\left(q p^{k}+r\\right)=\\sum_{i=1}^{q p^{k}} \\operatorname{ord}_{p}(i)+\\sum_{i=q p^{k}+1}^{q p^{k}+r} \\operatorname{ord}_{p}(i)=\\sum_{i=1}^{q p^{k}} \\operatorname{ord}_{p}(i)+\\sum_{i=1}^{r} \\operatorname{ord}_{p}(i)=\\nu_{p}\\left(q p^{k}\\right)+\\nu_{p}(r) .\n$$\n\nFor any integer $a$, denote by $\\bar{a}$ its residue modulo $d$. The addition of residues will also be performed modulo $d$, i. e. $\\bar{a}+\\bar{b}=\\overline{a+b}$. For any positive integer $n$, let $f(n)=\\left(f_{1}(n), \\ldots, f_{k}(n)\\right)$, where $f_{i}(n)=\\overline{\\nu_{p_{i}}(n)}$.\n\nDefine the sequence $n_{1}=1, n_{\\ell+1}=\\left(p_{1} p_{2} \\ldots p_{k}\\right)^{n_{\\ell}}$. We claim that\n\n$$\nf\\left(n_{\\ell_{1}}+n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}\\right)=f\\left(n_{\\ell_{1}}\\right)+f\\left(n_{\\ell_{2}}\\right)+\\ldots+f\\left(n_{\\ell_{m}}\\right)\n$$\n\nfor any $\\ell_{1}<\\ell_{2}<\\ldots<\\ell_{m}$. (The addition of $k$-tuples is componentwise.) The base case $m=1$ is trivial.\n\nSuppose that $m>1$. By the construction of the sequence, $p_{i}^{n_{\\ell_{1}}}$ divides $n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}$; clearly, $p_{i}^{n_{\\ell_{1}}}>n_{\\ell_{1}}$ for all $1 \\leq i \\leq k$. Therefore the Lemma can be applied for $p=p_{i}, k=r=n_{\\ell_{1}}$ and $q p^{k}=n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}$ to obtain\n\n$$\nf_{i}\\left(n_{\\ell_{1}}+n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}\\right)=f_{i}\\left(n_{\\ell_{1}}\\right)+f_{i}\\left(n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}\\right) \\quad \\text { for all } 1 \\leq i \\leq k,\n$$\n\nand hence\n\n$$\nf\\left(n_{\\ell_{1}}+n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}\\right)=f\\left(n_{\\ell_{1}}\\right)+f\\left(n_{\\ell_{2}}+\\ldots+n_{\\ell_{m}}\\right)=f\\left(n_{\\ell_{1}}\\right)+f\\left(n_{\\ell_{2}}\\right)+\\ldots+f\\left(n_{\\ell_{m}}\\right)\n$$\n\nby the induction hypothesis.\n\nNow consider the values $f\\left(n_{1}\\right), f\\left(n_{2}\\right), \\ldots$ There exist finitely many possible values of $f$. Hence, there exists an infinite sequence of indices $\\ell_{1}<\\ell_{2}<\\ldots$ such that $f\\left(n_{\\ell_{1}}\\right)=f\\left(n_{\\ell_{2}}\\right)=\\ldots$ and thus\n\n$$\nf\\left(n_{\\ell_{m+1}}+n_{\\ell_{m+2}}+\\ldots+n_{\\ell_{m+d}}\\right)=f\\left(n_{\\ell_{m+1}}\\right)+\\ldots+f\\left(n_{\\ell_{m+d}}\\right)=d \\cdot f\\left(n_{\\ell_{1}}\\right)=(\\overline{0}, \\ldots, \\overline{0})\n$$\n\nfor all $m$. We have found infinitely many suitable numbers."
  },
  {
    "id": "fimo_2008_algebra_p1",
    "enunciado": "Find all functions $f:(0, \\infty) \\rightarrow(0, \\infty)$ such that\n\n$$\n\\frac{f(p)^{2}+f(q)^{2}}{f\\left(r^{2}\\right)+f\\left(s^{2}\\right)}=\\frac{p^{2}+q^{2}}{r^{2}+s^{2}}\n$$\n\nfor all $p, q, r, s>0$ with $p q=r s$.\n\nThe final answer is \n\n$$\nf(x)=x \\quad \\text { for all } x>0 \\quad \\text { or } \\quad f(x)=\\frac{1}{x} \\quad \\text { for all } x>0\n$$",
    "solucao": "Let $f$ satisfy the given condition. Setting $p=q=r=s=1$ yields $f(1)^{2}=f(1)$ and hence $f(1)=1$. Now take any $x>0$ and set $p=x, q=1, r=s=\\sqrt{x}$ to obtain\n\n$$\n\\frac{f(x)^{2}+1}{2 f(x)}=\\frac{x^{2}+1}{2 x} .\n$$\n\nThis recasts into\n\n$$\n\\begin{gathered}\nx f(x)^{2}+x=x^{2} f(x)+f(x), \\\\\n(x f(x)-1)(f(x)-x)=0 .\n\\end{gathered}\n$$\n\nAnd thus,\n\n$$\n\\text { for every } x>0, \\text { either } f(x)=x \\text { or } f(x)=\\frac{1}{x} \\text {. }\n$$\n\nObviously, if\n\n$$\nf(x)=x \\quad \\text { for all } x>0 \\quad \\text { or } \\quad f(x)=\\frac{1}{x} \\quad \\text { for all } x>0\n$$\n\nthen the condition of the problem is satisfied. We show that actually these two functions are the only solutions.\n\nSo let us assume that there exists a function $f$ satisfying the requirement, other than those in (2). Then $f(a) \\neq a$ and $f(b) \\neq 1 / b$ for some $a, b>0$. By (1), these values must be $f(a)=1 / a, f(b)=b$. Applying now the equation with $p=a, q=b, r=s=\\sqrt{a b}$ we obtain $\\left(a^{-2}+b^{2}\\right) / 2 f(a b)=\\left(a^{2}+b^{2}\\right) / 2 a b ;$ equivalently\n\n$$\nf(a b)=\\frac{a b\\left(a^{-2}+b^{2}\\right)}{a^{2}+b^{2}} .\n$$\n\nWe know however (see (1)) that $f(a b)$ must be either $a b$ or $1 / a b$. If $f(a b)=a b$ then by (3) $a^{-2}+b^{2}=a^{2}+b^{2}$, so that $a=1$. But, as $f(1)=1$, this contradicts the relation $f(a) \\neq a$. Likewise, if $f(a b)=1 / a b$ then $(3)$ gives $a^{2} b^{2}\\left(a^{-2}+b^{2}\\right)=a^{2}+b^{2}$, whence $b=1$, in contradiction to $f(b) \\neq 1 / b$. Thus indeed the functions listed in (2) are the only two solutions."
  },
  {
    "id": "fimo_2008_algebra_p2_1",
    "enunciado": "Prove the inequality\n\n$$\n\\frac{x^{2}}{(x-1)^{2}}+\\frac{y^{2}}{(y-1)^{2}}+\\frac{z^{2}}{(z-1)^{2}} \\geq 1\n$$\n\nfor real numbers $x, y, z \\neq 1$ satisfying the condition $x y z=1$.",
    "solucao": "We start with the substitution\n\n$$\n\\frac{x}{x-1}=a, \\quad \\frac{y}{y-1}=b, \\quad \\frac{z}{z-1}=c, \\quad \\text { i.e., } \\quad x=\\frac{a}{a-1}, \\quad y=\\frac{b}{b-1}, \\quad z=\\frac{c}{c-1} .\n$$\n\nThe inequality to be proved reads $a^{2}+b^{2}+c^{2} \\geq 1$. The new variables are subject to the constraints $a, b, c \\neq 1$ and the following one coming from the condition $x y z=1$,\n\n$$\n(a-1)(b-1)(c-1)=a b c .\n$$\n\nThis is successively equivalent to\n\n$$\n\\begin{aligned}\na+b+c-1 & =a b+b c+c a \\\\\n2(a+b+c-1) & =(a+b+c)^{2}-\\left(a^{2}+b^{2}+c^{2}\\right) \\\\\na^{2}+b^{2}+c^{2}-2 & =(a+b+c)^{2}-2(a+b+c) \\\\\na^{2}+b^{2}+c^{2}-1 & =(a+b+c-1)^{2}\n\\end{aligned}\n$$\n\nThus indeed $a^{2}+b^{2}+c^{2} \\geq 1$, as desired."
  },
  {
    "id": "fimo_2008_algebra_p2_2",
    "enunciado": "$$\n\\frac{x^{2}}{(x-1)^{2}}+\\frac{y^{2}}{(y-1)^{2}}+\\frac{z^{2}}{(z-1)^{2}} \\geq 1\n$$\n\nfor real numbers $x, y, z \\neq 1$ satisfying the condition $x y z=1$.\n\nShow that there are infinitely many triples of rational numbers $x, y, z$ for which this inequality turns into equality.",
    "solucao": "From the equation $a^{2}+b^{2}+c^{2}-1=(a+b+c-1)^{2}$ we see that the proposed inequality becomes an equality if and only if both sums $a^{2}+b^{2}+c^{2}$ and $a+b+c$ have value 1 . The first of them is equal to $(a+b+c)^{2}-2(a b+b c+c a)$. So the instances of equality are described by the system of two equations\n\n$$\na+b+c=1, \\quad a b+b c+c a=0\n$$\n\nplus the constraint $a, b, c \\neq 1$. Elimination of $c$ leads to $a^{2}+a b+b^{2}=a+b$, which we regard as a quadratic equation in $b$,\n\n$$\nb^{2}+(a-1) b+a(a-1)=0\n$$\n\nwith discriminant\n\n$$\n\\Delta=(a-1)^{2}-4 a(a-1)=(1-a)(1+3 a) .\n$$\n\nWe are looking for rational triples $(a, b, c)$; it will suffice to have $a$ rational such that $1-a$ and $1+3 a$ are both squares of rational numbers (then $\\Delta$ will be so too). Set $a=k / m$. We want $m-k$ and $m+3 k$ to be squares of integers. This is achieved for instance by taking $m=k^{2}-k+1$ (clearly nonzero); then $m-k=(k-1)^{2}, m+3 k=(k+1)^{2}$. Note that distinct integers $k$ yield distinct values of $a=k / m$.\n\nAnd thus, if $k$ is any integer and $m=k^{2}-k+1, a=k / m$ then $\\Delta=\\left(k^{2}-1\\right)^{2} / m^{2}$ and the quadratic equation has rational roots $b=\\left(m-k \\pm k^{2} \\mp 1\\right) /(2 m)$. Choose e.g. the larger root,\n\n$$\nb=\\frac{m-k+k^{2}-1}{2 m}=\\frac{m+(m-2)}{2 m}=\\frac{m-1}{m} .\n$$\n\nComputing $c$ from $a+b+c=1$ then gives $c=(1-k) / m$. The condition $a, b, c \\neq 1$ eliminates only $k=0$ and $k=1$. Thus, as $k$ varies over integers greater than 1 , we obtain an infinite family of rational triples $(a, b, c)$-and coming back to the original variables $(x=a /(a-1)$ etc. $)$ - an infinite family of rational triples $(x, y, z)$ with the needed property. (A short calculation shows that the resulting triples are $x=-k /(k-1)^{2}, y=k-k^{2}, z=(k-1) / k^{2}$; but the proof was complete without listing them.)"
  },
  {
    "id": "fimo_2008_algebra_p3_1",
    "enunciado": "Let $S \\subseteq \\mathbb{R}$ be a set of real numbers. We say that a pair $(f, g)$ of functions from $S$ into $S$ is a Spanish Couple on $S$, if they satisfy the following conditions:\n\n(i) Both functions are strictly increasing, i.e. $f(x)<f(y)$ and $g(x)<g(y)$ for all $x, y \\in S$ with $x<y$\n\n(ii) The inequality $f(g(g(x)))<g(f(x))$ holds for all $x \\in S$.\n\nDecide whether there exists a Spanish Couple on the set $S=\\mathbb{N}$ of positive integers;\n\nThe final answer is NO.",
    "solucao": "Throughout the solution, we will use the notation $g_{k}(x)=\\overbrace{g(g(\\ldots g}^{k}(x) \\ldots))$, including $g_{0}(x)=x$ as well.\n\nSuppose that there exists a Spanish Couple $(f, g)$ on the set $\\mathbb{N}$. From property (i) we have $f(x) \\geq x$ and $g(x) \\geq x$ for all $x \\in \\mathbb{N}$.\n\nWe claim that $g_{k}(x) \\leq f(x)$ for all $k \\geq 0$ and all positive integers $x$. The proof is done by induction on $k$. We already have the base case $k=0$ since $x \\leq f(x)$. For the induction step from $k$ to $k+1$, apply the induction hypothesis on $g_{2}(x)$ instead of $x$, then apply (ii):\n\n$$\ng\\left(g_{k+1}(x)\\right)=g_{k}\\left(g_{2}(x)\\right) \\leq f\\left(g_{2}(x)\\right)<g(f(x)) .\n$$\n\nSince $g$ is increasing, it follows that $g_{k+1}(x)<f(x)$. The claim is proven.\n\nIf $g(x)=x$ for all $x \\in \\mathbb{N}$ then $f(g(g(x)))=f(x)=g(f(x))$, and we have a contradiction with (ii). Therefore one can choose an $x_{0} \\in S$ for which $x_{0}<g\\left(x_{0}\\right)$. Now consider the sequence $x_{0}, x_{1}, \\ldots$ where $x_{k}=g_{k}\\left(x_{0}\\right)$. The sequence is increasing. Indeed, we have $x_{0}<g\\left(x_{0}\\right)=x_{1}$, and $x_{k}<x_{k+1}$ implies $x_{k+1}=g\\left(x_{k}\\right)<g\\left(x_{k+1}\\right)=x_{k+2}$.\n\nHence, we obtain a strictly increasing sequence $x_{0}<x_{1}<\\ldots$ of positive integers which on the other hand has an upper bound, namely $f\\left(x_{0}\\right)$. This cannot happen in the set $\\mathbb{N}$ of positive integers, thus no Spanish Couple exists on $\\mathbb{N}$."
  },
  {
    "id": "fimo_2008_algebra_p3_2",
    "enunciado": "Let $S \\subseteq \\mathbb{R}$ be a set of real numbers. We say that a pair $(f, g)$ of functions from $S$ into $S$ is a Spanish Couple on $S$, if they satisfy the following conditions:\n\n(i) Both functions are strictly increasing, i.e. $f(x)<f(y)$ and $g(x)<g(y)$ for all $x, y \\in S$ with $x<y$\n\n(ii) The inequality $f(g(g(x)))<g(f(x))$ holds for all $x \\in S$.\n\nDecide whether there exists a Spanish Couple on the set $S=\\{a-1 / b: a, b \\in \\mathbb{N}\\}$.\n\nThe final answer is YES.",
    "solucao": "We present a Spanish Couple on the set $S=\\{a-1 / b: a, b \\in \\mathbb{N}\\}$.\n\nLet\n\n$$\n\\begin{aligned}\n& f(a-1 / b)=a+1-1 / b, \\\\\n& g(a-1 / b)=a-1 /\\left(b+3^{a}\\right) .\n\\end{aligned}\n$$\n\nThese functions are clearly increasing. Condition (ii) holds, since\n\n$$\nf(g(g(a-1 / b)))=(a+1)-1 /\\left(b+2 \\cdot 3^{a}\\right)<(a+1)-1 /\\left(b+3^{a+1}\\right)=g(f(a-1 / b)) .\n$$"
  },
  {
    "id": "fimo_2008_algebra_p4",
    "enunciado": "For an integer $m$, denote by $t(m)$ the unique number in $\\{1,2,3\\}$ such that $m+t(m)$ is a multiple of 3 . A function $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ satisfies $f(-1)=0, f(0)=1, f(1)=-1$ and\n\n$$\nf\\left(2^{n}+m\\right)=f\\left(2^{n}-t(m)\\right)-f(m) \\quad \\text { for all integers } m, n \\geq 0 \\text { with } 2^{n}>m .\n$$\n\nProve that $f(3 p) \\geq 0$ holds for all integers $p \\geq 0$",
    "solucao": "The given conditions determine $f$ uniquely on the positive integers. The signs of $f(1), f(2), \\ldots$ seem to change quite erratically. However values of the form $f\\left(2^{n}-t(m)\\right)$ are sufficient to compute directly any functional value. Indeed, let $n>0$ have base 2 representation $n=2^{a_{0}}+2^{a_{1}}+\\cdots+2^{a_{k}}, a_{0}>a_{1}>\\cdots>a_{k} \\geq 0$, and let $n_{j}=2^{a_{j}}+2^{a_{j-1}}+\\cdots+2^{a_{k}}, j=0, \\ldots, k$. Repeated applications of the recurrence show that $f(n)$ is an alternating sum of the quantities $f\\left(2^{a_{j}}-t\\left(n_{j+1}\\right)\\right)$ plus $(-1)^{k+1}$. (The exact formula is not needed for our proof.)\n\nSo we focus attention on the values $f\\left(2^{n}-1\\right), f\\left(2^{n}-2\\right)$ and $f\\left(2^{n}-3\\right)$. Six cases arise; more specifically\n\n$t\\left(2^{2 k}-3\\right)=2, t\\left(2^{2 k}-2\\right)=1, t\\left(2^{2 k}-1\\right)=3, t\\left(2^{2 k+1}-3\\right)=1, t\\left(2^{2 k+1}-2\\right)=3, t\\left(2^{2 k+1}-1\\right)=2$.\n\nClaim. For all integers $k \\geq 0$ the following equalities hold:\n\n$$\n\\begin{aligned}\n& f\\left(2^{2 k+1}-3\\right)=0, \\quad f\\left(2^{2 k+1}-2\\right)=3^{k}, \\quad f\\left(2^{2 k+1}-1\\right)=-3^{k}, \\\\\n& f\\left(2^{2 k+2}-3\\right)=-3^{k}, \\quad f\\left(2^{2 k+2}-2\\right)=-3^{k}, \\quad f\\left(2^{2 k+2}-1\\right)=2 \\cdot 3^{k} \\text {. }\n\\end{aligned}\n$$\n\nProof. By induction on $k$. The base $k=0$ comes down to checking that $f(2)=-1$ and $f(3)=2$; the given values $f(-1)=0, f(0)=1, f(1)=-1$ are also needed. Suppose the claim holds for $k-1$. For $f\\left(2^{2 k+1}-t(m)\\right)$, the recurrence formula and the induction hypothesis yield\n\n$$\n\\begin{aligned}\n& f\\left(2^{2 k+1}-3\\right)=f\\left(2^{2 k}+\\left(2^{2 k}-3\\right)\\right)=f\\left(2^{2 k}-2\\right)-f\\left(2^{2 k}-3\\right)=-3^{k-1}+3^{k-1}=0, \\\\\n& f\\left(2^{2 k+1}-2\\right)=f\\left(2^{2 k}+\\left(2^{2 k}-2\\right)\\right)=f\\left(2^{2 k}-1\\right)-f\\left(2^{2 k}-2\\right)=2 \\cdot 3^{k-1}+3^{k-1}=3^{k} \\\\\n& f\\left(2^{2 k+1}-1\\right)=f\\left(2^{2 k}+\\left(2^{2 k}-1\\right)\\right)=f\\left(2^{2 k}-3\\right)-f\\left(2^{2 k}-1\\right)=-3^{k-1}-2 \\cdot 3^{k-1}=-3^{k} .\n\\end{aligned}\n$$\n\nFor $f\\left(2^{2 k+2}-t(m)\\right)$ we use the three equalities just established:\n\n$$\n\\begin{aligned}\n& f\\left(2^{2 k+2}-3\\right)=f\\left(2^{2 k+1}+\\left(2^{2 k+1}-3\\right)\\right)=f\\left(2^{2 k+1}-1\\right)-f\\left(2^{2 k+1}-3\\right)=-3^{k}-0=-3^{k}, \\\\\n& f\\left(2^{2 k+2}-2\\right)=f\\left(2^{2 k+1}+\\left(2^{2 k+1}-2\\right)\\right)=f\\left(2^{2 k+1}-3\\right)-f\\left(2^{2 k}-2\\right)=0-3^{k}=-3^{k}, \\\\\n& f\\left(2^{2 k+2}-1\\right)=f\\left(2^{2 k+1}+\\left(2^{2 k+1}-1\\right)\\right)=f\\left(2^{2 k+1}-2\\right)-f\\left(2^{2 k+1}-1\\right)=3^{k}+3^{k}=2 \\cdot 3^{k} .\n\\end{aligned}\n$$\n\nThe claim follows.\n\nA closer look at the six cases shows that $f\\left(2^{n}-t(m)\\right) \\geq 3^{(n-1) / 2}$ if $2^{n}-t(m)$ is divisible by 3 , and $f\\left(2^{n}-t(m)\\right) \\leq 0$ otherwise. On the other hand, note that $2^{n}-t(m)$ is divisible by 3 if and only if $2^{n}+m$ is. Therefore, for all nonnegative integers $m$ and $n$,\n\n(i) $f\\left(2^{n}-t(m)\\right) \\geq 3^{(n-1) / 2}$ if $2^{n}+m$ is divisible by 3 ;\n\n(ii) $f\\left(2^{n}-t(m)\\right) \\leq 0$ if $2^{n}+m$ is not divisible by 3 .\n\nOne more (direct) consequence of the claim is that $\\left|f\\left(2^{n}-t(m)\\right)\\right| \\leq \\frac{2}{3} \\cdot 3^{n / 2}$ for all $m, n \\geq 0$.\n\nThe last inequality enables us to find an upper bound for $|f(m)|$ for $m$ less than a given power of 2 . We prove by induction on $n$ that $|f(m)| \\leq 3^{n / 2}$ holds true for all integers $m, n \\geq 0$ with $2^{n}>m$. The base $n=0$ is clear as $f(0)=1$. For the inductive step from $n$ to $n+1$, let $m$ and $n$ satisfy $2^{n+1}>m$. If $m<2^{n}$, we are done by the inductive hypothesis. If $m \\geq 2^{n}$ then $m=2^{n}+k$ where $2^{n}>k \\geq 0$. Now, by $\\left|f\\left(2^{n}-t(k)\\right)\\right| \\leq \\frac{2}{3} \\cdot 3^{n / 2}$ and the inductive assumption,\n\n$$\n|f(m)|=\\left|f\\left(2^{n}-t(k)\\right)-f(k)\\right| \\leq\\left|f\\left(2^{n}-t(k)\\right)\\right|+|f(k)| \\leq \\frac{2}{3} \\cdot 3^{n / 2}+3^{n / 2}<3^{(n+1) / 2} .\n$$\n\nThe induction is complete.\n\nWe proceed to prove that $f(3 p) \\geq 0$ for all integers $p \\geq 0$. Since $3 p$ is not a power of 2 , its binary expansion contains at least two summands. Hence one can write $3 p=2^{a}+2^{b}+c$ where $a>b$ and $2^{b}>c \\geq 0$. Applying the recurrence formula twice yields\n\n$$\nf(3 p)=f\\left(2^{a}+2^{b}+c\\right)=f\\left(2^{a}-t\\left(2^{b}+c\\right)\\right)-f\\left(2^{b}-t(c)\\right)+f(c) .\n$$\n\nSince $2^{a}+2^{b}+c$ is divisible by 3 , we have $f\\left(2^{a}-t\\left(2^{b}+c\\right)\\right) \\geq 3^{(a-1) / 2}$ by (i). Since $2^{b}+c$ is not divisible by 3 , we have $f\\left(2^{b}-t(c)\\right) \\leq 0$ by (ii). Finally $|f(c)| \\leq 3^{b / 2}$ as $2^{b}>c \\geq 0$, so that $f(c) \\geq-3^{b / 2}$. Therefore $f(3 p) \\geq 3^{(a-1) / 2}-3^{b / 2}$ which is nonnegative because $a>b$."
  },
  {
    "id": "fimo_2008_algebra_p5",
    "enunciado": "Let $a, b, c, d$ be positive real numbers such that\n\n$$\na b c d=1 \\quad \\text { and } \\quad a+b+c+d>\\frac{a}{b}+\\frac{b}{c}+\\frac{c}{d}+\\frac{d}{a}\n$$\n\nProve that\n\n$$\na+b+c+d<\\frac{b}{a}+\\frac{c}{b}+\\frac{d}{c}+\\frac{a}{d} .\n$$",
    "solucao": "We show that if $a b c d=1$, the sum $a+b+c+d$ cannot exceed a certain weighted mean of the expressions $\\frac{a}{b}+\\frac{b}{c}+\\frac{c}{d}+\\frac{d}{a}$ and $\\frac{b}{a}+\\frac{c}{b}+\\frac{d}{c}+\\frac{a}{d}$.\n\nBy applying the AM-GM inequality to the numbers $\\frac{a}{b}, \\frac{a}{b}, \\frac{b}{c}$ and $\\frac{a}{d}$, we obtain\n\n$$\na=\\sqrt[4]{\\frac{a^{4}}{a b c d}}=\\sqrt[4]{\\frac{a}{b} \\cdot \\frac{a}{b} \\cdot \\frac{b}{c} \\cdot \\frac{a}{d}} \\leq \\frac{1}{4}\\left(\\frac{a}{b}+\\frac{a}{b}+\\frac{b}{c}+\\frac{a}{d}\\right) .\n$$\n\nAnalogously,\n\n$$\nb \\leq \\frac{1}{4}\\left(\\frac{b}{c}+\\frac{b}{c}+\\frac{c}{d}+\\frac{b}{a}\\right), \\quad c \\leq \\frac{1}{4}\\left(\\frac{c}{d}+\\frac{c}{d}+\\frac{d}{a}+\\frac{c}{b}\\right) \\quad \\text { and } \\quad d \\leq \\frac{1}{4}\\left(\\frac{d}{a}+\\frac{d}{a}+\\frac{a}{b}+\\frac{d}{c}\\right)\n$$\n\nSumming up these estimates yields\n\n$$\na+b+c+d \\leq \\frac{3}{4}\\left(\\frac{a}{b}+\\frac{b}{c}+\\frac{c}{d}+\\frac{d}{a}\\right)+\\frac{1}{4}\\left(\\frac{b}{a}+\\frac{c}{b}+\\frac{d}{c}+\\frac{a}{d}\\right) .\n$$\n\nIn particular, if $a+b+c+d>\\frac{a}{b}+\\frac{b}{c}+\\frac{c}{d}+\\frac{d}{a}$ then $a+b+c+d<\\frac{b}{a}+\\frac{c}{b}+\\frac{d}{c}+\\frac{a}{d}$."
  },
  {
    "id": "fimo_2008_algebra_p6",
    "enunciado": "Let $f: \\mathbb{R} \\rightarrow \\mathbb{N}$ be a function which satisfies\n\n$$\nf\\left(x+\\frac{1}{f(y)}\\right)=f\\left(y+\\frac{1}{f(x)}\\right) \\quad \\text { for all } x, y \\in \\mathbb{R}\n$$\n\nProve that there is a positive integer which is not a value of $f$.",
    "solucao": "Suppose that the statement is false and $f(\\mathbb{R})=\\mathbb{N}$. We prove several properties of the function $f$ in order to reach a contradiction.\n\nTo start with, observe that one can assume $f(0)=1$. Indeed, let $a \\in \\mathbb{R}$ be such that $f(a)=1$, and consider the function $g(x)=f(x+a)$. By substituting $x+a$ and $y+a$ for $x$ and $y$ in (1), we have\n\n$$\ng\\left(x+\\frac{1}{g(y)}\\right)=f\\left(x+a+\\frac{1}{f(y+a)}\\right)=f\\left(y+a+\\frac{1}{f(x+a)}\\right)=g\\left(y+\\frac{1}{g(x)}\\right) .\n$$\n\nSo $g$ satisfies the functional equation (1), with the additional property $g(0)=1$. Also, $g$ and $f$ have the same set of values: $g(\\mathbb{R})=f(\\mathbb{R})=\\mathbb{N}$. Henceforth we assume $f(0)=1$.\n\nClaim 1. For an arbitrary fixed $c \\in \\mathbb{R}$ we have $\\left\\{f\\left(c+\\frac{1}{n}\\right): n \\in \\mathbb{N}\\right\\}=\\mathbb{N}$.\n\nProof. Equation $(1)$ and $f(\\mathbb{R})=\\mathbb{N}$ imply\n\n$f(\\mathbb{R})=\\left\\{f\\left(x+\\frac{1}{f(c)}\\right): x \\in \\mathbb{R}\\right\\}=\\left\\{f\\left(c+\\frac{1}{f(x)}\\right): x \\in \\mathbb{R}\\right\\} \\subset\\left\\{f\\left(c+\\frac{1}{n}\\right): n \\in \\mathbb{N}\\right\\} \\subset f(\\mathbb{R})$.\n\nThe claim follows.\n\nWe will use Claim 1 in the special cases $c=0$ and $c=1 / 3$ :\n\n$$\n\\left\\{f\\left(\\frac{1}{n}\\right): n \\in \\mathbb{N}\\right\\}=\\left\\{f\\left(\\frac{1}{3}+\\frac{1}{n}\\right): n \\in \\mathbb{N}\\right\\}=\\mathbb{N} .\n$$\n\nClaim 2. If $f(u)=f(v)$ for some $u, v \\in \\mathbb{R}$ then $f(u+q)=f(v+q)$ for all nonnegative rational $q$. Furthermore, if $f(q)=1$ for some nonnegative rational $q$ then $f(k q)=1$ for all $k \\in \\mathbb{N}$.\n\nProof. For all $x \\in \\mathbb{R}$ we have by $(1)$\n\n$$\nf\\left(u+\\frac{1}{f(x)}\\right)=f\\left(x+\\frac{1}{f(u)}\\right)=f\\left(x+\\frac{1}{f(v)}\\right)=f\\left(v+\\frac{1}{f(x)}\\right)\n$$\n\nSince $f(x)$ attains all positive integer values, this yields $f(u+1 / n)=f(v+1 / n)$ for all $n \\in \\mathbb{N}$. Let $q=k / n$ be a positive rational number. Then $k$ repetitions of the last step yield\n\n$$\nf(u+q)=f\\left(u+\\frac{k}{n}\\right)=f\\left(v+\\frac{k}{n}\\right)=f(v+q) .\n$$\n\nNow let $f(q)=1$ for some nonnegative rational $q$, and let $k \\in \\mathbb{N}$. As $f(0)=1$, the previous conclusion yields successively $f(q)=f(2 q), f(2 q)=f(3 q), \\ldots, f((k-1) q)=f(k q)$, as needed. Claim 3. The equality $f(q)=f(q+1)$ holds for all nonnegative rational $q$.\n\nProof. Let $m$ be a positive integer such that $f(1 / m)=1$. Such an $m$ exists by (2). Applying the second statement of Claim 2 with $q=1 / m$ and $k=m$ yields $f(1)=1$.\n\nGiven that $f(0)=f(1)=1$, the first statement of Claim 2 implies $f(q)=f(q+1)$ for all nonnegative rational $q$. Claim 4. The equality $f\\left(\\frac{1}{n}\\right)=n$ holds for every $n \\in \\mathbb{N}$.\n\nProof. For a nonnegative rational $q$ we set $x=q, y=0$ in (1) and use Claim 3 to obtain\n\n$$\nf\\left(\\frac{1}{f(q)}\\right)=f\\left(q+\\frac{1}{f(0)}\\right)=f(q+1)=f(q)\n$$\n\nBy (2), for each $n \\in \\mathbb{N}$ there exists a $k \\in \\mathbb{N}$ such that $f(1 / k)=n$. Applying the last equation with $q=1 / k$, we have\n\n$$\nn=f\\left(\\frac{1}{k}\\right)=f\\left(\\frac{1}{f(1 / k)}\\right)=f\\left(\\frac{1}{n}\\right) .\n$$\n\nNow we are ready to obtain a contradiction. Let $n \\in \\mathbb{N}$ be such that $f(1 / 3+1 / n)=1$. Such an $n$ exists by (2). Let $1 / 3+1 / n=s / t$, where $s, t \\in \\mathbb{N}$ are coprime. Observe that $t>1$ as $1 / 3+1 / n$ is not an integer. Choose $k, l \\in \\mathbb{N}$ so that that $k s-l t=1$.\n\nBecause $f(0)=f(s / t)=1$, Claim 2 implies $f(k s / t)=1$. Now $f(k s / t)=f(1 / t+l)$; on the other hand $f(1 / t+l)=f(1 / t)$ by $l$ successive applications of Claim 3. Finally, $f(1 / t)=t$ by Claim 4, leading to the impossible $t=1$. The solution is complete."
  },
  {
    "id": "fimo_2008_algebra_p7",
    "enunciado": "Prove that for any four positive real numbers $a, b, c, d$ the inequality\n\n$$\n\\frac{(a-b)(a-c)}{a+b+c}+\\frac{(b-c)(b-d)}{b+c+d}+\\frac{(c-d)(c-a)}{c+d+a}+\\frac{(d-a)(d-b)}{d+a+b} \\geq 0\n$$\n\nholds. Determine all cases of equality.\n\nThe final answer is $a=c$ and simultaneously $b=d$.",
    "solucao": "Denote the four terms by\n\n$$\nA=\\frac{(a-b)(a-c)}{a+b+c}, \\quad B=\\frac{(b-c)(b-d)}{b+c+d}, \\quad C=\\frac{(c-d)(c-a)}{c+d+a}, \\quad D=\\frac{(d-a)(d-b)}{d+a+b} .\n$$\n\nThe expression $2 A$ splits into two summands as follows,\n\n$$\n2 A=A^{\\prime}+A^{\\prime \\prime} \\quad \\text { where } \\quad A^{\\prime}=\\frac{(a-c)^{2}}{a+b+c}, \\quad A^{\\prime \\prime}=\\frac{(a-c)(a-2 b+c)}{a+b+c} ;\n$$\n\nthis is easily verified. We analogously represent $2 B=B^{\\prime}+B^{\\prime \\prime}, 2 C=C^{\\prime}+C^{\\prime \\prime}, 2 B=D^{\\prime}+D^{\\prime \\prime}$ and examine each of the sums $A^{\\prime}+B^{\\prime}+C^{\\prime}+D^{\\prime}$ and $A^{\\prime \\prime}+B^{\\prime \\prime}+C^{\\prime \\prime}+D^{\\prime \\prime}$ separately.\n\nWrite $s=a+b+c+d$; the denominators become $s-d, s-a, s-b, s-c$. By the CauchySchwarz inequality,\n\n$$\n\\begin{aligned}\n& \\left(\\frac{|a-c|}{\\sqrt{s-d}} \\cdot \\sqrt{s-d}+\\frac{|b-d|}{\\sqrt{s-a}} \\cdot \\sqrt{s-a}+\\frac{|c-a|}{\\sqrt{s-b}} \\cdot \\sqrt{s-b}+\\frac{|d-b|}{\\sqrt{s-c}} \\cdot \\sqrt{s-c}\\right)^{2} \\\\\n& \\leq\\left(\\frac{(a-c)^{2}}{s-d}+\\frac{(b-d)^{2}}{s-a}+\\frac{(c-a)^{2}}{s-b}+\\frac{(d-b)^{2}}{s-c}\\right)(4 s-s)=3 s\\left(A^{\\prime}+B^{\\prime}+C^{\\prime}+D^{\\prime}\\right) .\n\\end{aligned}\n$$\n\nHence\n\n$$\nA^{\\prime}+B^{\\prime}+C^{\\prime}+D^{\\prime} \\geq \\frac{(2|a-c|+2|b-d|)^{2}}{3 s} \\geq \\frac{16 \\cdot|a-c| \\cdot|b-d|}{3 s} .\n$$\n\nNext we estimate the absolute value of the other sum. We couple $A^{\\prime \\prime}$ with $C^{\\prime \\prime}$ to obtain\n\n$$\n\\begin{aligned}\nA^{\\prime \\prime}+C^{\\prime \\prime} & =\\frac{(a-c)(a+c-2 b)}{s-d}+\\frac{(c-a)(c+a-2 d)}{s-b} \\\\\n& =\\frac{(a-c)(a+c-2 b)(s-b)+(c-a)(c+a-2 d)(s-d)}{(s-d)(s-b)} \\\\\n& =\\frac{(a-c)(-2 b(s-b)-b(a+c)+2 d(s-d)+d(a+c))}{s(a+c)+b d} \\\\\n& =\\frac{3(a-c)(d-b)(a+c)}{M}, \\quad \\text { with } \\quad M=s(a+c)+b d .\n\\end{aligned}\n$$\n\nHence by cyclic shift\n\n$$\nB^{\\prime \\prime}+D^{\\prime \\prime}=\\frac{3(b-d)(a-c)(b+d)}{N}, \\quad \\text { with } \\quad N=s(b+d)+c a .\n$$\n\nThus\n\n$$\nA^{\\prime \\prime}+B^{\\prime \\prime}+C^{\\prime \\prime}+D^{\\prime \\prime}=3(a-c)(b-d)\\left(\\frac{b+d}{N}-\\frac{a+c}{M}\\right)=\\frac{3(a-c)(b-d) W}{M N}\n$$\n\nwhere\n\n$$\nW=(b+d) M-(a+c) N=b d(b+d)-a c(a+c) .\n$$\n\nNote that\n\n$$\nM N>(a c(a+c)+b d(b+d)) s \\geq|W| \\cdot s .\n$$\n\nNow (2) and (4) yield\n\n$$\n\\left|A^{\\prime \\prime}+B^{\\prime \\prime}+C^{\\prime \\prime}+D^{\\prime \\prime}\\right| \\leq \\frac{3 \\cdot|a-c| \\cdot|b-d|}{s} .\n$$\n\nCombined with (1) this results in\n\n$$\n\\begin{aligned}\n2(A+B & +C+D)=\\left(A^{\\prime}+B^{\\prime}+C^{\\prime}+D^{\\prime}\\right)+\\left(A^{\\prime \\prime}+B^{\\prime \\prime}+C^{\\prime \\prime}+D^{\\prime \\prime}\\right) \\\\\n& \\geq \\frac{16 \\cdot|a-c| \\cdot|b-d|}{3 s}-\\frac{3 \\cdot|a-c| \\cdot|b-d|}{s}=\\frac{7 \\cdot|a-c| \\cdot|b-d|}{3(a+b+c+d)} \\geq 0 .\n\\end{aligned}\n$$\n\nThis is the required inequality. From the last line we see that equality can be achieved only if either $a=c$ or $b=d$. Since we also need equality in (1), this implies that actually $a=c$ and $b=d$ must hold simultaneously, which is obviously also a sufficient condition."
  },
  {
    "id": "fimo_2008_number_theory_p1",
    "enunciado": "Let $n$ be a positive integer and let $p$ be a prime number. Prove that if $a, b, c$ are integers (not necessarily positive) satisfying the equations\n\n$$\na^{n}+p b=b^{n}+p c=c^{n}+p a,\n$$\n\nthen $a=b=c$.",
    "solucao": "If two of $a, b, c$ are equal, it is immediate that all the three are equal. So we may assume that $a \\neq b \\neq c \\neq a$. Subtracting the equations we get $a^{n}-b^{n}=-p(b-c)$ and two cyclic copies of this equation, which upon multiplication yield\n\n$$\n\\frac{a^{n}-b^{n}}{a-b} \\cdot \\frac{b^{n}-c^{n}}{b-c} \\cdot \\frac{c^{n}-a^{n}}{c-a}=-p^{3} .\n$$\n\nIf $n$ is odd then the differences $a^{n}-b^{n}$ and $a-b$ have the same sign and the product on the left is positive, while $-p^{3}$ is negative. So $n$ must be even.\n\nLet $d$ be the greatest common divisor of the three differences $a-b, b-c, c-a$, so that $a-b=d u, b-c=d v, \\quad c-a=d w ; \\operatorname{gcd}(u, v, w)=1, \\quad u+v+w=0$.\n\nFrom $a^{n}-b^{n}=-p(b-c)$ we see that $(a-b) \\mid p(b-c)$, i.e., $u \\mid p v$; and cyclically $v|p w, w| p u$. As $\\operatorname{gcd}(u, v, w)=1$ and $u+v+w=0$, at most one of $u, v$, w can be divisible by $p$. Supposing that the prime $p$ does not divide any one of them, we get $u|v, v| w, w \\mid u$, whence $|u|=|v|=|w|=1$; but this quarrels with $u+v+w=0$.\n\nThus $p$ must divide exactly one of these numbers. Let e.g. $p \\mid u$ and write $u=p u_{1}$. Now we obtain, similarly as before, $u_{1}|v, v| w, w \\mid u_{1}$ so that $\\left|u_{1}\\right|=|v|=|w|=1$. The equation $p u_{1}+v+w=0$ forces that the prime $p$ must be even; i.e. $p=2$. Hence $v+w=-2 u_{1}=\\pm 2$, implying $v=w(=\\pm 1)$ and $u=-2 v$. Consequently $a-b=-2(b-c)$.\n\nKnowing that $n$ is even, say $n=2 k$, we rewrite the equation $a^{n}-b^{n}=-p(b-c)$ with $p=2$ in the form\n\n$$\n\\left(a^{k}+b^{k}\\right)\\left(a^{k}-b^{k}\\right)=-2(b-c)=a-b .\n$$\n\nThe second factor on the left is divisible by $a-b$, so the first factor $\\left(a^{k}+b^{k}\\right)$ must be $\\pm 1$. Then exactly one of $a$ and $b$ must be odd; yet $a-b=-2(b-c)$ is even. Contradiction ends the proof."
  },
  {
    "id": "fimo_2008_number_theory_p2",
    "enunciado": "Let $a_{1}, a_{2}, \\ldots, a_{n}$ be distinct positive integers, $n \\geq 3$. Prove that there exist distinct indices $i$ and $j$ such that $a_{i}+a_{j}$ does not divide any of the numbers $3 a_{1}, 3 a_{2}, \\ldots, 3 a_{n}$.",
    "solucao": "Without loss of generality, let $0<a_{1}<a_{2}<\\cdots<a_{n}$. One can also assume that $a_{1}, a_{2}, \\ldots, a_{n}$ are coprime. Otherwise division by their greatest common divisor reduces the question to the new sequence whose terms are coprime integers.\n\nSuppose that the claim is false. Then for each $i<n$ there exists a $j$ such that $a_{n}+a_{i}$ divides $3 a_{j}$. If $a_{n}+a_{i}$ is not divisible by 3 then $a_{n}+a_{i}$ divides $a_{j}$ which is impossible as $0<a_{j} \\leq a_{n}<a_{n}+a_{i}$. Thus $a_{n}+a_{i}$ is a multiple of 3 for $i=1, \\ldots, n-1$, so that $a_{1}, a_{2}, \\ldots, a_{n-1}$ are all congruent (to $\\left.-a_{n}\\right)$ modulo 3 .\n\nNow $a_{n}$ is not divisible by 3 or else so would be all remaining $a_{i}$ 's, meaning that $a_{1}, a_{2}, \\ldots, a_{n}$ are not coprime. Hence $a_{n} \\equiv r(\\bmod 3)$ where $r \\in\\{1,2\\}$, and $a_{i} \\equiv 3-r(\\bmod 3)$ for all $i=1, \\ldots, n-1$.\n\nConsider a sum $a_{n-1}+a_{i}$ where $1 \\leq i \\leq n-2$. There is at least one such sum as $n \\geq 3$. Let $j$ be an index such that $a_{n-1}+a_{i}$ divides $3 a_{j}$. Observe that $a_{n-1}+a_{i}$ is not divisible by 3 since $a_{n-1}+a_{i} \\equiv 2 a_{i} \\not \\equiv 0(\\bmod 3)$. It follows that $a_{n-1}+a_{i}$ divides $a_{j}$, in particular $a_{n-1}+a_{i} \\leq a_{j}$. Hence $a_{n-1}<a_{j} \\leq a_{n}$, implying $j=n$. So $a_{n}$ is divisible by all sums $a_{n-1}+a_{i}, 1 \\leq i \\leq n-2$. In particular $a_{n-1}+a_{i} \\leq a_{n}$ for $i=1, \\ldots, n-2$.\n\nLet $j$ be such that $a_{n}+a_{n-1}$ divides $3 a_{j}$. If $j \\leq n-2$ then $a_{n}+a_{n-1} \\leq 3 a_{j}<a_{j}+2 a_{n-1}$. This yields $a_{n}<a_{n-1}+a_{j}$; however $a_{n-1}+a_{j} \\leq a_{n}$ for $j \\leq n-2$. Therefore $j=n-1$ or $j=n$.\n\nFor $j=n-1$ we obtain $3 a_{n-1}=k\\left(a_{n}+a_{n-1}\\right)$ with $k$ an integer, and it is straightforward that $k=1\\left(k \\leq 0\\right.$ and $k \\geq 3$ contradict $0<a_{n-1}<a_{n} ; k=2$ leads to $\\left.a_{n-1}=2 a_{n}>a_{n-1}\\right)$. Thus $3 a_{n-1}=a_{n}+a_{n-1}$, i. e. $a_{n}=2 a_{n-1}$.\n\nSimilarly, if $j=n$ then $3 a_{n}=k\\left(a_{n}+a_{n-1}\\right)$ for some integer $k$, and only $k=2$ is possible. Hence $a_{n}=2 a_{n-1}$ holds true in both cases remaining, $j=n-1$ and $j=n$.\n\nNow $a_{n}=2 a_{n-1}$ implies that the sum $a_{n-1}+a_{1}$ is strictly between $a_{n} / 2$ and $a_{n}$. But $a_{n-1}$ and $a_{1}$ are distinct as $n \\geq 3$, so it follows from the above that $a_{n-1}+a_{1}$ divides $a_{n}$. This provides the desired contradiction."
  },
  {
    "id": "fimo_2008_number_theory_p3",
    "enunciado": "Let $a_{0}, a_{1}, a_{2}, \\ldots$ be a sequence of positive integers such that the greatest common divisor of any two consecutive terms is greater than the preceding term; in symbols, $\\operatorname{gcd}\\left(a_{i}, a_{i+1}\\right)>a_{i-1}$. Prove that $a_{n} \\geq 2^{n}$ for all $n \\geq 0$.\n",
    "solucao": "Since $a_{i} \\geq \\operatorname{gcd}\\left(a_{i}, a_{i+1}\\right)>a_{i-1}$, the sequence is strictly increasing. In particular $a_{0} \\geq 1, a_{1} \\geq 2$. For each $i \\geq 1$ we also have $a_{i+1}-a_{i} \\geq \\operatorname{gcd}\\left(a_{i}, a_{i+1}\\right)>a_{i-1}$, and consequently $a_{i+1} \\geq a_{i}+a_{i-1}+1$. Hence $a_{2} \\geq 4$ and $a_{3} \\geq 7$. The equality $a_{3}=7$ would force equalities in the previous estimates, leading to $\\operatorname{gcd}\\left(a_{2}, a_{3}\\right)=\\operatorname{gcd}(4,7)>a_{1}=2$, which is false. Thus $a_{3} \\geq 8$; the result is valid for $n=0,1,2,3$. These are the base cases for a proof by induction.\n\nTake an $n \\geq 3$ and assume that $a_{i} \\geq 2^{i}$ for $i=0,1, \\ldots, n$. We must show that $a_{n+1} \\geq 2^{n+1}$. Let $\\operatorname{gcd}\\left(a_{n}, a_{n+1}\\right)=d$. We know that $d>a_{n-1}$. The induction claim is reached immediately in the following cases:\n\n$$\n\\begin{aligned}\n& \\text { if } a_{n+1} \\geq 4 d \\text { then } a_{n+1}>4 a_{n-1} \\geq 4 \\cdot 2^{n-1}=2^{n+1} \\text {; } \\\\\n& \\text { if } a_{n} \\geq 3 d \\text { then } a_{n+1} \\geq a_{n}+d \\geq 4 d>4 a_{n-1} \\geq 4 \\cdot 2^{n-1}=2^{n+1} \\text {; } \\\\\n& \\text { if } a_{n}=d \\quad \\text { then } a_{n+1} \\geq a_{n}+d=2 a_{n} \\geq 2 \\cdot 2^{n}=2^{n+1} \\text {. }\n\\end{aligned}\n$$\n\nThe only remaining possibility is that $a_{n}=2 d$ and $a_{n+1}=3 d$, which we assume for the sequel. So $a_{n+1}=\\frac{3}{2} a_{n}$.\n\nLet now $\\operatorname{gcd}\\left(a_{n-1}, a_{n}\\right)=d^{\\prime}$; then $d^{\\prime}>a_{n-2}$. Write $a_{n}=m d^{\\prime} \\quad(m$ an integer). Keeping in mind that $d^{\\prime} \\leq a_{n-1}<d$ and $a_{n}=2 d$, we get that $m \\geq 3$. Also $a_{n-1}<d=\\frac{1}{2} m d^{\\prime}$, $a_{n+1}=\\frac{3}{2} m d^{\\prime}$. Again we single out the cases which imply the induction claim immediately:\n\n$$\n\\begin{aligned}\n& \\text { if } m \\geq 6 \\quad \\text { then } a_{n+1}=\\frac{3}{2} m d^{\\prime} \\geq 9 d^{\\prime}>9 a_{n-2} \\geq 9 \\cdot 2^{n-2}>2^{n+1} \\\\\n& \\text { if } 3 \\leq m \\leq 4 \\text { then } a_{n-1}<\\frac{1}{2} \\cdot 4 d^{\\prime}, \\text { and hence } a_{n-1}=d^{\\prime}, \\\\\n& a_{n+1}=\\frac{3}{2} m a_{n-1} \\geq \\frac{3}{2} \\cdot 3 a_{n-1} \\geq \\frac{9}{2} \\cdot 2^{n-1}>2^{n+1} .\n\\end{aligned}\n$$\n\nSo we are left with the case $m=5$, which means that $a_{n}=5 d^{\\prime}, a_{n+1}=\\frac{15}{2} d^{\\prime}, a_{n-1}<d=\\frac{5}{2} d^{\\prime}$. The last relation implies that $a_{n-1}$ is either $d^{\\prime}$ or $2 d^{\\prime}$. Anyway, $a_{n-1} \\mid 2 d^{\\prime}$.\n\nThe same pattern repeats once more. We denote $\\operatorname{gcd}\\left(a_{n-2}, a_{n-1}\\right)=d^{\\prime \\prime}$; then $d^{\\prime \\prime}>a_{n-3}$. Because $d^{\\prime \\prime}$ is a divisor of $a_{n-1}$, hence also of $2 d^{\\prime}$, we may write $2 d^{\\prime}=m^{\\prime} d^{\\prime \\prime} \\quad\\left(m^{\\prime}\\right.$ an integer). Since $d^{\\prime \\prime} \\leq a_{n-2}<d^{\\prime}$, we get $m^{\\prime} \\geq 3$. Also, $a_{n-2}<d^{\\prime}=\\frac{1}{2} m^{\\prime} d^{\\prime \\prime}, \\quad a_{n+1}=\\frac{15}{2} d^{\\prime}=\\frac{15}{4} m^{\\prime} d^{\\prime \\prime}$. As before, we consider the cases:\n\n$$\n\\begin{aligned}\n& \\text { if } m^{\\prime} \\geq 5 \\text { then } a_{n+1}=\\frac{15}{4} m^{\\prime} d^{\\prime \\prime} \\geq \\frac{75}{4} d^{\\prime \\prime}>\\frac{75}{4} a_{n-3} \\geq \\frac{75}{4} \\cdot 2^{n-3}>2^{n+1} \\\\\n& \\text { if } 3 \\leq m^{\\prime} \\leq 4 \\text { then } a_{n-2}<\\frac{1}{2} \\cdot 4 d^{\\prime \\prime} \\text {, and hence } a_{n-2}=d^{\\prime \\prime} \\\\\n& \\qquad a_{n+1}=\\frac{15}{4} m^{\\prime} a_{n-2} \\geq \\frac{15}{4} \\cdot 3 a_{n-2} \\geq \\frac{45}{4} \\cdot 2^{n-2}>2^{n+1} .\n\\end{aligned}\n$$\n\nBoth of them have produced the induction claim. But now there are no cases left. Induction is complete; the inequality $a_{n} \\geq 2^{n}$ holds for all $n$."
  },
  {
    "id": "fimo_2008_number_theory_p4",
    "enunciado": "Let $n$ be a positive integer. Show that the numbers\n\n$$\n\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n0\n\\end{array}\\right), \\quad\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n1\n\\end{array}\\right), \\quad\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2\n\\end{array}\\right), \\quad \\cdots, \\quad\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2^{n-1}-1\n\\end{array}\\right)\n$$\n\nare congruent modulo $2^{n}$ to $1,3,5, \\ldots, 2^{n}-1$ in some order.",
    "solucao": "It is well-known that all these numbers are odd. So the assertion that their remainders $\\left(\\bmod 2^{n}\\right)$ make up a permutation of $\\left\\{1,3, \\ldots, 2^{n}-1\\right\\}$ is equivalent just to saying that these remainders are all distinct. We begin by showing that\n\n$$\n\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2 k\n\\end{array}\\right)+\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2 k+1\n\\end{array}\\right) \\equiv 0 \\quad\\left(\\bmod 2^{n}\\right) \\quad \\text { and } \\quad\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2 k\n\\end{array}\\right) \\equiv(-1)^{k}\\left(\\begin{array}{c}\n2^{n-1}-1 \\\\\nk\n\\end{array}\\right) \\quad\\left(\\bmod 2^{n}\\right) .\n$$\n\nThe first relation is immediate, as the sum on the left is equal to $\\left(\\begin{array}{c}2^{n} \\\\ 2 k+1\\end{array}\\right)=\\frac{2^{n}}{2 k+1}\\left(\\begin{array}{c}2^{n}-1 \\\\ 2 k\\end{array}\\right)$, hence is divisible by $2^{n}$. The second relation:\n\n$$\n\\left(\\begin{array}{c}\n2^{n}-1 \\\\\n2 k\n\\end{array}\\right)=\\prod_{j=1}^{2 k} \\frac{2^{n}-j}{j}=\\prod_{i=1}^{k} \\frac{2^{n}-(2 i-1)}{2 i-1} \\cdot \\prod_{i=1}^{k} \\frac{2^{n-1}-i}{i} \\equiv(-1)^{k}\\left(\\begin{array}{c}\n2^{n-1}-1 \\\\\nk\n\\end{array}\\right) \\quad\\left(\\bmod 2^{n}\\right) .\n$$\n\nThis prepares ground for a proof of the required result by induction on $n$. The base case $n=1$ is obvious. Assume the assertion is true for $n-1$ and pass to $n$, denoting $a_{k}=\\left(c^{2^{n-1}-1} k^{-1}\\right.$, $b_{m}=\\left(\\begin{array}{c}2^{n}-1 \\\\ m\\end{array}\\right)$. The induction hypothesis is that all the numbers $a_{k}\\left(0 \\leq k<2^{n-2}\\right)$ are distinct $\\left(\\bmod 2^{n-1}\\right)$; the claim is that all the numbers $b_{m}\\left(0 \\leq m<2^{n-1}\\right)$ are distinct $\\left(\\bmod 2^{n}\\right)$.\n\nThe congruence relations $(1)$ are restated as\n\n$$\nb_{2 k} \\equiv(-1)^{k} a_{k} \\equiv-b_{2 k+1} \\quad\\left(\\bmod 2^{n}\\right) .\n$$\n\nShifting the exponent in the first relation of (1) from $n$ to $n-1$ we also have the congruence $a_{2 i+1} \\equiv-a_{2 i}\\left(\\bmod 2^{n-1}\\right)$. We hence conclude:\n\nIf, for some $j, k<2^{n-2}, a_{k} \\equiv-a_{j}\\left(\\bmod 2^{n-1}\\right)$, then $\\{j, k\\}=\\{2 i, 2 i+1\\}$ for some $i$.\n\nThis is so because in the sequence $\\left(a_{k}: k<2^{n-2}\\right)$ each term $a_{j}$ is complemented to $0\\left(\\bmod 2^{n-1}\\right)$ by only one other term $a_{k}$, according to the induction hypothesis.\n\nFrom (2) we see that $b_{4 i} \\equiv a_{2 i}$ and $b_{4 i+3} \\equiv a_{2 i+1}\\left(\\bmod 2^{n}\\right)$. Let\n\n$M=\\left\\{m: 0 \\leq m<2^{n-1}, m \\equiv 0\\right.$ or $\\left.3(\\bmod 4)\\right\\}, \\quad L=\\left\\{l: 0 \\leq l<2^{n-1}, l \\equiv 1\\right.$ or $\\left.2(\\bmod 4)\\right\\}$.\n\nThe last two congruences take on the unified form\n\n$$\nb_{m} \\equiv a_{\\lfloor m / 2\\rfloor} \\quad\\left(\\bmod 2^{n}\\right) \\quad \\text { for all } \\quad m \\in M .\n$$\n\nThus all the numbers $b_{m}$ for $m \\in M$ are distinct $\\left(\\bmod 2^{n}\\right.$ ) because so are the numbers $a_{k}$ (they are distinct $\\left(\\bmod 2^{n-1}\\right)$, hence also $\\left.\\left(\\bmod 2^{n}\\right)\\right)$.\n\nEvery $l \\in L$ is paired with a unique $m \\in M$ into a pair of the form $\\{2 k, 2 k+1\\}$. So (2) implies that also all the $b_{l}$ for $l \\in L$ are distinct $\\left(\\bmod 2^{n}\\right)$. It remains to eliminate the possibility that $b_{m} \\equiv b_{l}\\left(\\bmod 2^{n}\\right)$ for some $m \\in M, l \\in L$.\n\nSuppose that such a situation occurs. Let $m^{\\prime} \\in M$ be such that $\\left\\{m^{\\prime}, l\\right\\}$ is a pair of the form $\\{2 k, 2 k+1\\}$, so that $($ see $(2)) \\quad b_{m^{\\prime}} \\equiv-b_{l}\\left(\\bmod 2^{n}\\right)$. Hence $b_{m^{\\prime}} \\equiv-b_{m}\\left(\\bmod 2^{n}\\right)$. Since both $m^{\\prime}$ and $m$ are in $M$, we have by (4) $b_{m^{\\prime}} \\equiv a_{j}, b_{m} \\equiv a_{k}\\left(\\bmod 2^{n}\\right)$ for $j=\\left\\lfloor m^{\\prime} / 2\\right\\rfloor, k=\\lfloor m / 2\\rfloor$.\n\nThen $a_{j} \\equiv-a_{k}\\left(\\bmod 2^{n}\\right)$. Thus, according to $(3), j=2 i, k=2 i+1$ for some $i$ (or vice versa). The equality $a_{2 i+1} \\equiv-a_{2 i}\\left(\\bmod 2^{n}\\right)$ now means that $\\left(\\begin{array}{c}2^{n-1}-1 \\\\ 2 i\\end{array}\\right)+\\left(\\begin{array}{c}2^{n-1}-1 \\\\ 2 i+1\\end{array}\\right) \\equiv 0\\left(\\bmod 2^{n}\\right)$. However, the sum on the left is equal to $\\left(\\begin{array}{l}2^{n-1} \\\\ 2 i+1\\end{array}\\right)$. A number of this form cannot be divisible by $2^{n}$. This is a contradiction which concludes the induction step and proves the result."
  },
  {
    "id": "fimo_2008_number_theory_p5",
    "enunciado": "For every $n \\in \\mathbb{N}$ let $d(n)$ denote the number of (positive) divisors of $n$. Find all functions $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ with the following properties:\n\n(i) $d(f(x))=x$ for all $x \\in \\mathbb{N}$;\n\n(ii) $f(x y)$ divides $(x-1) y^{x y-1} f(x)$ for all $x, y \\in \\mathbb{N}$.\n\nThe final answer is the function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ defined by $f(1)=1$ and\n\n$$\nf(n)=p_{1}^{p_{1}^{a_{1}}-1} p_{2}^{p_{2}^{a_{2}}-1} \\cdots p_{k}^{p_{k}^{a_{k}}-1} \\text { where } n=p_{1}^{a_{1}} p_{2}^{a_{2}} \\cdots p_{k}^{a_{k}} \\text { is the prime factorization of } n>1 \\text {. }\n$$",
    "solucao": "There is a unique solution: the function $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ defined by $f(1)=1$ and\n\n$$\nf(n)=p_{1}^{p_{1}^{a_{1}}-1} p_{2}^{p_{2}^{a_{2}}-1} \\cdots p_{k}^{p_{k}^{a_{k}}-1} \\text { where } n=p_{1}^{a_{1}} p_{2}^{a_{2}} \\cdots p_{k}^{a_{k}} \\text { is the prime factorization of } n>1 \\text {. }\n$$\n\nDirect verification shows that this function meets the requirements.\n\nConversely, let $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ satisfy (i) and (ii). Applying (i) for $x=1$ gives $d(f(1))=1$, so $f(1)=1$. In the sequel we prove that (1) holds for all $n>1$. Notice that $f(m)=f(n)$ implies $m=n$ in view of (i). The formula $d\\left(p_{1}^{b_{1}} \\cdots p_{k}^{b_{k}}\\right)=\\left(b_{1}+1\\right) \\cdots\\left(b_{k}+1\\right)$ will be used throughout.\n\nLet $p$ be a prime. Since $d(f(p))=p$, the formula just mentioned yields $f(p)=q^{p-1}$ for some prime $q$; in particular $f(2)=q^{2-1}=q$ is a prime. We prove that $f(p)=p^{p-1}$ for all primes $p$.\n\nSuppose that $p$ is odd and $f(p)=q^{p-1}$ for a prime $q$. Applying (ii) first with $x=2$, $y=p$ and then with $x=p, y=2$ shows that $f(2 p)$ divides both $(2-1) p^{2 p-1} f(2)=p^{2 p-1} f(2)$ and $(p-1) 2^{2 p-1} f(p)=(p-1) 2^{2 p-1} q^{p-1}$. If $q \\neq p$ then the odd prime $p$ does not divide $(p-1) 2^{2 p-1} q^{p-1}$, hence the greatest common divisor of $p^{2 p-1} f(2)$ and $(p-1) 2^{2 p-1} q^{p-1}$ is a divisor of $f(2)$. Thus $f(2 p)$ divides $f(2)$ which is a prime. As $f(2 p)>1$, we obtain $f(2 p)=f(2)$ which is impossible. So $q=p$, i. e. $f(p)=p^{p-1}$.\n\nFor $p=2$ the same argument with $x=2, y=3$ and $x=3, y=2$ shows that $f(6)$ divides both $3^{5} f(2)$ and $2^{6} f(3)=2^{6} 3^{2}$. If the prime $f(2)$ is odd then $f(6)$ divides $3^{2}=9$, so $f(6) \\in\\{1,3,9\\}$. However then $6=d(f(6)) \\in\\{d(1), d(3), d(9)\\}=\\{1,2,3\\}$ which is false. In conclusion $f(2)=2$.\n\nNext, for each $n>1$ the prime divisors of $f(n)$ are among the ones of $n$. Indeed, let $p$ be the least prime divisor of $n$. Apply (ii) with $x=p$ and $y=n / p$ to obtain that $f(n)$ divides $(p-1) y^{n-1} f(p)=(p-1) y^{n-1} p^{p-1}$. Write $f(n)=\\ell P$ where $\\ell$ is coprime to $n$ and $P$ is a product of primes dividing $n$. Since $\\ell$ divides $(p-1) y^{n-1} p^{p-1}$ and is coprime to $y^{n-1} p^{p-1}$, it divides $p-1$; hence $d(\\ell) \\leq \\ell<p$. But (i) gives $n=d(f(n))=d(\\ell P)$, and $d(\\ell P)=d(\\ell) d(P)$ as $\\ell$ and $P$ are coprime. Therefore $d(\\ell)$ is a divisor of $n$ less than $p$, meaning that $\\ell=1$ and proving the claim.\n\nNow (1) is immediate for prime powers. If $p$ is a prime and $a \\geq 1$, by the above the only prime factor of $f\\left(p^{a}\\right)$ is $p$ (a prime factor does exist as $f\\left(p^{a}\\right)>1$ ). So $f\\left(p^{a}\\right)=p^{b}$ for some $b \\geq 1$, and (i) yields $p^{a}=d\\left(f\\left(p^{a}\\right)\\right)=d\\left(p^{b}\\right)=b+1$. Hence $f\\left(p^{a}\\right)=p^{p^{a}-1}$, as needed.\n\nLet us finally show that (1) is true for a general $n>1$ with prime factorization $n=p_{1}^{a_{1}} \\cdots p_{k}^{a_{k}}$. We saw that the prime factorization of $f(n)$ has the form $f(n)=p_{1}^{b_{1}} \\cdots p_{k}^{b_{k}}$. For $i=1, \\ldots, k$, set $x=p_{i}^{a_{i}}$ and $y=n / x$ in (ii) to infer that $f(n)$ divides $\\left(p_{i}^{a_{i}}-1\\right) y^{n-1} f\\left(p_{i}^{a_{i}}\\right)$. Hence $p_{i}^{b_{i}}$ divides $\\left(p_{i}^{a_{i}}-1\\right) y^{n-1} f\\left(p_{i}^{a_{i}}\\right)$, and because $p_{i}^{b_{i}}$ is coprime to $\\left(p_{i}^{a_{i}}-1\\right) y^{n-1}$, it follows that $p_{i}^{b_{i}}$ divides $f\\left(p_{i}^{a_{i}}\\right)=p_{i}^{p_{i}{ }_{i}-1}$. So $b_{i} \\leq p_{i}^{a_{i}}-1$ for all $i=1, \\ldots, k$. Combined with (i), these conclusions imply\n\n$$\np_{1}^{a_{1}} \\cdots p_{k}^{a_{k}}=n=d(f(n))=d\\left(p_{1}^{b_{1}} \\cdots p_{k}^{b_{k}}\\right)=\\left(b_{1}+1\\right) \\cdots\\left(b_{k}+1\\right) \\leq p_{1}^{a_{1}} \\cdots p_{k}^{a_{k}} .\n$$\n\nHence all inequalities $b_{i} \\leq p_{i}^{a_{i}}-1$ must be equalities, $i=1, \\ldots, k$, implying that (1) holds true. The proof is complete."
  },
  {
    "id": "fimo_2008_number_theory_p6",
    "enunciado": "Prove that there exist infinitely many positive integers $n$ such that $n^{2}+1$ has a prime divisor greater than $2 n+\\sqrt{2 n}$.",
    "solucao": "Let $p \\equiv 1(\\bmod 8)$ be a prime. The congruence $x^{2} \\equiv-1(\\bmod p)$ has two solutions in $[1, p-1]$ whose sum is $p$. If $n$ is the smaller one of them then $p$ divides $n^{2}+1$ and $n \\leq(p-1) / 2$. We show that $p>2 n+\\sqrt{10 n}$.\n\nLet $n=(p-1) / 2-\\ell$ where $\\ell \\geq 0$. Then $n^{2} \\equiv-1(\\bmod p)$ gives\n\n$$\n\\left(\\frac{p-1}{2}-\\ell\\right)^{2} \\equiv-1 \\quad(\\bmod p) \\quad \\text { or } \\quad(2 \\ell+1)^{2}+4 \\equiv 0 \\quad(\\bmod p)\n$$\n\nThus $(2 \\ell+1)^{2}+4=r p$ for some $r \\geq 0$. As $(2 \\ell+1)^{2} \\equiv 1 \\equiv p(\\bmod 8)$, we have $r \\equiv 5(\\bmod 8)$, so that $r \\geq 5$. Hence $(2 \\ell+1)^{2}+4 \\geq 5 p$, implying $\\ell \\geq(\\sqrt{5 p-4}-1) / 2$. Set $\\sqrt{5 p-4}=u$ for clarity; then $\\ell \\geq(u-1) / 2$. Therefore\n\n$$\nn=\\frac{p-1}{2}-\\ell \\leq \\frac{1}{2}(p-u) .\n$$\n\nCombined with $p=\\left(u^{2}+4\\right) / 5$, this leads to $u^{2}-5 u-10 n+4 \\geq 0$. Solving this quadratic inequality with respect to $u \\geq 0$ gives $u \\geq(5+\\sqrt{40 n+9}) / 2$. So the estimate $n \\leq(p-u) / 2$ leads to\n\n$$\np \\geq 2 n+u \\geq 2 n+\\frac{1}{2}(5+\\sqrt{40 n+9})>2 n+\\sqrt{10 n} .\n$$\n\nSince there are infinitely many primes of the form $8 k+1$, it follows easily that there are also infinitely many $n$ with the stated property."
  },
  {
    "id": "fimo_2009_algebra_p1",
    "enunciado": "Find the largest possible integer $k$, such that the following statement is true:\n\nLet 2009 arbitrary non-degenerated triangles be given. In every triangle the three sides are colored, such that one is blue, one is red and one is white. Now, for every color separately, let us sort the lengths of the sides. We obtain\n\n$$\n\\begin{aligned}\n& b_{1} \\leq b_{2} \\leq \\ldots \\leq b_{2009} \\quad \\text { the lengths of the blue sides, } \\\\\n& r_{1} \\leq r_{2} \\leq \\ldots \\leq r_{2009} \\quad \\text { the lengths of the red sides, } \\\\\n& \\text { and } \\quad w_{1} \\leq w_{2} \\leq \\ldots \\leq w_{2009} \\quad \\text { the lengths of the white sides. }\n\\end{aligned}\n$$\n\nThen there exist $k$ indices $j$ such that we can form a non-degenerated triangle with side lengths $b_{j}, r_{j}, w_{j}$\n\nThe final answer is that the largest possible number $k$ of indices satisfying the given condition is one.",
    "solucao": "We will prove that the largest possible number $k$ of indices satisfying the given condition is one.\n\nFirstly we prove that $b_{2009}, r_{2009}, w_{2009}$ are always lengths of the sides of a triangle. Without loss of generality we may assume that $w_{2009} \\geq r_{2009} \\geq b_{2009}$. We show that the inequality $b_{2009}+r_{2009}>w_{2009}$ holds. Evidently, there exists a triangle with side lengths $w, b, r$ for the white, blue and red side, respectively, such that $w_{2009}=w$. By the conditions of the problem we have $b+r>w, b_{2009} \\geq b$ and $r_{2009} \\geq r$. From these inequalities it follows\n\n$$\nb_{2009}+r_{2009} \\geq b+r>w=w_{2009} \\text {. }\n$$\n\nSecondly we will describe a sequence of triangles for which $w_{j}, b_{j}, r_{j}$ with $j<2009$ are not the lengths of the sides of a triangle. Let us define the sequence $\\Delta_{j}, j=1,2, \\ldots, 2009$, of triangles, where $\\Delta_{j}$ has\n\na blue side of length $2 j$,\n\na red side of length $j$ for all $j \\leq 2008$ and 4018 for $j=2009$,\n\nand a white side of length $j+1$ for all $j \\leq 2007,4018$ for $j=2008$ and 1 for $j=2009$. Since\n\n$$\n\\begin{aligned}\n& (j+1)+j>2 j \\geq j+1>j, \\quad \\text { if } \\quad j \\leq 2007 \\text {, } \\\\\n& 2 j+j>4018>2 j>j, \\quad \\text { if } j=2008 \\text {, } \\\\\n& 4018+1>2 j=4018>1, \\quad \\text { if } \\quad j=2009 \\text {, }\n\\end{aligned}\n$$\n\nsuch a sequence of triangles exists. Moreover, $w_{j}=j, r_{j}=j$ and $b_{j}=2 j$ for $1 \\leq j \\leq 2008$. Then\n\n$$\nw_{j}+r_{j}=j+j=2 j=b_{j},\n$$\n\ni.e., $b_{j}, r_{j}$ and $w_{j}$ are not the lengths of the sides of a triangle for $1 \\leq j \\leq 2008$."
  },
  {
    "id": "fimo_2009_algebra_p2",
    "enunciado": "Let $a, b, c$ be positive real numbers such that $\\frac{1}{a}+\\frac{1}{b}+\\frac{1}{c}=a+b+c$. Prove that\n\n$$\n\\frac{1}{(2 a+b+c)^{2}}+\\frac{1}{(2 b+c+a)^{2}}+\\frac{1}{(2 c+a+b)^{2}} \\leq \\frac{3}{16} .\n$$",
    "solucao": "For positive real numbers $x, y, z$, from the arithmetic-geometric-mean inequality,\n\n$$\n2 x+y+z=(x+y)+(x+z) \\geq 2 \\sqrt{(x+y)(x+z)},\n$$\n\nwe obtain\n\n$$\n\\frac{1}{(2 x+y+z)^{2}} \\leq \\frac{1}{4(x+y)(x+z)} .\n$$\n\nApplying this to the left-hand side terms of the inequality to prove, we get\n\n$$\n\\begin{aligned}\n\\frac{1}{(2 a+b+c)^{2}} & +\\frac{1}{(2 b+c+a)^{2}}+\\frac{1}{(2 c+a+b)^{2}} \\\\\n& \\leq \\frac{1}{4(a+b)(a+c)}+\\frac{1}{4(b+c)(b+a)}+\\frac{1}{4(c+a)(c+b)} \\\\\n& =\\frac{(b+c)+(c+a)+(a+b)}{4(a+b)(b+c)(c+a)}=\\frac{a+b+c}{2(a+b)(b+c)(c+a)} .\n\\end{aligned}\n$$\n\nA second application of the inequality of the arithmetic-geometric mean yields\n\n$$\na^{2} b+a^{2} c+b^{2} a+b^{2} c+c^{2} a+c^{2} b \\geq 6 a b c,\n$$\n\nor, equivalently,\n\n$$\n9(a+b)(b+c)(c+a) \\geq 8(a+b+c)(a b+b c+c a) .\n$$\n\nThe supposition $\\frac{1}{a}+\\frac{1}{b}+\\frac{1}{c}=a+b+c$ can be written as\n\n$$\na b+b c+c a=a b c(a+b+c) .\n$$\n\nApplying the arithmetic-geometric-mean inequality $x^{2} y^{2}+x^{2} z^{2} \\geq 2 x^{2} y z$ thrice, we get\n\n$$\na^{2} b^{2}+b^{2} c^{2}+c^{2} a^{2} \\geq a^{2} b c+a b^{2} c+a b c^{2},\n$$\n\nwhich is equivalent to\n\n$$\n(a b+b c+c a)^{2} \\geq 3 a b c(a+b+c) .\n$$\n\nCombining (1), (2), (3), and (4), we will finish the proof:\n\n$$\n\\begin{aligned}\n\\frac{a+b+c}{2(a+b)(b+c)(c+a)} & =\\frac{(a+b+c)(a b+b c+c a)}{2(a+b)(b+c)(c+a)} \\cdot \\frac{a b+b c+c a}{a b c(a+b+c)} \\cdot \\frac{a b c(a+b+c)}{(a b+b c+c a)^{2}} \\\\\n& \\leq \\frac{9}{2 \\cdot 8} \\cdot 1 \\cdot \\frac{1}{3}=\\frac{3}{16} .\n\\end{aligned}\n$$"
  },
  {
    "id": "fimo_2009_algebra_p3",
    "enunciado": "Determine all functions $f$ from the set of positive integers into the set of positive integers such that for all $x$ and $y$ there exists a non degenerated triangle with sides of lengths\n\n$$\nx, \\quad f(y) \\text { and } f(y+f(x)-1) .\n$$\n\nThe final answer is the identity function $f(x)=x$.",
    "solucao": "The identity function $f(x)=x$ is the only solution of the problem.\n\nIf $f(x)=x$ for all positive integers $x$, the given three lengths are $x, y=f(y)$ and $z=$ $f(y+f(x)-1)=x+y-1$. Because of $x \\geq 1, y \\geq 1$ we have $z \\geq \\max \\{x, y\\}>|x-y|$ and $z<x+y$. From this it follows that a triangle with these side lengths exists and does not degenerate. We prove in several steps that there is no other solution.\n\nStep 1. We show $f(1)=1$\n\nIf we had $f(1)=1+m>1$ we would conclude $f(y)=f(y+m)$ for all $y$ considering the triangle with the side lengths $1, f(y)$ and $f(y+m)$. Thus, $f$ would be $m$-periodic and, consequently, bounded. Let $B$ be a bound, $f(x) \\leq B$. If we choose $x>2 B$ we obtain the contradiction $x>2 B \\geq f(y)+f(y+f(x)-1)$.\n\nStep 2. For all positive integers $z$, we have $f(f(z))=z$.\n\nSetting $x=z$ and $y=1$ this follows immediately from Step 1.\n\nStep 3. For all integers $z \\geq 1$, we have $f(z) \\leq z$.\n\nLet us show, that the contrary leads to a contradiction. Assume $w+1=f(z)>z$ for some $z$. From Step 1 we know that $w \\geq z \\geq 2$. Let $M=\\max \\{f(1), f(2), \\ldots, f(w)\\}$ be the largest value of $f$ for the first $w$ integers. First we show, that no positive integer $t$ exists with\n\n$$\nf(t)>\\frac{z-1}{w} \\cdot t+M\n$$\n\notherwise we decompose the smallest value $t$ as $t=w r+s$ where $r$ is an integer and $1 \\leq s \\leq w$. Because of the definition of $M$, we have $t>w$. Setting $x=z$ and $y=t-w$ we get from the triangle inequality\n\n$$\nz+f(t-w)>f((t-w)+f(z)-1)=f(t-w+w)=f(t) .\n$$\n\nHence,\n\n$$\nf(t-w) \\geq f(t)-(z-1)>\\frac{z-1}{w}(t-w)+M,\n$$\n\na contradiction to the minimality of $t$.\n\nTherefore the inequality (1) fails for all $t \\geq 1$, we have proven\n\n$$\nf(t) \\leq \\frac{z-1}{w} \\cdot t+M\n$$\n\ninstead. Now, using (2), we finish the proof of Step 3. Because of $z \\leq w$ we have $\\frac{z-1}{w}<1$ and we can choose an integer $t$ sufficiently large to fulfill the condition\n\n$$\n\\left(\\frac{z-1}{w}\\right)^{2} t+\\left(\\frac{z-1}{w}+1\\right) M<t\n$$\n\nApplying (2) twice we get\n\n$$\nf(f(t)) \\leq \\frac{z-1}{w} f(t)+M \\leq \\frac{z-1}{w}\\left(\\frac{z-1}{w} t+M\\right)+M<t\n$$\n\nin contradiction to Step 2, which proves Step 3.\n\nFinal step. Thus, following Step 2 and Step 3, we obtain\n\n$$\nz=f(f(z)) \\leq f(z) \\leq z\n$$\n\nand $f(z)=z$ for all positive integers $z$ is proven."
  },
  {
    "id": "fimo_2009_algebra_p4",
    "enunciado": "Let $a, b, c$ be positive real numbers such that $a b+b c+c a \\leq 3 a b c$. Prove that\n\n$$\n\\sqrt{\\frac{a^{2}+b^{2}}{a+b}}+\\sqrt{\\frac{b^{2}+c^{2}}{b+c}}+\\sqrt{\\frac{c^{2}+a^{2}}{c+a}}+3 \\leq \\sqrt{2}(\\sqrt{a+b}+\\sqrt{b+c}+\\sqrt{c+a}) .\n$$",
    "solucao": "Starting with the terms of the right-hand side, the quadratic-arithmetic-mean inequality yields\n\n$$\n\\begin{aligned}\n\\sqrt{2} \\sqrt{a+b} & =2 \\sqrt{\\frac{a b}{a+b}} \\sqrt{\\frac{1}{2}\\left(2+\\frac{a^{2}+b^{2}}{a b}\\right)} \\\\\n& \\geq 2 \\sqrt{\\frac{a b}{a+b}} \\cdot \\frac{1}{2}\\left(\\sqrt{2}+\\sqrt{\\frac{a^{2}+b^{2}}{a b}}\\right)=\\sqrt{\\frac{2 a b}{a+b}}+\\sqrt{\\frac{a^{2}+b^{2}}{a+b}}\n\\end{aligned}\n$$\n\nand, analogously,\n\n$$\n\\sqrt{2} \\sqrt{b+c} \\geq \\sqrt{\\frac{2 b c}{b+c}}+\\sqrt{\\frac{b^{2}+c^{2}}{b+c}}, \\quad \\sqrt{2} \\sqrt{c+a} \\geq \\sqrt{\\frac{2 c a}{c+a}}+\\sqrt{\\frac{c^{2}+a^{2}}{c+a}} .\n$$\n\nApplying the inequality between the arithmetic mean and the squared harmonic mean will finish the proof:\n\n$$\n\\sqrt{\\frac{2 a b}{a+b}}+\\sqrt{\\frac{2 b c}{b+c}}+\\sqrt{\\frac{2 c a}{c+a}} \\geq 3 \\cdot \\sqrt{\\frac{3}{\\sqrt{\\frac{a+b}{2 a b}}^2+\\sqrt{\\frac{b+c}{2 b c}}^2+\\sqrt{\\frac{c+a}{2 c a}}^2}}=3 \\cdot \\sqrt{\\frac{3 a b c}{a b+b c+c a}} \\geq 3\n$$"
  },
  {
    "id": "fimo_2009_algebra_p5",
    "enunciado": "Let $f$ be any function that maps the set of real numbers into the set of real numbers. Prove that there exist real numbers $x$ and $y$ such that\n\n$$\nf(x-f(y))>y f(x)+x .\n$$",
    "solucao": "Assume that\n\n$$\nf(x-f(y)) \\leq y f(x)+x \\quad \\text { for all real } x, y\n$$\n\nLet $a=f(0)$. Setting $y=0$ in (1) gives $f(x-a) \\leq x$ for all real $x$ and, equivalently,\n\n$$\nf(y) \\leq y+a \\quad \\text { for all real } y .\n$$\n\nSetting $x=f(y)$ in (1) yields in view of $(2)$\n\n$$\na=f(0) \\leq y f(f(y))+f(y) \\leq y f(f(y))+y+a .\n$$\n\nThis implies $0 \\leq y(f(f(y))+1)$ and thus\n\n$$\nf(f(y)) \\geq-1 \\text { for all } y>0 .\n$$\n\nFrom (2) and (3) we obtain $-1 \\leq f(f(y)) \\leq f(y)+a$ for all $y>0$, so\n\n$$\nf(y) \\geq-a-1 \\quad \\text { for all } y>0 .\n$$\n\nNow we show that\n\n$$\nf(x) \\leq 0 \\quad \\text { for all real } x\n$$\n\nAssume the contrary, i.e. there is some $x$ such that $f(x)>0$. Take any $y$ such that\n\n$$\ny<x-a \\quad \\text { and } \\quad y<\\frac{-a-x-1}{f(x)} .\n$$\n\nThen in view of 2\n\n$$\nx-f(y) \\geq x-(y+a)>0\n$$\n\nand with (1) and (4) we obtain\n\n$$\ny f(x)+x \\geq f(x-f(y)) \\geq-a-1,\n$$\n\nwhence\n\n$$\ny \\geq \\frac{-a-x-1}{f(x)}\n$$\n\ncontrary to our choice of $y$. Thereby, we have established (5).\n\nSetting $x=0$ in (5) leads to $a=f(0) \\leq 0$ and (2) then yields\n\n$$\nf(x) \\leq x \\quad \\text { for all real } x\n$$\n\nNow choose $y$ such that $y>0$ and $y>-f(-1)-1$ and set $x=f(y)-1$. From (1), (5) and (6) we obtain\n\n$$\nf(-1)=f(x-f(y)) \\leq y f(x)+x=y f(f(y)-1)+f(y)-1 \\leq y(f(y)-1)-1 \\leq-y-1,\n$$\n\ni.e. $y \\leq-f(-1)-1$, a contradiction to the choice of $y$."
  },
  {
    "id": "fimo_2009_algebra_p6",
    "enunciado": "Suppose that $s_{1}, s_{2}, s_{3}, \\ldots$ is a strictly increasing sequence of positive integers such that the subsequences\n\n$$\ns_{s_{1}}, s_{s_{2}}, s_{s_{3}}, \\ldots \\quad \\text { and } \\quad s_{s_{1}+1}, s_{s_{2}+1}, s_{s_{3}+1}, \\ldots\n$$\n\nare both arithmetic progressions. Prove that $s_{1}, s_{2}, s_{3}, \\ldots$ is itself an arithmetic progression.",
    "solucao": "Let $D$ be the common difference of the progression $s_{s_{1}}, s_{s_{2}}, \\ldots$. Let for $n=$ $1,2, \\ldots$\n\n$$\nd_{n}=s_{n+1}-s_{n} .\n$$\n\nWe have to prove that $d_{n}$ is constant. First we show that the numbers $d_{n}$ are bounded. Indeed, by supposition $d_{n} \\geq 1$ for all $n$. Thus, we have for all $n$\n\n$$\nd_{n}=s_{n+1}-s_{n} \\leq d_{s_{n}}+d_{s_{n}+1}+\\cdots+d_{s_{n+1}-1}=s_{s_{n+1}}-s_{s_{n}}=D .\n$$\n\nThe boundedness implies that there exist\n\n$$\nm=\\min \\left\\{d_{n}: n=1,2, \\ldots\\right\\} \\quad \\text { and } \\quad M=\\max \\left\\{d_{n}: n=1,2, \\ldots\\right\\} .\n$$\n\nIt suffices to show that $m=M$. Assume that $m<M$. Choose $n$ such that $d_{n}=m$. Considering a telescoping sum of $m=d_{n}=s_{n+1}-s_{n}$ items not greater than $M$ leads to\n\n$$\nD=s_{s_{n+1}}-s_{s_{n}}=s_{s_{n}+m}-s_{s_{n}}=d_{s_{n}}+d_{s_{n}+1}+\\cdots+d_{s_{n}+m-1} \\leq m M\n$$\n\nand equality holds if and only if all items of the sum are equal to $M$. Now choose $n$ such that $d_{n}=M$. In the same way, considering a telescoping sum of $M$ items not less than $m$ we obtain\n\n$$\nD=s_{s_{n+1}}-s_{s_{n}}=s_{s_{n}+M}-s_{s_{n}}=d_{s_{n}}+d_{s_{n}+1}+\\cdots+d_{s_{n}+M-1} \\geq M m\n$$\n\nand equality holds if and only if all items of the sum are equal to $m$. The inequalities (1) and (2) imply that $D=M m$ and that\n\n$$\n\\begin{aligned}\nd_{s_{n}}=d_{s_{n}+1}=\\cdots=d_{s_{n+1}-1}=M & \\text { if } d_{n}=m \\\\\nd_{s_{n}}=d_{s_{n}+1}=\\cdots=d_{s_{n+1}-1}=m & \\text { if } d_{n}=M\n\\end{aligned}\n$$\n\nHence, $d_{n}=m$ implies $d_{s_{n}}=M$. Note that $s_{n} \\geq s_{1}+(n-1) \\geq n$ for all $n$ and moreover $s_{n}>n$ if $d_{n}=n$, because in the case $s_{n}=n$ we would have $m=d_{n}=d_{s_{n}}=M$ in contradiction to the assumption $m<M$. In the same way $d_{n}=M$ implies $d_{s_{n}}=m$ and $s_{n}>n$. Consequently, there is a strictly increasing sequence $n_{1}, n_{2}, \\ldots$ such that\n\n$$\nd_{s_{n_{1}}}=M, \\quad d_{s_{n_{2}}}=m, \\quad d_{s_{n_{3}}}=M, \\quad d_{s_{n_{4}}}=m, \\quad \\ldots\n$$\n\nThe sequence $d_{s_{1}}, d_{s_{2}}, \\ldots$ is the sequence of pairwise differences of $s_{s_{1}+1}, s_{s_{2}+1}, \\ldots$ and $s_{s_{1}}, s_{s_{2}}, \\ldots$, hence also an arithmetic progression. Thus $m=M$."
  },
  {
    "id": "fimo_2009_algebra_p7",
    "enunciado": "Find all functions $f$ from the set of real numbers into the set of real numbers which satisfy for all real $x, y$ the identity\n\n$$\nf(x f(x+y))=f(y f(x))+x^{2} .\n$$\n\nThe final answers are $f(x)=x$ and $f(x)=-x$.",
    "solucao": "It is no hard to see that the two functions given by $f(x)=x$ and $f(x)=-x$ for all real $x$ respectively solve the functional equation. In the sequel, we prove that there are no further solutions.\n\nLet $f$ be a function satisfying the given equation. It is clear that $f$ cannot be a constant. Let us first show that $f(0)=0$. Suppose that $f(0) \\neq 0$. For any real $t$, substituting $(x, y)=\\left(0, \\frac{t}{f(0)}\\right)$ into the given functional equation, we obtain\n\n$$\nf(0)=f(t),\n$$\n\ncontradicting the fact that $f$ is not a constant function. Therefore, $f(0)=0$. Next for any $t$, substituting $(x, y)=(t, 0)$ and $(x, y)=(t,-t)$ into the given equation, we get\n\n$$\nf(t f(t))=f(0)+t^{2}=t^{2},\n$$\n\nand\n\n$$\nf(t f(0))=f(-t f(t))+t^{2},\n$$\n\nrespectively. Therefore, we conclude that\n\n$$\nf(t f(t))=t^{2}, \\quad f(-t f(t))=-t^{2}, \\quad \\text { for every real } t .\n$$\n\nConsequently, for every real $v$, there exists a real $u$, such that $f(u)=v$. We also see that if $f(t)=0$, then $0=f(t f(t))=t^{2}$ so that $t=0$, and thus 0 is the only real number satisfying $f(t)=0$.\n\nWe next show that for any real number $s$,\n\n$$\nf(-s)=-f(s) .\n$$\n\nThis is clear if $f(s)=0$. Suppose now $f(s)<0$, then we can find a number $t$ for which $f(s)=-t^{2}$. As $t \\neq 0$ implies $f(t) \\neq 0$, we can also find number a such that af $(t)=s$. Substituting $(x, y)=(t, a)$ into the given equation, we get\n\n$$\nf(t f(t+a))=f(a f(t))+t^{2}=f(s)+t^{2}=0,\n$$\n\nand therefore, $t f(t+a)=0$, which implies $t+a=0$, and hence $s=-t f(t)$. Consequently, $f(-s)=f(t f(t))=t^{2}=-\\left(-t^{2}\\right)=-f(s)$ holds in this case.\n\nFinally, suppose $f(s)>0$ holds. Then there exists a real number $t \\neq 0$ for which $f(s)=t^{2}$. Choose a number $a$ such that $t f(a)=s$. Substituting $(x, y)=(t, a-t)$ into the given equation, we get $f(s)=f(t f(a))=f((a-t) f(t))+t^{2}=f((a-t) f(t))+f(s)$. So we have $f((a-t) f(t))=0$, from which we conclude that $(a-t) f(t)=0$. Since $f(t) \\neq 0$, we get $a=t$ so that $s=t f(t)$ and thus we see $f(-s)=f(-t f(t))=-t^{2}=-f(s)$ holds in this case also. This observation finishes the proof of (3).\n\nBy substituting $(x, y)=(s, t),(x, y)=(t,-s-t)$ and $(x, y)=(-s-t, s)$ into the given equation, we obtain\n\n$$\n\\begin{array}{r}\nf(s f(s+t)))=f(t f(s))+s^{2} \\\\\nf(t f(-s))=f((-s-t) f(t))+t^{2}\n\\end{array}\n$$\n\nand\n\n$$\nf((-s-t) f(-t))=f(s f(-s-t))+(s+t)^{2},\n$$\n\nrespectively. Using the fact that $f(-x)=-f(x)$ holds for all $x$ to rewrite the second and the third equation, and rearranging the terms, we obtain\n\n$$\n\\begin{aligned}\nf(t f(s))-f(s f(s+t)) & =-s^{2} \\\\\nf(t f(s))-f((s+t) f(t)) & =-t^{2} \\\\\nf((s+t) f(t))+f(s f(s+t)) & =(s+t)^{2} .\n\\end{aligned}\n$$\n\nAdding up these three equations now yields $2 f(t f(s))=2 t s$, and therefore, we conclude that $f(t f(s))=t s$ holds for every pair of real numbers $s, t$. By fixing $s$ so that $f(s)=1$, we obtain $f(x)=s x$. In view of the given equation, we see that $s=\\pm 1$. It is easy to check that both functions $f(x)=x$ and $f(x)=-x$ satisfy the given functional equation, so these are the desired solutions."
  },
  {
    "id": "fimo_2009_number_theory_p1",
    "enunciado": "A social club has $n$ members. They have the membership numbers $1,2, \\ldots, n$, respectively. From time to time members send presents to other members, including items they have already received as presents from other members. In order to avoid the embarrassing situation that a member might receive a present that he or she has sent to other members, the club adds the following rule to its statutes at one of its annual general meetings:\n\n\"A member with membership number $a$ is permitted to send a present to a member with membership number $b$ if and only if $a(b-1)$ is a multiple of $n . \"$\n\nProve that, if each member follows this rule, none will receive a present from another member that he or she has already sent to other members.\n\nAlternative formulation: Let $G$ be a directed graph with $n$ vertices $v_{1}, v_{2}, \\ldots, v_{n}$, such that there is an edge going from $v_{a}$ to $v_{b}$ if and only if $a$ and $b$ are distinct and $a(b-1)$ is a multiple of $n$. Prove that this graph does not contain a directed cycle.",
    "solucao": "Suppose there is an edge from $v_{i}$ to $v_{j}$. Then $i(j-1)=i j-i=k n$ for some integer $k$, which implies $i=i j-k n$. If $\\operatorname{gcd}(i, n)=d$ and $\\operatorname{gcd}(j, n)=e$, then $e$ divides $i j-k n=i$ and thus $e$ also divides $d$. Hence, if there is an edge from $v_{i}$ to $v_{j}$, then $\\operatorname{gcd}(j, n) \\mid \\operatorname{gcd}(i, n)$.\n\nIf there is a cycle in $G$, say $v_{i_{1}} \\rightarrow v_{i_{2}} \\rightarrow \\cdots \\rightarrow v_{i_{r}} \\rightarrow v_{i_{1}}$, then we have\n\n$$\n\\operatorname{gcd}\\left(i_{1}, n\\right)\\left|\\operatorname{gcd}\\left(i_{r}, n\\right)\\right| \\operatorname{gcd}\\left(i_{r-1}, n\\right)|\\ldots| \\operatorname{gcd}\\left(i_{2}, n\\right) \\mid \\operatorname{gcd}\\left(i_{1}, n\\right)\n$$\n\nwhich implies that all these greatest common divisors must be equal, say be equal to $t$.\n\nNow we pick any of the $i_{k}$, without loss of generality let it be $i_{1}$. Then $i_{r}\\left(i_{1}-1\\right)$ is a multiple of $n$ and hence also (by dividing by $t$ ), $i_{1}-1$ is a multiple of $\\frac{n}{t}$. Since $i_{1}$ and $i_{1}-1$ are relatively prime, also $t$ and $\\frac{n}{t}$ are relatively prime. So, by the Chinese remainder theorem, the value of $i_{1}$ is uniquely determined modulo $n=t \\cdot \\frac{n}{t}$ by the value of $t$. But, as $i_{1}$ was chosen arbitrarily among the $i_{k}$, this implies that all the $i_{k}$ have to be equal, a contradiction."
  },
  {
    "id": "fimo_2009_number_theory_p2_1",
    "enunciado": "A positive integer $N$ is called balanced, if $N=1$ or if $N$ can be written as a product of an even number of not necessarily distinct primes. Given positive integers $a$ and $b$, consider the polynomial $P$ defined by $P(x)=(x+a)(x+b)$.\n\nProve that there exist distinct positive integers $a$ and $b$ such that all the numbers $P(1), P(2)$, $\\ldots, P(50)$ are balanced.",
    "solucao": "Define a function $f$ on the set of positive integers by $f(n)=0$ if $n$ is balanced and $f(n)=1$ otherwise. Clearly, $f(n m) \\equiv f(n)+f(m) \\bmod 2$ for all positive integers $n, m$.\n\nNow for each positive integer $n$ consider the binary sequence $(f(n+1), f(n+2), \\ldots, f(n+$ 50)). As there are only $2^{50}$ different such sequences there are two different positive integers $a$ and $b$ such that\n\n$$\n(f(a+1), f(a+2), \\ldots, f(a+50))=(f(b+1), f(b+2), \\ldots, f(b+50)) .\n$$\n\nBut this implies that for the polynomial $P(x)=(x+a)(x+b)$ all the numbers $P(1), P(2)$, $\\ldots, P(50)$ are balanced, since for all $1 \\leq k \\leq 50$ we have $f(P(k)) \\equiv f(a+k)+f(b+k) \\equiv$ $2 f(a+k) \\equiv 0 \\bmod 2$."
  },
  {
    "id": "fimo_2009_number_theory_p2_2",
    "enunciado": "A positive integer $N$ is called balanced, if $N=1$ or if $N$ can be written as a product of an even number of not necessarily distinct primes. Given positive integers $a$ and $b$, consider the polynomial $P$ defined by $P(x)=(x+a)(x+b)$.\n\nProve that if $P(n)$ is balanced for all positive integers $n$, then $a=b$.",
    "solucao": "Define a function $f$ on the set of positive integers by $f(n)=0$ if $n$ is balanced and $f(n)=1$ otherwise. Clearly, $f(n m) \\equiv f(n)+f(m) \\bmod 2$ for all positive integers $n, m$.\n\nNow suppose $P(n)$ is balanced for all positive integers $n$ and $a<b$. Set $n=k(b-a)-a$ for sufficiently large $k$, such that $n$ is positive. Then $P(n)=k(k+1)(b-a)^{2}$, and this number can only be balanced, if $f(k)=f(k+1)$ holds. Thus, the sequence $f(k)$ must become constant for sufficiently large $k$. But this is not possible, as for every prime $p$ we have $f(p)=1$ and for every square $t^{2}$ we have $f\\left(t^{2}\\right)=0$.\n\nHence $a=b$."
  },
  {
    "id": "fimo_2009_number_theory_p3",
    "enunciado": "Let $f$ be a non-constant function from the set of positive integers into the set of positive integers, such that $a-b$ divides $f(a)-f(b)$ for all distinct positive integers $a, b$. Prove that there exist infinitely many primes $p$ such that $p$ divides $f(c)$ for some positive integer $c$.",
    "solucao": "Denote by $v_{p}(a)$ the exponent of the prime $p$ in the prime decomposition of $a$.\n\nAssume that there are only finitely many primes $p_{1}, p_{2}, \\ldots, p_{m}$ that divide some function value produced of $f$.\n\nThere are infinitely many positive integers $a$ such that $v_{p_{i}}(a)>v_{p_{i}}(f(1))$ for all $i=1,2, \\ldots, m$, e.g. $a=\\left(p_{1} p_{2} \\ldots p_{m}\\right)^{\\alpha}$ with $\\alpha$ sufficiently large. Pick any such $a$. The condition of the problem then yields $a \\mid(f(a+1)-f(1))$. Assume $f(a+1) \\neq f(1)$. Then we must have $v_{p_{i}}(f(a+1)) \\neq$ $v_{p_{i}}(f(1))$ for at least one $i$. This yields $v_{p_{i}}(f(a+1)-f(1))=\\min \\left\\{v_{p_{i}}(f(a+1)), v_{p_{i}}(f(1))\\right\\} \\leq$ $v_{p_{1}}(f(1))<v_{p_{i}}(a)$. But this contradicts the fact that $a \\mid(f(a+1)-f(1))$.\n\nHence we must have $f(a+1)=f(1)$ for all such $a$.\n\nNow, for any positive integer $b$ and all such $a$, we have $(a+1-b) \\mid(f(a+1)-f(b))$, i.e., $(a+1-b) \\mid(f(1)-f(b))$. Since this is true for infinitely many positive integers $a$ we must have $f(b)=f(1)$. Hence $f$ is a constant function, a contradiction. Therefore, our initial assumption was false and there are indeed infinitely many primes $p$ dividing $f(c)$ for some positive integer $c$."
  },
  {
    "id": "fimo_2009_number_theory_p4",
    "enunciado": "Find all positive integers $n$ such that there exists a sequence of positive integers $a_{1}, a_{2}, \\ldots, a_{n}$ satisfying\n\n$$\na_{k+1}=\\frac{a_{k}^{2}+1}{a_{k-1}+1}-1\n$$\n\nfor every $k$ with $2 \\leq k \\leq n-1$.\n\nThe final answer is $n=1,2,3,4$.",
    "solucao": "Such a sequence exists for $n=1,2,3,4$ and no other $n$. Since the existence of such a sequence for some $n$ implies the existence of such a sequence for all smaller $n$, it suffices to prove that $n=5$ is not possible and $n=4$ is possible.\n\nAssume first that for $n=5$ there exists a sequence of positive integers $a_{1}, a_{2}, \\ldots, a_{5}$ satisfying the conditions\n\n$$\n\\begin{aligned}\n& a_{2}^{2}+1=\\left(a_{1}+1\\right)\\left(a_{3}+1\\right), \\\\\n& a_{3}^{2}+1=\\left(a_{2}+1\\right)\\left(a_{4}+1\\right), \\\\\n& a_{4}^{2}+1=\\left(a_{3}+1\\right)\\left(a_{5}+1\\right) .\n\\end{aligned}\n$$\n\nAssume $a_{1}$ is odd, then $a_{2}$ has to be odd as well and as then $a_{2}^{2}+1 \\equiv 2 \\bmod 4, a_{3}$ has to be even. But this is a contradiction, since then the even number $a_{2}+1$ cannot divide the odd number $a_{3}^{2}+1$.\n\nHence $a_{1}$ is even.\n\nIf $a_{2}$ is odd, $a_{3}^{2}+1$ is even (as a multiple of $\\left.a_{2}+1\\right)$ and hence $a_{3}$ is odd, too. Similarly we must have $a_{4}$ odd as well. But then $a_{3}^{2}+1$ is a product of two even numbers $\\left(a_{2}+1\\right)\\left(a_{4}+1\\right)$ and thus is divisible by 4 , which is a contradiction as for odd $a_{3}$ we have $a_{3}^{2}+1 \\equiv 2 \\bmod 4$.\n\nHence $a_{2}$ is even. Furthermore $a_{3}+1$ divides the odd number $a_{2}^{2}+1$ and so $a_{3}$ is even. Similarly, $a_{4}$ and $a_{5}$ are even as well.\n\nNow set $x=a_{2}$ and $y=a_{3}$. From the given condition we get $(x+1) \\mid\\left(y^{2}+1\\right)$ and $(y+1) \\mid\\left(x^{2}+1\\right)$. We will prove that there is no pair of positive even numbers $(x, y)$ satisfying these two conditions, thus yielding a contradiction to the assumption.\n\nAssume there exists a pair $\\left(x_{0}, y_{0}\\right)$ of positive even numbers satisfying the two conditions $\\left(x_{0}+1\\right) \\mid\\left(y_{0}^{2}+1\\right)$ and $\\left(y_{0}+1\\right) \\mid\\left(x_{0}^{2}+1\\right)$.\n\nThen one has $\\left(x_{0}+1\\right) \\mid\\left(y_{0}^{2}+1+x_{0}^{2}-1\\right)$, i.e., $\\left(x_{0}+1\\right) \\mid\\left(x_{0}^{2}+y_{0}^{2}\\right)$, and similarly $\\left(y_{0}+1\\right) \\mid\\left(x_{0}^{2}+y_{0}^{2}\\right)$. Any common divisor $d$ of $x_{0}+1$ and $y_{0}+1$ must hence also divide the number $\\left(x_{0}^{2}+1\\right)+\\left(y_{0}^{2}+1\\right)-\\left(x_{0}^{2}+y_{0}^{2}\\right)=2$. But as $x_{0}+1$ and $y_{0}+1$ are both odd, we must have $d=1$. Thus $x_{0}+1$ and $y_{0}+1$ are relatively prime and therefore there exists a positive integer $k$ such that\n\n$$\nk(x+1)(y+1)=x^{2}+y^{2}\n$$\n\nhas the solution $\\left(x_{0}, y_{0}\\right)$. We will show that the latter equation has no solution $(x, y)$ in positive even numbers.\n\nAssume there is a solution. Pick the solution $\\left(x_{1}, y_{1}\\right)$ with the smallest sum $x_{1}+y_{1}$ and assume $x_{1} \\geq y_{1}$. Then $x_{1}$ is a solution to the quadratic equation\n\n$$\nx^{2}-k\\left(y_{1}+1\\right) x+y_{1}^{2}-k\\left(y_{1}+1\\right)=0 .\n$$\n\nLet $x_{2}$ be the second solution, which by VIETA's theorem fulfills $x_{1}+x_{2}=k\\left(y_{1}+1\\right)$ and $x_{1} x_{2}=y_{1}^{2}-k\\left(y_{1}+1\\right)$. If $x_{2}=0$, the second equation implies $y_{1}^{2}=k\\left(y_{1}+1\\right)$, which is impossible, as $y_{1}+1>1$ cannot divide the relatively prime number $y_{1}^{2}$. Therefore $x_{2} \\neq 0$.\n\nAlso we get $\\left(x_{1}+1\\right)\\left(x_{2}+1\\right)=x_{1} x_{2}+x_{1}+x_{2}+1=y_{1}^{2}+1$ which is odd, and hence $x_{2}$ must be even and positive. Also we have $x_{2}+1=\\frac{y_{1}^{2}+1}{x_{1}+1} \\leq \\frac{y_{1}^{2}+1}{y_{1}+1} \\leq y_{1} \\leq x_{1}$. But this means that the pair $\\left(x^{\\prime}, y^{\\prime}\\right)$ with $x^{\\prime}=y_{1}$ and $y^{\\prime}=x_{2}$ is another solution of $k(x+1)(y+1)=x^{2}+y^{2}$ in even positive numbers with $x^{\\prime}+y^{\\prime}<x_{1}+y_{1}$, a contradiction.\n\nTherefore we must have $n \\leq 4$.\n\nWhen $n=4$, a possible example of a sequence is $a_{1}=4, a_{2}=33, a_{3}=217$ and $a_{4}=1384$."
  },
  {
    "id": "fimo_2009_number_theory_p5",
    "enunciado": "Let $P(x)$ be a non-constant polynomial with integer coefficients. Prove that there is no function $T$ from the set of integers into the set of integers such that the number of integers $x$ with $T^{n}(x)=x$ is equal to $P(n)$ for every $n \\geq 1$, where $T^{n}$ denotes the $n$-fold application of $T$.",
    "solucao": "Assume there is a polynomial $P$ of degree at least 1 with the desired property for a given function $T$. Let $A(n)$ denote the set of all $x \\in \\mathbb{Z}$ such that $T^{n}(x)=x$ and let $B(n)$ denote the set of all $x \\in \\mathbb{Z}$ for which $T^{n}(x)=x$ and $T^{k}(x) \\neq x$ for all $1 \\leq k<n$. Both sets are finite under the assumption made. For each $x \\in A(n)$ there is a smallest $k \\geq 1$ such that $T^{k}(x)=x$, i.e., $x \\in B(k)$. Let $d=\\operatorname{gcd}(k, n)$. There are positive integers $r, s$ such that $r k-s n=d$ and hence $x=T^{r k}(x)=T^{s n+d}(x)=T^{d}\\left(T^{s n}(x)\\right)=T^{d}(x)$. The minimality of $k$ implies $d=k$, i.e., $k \\mid n$. On the other hand one clearly has $B(k) \\subset A(n)$ if $k \\mid n$ and thus we have $A(n)=\\bigcup_{d \\mid n} B(d)$ as a disjoint union and hence\n\n$$\n|A(n)|=\\sum_{d \\mid n}|B(d)| .\n$$\n\nFurthermore, for every $x \\in B(n)$ the elements $x, T^{1}(x), T^{2}(x), \\ldots, T^{n-1}(x)$ are $n$ distinct elements of $B(n)$. The fact that they are in $A(n)$ is obvious. If for some $k<n$ and some $0 \\leq i<n$ we had $T^{k}\\left(T^{i}(x)\\right)=T^{i}(x)$, i.e. $T^{k+i}(x)=T^{i}(x)$, that would imply $x=T^{n}(x)=T^{n-i}\\left(T^{i}(x)\\right)=T^{n-i}\\left(T^{k+i}(x)\\right)=T^{k}\\left(T^{n}(x)\\right)=T^{k}(x)$ contradicting the minimality of $n$. Thus $T^{i}(x) \\in B(n)$ and $T^{i}(x) \\neq T^{j}(x)$ for $0 \\leq i<j \\leq n-1$.\n\nSo indeed, $T$ permutes the elements of $B(n)$ in (disjoint) cycles of length $n$ and in particular one has $n|| B(n) \\mid$.\n\nNow let $P(x)=\\sum_{i=0}^{k} a_{i} x^{i}, a_{i} \\in \\mathbb{Z}, k \\geq 1, a_{k} \\neq 0$ and suppose that $|A(n)|=P(n)$ for all $n \\geq 1$. Let $p$ be any prime. Then\n\n$$\np^{2}|| B\\left(p^{2}\\right)|=| A\\left(p^{2}\\right)|-| A(p) \\mid=a_{1}\\left(p^{2}-p\\right)+a_{2}\\left(p^{4}-p^{2}\\right)+\\ldots\n$$\n\nHence $p \\mid a_{1}$ and since this is true for all primes we must have $a_{1}=0$.\n\nNow consider any two different primes $p$ and $q$. Since $a_{1}=0$ we have that\n\n$$\n\\left|A\\left(p^{2} q\\right)\\right|-|A(p q)|=a_{2}\\left(p^{4} q^{2}-p^{2} q^{2}\\right)+a_{3}\\left(p^{6} q^{3}-p^{3} q^{3}\\right)+\\ldots\n$$\n\nis a multiple of $p^{2} q$. But we also have\n\n$$\np^{2} q|| B\\left(p^{2} q\\right)|=| A\\left(p^{2} q\\right)|-| A(p q)|-| B\\left(p^{2}\\right) \\mid .\n$$\n\nThis implies\n\n$$\np^{2} q|| B\\left(p^{2}\\right)|=| A\\left(p^{2}\\right)|-| A(p) \\mid=a_{2}\\left(p^{4}-p^{2}\\right)+a_{3}\\left(p^{6}-p^{3}\\right)+\\cdots+a_{k}\\left(p^{2 k}-p^{k}\\right) .\n$$\n\nSince this is true for every prime $q$ we must have $a_{2}\\left(p^{4}-p^{2}\\right)+a_{3}\\left(p^{6}-p^{3}\\right)+\\cdots+a_{k}\\left(p^{2 k}-p^{k}\\right)=0$ for every prime $p$. Since this expression is a polynomial in $p$ of degree $2 k$ (because $\\left.a_{k} \\neq 0\\right)$ this is a contradiction, as such a polynomial can have at most $2 k$ zeros."
  },
  {
    "id": "fimo_2009_number_theory_p6",
    "enunciado": "Let $k$ be a positive integer. Show that if there exists a sequence $a_{0}, a_{1}, \\ldots$ of integers satisfying the condition\n\n$$\na_{n}=\\frac{a_{n-1}+n^{k}}{n} \\text { for all } n \\geq 1,\n$$\n\nthen $k-2$ is divisible by 3 .",
    "solucao": "Part A. For each positive integer $k$, there exists a polynomial $P_{k}$ of degree $k-1$ with integer coefficients, i. e., $P_{k} \\in \\mathbb{Z}[x]$, and an integer $q_{k}$ such that the polynomial identity\n\n$$\nx P_{k}(x)=x^{k}+P_{k}(x-1)+q_{k}\n$$\n\nis satisfied. To prove this, for fixed $k$ we write\n\n$$\nP_{k}(x)=b_{k-1} x^{k-1}+\\cdots+b_{1} x+b_{0}\n$$\n\nand determine the coefficients $b_{k-1}, b_{k-2}, \\ldots, b_{0}$ and the number $q_{k}$ successively. Obviously, we have $b_{k-1}=1$. For $m=k-1, k-2, \\ldots, 1$, comparing the coefficients of $x^{m}$ in the identity $\\left(I_{k}\\right)$ results in an expression of $b_{m-1}$ as an integer linear combination of $b_{k-1}, \\ldots, b_{m}$, and finally $q_{k}=-P_{k}(-1)$\n\nPart B. Let $k$ be a positive integer, and let $a_{0}, a_{1}, \\ldots$ be a sequence of real numbers satisfying the recursion given in the problem. This recursion can be written as\n\n$$\na_{n}-P_{k}(n)=\\frac{a_{n-1}-P_{k}(n-1)}{n}-\\frac{q_{k}}{n} \\quad \\text { for all } n \\geq 1\n$$\n\nwhich by induction gives\n\n$$\na_{n}-P_{k}(n)=\\frac{a_{0}-P_{k}(0)}{n !}-q_{k} \\sum_{i=0}^{n-1} \\frac{i !}{n !} \\quad \\text { for all } n \\geq 1 .\n$$\n\nTherefore, the numbers $a_{n}$ are integers for all $n \\geq 1$ only if\n\n$$\na_{0}=P_{k}(0) \\quad \\text { and } \\quad q_{k}=0 .\n$$\n\nPart C. Multiplying the identity $\\left(I_{k}\\right)$ by $x^{2}+x$ and subtracting the identities $\\left(I_{k+1}\\right),\\left(I_{k+2}\\right)$ and $q_{k} x^{2}=q_{k} x^{2}$ therefrom, we obtain\n\n$$\nx T_{k}(x)=T_{k}(x-1)+2 x\\left(P_{k}(x-1)+q_{k}\\right)-\\left(q_{k+2}+q_{k+1}+q_{k}\\right),\n$$\n\nwhere the polynomials $T_{k} \\in \\mathbb{Z}[x]$ are defined by $T_{k}(x)=\\left(x^{2}+x\\right) P_{k}(x)-P_{k+1}(x)-P_{k+2}(x)-q_{k} x$. Thus\n\n$$\nx T_{k}(x) \\equiv T_{k}(x-1)+q_{k+2}+q_{k+1}+q_{k} \\bmod 2, \\quad k=1,2, \\ldots\n$$\n\nComparing the degrees, we easily see that this is only possible if $T_{k}$ is the zero polynomial modulo 2 , and\n\n$$\nq_{k+2} \\equiv q_{k+1}+q_{k} \\bmod 2 \\text { for } k=1,2, \\ldots\n$$\n\nSince $q_{1}=-1$ and $q_{2}=0$, these congruences finish the proof."
  },
  {
    "id": "fimo_2009_number_theory_p7",
    "enunciado": "Let $a$ and $b$ be distinct integers greater than 1. Prove that there exists a positive integer $n$ such that $\\left(a^{n}-1\\right)\\left(b^{n}-1\\right)$ is not a perfect square.",
    "solucao": "At first we notice that\n\n$$\n\\begin{aligned}\n(1-\\alpha)^{\\frac{1}{2}}(1-\\beta)^{\\frac{1}{2}} & =\\left(1-\\frac{1}{2} \\cdot \\alpha-\\frac{1}{8} \\cdot \\alpha^{2}-\\cdots\\right)\\left(1-\\frac{1}{2} \\cdot \\beta-\\frac{1}{8} \\cdot \\beta^{2}-\\cdots\\right) \\\\\n& =\\sum_{k, \\ell \\geq 0} c_{k, \\ell} \\cdot \\alpha^{k} \\beta^{\\ell} \\quad \\text { for all } \\alpha, \\beta \\in(0,1),\n\\end{aligned}\n$$\n\nwhere $c_{0,0}=1$ and $c_{k, \\ell}$ are certain coefficients.\n\nFor an indirect proof, we suppose that $x_{n}=\\sqrt{\\left(a^{n}-1\\right)\\left(b^{n}-1\\right)} \\in \\mathbb{Z}$ for all positive integers $n$. Replacing $a$ by $a^{2}$ and $b$ by $b^{2}$ if necessary, we may assume that $a$ and $b$ are perfect squares, hence $\\sqrt{a b}$ is an integer.\n\nAt first we shall assume that $a^{\\mu} \\neq b^{\\nu}$ for all positive integers $\\mu, \\nu$. We have\n\n$$\nx_{n}=(\\sqrt{a b})^{n}\\left(1-\\frac{1}{a^{n}}\\right)^{\\frac{1}{2}}\\left(1-\\frac{1}{b^{n}}\\right)^{\\frac{1}{2}}=\\sum_{k, \\ell \\geq 0} c_{k, \\ell}\\left(\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}}\\right)^{n} .\n$$\n\nChoosing $k_{0}$ and $\\ell_{0}$ such that $a^{k_{0}}>\\sqrt{a b}, b^{\\ell_{0}}>\\sqrt{a b}$, we define the polynomial\n\n$$\nP(x)=\\prod_{k=0, \\ell=0}^{k_{0}-1, \\ell_{0}-1}\\left(a^{k} b^{\\ell} x-\\sqrt{a b}\\right)=: \\sum_{i=0}^{k_{0} \\cdot \\ell_{0}} d_{i} x^{i}\n$$\n\nwith integer coefficients $d_{i}$. By our assumption, the zeros\n\n$$\n\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}}, \\quad k=0, \\ldots, k_{0}-1, \\quad \\ell=0, \\ldots, \\ell_{0}-1,\n$$\n\nof $P$ are pairwise distinct.\n\nFurthermore, we consider the integer sequence\n\n$$\ny_{n}=\\sum_{i=0}^{k_{0} \\cdot \\ell_{0}} d_{i} x_{n+i}, \\quad n=1,2, \\ldots\n$$\n\nBy the theory of linear recursions, we obtain\n\n$$\ny_{n}=\\sum_{\\substack{k, \\ell \\geq 0 \\\\ k \\geq k_{0} \\text { or } \\ell \\geq \\ell_{0}}} e_{k, \\ell}\\left(\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}}\\right)^{n}, \\quad n=1,2, \\ldots,\n$$\n\nwith real numbers $e_{k, \\ell}$. We have\n\n$$\n\\left|y_{n}\\right| \\leq \\sum_{\\substack{k, \\ell \\geq 0 \\\\ k \\geq k_{0} \\text { or } \\ell \\geq \\ell_{0}}} \\mid e_{k, \\ell}\\left(\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}}\\right)^{n}=: M_{n} .\n$$\n\nBecause the series in (4) is obtained by a finite linear combination of the absolutely convergent series (1), we conclude that in particular $M_{1}<\\infty$. Since\n\n$$\n\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}} \\leq \\lambda:=\\max \\left\\{\\frac{\\sqrt{a b}}{a^{k_{0}}}, \\frac{\\sqrt{a b}}{b^{\\ell_{0}}}\\right\\} \\quad \\text { for all } k, \\ell \\geq 0 \\text { such that } k \\geq k_{0} \\text { or } \\ell \\geq \\ell_{0},\n$$\n\nwe get the estimates $M_{n+1} \\leq \\lambda M_{n}, n=1,2, \\ldots$ Our choice of $k_{0}$ and $\\ell_{0}$ ensures $\\lambda<1$, which implies $M_{n} \\rightarrow 0$ and consequently $y_{n} \\rightarrow 0$ as $n \\rightarrow \\infty$. It follows that $y_{n}=0$ for all sufficiently large $n$.\n\nSo, equation (3) reduces to $\\sum_{i=0}^{k_{0} \\cdot \\ell_{0}} d_{i} x_{n+i}=0$\n\nUsing the theory of linear recursions again, for sufficiently large $n$ we have\n\n$$\nx_{n}=\\sum_{k=0, \\ell=0}^{k_{0}-1, \\ell_{0}-1} f_{k, \\ell}\\left(\\frac{\\sqrt{a b}}{a^{k} b^{\\ell}}\\right)^{n}\n$$\n\nfor certain real numbers $f_{k, \\ell}$.\n\nComparing with (2), we see that $f_{k, \\ell}=c_{k, \\ell}$ for all $k, \\ell \\geq 0$ with $k<k_{0}, \\ell<\\ell_{0}$, and $c_{k, \\ell}=0$ if $k \\geq k_{0}$ or $\\ell \\geq \\ell_{0}$, since we assumed that $a^{\\mu} \\neq b^{\\nu}$ for all positive integers $\\mu, \\nu$.\n\nIn view of (1), this means\n\n$$\n(1-\\alpha)^{\\frac{1}{2}}(1-\\beta)^{\\frac{1}{2}}=\\sum_{k=0, \\ell=0}^{k_{0}-1, \\ell_{0}-1} c_{k, \\ell} \\cdot \\alpha^{k} \\beta^{\\ell}\n$$\n\nfor all real numbers $\\alpha, \\beta \\in(0,1)$. We choose $k^{*}<k_{0}$ maximal such that there is some $i$ with $c_{k^{*}, i} \\neq 0$. Squaring (5) and comparing coefficients of $\\alpha^{2 k^{*}} \\beta^{2 i^{*}}$, where $i^{*}$ is maximal with $c_{k^{*}, i^{*}} \\neq 0$, we see that $k^{*}=0$. This means that the right hand side of $(5)$ is independent of $\\alpha$, which is clearly impossible.\n\nWe are left with the case that $a^{\\mu}=b^{\\nu}$ for some positive integers $\\mu$ and $\\nu$. We may assume that $\\mu$ and $\\nu$ are relatively prime. Then there is some positive integer $c$ such that $a=c^{\\nu}$ and $b=c^{\\mu}$. Now starting with the expansion (2), i. e.,\n\n$$\nx_{n}=\\sum_{j \\geq 0} g_{j}\\left(\\frac{\\sqrt{c^{\\mu+\\nu}}}{c^{j}}\\right)^{n}\n$$\n\nfor certain coefficients $g_{j}$, and repeating the arguments above, we see that $g_{j}=0$ for sufficiently large $j$, say $j>j_{0}$. But this means that\n\n$$\n\\left(1-x^{\\mu}\\right)^{\\frac{1}{2}}\\left(1-x^{\\nu}\\right)^{\\frac{1}{2}}=\\sum_{j=0}^{j_{0}} g_{j} x^{j}\n$$\n\nfor all real numbers $x \\in(0,1)$. Squaring, we see that\n\n$$\n\\left(1-x^{\\mu}\\right)\\left(1-x^{\\nu}\\right)\n$$\n\nis the square of a polynomial in $x$. In particular, all its zeros are of order at least 2 , which implies $\\mu=\\nu$ by looking at roots of unity. So we obtain $\\mu=\\nu=1$, i. e., $a=b$, a contradiction."
  },
  {
    "id": "fimo_2010_algebra_p1",
    "enunciado": "Determine all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ such that the equality\n\n$$\nf([x] y)=f(x)[f(y)] .\n$$\n\nholds for all $x, y \\in \\mathbb{R}$. Here, by $[x]$ we denote the greatest integer not exceeding $x$.\n\nThe final answer is $f(x)=$ const $=C$, where $C=0$ or $1 \\leq C<2$.",
    "solucao": "First, setting $x=0$ in (1) we get\n\n$$\nf(0)=f(0)[f(y)]\n$$\n\nfor all $y \\in \\mathbb{R}$. Now, two cases are possible.\n\nCase 1. Assume that $f(0) \\neq 0$. Then from (2) we conclude that $[f(y)]=1$ for all $y \\in \\mathbb{R}$. Therefore, equation (1) becomes $f([x] y)=f(x)$, and substituting $y=0$ we have $f(x)=f(0)=C \\neq 0$. Finally, from $[f(y)]=1=[C]$ we obtain that $1 \\leq C<2$.\n\nCase 2. Now we have $f(0)=0$. Here we consider two subcases.\n\nSubcase 2a. Suppose that there exists $0<\\alpha<1$ such that $f(\\alpha) \\neq 0$. Then setting $x=\\alpha$ in (1) we obtain $0=f(0)=f(\\alpha)[f(y)]$ for all $y \\in \\mathbb{R}$. Hence, $[f(y)]=0$ for all $y \\in \\mathbb{R}$. Finally, substituting $x=1$ in (1) provides $f(y)=0$ for all $y \\in \\mathbb{R}$, thus contradicting the condition $f(\\alpha) \\neq 0$.\n\nSubcase 2b. Conversely, we have $f(\\alpha)=0$ for all $0 \\leq \\alpha<1$. Consider any real $z$; there exists an integer $N$ such that $\\alpha=\\frac{z}{N} \\in[0,1$ ) (one may set $N=[z]+1$ if $z \\geq 0$ and $N=[z]-1$ otherwise). Now, from (1) we get $f(z)=f([N] \\alpha)=f(N)[f(\\alpha)]=0$ for all $z \\in \\mathbb{R}$.\n\nFinally, a straightforward check shows that all the obtained functions satisfy (1)."
  },
  {
    "id": "fimo_2010_algebra_p2",
    "enunciado": "Let the real numbers $a, b, c, d$ satisfy the relations $a+b+c+d=6$ and $a^{2}+b^{2}+c^{2}+d^{2}=12$. Prove that\n\n$$\n36 \\leq 4\\left(a^{3}+b^{3}+c^{3}+d^{3}\\right)-\\left(a^{4}+b^{4}+c^{4}+d^{4}\\right) \\leq 48 .\n$$",
    "solucao": "Observe that\n\n$$\n\\begin{gathered}\n4\\left(a^{3}+b^{3}+c^{3}+d^{3}\\right)-\\left(a^{4}+b^{4}+c^{4}+d^{4}\\right)=-\\left((a-1)^{4}+(b-1)^{4}+(c-1)^{4}+(d-1)^{4}\\right) \\\\\n+6\\left(a^{2}+b^{2}+c^{2}+d^{2}\\right)-4(a+b+c+d)+4 \\\\\n=-\\left((a-1)^{4}+(b-1)^{4}+(c-1)^{4}+(d-1)^{4}\\right)+52 .\n\\end{gathered}\n$$\n\nNow, introducing $x=a-1, y=b-1, z=c-1, t=d-1$, we need to prove the inequalities\n\n$$\n16 \\geq x^{4}+y^{4}+z^{4}+t^{4} \\geq 4,\n$$\n\nunder the constraint\n\n$$\nx^{2}+y^{2}+z^{2}+t^{2}=\\left(a^{2}+b^{2}+c^{2}+d^{2}\\right)-2(a+b+c+d)+4=4\n$$\n\n(we will not use the value of $x+y+z+t$ though it can be found).\n\nNow the rightmost inequality in (1) follows from the power mean inequality:\n\n$$\nx^{4}+y^{4}+z^{4}+t^{4} \\geq \\frac{\\left(x^{2}+y^{2}+z^{2}+t^{2}\\right)^{2}}{4}=4 .\n$$\n\nFor the other one, expanding the brackets we note that\n\n$$\n\\left(x^{2}+y^{2}+z^{2}+t^{2}\\right)^{2}=\\left(x^{4}+y^{4}+z^{4}+t^{4}\\right)+q,\n$$\n\nwhere $q$ is a nonnegative number, so\n\n$$\nx^{4}+y^{4}+z^{4}+t^{4} \\leq\\left(x^{2}+y^{2}+z^{2}+t^{2}\\right)^{2}=16,\n$$\n\nand we are done."
  },
  {
    "id": "fimo_2010_algebra_p3",
    "enunciado": "Let $x_{1}, \\ldots, x_{100}$ be nonnegative real numbers such that $x_{i}+x_{i+1}+x_{i+2} \\leq 1$ for all $i=1, \\ldots, 100$ (we put $x_{101}=x_{1}, x_{102}=x_{2}$ ). Find the maximal possible value of the sum\n\n$$\nS=\\sum_{i=1}^{100} x_{i} x_{i+2} \\text {. }\n$$\n\nThe final answer is $\\frac{25}{2}$.",
    "solucao": "Solution 1. Let $x_{2 i}=0, x_{2 i-1}=\\frac{1}{2}$ for all $i=1, \\ldots, 50$. Then we have $S=50 \\cdot\\left(\\frac{1}{2}\\right)^{2}=\\frac{25}{2}$. So, we are left to show that $S \\leq \\frac{25}{2}$ for all values of $x_{i}$ 's satisfying the problem conditions.\n\nConsider any $1 \\leq i \\leq 50$. By the problem condition, we get $x_{2 i-1} \\leq 1-x_{2 i}-x_{2 i+1}$ and $x_{2 i+2} \\leq 1-x_{2 i}-x_{2 i+1}$. Hence by the AM-GM inequality we get\n\n$$\n\\begin{aligned}\nx_{2 i-1} x_{2 i+1} & +x_{2 i} x_{2 i+2} \\leq\\left(1-x_{2 i}-x_{2 i+1}\\right) x_{2 i+1}+x_{2 i}\\left(1-x_{2 i}-x_{2 i+1}\\right) \\\\\n& =\\left(x_{2 i}+x_{2 i+1}\\right)\\left(1-x_{2 i}-x_{2 i+1}\\right) \\leq\\left(\\frac{\\left(x_{2 i}+x_{2 i+1}\\right)+\\left(1-x_{2 i}-x_{2 i+1}\\right)}{2}\\right)^{2}=\\frac{1}{4} .\n\\end{aligned}\n$$\n\nSumming up these inequalities for $i=1,2, \\ldots, 50$, we get the desired inequality\n\n$$\n\\sum_{i=1}^{50}\\left(x_{2 i-1} x_{2 i+1}+x_{2 i} x_{2 i+2}\\right) \\leq 50 \\cdot \\frac{1}{4}=\\frac{25}{2} .\n$$"
  },
  {
    "id": "fimo_2010_algebra_p4",
    "enunciado": "A sequence $x_{1}, x_{2}, \\ldots$ is defined by $x_{1}=1$ and $x_{2 k}=-x_{k}, x_{2 k-1}=(-1)^{k+1} x_{k}$ for all $k \\geq 1$. Prove that $x_{1}+x_{2}+\\cdots+x_{n} \\geq 0$ for all $n \\geq 1$.",
    "solucao": "We start with some observations. First, from the definition of $x_{i}$ it follows that for each positive integer $k$ we have\n\n$$\nx_{4 k-3}=x_{2 k-1}=-x_{4 k-2} \\quad \\text { and } \\quad x_{4 k-1}=x_{4 k}=-x_{2 k}=x_{k} \\text {. }\n$$\n\nHence, denoting $S_{n}=\\sum_{i=1}^{n} x_{i}$, we have\n\n$$\n\\begin{gathered}\nS_{4 k}=\\sum_{i=1}^{k}\\left(\\left(x_{4 k-3}+x_{4 k-2}\\right)+\\left(x_{4 k-1}+x_{4 k}\\right)\\right)=\\sum_{i=1}^{k}\\left(0+2 x_{k}\\right)=2 S_{k}, \\\\\nS_{4 k+2}=S_{4 k}+\\left(x_{4 k+1}+x_{4 k+2}\\right)=S_{4 k} .\n\\end{gathered}\n$$\n\nObserve also that $S_{n}=\\sum_{i=1}^{n} x_{i} \\equiv \\sum_{i=1}^{n} 1=n(\\bmod 2)$\n\nNow we prove by induction on $k$ that $S_{i} \\geq 0$ for all $i \\leq 4 k$. The base case is valid since $x_{1}=x_{3}=x_{4}=1, x_{2}=-1$. For the induction step, assume that $S_{i} \\geq 0$ for all $i \\leq 4 k$. Using the relations (1)-(3), we obtain\n\n$$\nS_{4 k+4}=2 S_{k+1} \\geq 0, \\quad S_{4 k+2}=S_{4 k} \\geq 0, \\quad S_{4 k+3}=S_{4 k+2}+x_{4 k+3}=\\frac{S_{4 k+2}+S_{4 k+4}}{2} \\geq 0 .\n$$\n\nSo, we are left to prove that $S_{4 k+1} \\geq 0$. If $k$ is odd, then $S_{4 k}=2 S_{k} \\geq 0$; since $k$ is odd, $S_{k}$ is odd as well, so we have $S_{4 k} \\geq 2$ and hence $S_{4 k+1}=S_{4 k}+x_{4 k+1} \\geq 1$.\n\nConversely, if $k$ is even, then we have $x_{4 k+1}=x_{2 k+1}=x_{k+1}$, hence $S_{4 k+1}=S_{4 k}+x_{4 k+1}=$ $2 S_{k}+x_{k+1}=S_{k}+S_{k+1} \\geq 0$. The step is proved."
  },
  {
    "id": "fimo_2010_algebra_p5",
    "enunciado": "Denote by $\\mathbb{Q}^{+}$the set of all positive rational numbers. Determine all functions $f: \\mathbb{Q}^{+} \\rightarrow \\mathbb{Q}^{+}$ which satisfy the following equation for all $x, y \\in \\mathbb{Q}^{+}$:\n\n$$\nf\\left(f(x)^{2} y\\right)=x^{3} f(x y) .\n$$\n\nThe final answer is $f(x)=\\frac{1}{x}$.",
    "solucao": "By substituting $y=1$, we get\n\n$$\nf\\left(f(x)^{2}\\right)=x^{3} f(x) .\n$$\n\nThen, whenever $f(x)=f(y)$, we have\n\n$$\nx^{3}=\\frac{f\\left(f(x)^{2}\\right)}{f(x)}=\\frac{f\\left(f(y)^{2}\\right)}{f(y)}=y^{3}\n$$\n\nwhich implies $x=y$, so the function $f$ is injective.\n\nNow replace $x$ by $x y$ in $(2)$, and apply (1) twice, second time to $\\left(y, f(x)^{2}\\right)$ instead of $(x, y)$ :\n\n$$\nf\\left(f(x y)^{2}\\right)=(x y)^{3} f(x y)=y^{3} f\\left(f(x)^{2} y\\right)=f\\left(f(x)^{2} f(y)^{2}\\right) .\n$$\n\nSince $f$ is injective, we get\n\n$$\n\\begin{aligned}\nf(x y)^{2} & =f(x)^{2} f(y)^{2} \\\\\nf(x y) & =f(x) f(y) .\n\\end{aligned}\n$$\n\nTherefore, $f$ is multiplicative. This also implies $f(1)=1$ and $f\\left(x^{n}\\right)=f(x)^{n}$ for all integers $n$.\n\nThen the function equation (1) can be re-written as\n\n$$\n\\begin{aligned}\nf(f(x))^{2} f(y) & =x^{3} f(x) f(y), \\\\\nf(f(x)) & =\\sqrt{x^{3} f(x)}\n\\end{aligned}\n$$\n\nLet $g(x)=x f(x)$. Then, by $(3)$, we have\n\n$$\n\\begin{aligned}\ng(g(x)) & =g(x f(x))=x f(x) \\cdot f(x f(x))=x f(x)^{2} f(f(x))= \\\\\n& =x f(x)^{2} \\sqrt{x^{3} f(x)}=(x f(x))^{5 / 2}=(g(x))^{5 / 2}\n\\end{aligned}\n$$\n\nand, by induction,\n\n$$\n\\underbrace{g(g(\\ldots g}_{n+1}(x) \\ldots))=(g(x))^{(5 / 2)^{n}}\n$$\n\nfor every positive integer $n$.\n\nConsider (4) for a fixed $x$. The left-hand side is always rational, so $(g(x))^{(5 / 2)^{n}}$ must be rational for every $n$. We show that this is possible only if $g(x)=1$. Suppose that $g(x) \\neq 1$, and let the prime factorization of $g(x)$ be $g(x)=p_{1}^{\\alpha_{1}} \\ldots p_{k}^{\\alpha_{k}}$ where $p_{1}, \\ldots, p_{k}$ are distinct primes and $\\alpha_{1}, \\ldots, \\alpha_{k}$ are nonzero integers. Then the unique prime factorization of (4) is\n\n$$\n\\underbrace{g(g(\\ldots g}_{n+1}(x) \\ldots))=(g(x))^{(5 / 2)^{n}}=p_{1}^{(5 / 2)^{n} \\alpha_{1}} \\cdots p_{k}^{(5 / 2)^{n} \\alpha_{k}}\n$$\n\nwhere the exponents should be integers. But this is not true for large values of $n$, for example $\\left(\\frac{5}{2}\\right)^{n} \\alpha_{1}$ cannot be a integer number when $2^{n} \\backslash \\alpha_{1}$. Therefore, $g(x) \\neq 1$ is impossible.\n\nHence, $g(x)=1$ and thus $f(x)=\\frac{1}{x}$ for all $x$.\n\nThe function $f(x)=\\frac{1}{x}$ satisfies the equation $(1)$ :\n\n$$\nf\\left(f(x)^{2} y\\right)=\\frac{1}{f(x)^{2} y}=\\frac{1}{\\left(\\frac{1}{x}\\right)^{2} y}=\\frac{x^{3}}{x y}=x^{3} f(x y) .\n$$"
  },
  {
    "id": "fimo_2010_algebra_p6",
    "enunciado": "Suppose that $f$ and $g$ are two functions defined on the set of positive integers and taking positive integer values. Suppose also that the equations $f(g(n))=f(n)+1$ and $g(f(n))=$ $g(n)+1$ hold for all positive integers. Prove that $f(n)=g(n)$ for all positive integer $n$.",
    "solucao": "Throughout the solution, by $\\mathbb{N}$ we denote the set of all positive integers. For any function $h: \\mathbb{N} \\rightarrow \\mathbb{N}$ and for any positive integer $k$, define $h^{k}(x)=\\underbrace{h(h(\\ldots h}_{k}(x) \\ldots))($ in particular, $\\left.h^{0}(x)=x\\right)$\n\nObserve that $f\\left(g^{k}(x)\\right)=f\\left(g^{k-1}(x)\\right)+1=\\cdots=f(x)+k$ for any positive integer $k$, and similarly $g\\left(f^{k}(x)\\right)=g(x)+k$. Now let $a$ and $b$ are the minimal values attained by $f$ and $g$, respectively; say $f\\left(n_{f}\\right)=a, g\\left(n_{g}\\right)=b$. Then we have $f\\left(g^{k}\\left(n_{f}\\right)\\right)=a+k, g\\left(f^{k}\\left(n_{g}\\right)\\right)=b+k$, so the function $f$ attains all values from the set $N_{f}=\\{a, a+1, \\ldots\\}$, while $g$ attains all the values from the set $N_{g}=\\{b, b+1, \\ldots\\}$.\n\nNext, note that $f(x)=f(y)$ implies $g(x)=g(f(x))-1=g(f(y))-1=g(y)$; surely, the converse implication also holds. Now, we say that $x$ and $y$ are similar (and write $x \\sim y$ ) if $f(x)=f(y)$ (equivalently, $g(x)=g(y)$ ). For every $x \\in \\mathbb{N}$, we define $[x]=\\{y \\in \\mathbb{N}: x \\sim y\\}$; surely, $y_{1} \\sim y_{2}$ for all $y_{1}, y_{2} \\in[x]$, so $[x]=[y]$ whenever $y \\in[x]$.\n\nNow we investigate the structure of the sets $[x]$.\n\nClaim 1. Suppose that $f(x) \\sim f(y)$; then $x \\sim y$, that is, $f(x)=f(y)$. Consequently, each class $[x]$ contains at most one element from $N_{f}$, as well as at most one element from $N_{g}$.\n\nProof. If $f(x) \\sim f(y)$, then we have $g(x)=g(f(x))-1=g(f(y))-1=g(y)$, so $x \\sim y$. The second statement follows now from the sets of values of $f$ and $g$.\n\nNext, we clarify which classes do not contain large elements.\n\nClaim 2. For any $x \\in \\mathbb{N}$, we have $[x] \\subseteq\\{1,2, \\ldots, b-1\\}$ if and only if $f(x)=a$. Analogously, $[x] \\subseteq\\{1,2, \\ldots, a-1\\}$ if and only if $g(x)=b$.\n\nProof. We will prove that $[x] \\nsubseteq\\{1,2, \\ldots, b-1\\} \\Longleftrightarrow f(x)>a$; the proof of the second statement is similar.\n\nNote that $f(x)>a$ implies that there exists some $y$ satisfying $f(y)=f(x)-1$, so $f(g(y))=$ $f(y)+1=f(x)$, and hence $x \\sim g(y) \\geq b$. Conversely, if $b \\leq c \\sim x$ then $c=g(y)$ for some $y \\in \\mathbb{N}$, which in turn follows $f(x)=f(g(y))=f(y)+1 \\geq a+1$, and hence $f(x)>a$.\n\nClaim 2 implies that there exists exactly one class contained in $\\{1, \\ldots, a-1\\}$ (that is, the class $\\left[n_{g}\\right]$ ), as well as exactly one class contained in $\\{1, \\ldots, b-1\\}$ (the class $\\left.\\left[n_{f}\\right]\\right)$. Assume for a moment that $a \\leq b$; then $\\left[n_{g}\\right]$ is contained in $\\{1, \\ldots, b-1\\}$ as well, hence it coincides with $\\left[n_{g}\\right]$. So, we get that\n\n$$\nf(x)=a \\Longleftrightarrow g(x)=b \\Longleftrightarrow x \\sim n_{f} \\sim n_{g} .\n$$\n\nClaim 3. $a=b$.\n\nProof. By Claim 2, we have $[a] \\neq\\left[n_{f}\\right]$, so $[a]$ should contain some element $a^{\\prime} \\geq b$ by Claim 2 again. If $a \\neq a^{\\prime}$, then $[a]$ contains two elements $\\geq a$ which is impossible by Claim 1 . Therefore, $a=a^{\\prime} \\geq b$. Similarly, $b \\geq a$.\n\nNow we are ready to prove the problem statement. First, we establish the following Claim 4. For every integer $d \\geq 0, f^{d+1}\\left(n_{f}\\right)=g^{d+1}\\left(n_{f}\\right)=a+d$.\n\nProof. Induction on $d$. For $d=0$, the statement follows from (1) and Claim 3. Next, for $d>1$ from the induction hypothesis we have $f^{d+1}\\left(n_{f}\\right)=f\\left(f^{d}\\left(n_{f}\\right)\\right)=f\\left(g^{d}\\left(n_{f}\\right)\\right)=f\\left(n_{f}\\right)+d=a+d$. The equality $g^{d+1}\\left(n_{f}\\right)=a+d$ is analogous. Finally, for each $x \\in \\mathbb{N}$, we have $f(x)=a+d$ for some $d \\geq 0$, so $f(x)=f\\left(g^{d}\\left(n_{f}\\right)\\right)$ and hence $x \\sim g^{d}\\left(n_{f}\\right)$. It follows that $g(x)=g\\left(g^{d}\\left(n_{f}\\right)\\right)=g^{d+1}\\left(n_{f}\\right)=a+d=f(x)$ by Claim 4."
  },
  {
    "id": "fimo_2010_algebra_p7",
    "enunciado": "Let $a_{1}, \\ldots, a_{r}$ be positive real numbers. For $n>r$, we inductively define\n\n$$\na_{n}=\\max _{1 \\leq k \\leq n-1}\\left(a_{k}+a_{n-k}\\right) .\n$$\n\nProve that there exist positive integers $\\ell \\leq r$ and $N$ such that $a_{n}=a_{n-\\ell}+a_{\\ell}$ for all $n \\geq N$.",
    "solucao": "First, from the problem conditions we have that each $a_{n}(n>r)$ can be expressed as $a_{n}=a_{j_{1}}+a_{j_{2}}$ with $j_{1}, j_{2}<n, j_{1}+j_{2}=n$. If, say, $j_{1}>r$ then we can proceed in the same way with $a_{j_{1}}$, and so on. Finally, we represent $a_{n}$ in a form\n\n$$\n\\begin{gathered}\na_{n}=a_{i_{1}}+\\cdots+a_{i_{k}}, \\\\\n1 \\leq i_{j} \\leq r, \\quad i_{1}+\\cdots+i_{k}=n .\n\\end{gathered}\n$$\n\nMoreover, if $a_{i_{1}}$ and $a_{i_{2}}$ are the numbers in (2) obtained on the last step, then $i_{1}+i_{2}>r$. Hence we can adjust (3) as\n\n$$\n1 \\leq i_{j} \\leq r, \\quad i_{1}+\\cdots+i_{k}=n, \\quad i_{1}+i_{2}>r .\n$$\n\nOn the other hand, suppose that the indices $i_{1}, \\ldots, i_{k}$ satisfy the conditions (4). Then, denoting $s_{j}=i_{1}+\\cdots+i_{j}$, from (1) we have\n\n$$\na_{n}=a_{s_{k}} \\geq a_{s_{k-1}}+a_{i_{k}} \\geq a_{s_{k-2}}+a_{i_{k-1}}+a_{i_{k}} \\geq \\cdots \\geq a_{i_{1}}+\\cdots+a_{i_{k}} .\n$$\n\nSummarizing these observations we get the following\n\nClaim. For every $n>r$, we have\n\n$$\na_{n}=\\max \\left\\{a_{i_{1}}+\\cdots+a_{i_{k}} \\text { : the collection }\\left(i_{1}, \\ldots, i_{k}\\right) \\text { satisfies (4) }\\right\\} .\n$$\n\nNow we denote\n\n$$\ns=\\max _{1 \\leq i \\leq r} \\frac{a_{i}}{i}\n$$\n\nand fix some index $\\ell \\leq r$ such that $s=\\frac{a_{\\ell}}{\\ell}$.\n\nConsider some $n \\geq r^{2} \\ell+2 r$ and choose an expansion of $a_{n}$ in the form (2), (4). Then we have $n=i_{1}+\\cdots+i_{k} \\leq r k$, so $k \\geq n / r \\geq r \\ell+2$. Suppose that none of the numbers $i_{3}, \\ldots, i_{k}$ equals $\\ell$. Then by the pigeonhole principle there is an index $1 \\leq j \\leq r$ which appears among $i_{3}, \\ldots, i_{k}$ at least $\\ell$ times, and surely $j \\neq \\ell$. Let us delete these $\\ell$ occurrences of $j$ from $\\left(i_{1}, \\ldots, i_{k}\\right)$, and add $j$ occurrences of $\\ell$ instead, obtaining a sequence $\\left(i_{1}, i_{2}, i_{3}^{\\prime}, \\ldots, i_{k^{\\prime}}^{\\prime}\\right)$ also satisfying (4). By Claim, we have\n\n$$\na_{i_{1}}+\\cdots+a_{i_{k}}=a_{n} \\geq a_{i_{1}}+a_{i_{2}}+a_{i_{3}^{\\prime}}+\\cdots+a_{i_{k^{\\prime}}^{\\prime}},\n$$\n\nor, after removing the coinciding terms, $\\ell a_{j} \\geq j a_{\\ell}$, so $\\frac{a_{\\ell}}{\\ell} \\leq \\frac{a_{j}}{j}$. By the definition of $\\ell$, this means that $\\ell a_{j}=j a_{\\ell}$, hence\n\n$$\na_{n}=a_{i_{1}}+a_{i_{2}}+a_{i_{3}^{\\prime}}+\\cdots+a_{i_{k^{\\prime}}^{\\prime}} .\n$$\n\nThus, for every $n \\geq r^{2} \\ell+2 r$ we have found a representation of the form (2), (4) with $i_{j}=\\ell$ for some $j \\geq 3$. Rearranging the indices we may assume that $i_{k}=\\ell$.\n\nFinally, observe that in this representation, the indices $\\left(i_{1}, \\ldots, i_{k-1}\\right)$ satisfy the conditions (4) with $n$ replaced by $n-\\ell$. Thus, from the Claim we get\n\n$$\na_{n-\\ell}+a_{\\ell} \\geq\\left(a_{i_{1}}+\\cdots+a_{i_{k-1}}\\right)+a_{\\ell}=a_{n},\n$$\n\nwhich by (1) implies\n\n$$\na_{n}=a_{n-\\ell}+a_{\\ell} \\quad \\text { for each } n \\geq r^{2} \\ell+2 r,\n$$\n\nas desired."
  },
  {
    "id": "fimo_2010_algebra_p8",
    "enunciado": "Given six positive numbers $a, b, c, d, e, f$ such that $a<b<c<d<e<f$. Let $a+c+e=S$ and $b+d+f=T$. Prove that\n\n$$\n2 S T>\\sqrt{3(S+T)(S(b d+b f+d f)+T(a c+a e+c e))} .\n$$",
    "solucao": "We define also $\\sigma=a c+c e+a e, \\tau=b d+b f+d f$. The idea of the solution is to interpret (1) as a natural inequality on the roots of an appropriate polynomial.\n\nActually, consider the polynomial\n\n$$\n\\begin{aligned}\nP(x)=(b+d+f)(x & -a)(x-c)(x-e)+(a+c+e)(x-b)(x-d)(x-f) \\\\\n& =T\\left(x^{3}-S x^{2}+\\sigma x-a c e\\right)+S\\left(x^{3}-T x^{2}+\\tau x-b d f\\right) .\n\\end{aligned}\n$$\n\nSurely, $P$ is cubic with leading coefficient $S+T>0$. Moreover, we have\n\n$$\n\\begin{array}{ll}\nP(a)=S(a-b)(a-d)(a-f)<0, & P(c)=S(c-b)(c-d)(c-f)>0 \\\\\nP(e)=S(e-b)(e-d)(e-f)<0, & P(f)=T(f-a)(f-c)(f-e)>0\n\\end{array}\n$$\n\nHence, each of the intervals $(a, c),(c, e),(e, f)$ contains at least one root of $P(x)$. Since there are at most three roots at all, we obtain that there is exactly one root in each interval (denote them by $\\alpha \\in(a, c), \\beta \\in(c, e), \\gamma \\in(e, f))$. Moreover, the polynomial $P$ can be factorized as\n\n$$\nP(x)=(T+S)(x-\\alpha)(x-\\beta)(x-\\gamma) .\n$$\n\nEquating the coefficients in the two representations (2) and (3) of $P(x)$ provides\n\n$$\n\\alpha+\\beta+\\gamma=\\frac{2 T S}{T+S}, \\quad \\alpha \\beta+\\alpha \\gamma+\\beta \\gamma=\\frac{S \\tau+T \\sigma}{T+S}\n$$\n\nNow, since the numbers $\\alpha, \\beta, \\gamma$ are distinct, we have\n\n$$\n0<(\\alpha-\\beta)^{2}+(\\alpha-\\gamma)^{2}+(\\beta-\\gamma)^{2}=2(\\alpha+\\beta+\\gamma)^{2}-6(\\alpha \\beta+\\alpha \\gamma+\\beta \\gamma)\n$$\n\nwhich implies\n\nor\n\n$$\n\\frac{4 S^{2} T^{2}}{(T+S)^{2}}=(\\alpha+\\beta+\\gamma)^{2}>3(\\alpha \\beta+\\alpha \\gamma+\\beta \\gamma)=\\frac{3(S \\tau+T \\sigma)}{T+S}\n$$\n\n$$\n4 S^{2} T^{2}>3(T+S)(T \\sigma+S \\tau)\n$$\n\nwhich is exactly what we need."
  },
  {
    "id": "fimo_2010_number_theory_p1_1",
    "enunciado": "Find the least positive integer $n$ for which there exists a set $\\left\\{s_{1}, s_{2}, \\ldots, s_{n}\\right\\}$ consisting of $n$ distinct positive integers such that\n\n$$\n\\left(1-\\frac{1}{s_{1}}\\right)\\left(1-\\frac{1}{s_{2}}\\right) \\ldots\\left(1-\\frac{1}{s_{n}}\\right)=\\frac{51}{2010} .\n$$\n\nThe final answer is $n=39$.",
    "solucao": "Suppose that for some $n$ there exist the desired numbers; we may assume that $s_{1}<s_{2}<\\cdots<s_{n}$. Surely $s_{1}>1$ since otherwise $1-\\frac{1}{s_{1}}=0$. So we have $2 \\leq s_{1} \\leq s_{2}-1 \\leq \\cdots \\leq s_{n}-(n-1)$, hence $s_{i} \\geq i+1$ for each $i=1, \\ldots, n$. Therefore\n\n$$\n\\begin{aligned}\n\\frac{51}{2010} & =\\left(1-\\frac{1}{s_{1}}\\right)\\left(1-\\frac{1}{s_{2}}\\right) \\ldots\\left(1-\\frac{1}{s_{n}}\\right) \\\\\n& \\geq\\left(1-\\frac{1}{2}\\right)\\left(1-\\frac{1}{3}\\right) \\cdots\\left(1-\\frac{1}{n+1}\\right)=\\frac{1}{2} \\cdot \\frac{2}{3} \\cdots \\frac{n}{n+1}=\\frac{1}{n+1},\n\\end{aligned}\n$$\n\nwhich implies\n\n$$\nn+1 \\geq \\frac{2010}{51}=\\frac{670}{17}>39,\n$$\n\nso $n \\geq 39$.\n\nNow we are left to show that $n=39$ fits. Consider the set $\\{2,3, \\ldots, 33,35,36, \\ldots, 40,67\\}$ which contains exactly 39 numbers. We have\n\n$$\n\\frac{1}{2} \\cdot \\frac{2}{3} \\cdots \\frac{32}{33} \\cdot \\frac{34}{35} \\cdots \\frac{39}{40} \\cdot \\frac{66}{67}=\\frac{1}{33} \\cdot \\frac{34}{40} \\cdot \\frac{66}{67}=\\frac{17}{670}=\\frac{51}{2010},\n$$\n\nhence for $n=39$ there exists a desired example."
  },
  {
    "id": "fimo_2010_number_theory_p1_2",
    "enunciado": "Find the least positive integer $n$ for which there exists a set $\\left\\{s_{1}, s_{2}, \\ldots, s_{n}\\right\\}$ consisting of $n$ distinct positive integers such that\n\n$$\n\\left(1-\\frac{1}{s_{1}}\\right)\\left(1-\\frac{1}{s_{2}}\\right) \\ldots\\left(1-\\frac{1}{s_{n}}\\right)=\\frac{42}{2010} .\n$$\n\nThe final answer is $n=48$.",
    "solucao": "Suppose that for some $n$ there exist the desired numbers. In the same way we obtain that $s_{i} \\geq i+1$. Moreover, since the denominator of the fraction $\\frac{42}{2010}=\\frac{7}{335}$ is divisible by 67 , some of $s_{i}$ 's should be divisible by 67 , so $s_{n} \\geq s_{i} \\geq 67$. This means that\n\n$$\n\\frac{42}{2010} \\geq \\frac{1}{2} \\cdot \\frac{2}{3} \\cdots \\frac{n-1}{n} \\cdot\\left(1-\\frac{1}{67}\\right)=\\frac{66}{67 n},\n$$\n\nwhich implies\n\n$$\nn \\geq \\frac{2010 \\cdot 66}{42 \\cdot 67}=\\frac{330}{7}>47\n$$\n\nso $n \\geq 48$.\n\nNow we are left to show that $n=48$ fits. Consider the set $\\{2,3, \\ldots, 33,36,37, \\ldots, 50,67\\}$ which contains exactly 48 numbers. We have\n\n$$\n\\frac{1}{2} \\cdot \\frac{2}{3} \\cdots \\frac{32}{33} \\cdot \\frac{35}{36} \\cdots \\frac{49}{50} \\cdot \\frac{66}{67}=\\frac{1}{33} \\cdot \\frac{35}{50} \\cdot \\frac{66}{67}=\\frac{7}{335}=\\frac{42}{2010},\n$$\n\nhence for $n=48$ there exists a desired example."
  },
  {
    "id": "fimo_2010_number_theory_p2",
    "enunciado": "Find all pairs $(m, n)$ of nonnegative integers for which\n\n$$\nm^{2}+2 \\cdot 3^{n}=m\\left(2^{n+1}-1\\right) .\n$$\n\nThe final answers are $(6,3),(9,3),(9,5),(54,5)$.",
    "solucao": "For fixed values of $n$, the equation (1) is a simple quadratic equation in $m$. For $n \\leq 5$ the solutions are listed in the following table.\n\n\\begin{center}\n\\begin{tabular}{|l|l|l|l|}\n\\hline\ncase & equation & discriminant & integer roots \\\\\n\\hline\n$n=0$ & $m^{2}-m+2=0$ & $-7$ & none \\\\\n$n=1$ & $m^{2}-3 m+6=0$ & $-15$ & none \\\\\n$n=2$ & $m^{2}-7 m+18=0$ & $-23$ & none \\\\\n$n=3$ & $m^{2}-15 m+54=0$ & 9 & $m=6$ and $m=9$ \\\\\n$n=4$ & $m^{2}-31 m+162=0$ & 313 & none \\\\\n$n=5$ & $m^{2}-63 m+486=0$ & $2025=45^{2}$ & $m=9$ and $m=54$ \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n\nWe prove that there is no solution for $n \\geq 6$.\n\nSuppose that $(m, n)$ satisfies (1) and $n \\geq 6$. Since $m \\mid 2 \\cdot 3^{n}=m\\left(2^{n+1}-1\\right)-m^{2}$, we have $m=3^{p}$ with some $0 \\leq p \\leq n$ or $m=2 \\cdot 3^{q}$ with some $0 \\leq q \\leq n$.\n\nIn the first case, let $q=n-p$; then\n\n$$\n2^{n+1}-1=m+\\frac{2 \\cdot 3^{n}}{m}=3^{p}+2 \\cdot 3^{q}\n$$\n\nIn the second case let $p=n-q$. Then\n\n$$\n2^{n+1}-1=m+\\frac{2 \\cdot 3^{n}}{m}=2 \\cdot 3^{q}+3^{p}\n$$\n\nHence, in both cases we need to find the nonnegative integer solutions of\n\n$$\n3^{p}+2 \\cdot 3^{q}=2^{n+1}-1, \\quad p+q=n .\n$$\n\nNext, we prove bounds for $p, q$. From (2) we get\n\n$$\n3^{p}<2^{n+1}=8^{\\frac{n+1}{3}}<9^{\\frac{n+1}{3}}=3^{\\frac{2(n+1)}{3}}\n$$\n\nand\n\n$$\n2 \\cdot 3^{q}<2^{n+1}=2 \\cdot 8^{\\frac{n}{3}}<2 \\cdot 9^{\\frac{n}{3}}=2 \\cdot 3^{\\frac{2 n}{3}}<2 \\cdot 3^{\\frac{2(n+1)}{3}},\n$$\n\nso $p, q<\\frac{2(n+1)}{3}$. Combining these inequalities with $p+q=n$, we obtain\n\n$$\n\\frac{n-2}{3}<p, q<\\frac{2(n+1)}{3} .\n$$\n\nNow let $h=\\min (p, q)$. By (3) we have $h>\\frac{n-2}{3}$; in particular, we have $h>1$. On the left-hand side of $(2)$, both terms are divisible by $3^{h}$, therefore $9\\left|3^{h}\\right| 2^{n+1}-1$. It is easy check that $\\operatorname{ord}_{9}(2)=6$, so $9 \\mid 2^{n+1}-1$ if and only if $6 \\mid n+1$. Therefore, $n+1=6 r$ for some positive integer $r$, and we can write\n\n$$\n2^{n+1}-1=4^{3 r}-1=\\left(4^{2 r}+4^{r}+1\\right)\\left(2^{r}-1\\right)\\left(2^{r}+1\\right) .\n$$\n\nNotice that the factor $4^{2 r}+4^{r}+1=\\left(4^{r}-1\\right)^{2}+3 \\cdot 4^{r}$ is divisible by 3 , but it is never divisible by 9 . The other two factors in (4), $2^{r}-1$ and $2^{r}+1$ are coprime: both are odd and their difference is 2 . Since the whole product is divisible by $3^{h}$, we have either $3^{h-1} \\mid 2^{r}-1$ or $3^{h-1} \\mid 2^{r}+1$. In any case, we have $3^{h-1} \\leq 2^{r}+1$. Then\n\n$$\n\\begin{gathered}\n3^{h-1} \\leq 2^{r}+1 \\leq 3^{r}=3^{\\frac{n+1}{6}} \\\\\n\\frac{n-2}{3}-1<h-1 \\leq \\frac{n+1}{6} \\\\\nn<11 .\n\\end{gathered}\n$$\n\nBut this is impossible since we assumed $n \\geq 6$, and we proved $6 \\mid n+1$."
  },
  {
    "id": "fimo_2010_number_theory_p3",
    "enunciado": "Find the smallest number $n$ such that there exist polynomials $f_{1}, f_{2}, \\ldots, f_{n}$ with rational coefficients satisfying\n\n$$\nx^{2}+7=f_{1}(x)^{2}+f_{2}(x)^{2}+\\cdots+f_{n}(x)^{2} .\n$$\n\nThe final answer is 5.",
    "solucao": "The equality $x^{2}+7=x^{2}+2^{2}+1^{2}+1^{2}+1^{2}$ shows that $n \\leq 5$. It remains to show that $x^{2}+7$ is not a sum of four (or less) squares of polynomials with rational coefficients.\n\nSuppose by way of contradiction that $x^{2}+7=f_{1}(x)^{2}+f_{2}(x)^{2}+f_{3}(x)^{2}+f_{4}(x)^{2}$, where the coefficients of polynomials $f_{1}, f_{2}, f_{3}$ and $f_{4}$ are rational (some of these polynomials may be zero).\n\nClearly, the degrees of $f_{1}, f_{2}, f_{3}$ and $f_{4}$ are at most 1. Thus $f_{i}(x)=a_{i} x+b_{i}$ for $i=1,2,3,4$ and some rationals $a_{1}, b_{1}, a_{2}, b_{2}, a_{3}, b_{3}, a_{4}, b_{4}$. It follows that $x^{2}+7=\\sum_{i=1}^{4}\\left(a_{i} x+b_{i}\\right)^{2}$ and hence\n\n$$\n\\sum_{i=1}^{4} a_{i}^{2}=1, \\quad \\sum_{i=1}^{4} a_{i} b_{i}=0, \\quad \\sum_{i=1}^{4} b_{i}^{2}=7 .\n$$\n\nLet $p_{i}=a_{i}+b_{i}$ and $q_{i}=a_{i}-b_{i}$ for $i=1,2,3,4$. Then\n\n$$\n\\begin{aligned}\n\\sum_{i=1}^{4} p_{i}^{2} & =\\sum_{i=1}^{4} a_{i}^{2}+2 \\sum_{i=1}^{4} a_{i} b_{i}+\\sum_{i=1}^{4} b_{i}^{2}=8 \\\\\n\\sum_{i=1}^{4} q_{i}^{2} & =\\sum_{i=1}^{4} a_{i}^{2}-2 \\sum_{i=1}^{4} a_{i} b_{i}+\\sum_{i=1}^{4} b_{i}^{2}=8 \\\\\n\\text { and } \\quad \\sum_{i=1}^{4} p_{i} q_{i} & =\\sum_{i=1}^{4} a_{i}^{2}-\\sum_{i=1}^{4} b_{i}^{2}=-6\n\\end{aligned}\n$$\n\nwhich means that there exist a solution in integers $x_{1}, y_{1}, x_{2}, y_{2}, x_{3}, y_{3}, x_{4}, y_{4}$ and $m>0$ of the system of equations\n\n$$\n\\text { (i) } \\sum_{i=1}^{4} x_{i}^{2}=8 m^{2}, \\quad \\text { (ii) } \\sum_{i=1}^{4} y_{i}^{2}=8 m^{2}, \\quad \\text { (iii) } \\sum_{i=1}^{4} x_{i} y_{i}=-6 m^{2} \\text {. }\n$$\n\nWe will show that such a solution does not exist.\n\nAssume the contrary and consider a solution with minimal $m$. Note that if an integer $x$ is odd then $x^{2} \\equiv 1(\\bmod 8)$. Otherwise (i.e., if $x$ is even $)$ we have $x^{2} \\equiv 0(\\bmod 8)$ or $x^{2} \\equiv 4$ $(\\bmod 8)$. Hence, by (i), we get that $x_{1}, x_{2}, x_{3}$ and $x_{4}$ are even. Similarly, by (ii), we get that $y_{1}, y_{2}, y_{3}$ and $y_{4}$ are even. Thus the LHS of (iii) is divisible by 4 and $m$ is also even. It follows that $\\left(\\frac{x_{1}}{2}, \\frac{y_{1}}{2}, \\frac{x_{2}}{2}, \\frac{y_{2}}{2}, \\frac{x_{3}}{2}, \\frac{y_{3}}{2}, \\frac{x_{4}}{2}, \\frac{y_{4}}{2}, \\frac{m}{2}\\right)$ is a solution of the system of equations (i), (ii) and (iii), which contradicts the minimality of $m$."
  },
  {
    "id": "fimo_2010_number_theory_p4_1",
    "enunciado": "Let $a, b$ be integers, and let $P(x)=a x^{3}+b x$. For any positive integer $n$ we say that the pair $(a, b)$ is $n$-good if $n \\mid P(m)-P(k)$ implies $n \\mid m-k$ for all integers $m, k$. We say that $(a, b)$ is very good if $(a, b)$ is $n$-good for infinitely many positive integers $n$.\n\nFind a pair $(a, b)$ which is 51 -good, but not very good.\n\nThe final answer is the pair $\\left(1,-51^{2}\\right)$.",
    "solucao": "We show that the pair $\\left(1,-51^{2}\\right)$ is good but not very good. Let $P(x)=x^{3}-51^{2} x$. Since $P(51)=P(0)$, the pair $\\left(1,-51^{2}\\right)$ is not $n$-good for any positive integer that does not divide 51 . Therefore, $\\left(1,-51^{2}\\right)$ is not very good.\n\nOn the other hand, if $P(m) \\equiv P(k)(\\bmod 51)$, then $m^{3} \\equiv k^{3}(\\bmod 51)$. By Fermat's theorem, from this we obtain\n\n$$\nm \\equiv m^{3} \\equiv k^{3} \\equiv k \\quad(\\bmod 3) \\quad \\text { and } \\quad m \\equiv m^{33} \\equiv k^{33} \\equiv k \\quad(\\bmod 17) .\n$$\n\nHence we have $m \\equiv k(\\bmod 51)$. Therefore $\\left(1,-51^{2}\\right)$ is 51 -good."
  },
  {
    "id": "fimo_2010_number_theory_p4_2",
    "enunciado": "Let $a, b$ be integers, and let $P(x)=a x^{3}+b x$. For any positive integer $n$ we say that the pair $(a, b)$ is $n$-good if $n \\mid P(m)-P(k)$ implies $n \\mid m-k$ for all integers $m, k$. We say that $(a, b)$ is very good if $(a, b)$ is $n$-good for infinitely many positive integers $n$.\n\nShow that all 2010-good pairs are very good.",
    "solucao": "We will show that if a pair $(a, b)$ is 2010-good then $(a, b)$ is $67^{i}$-good for all positive integer $i$.\n\nClaim 1. If $(a, b)$ is 2010-good then $(a, b)$ is 67-good.\n\nProof. Assume that $P(m)=P(k)(\\bmod 67)$. Since 67 and 30 are coprime, there exist integers $m^{\\prime}$ and $k^{\\prime}$ such that $k^{\\prime} \\equiv k(\\bmod 67), k^{\\prime} \\equiv 0(\\bmod 30)$, and $m^{\\prime} \\equiv m(\\bmod 67), m^{\\prime} \\equiv 0$ $(\\bmod 30)$. Then we have $P\\left(m^{\\prime}\\right) \\equiv P(0) \\equiv P\\left(k^{\\prime}\\right)(\\bmod 30)$ and $P\\left(m^{\\prime}\\right) \\equiv P(m) \\equiv P(k) \\equiv P\\left(k^{\\prime}\\right)$ $(\\bmod 67)$, hence $P\\left(m^{\\prime}\\right) \\equiv P\\left(k^{\\prime}\\right)(\\bmod 2010)$. This implies $m^{\\prime} \\equiv k^{\\prime}(\\bmod 2010)$ as $(a, b)$ is 2010-good. It follows that $m \\equiv m^{\\prime} \\equiv k^{\\prime} \\equiv k(\\bmod 67)$. Therefore, $(a, b)$ is 67-good.\n\nClaim 2. If $(a, b)$ is 67-good then $67 \\mid a$.\n\nProof. Suppose that $67 \\nmid a$. Consider the sets $\\left\\{a t^{2}(\\bmod 67): 0 \\leq t \\leq 33\\right\\}$ and $\\left\\{-3 a s^{2}-b\\right.$ $\\bmod 67: 0 \\leq s \\leq 33\\}$. Since $a \\not \\equiv 0(\\bmod 67)$, each of these sets has 34 elements. Hence they have at least one element in common. If $a t^{2} \\equiv-3 a s^{2}-b(\\bmod 67)$ then for $m=t \\pm s, k=\\mp 2 s$ we have\n\n$$\n\\begin{aligned}\nP(m)-P(k)=a\\left(m^{3}-k^{3}\\right)+b(m-k) & =(m-k)\\left(a\\left(m^{2}+m k+k^{2}\\right)+b\\right) \\\\\n& =(t \\pm 3 s)\\left(a t^{2}+3 a s^{2}+b\\right) \\equiv 0 \\quad(\\bmod 67) .\n\\end{aligned}\n$$\n\nSince $(a, b)$ is 67-good, we must have $m \\equiv k(\\bmod 67)$ in both cases, that is, $t \\equiv 3 s(\\bmod 67)$ and $t \\equiv-3 s(\\bmod 67)$. This means $t \\equiv s \\equiv 0(\\bmod 67)$ and $b \\equiv-3 a s^{2}-a t^{2} \\equiv 0(\\bmod 67)$. But then $67 \\mid P(7)-P(2)=67 \\cdot 5 a+5 b$ and $67 / 7-2$, contradicting that $(a, b)$ is 67 -good.\n\nClaim 3. If $(a, b)$ is 2010 -good then $(a, b)$ is $67^{i}$-good all $i \\geq 1$.\n\nProof. By Claim 2, we have $67 \\mid a$. If $67 \\mid b$, then $P(x) \\equiv P(0)(\\bmod 67)$ for all $x$, contradicting that $(a, b)$ is 67 -good. Hence, $67 \\nmid b$.\n\nSuppose that $67^{i} \\mid P(m)-P(k)=(m-k)\\left(a\\left(m^{2}+m k+k^{2}\\right)+b\\right)$. Since $67 \\mid a$ and $67 \\chi b$, the second factor $a\\left(m^{2}+m k+k^{2}\\right)+b$ is coprime to 67 and hence $67^{i} \\mid m-k$. Therefore, $(a, b)$ is $67^{i}-\\operatorname{good}$."
  },
  {
    "id": "fimo_2010_number_theory_p5",
    "enunciado": "Let $\\mathbb{N}$ be the set of all positive integers. Find all functions $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ such that the number $(f(m)+n)(m+f(n))$ is a square for all $m, n \\in \\mathbb{N}$.\n\nThe final answers are all functions of the form $f(n)=n+c$, where $c \\in \\mathbb{N} \\cup\\{0\\}$.",
    "solucao": "First, it is clear that all functions of the form $f(n)=n+c$ with a constant nonnegative integer $c$ satisfy the problem conditions since $(f(m)+n)(f(n)+m)=(n+m+c)^{2}$ is a square.\n\nWe are left to prove that there are no other functions. We start with the following Lemma. Suppose that $p \\mid f(k)-f(\\ell)$ for some prime $p$ and positive integers $k, \\ell$. Then $p \\mid k-\\ell$. Proof. Suppose first that $p^{2} \\mid f(k)-f(\\ell)$, so $f(\\ell)=f(k)+p^{2} a$ for some integer $a$. Take some positive integer $D>\\max \\{f(k), f(\\ell)\\}$ which is not divisible by $p$ and set $n=p D-f(k)$. Then the positive numbers $n+f(k)=p D$ and $n+f(\\ell)=p D+(f(\\ell)-f(k))=p(D+p a)$ are both divisible by $p$ but not by $p^{2}$. Now, applying the problem conditions, we get that both the numbers $(f(k)+n)(f(n)+k)$ and $(f(\\ell)+n)(f(n)+\\ell)$ are squares divisible by $p$ (and thus by $\\left.p^{2}\\right)$; this means that the multipliers $f(n)+k$ and $f(n)+\\ell$ are also divisible by $p$, therefore $p \\mid(f(n)+k)-(f(n)+\\ell)=k-\\ell$ as well.\n\nOn the other hand, if $f(k)-f(\\ell)$ is divisible by $p$ but not by $p^{2}$, then choose the same number $D$ and set $n=p^{3} D-f(k)$. Then the positive numbers $f(k)+n=p^{3} D$ and $f(\\ell)+n=$ $p^{3} D+(f(\\ell)-f(k))$ are respectively divisible by $p^{3}$ (but not by $\\left.p^{4}\\right)$ and by $p$ (but not by $p^{2}$ ). Hence in analogous way we obtain that the numbers $f(n)+k$ and $f(n)+\\ell$ are divisible by $p$, therefore $p \\mid(f(n)+k)-(f(n)+\\ell)=k-\\ell$.\n\nWe turn to the problem. First, suppose that $f(k)=f(\\ell)$ for some $k, \\ell \\in \\mathbb{N}$. Then by Lemma we have that $k-\\ell$ is divisible by every prime number, so $k-\\ell=0$, or $k=\\ell$. Therefore, the function $f$ is injective.\n\nNext, consider the numbers $f(k)$ and $f(k+1)$. Since the number $(k+1)-k=1$ has no prime divisors, by Lemma the same holds for $f(k+1)-f(k)$; thus $|f(k+1)-f(k)|=1$.\n\nNow, let $f(2)-f(1)=q,|q|=1$. Then we prove by induction that $f(n)=f(1)+q(n-1)$. The base for $n=1,2$ holds by the definition of $q$. For the step, if $n>1$ we have $f(n+1)=$ $f(n) \\pm q=f(1)+q(n-1) \\pm q$. Since $f(n) \\neq f(n-2)=f(1)+q(n-2)$, we get $f(n)=f(1)+q n$, as desired.\n\nFinally, we have $f(n)=f(1)+q(n-1)$. Then $q$ cannot be $-1$ since otherwise for $n \\geq f(1)+1$ we have $f(n) \\leq 0$ which is impossible. Hence $q=1$ and $f(n)=(f(1)-1)+n$ for each $n \\in \\mathbb{N}$, and $f(1)-1 \\geq 0$, as desired."
  },
  {
    "id": "fimo_2010_number_theory_p6",
    "enunciado": "The rows and columns of a $2^{n} \\times 2^{n}$ table are numbered from 0 to $2^{n}-1$. The cells of the table have been colored with the following property being satisfied: for each $0 \\leq i, j \\leq 2^{n}-1$, the $j$ th cell in the $i$ th row and the $(i+j)$ th cell in the $j$ th row have the same color. (The indices of the cells in a row are considered modulo $2^{n}$.)\n\nProve that the maximal possible number of colors is $2^{n}$.",
    "solucao": "Throughout the solution we denote the cells of the table by coordinate pairs; $(i, j)$ refers to the $j$ th cell in the $i$ th row.\n\nConsider the directed graph, whose vertices are the cells of the board, and the edges are the arrows $(i, j) \\rightarrow(j, i+j)$ for all $0 \\leq i, j \\leq 2^{n}-1$. From each vertex $(i, j)$, exactly one edge passes (to $\\left(j, i+j \\bmod 2^{n}\\right)$ ); conversely, to each cell $(j, k)$ exactly one edge is directed (from the cell $\\left.\\left(k-j \\bmod 2^{n}, j\\right)\\right)$. Hence, the graph splits into cycles.\n\nNow, in any coloring considered, the vertices of each cycle should have the same color by the problem condition. On the other hand, if each cycle has its own color, the obtained coloring obviously satisfies the problem conditions. Thus, the maximal possible number of colors is the same as the number of cycles, and we have to prove that this number is $2^{n}$.\n\nNext, consider any cycle $\\left(i_{1}, j_{1}\\right),\\left(i_{2}, j_{2}\\right), \\ldots ;$ we will describe it in other terms. Define a sequence $\\left(a_{0}, a_{1}, \\ldots\\right)$ by the relations $a_{0}=i_{1}, a_{1}=j_{1}, a_{n+1}=a_{n}+a_{n-1}$ for all $n \\geq 1$ (we say that such a sequence is a Fibonacci-type sequence). Then an obvious induction shows that $i_{k} \\equiv a_{k-1}\\left(\\bmod 2^{n}\\right), j_{k} \\equiv a_{k}\\left(\\bmod 2^{n}\\right)$. Hence we need to investigate the behavior of Fibonacci-type sequences modulo $2^{n}$.\n\nDenote by $F_{0}, F_{1}, \\ldots$ the Fibonacci numbers defined by $F_{0}=0, F_{1}=1$, and $F_{n+2}=$ $F_{n+1}+F_{n}$ for $n \\geq 0$. We also set $F_{-1}=1$ according to the recurrence relation.\n\nFor every positive integer $m$, denote by $\\nu(m)$ the exponent of 2 in the prime factorization of $m$, i.e. for which $2^{\\nu(m)} \\mid m$ but $2^{\\nu(m)+1} \\not m$.\n\nLemma 1. For every Fibonacci-type sequence $a_{0}, a_{1}, a_{2}, \\ldots$, and every $k \\geq 0$, we have $a_{k}=$ $F_{k-1} a_{0}+F_{k} a_{1}$.\n\nProof. Apply induction on $k$. The base cases $k=0,1$ are trivial. For the step, from the induction hypothesis we get\n\n$$\na_{k+1}=a_{k}+a_{k-1}=\\left(F_{k-1} a_{0}+F_{k} a_{1}\\right)+\\left(F_{k-2} a_{0}+F_{k-1} a_{1}\\right)=F_{k} a_{0}+F_{k+1} a_{1} .\n$$\n\nLemma 2. For every $m \\geq 3$,\n\n(a) we have $\\nu\\left(F_{3 \\cdot 2^{m-2}}\\right)=m$\n\n(b) $d=3 \\cdot 2^{m-2}$ is the least positive index for which $2^{m} \\mid F_{d}$;\n\n(c) $F_{3 \\cdot 2^{m-2}+1} \\equiv 1+2^{m-1}\\left(\\bmod 2^{m}\\right)$.\n\nProof. Apply induction on $m$. In the base case $m=3$ we have $\\nu\\left(F_{3 \\cdot 2^{m-2}}\\right)=F_{6}=8$, so $\\nu\\left(F_{3 \\cdot 2^{m-2}}\\right)=\\nu(8)=3$, the preceding Fibonacci-numbers are not divisible by 8 , and indeed $F_{3 \\cdot 2^{m-2}+1}=F_{7}=13 \\equiv 1+4(\\bmod 8)$.\n\nNow suppose that $m>3$ and let $k=3 \\cdot 2^{m-3}$. By applying Lemma 1 to the Fibonacci-type sequence $F_{k}, F_{k+1}, \\ldots$ we get\n\n$$\n\\begin{gathered}\nF_{2 k}=F_{k-1} F_{k}+F_{k} F_{k+1}=\\left(F_{k+1}-F_{k}\\right) F_{k}+F_{k+1} F_{k}=2 F_{k+1} F_{k}-F_{k}^{2}, \\\\\nF_{2 k+1}=F_{k} \\cdot F_{k}+F_{k+1} \\cdot F_{k+1}=F_{k}^{2}+F_{k+1}^{2} .\n\\end{gathered}\n$$\n\nBy the induction hypothesis, $\\nu\\left(F_{k}\\right)=m-1$, and $F_{k+1}$ is odd. Therefore we get $\\nu\\left(F_{k}^{2}\\right)=$ $2(m-1)>(m-1)+1=\\nu\\left(2 F_{k} F_{k+1}\\right)$, which implies $\\nu\\left(F_{2 k}\\right)=m$, establishing statement (a). Moreover, since $F_{k+1}=1+2^{m-2}+a 2^{m-1}$ for some integer $a$, we get\n\n$$\nF_{2 k+1}=F_{k}^{2}+F_{k+1}^{2} \\equiv 0+\\left(1+2^{m-2}+a 2^{m-1}\\right)^{2} \\equiv 1+2^{m-1} \\quad\\left(\\bmod 2^{m}\\right)\n$$\n\nas desired in statement (c).\n\nWe are left to prove that $2^{m} \\backslash F_{\\ell}$ for $\\ell<2 k$. Assume the contrary. Since $2^{m-1} \\mid F_{\\ell}$, from the induction hypothesis it follows that $\\ell>k$. But then we have $F_{\\ell}=F_{k-1} F_{\\ell-k}+F_{k} F_{\\ell-k+1}$, where the second summand is divisible by $2^{m-1}$ but the first one is not (since $F_{k-1}$ is odd and $\\ell-k<k)$. Hence the sum is not divisible even by $2^{m-1}$. A contradiction.\n\nNow, for every pair of integers $(a, b) \\neq(0,0)$, let $\\mu(a, b)=\\min \\{\\nu(a), \\nu(b)\\}$. By an obvious induction, for every Fibonacci-type sequence $A=\\left(a_{0}, a_{1}, \\ldots\\right)$ we have $\\mu\\left(a_{0}, a_{1}\\right)=\\mu\\left(a_{1}, a_{2}\\right)=\\ldots$; denote this common value by $\\mu(A)$. Also denote by $p_{n}(A)$ the period of this sequence modulo $2^{n}$, that is, the least $p>0$ such that $a_{k+p} \\equiv a_{k}\\left(\\bmod 2^{n}\\right)$ for all $k \\geq 0$.\n\nLemma 3. Let $A=\\left(a_{0}, a_{1}, \\ldots\\right)$ be a Fibonacci-type sequence such that $\\mu(A)=k<n$. Then $p_{n}(A)=3 \\cdot 2^{n-1-k}$\n\nProof. First, we note that the sequence $\\left(a_{0}, a_{1}, \\ldots\\right)$ has period $p$ modulo $2^{n}$ if and only if the sequence $\\left(a_{0} / 2^{k}, a_{1} / 2^{k}, \\ldots\\right)$ has period $p$ modulo $2^{n-k}$. Hence, passing to this sequence we can assume that $k=0$.\n\nWe prove the statement by induction on $n$. It is easy to see that for $n=1,2$ the claim is true; actually, each Fibonacci-type sequence $A$ with $\\mu(A)=0$ behaves as $0,1,1,0,1,1, \\ldots$ modulo 2 , and as $0,1,1,2,3,1,0,1,1,2,3,1, \\ldots$ modulo 4 (all pairs of residues from which at least one is odd appear as a pair of consecutive terms in this sequence).\n\nNow suppose that $n \\geq 3$ and consider an arbitrary Fibonacci-type sequence $A=\\left(a_{0}, a_{1}, \\ldots\\right)$ with $\\mu(A)=0$. Obviously we should have $p_{n-1}(A) \\mid p_{n}(A)$, or, using the induction hypothesis, $s=3 \\cdot 2^{n-2} \\mid p_{n}(A)$. Next, we may suppose that $a_{0}$ is even; hence $a_{1}$ is odd, and $a_{0}=2 b_{0}$, $a_{1}=2 b_{1}+1$ for some integers $b_{0}, b_{1}$.\n\nConsider the Fibonacci-type sequence $B=\\left(b_{0}, b_{1}, \\ldots\\right)$ starting with $\\left(b_{0}, b_{1}\\right)$. Since $a_{0}=$ $2 b_{0}+F_{0}, a_{1}=2 b_{1}+F_{1}$, by an easy induction we get $a_{k}=2 b_{k}+F_{k}$ for all $k \\geq 0$. By the induction hypothesis, we have $p_{n-1}(B) \\mid s$, hence the sequence $\\left(2 b_{0}, 2 b_{1}, \\ldots\\right)$ is $s$-periodic modulo $2^{n}$. On the other hand, by Lemma 2 we have $F_{s+1} \\equiv 1+2^{n-1}\\left(\\bmod 2^{n}\\right), F_{2 s} \\equiv 0$ $\\left(\\bmod 2^{n}\\right), F_{2 s+1} \\equiv 1\\left(\\bmod 2^{n}\\right)$, hence\n\n$$\n\\begin{gathered}\na_{s+1}=2 b_{s+1}+F_{s+1} \\equiv 2 b_{1}+1+2^{n-1} \\not 2 b_{1}+1=a_{1} \\quad\\left(\\bmod 2^{n}\\right), \\\\\na_{2 s}=2 b_{2 s}+F_{2 s} \\equiv 2 b_{0}+0=a_{0} \\quad\\left(\\bmod 2^{n}\\right), \\\\\na_{2 s+1}=2 b_{2 s+1}+F_{2 s+1} \\equiv 2 b_{1}+1=a_{1} \\quad\\left(\\bmod 2^{n}\\right) .\n\\end{gathered}\n$$\n\nThe first line means that $A$ is not $s$-periodic, while the other two provide that $a_{2 s} \\equiv a_{0}$, $a_{2 s+1} \\equiv a_{1}$ and hence $a_{2 s+t} \\equiv a_{t}$ for all $t \\geq 0$. Hence $s\\left|p_{n}(A)\\right| 2 s$ and $p_{n}(A) \\neq s$, which means that $p_{n}(A)=2 s$, as desired.\n\nFinally, Lemma 3 provides a straightforward method of counting the number of cycles. Actually, take any number $0 \\leq k \\leq n-1$ and consider all the cells $(i, j)$ with $\\mu(i, j)=k$. The total number of such cells is $2^{2(n-k)}-2^{2(n-k-1)}=3 \\cdot 2^{2 n-2 k-2}$. On the other hand, they are split into cycles, and by Lemma 3 the length of each cycle is $3 \\cdot 2^{n-1-k}$. Hence the number of cycles consisting of these cells is exactly $\\frac{3 \\cdot 2^{2 n-2 k-2}}{3 \\cdot 2^{n-1-k}}=2^{n-k-1}$. Finally, there is only one cell $(0,0)$ which is not mentioned in the previous computation, and it forms a separate cycle. So the total number of cycles is\n\n$$\n1+\\sum_{k=0}^{n-1} 2^{n-1-k}=1+\\left(1+2+4+\\cdots+2^{n-1}\\right)=2^{n}\n$$"
  },
  {
    "id": "fimo_2011_algebra_p1",
    "enunciado": "For any set $A=\\left\\{a_{1}, a_{2}, a_{3}, a_{4}\\right\\}$ of four distinct positive integers with sum $s_{A}=a_{1}+a_{2}+a_{3}+a_{4}$, let $p_{A}$ denote the number of pairs $(i, j)$ with $1 \\leq i<j \\leq 4$ for which $a_{i}+a_{j}$ divides $s_{A}$. Among all sets of four distinct positive integers, determine those sets $A$ for which $p_{A}$ is maximal.\n\nThe final answers are the sets $A$ for which $p_{A}$ is maximal are the sets the form $\\{d, 5 d, 7 d, 11 d\\}$ and $\\{d, 11 d, 19 d, 29 d\\}$, where $d$ is any positive integer. For all these sets $p_{A}$ is 4 .",
    "solucao": "Firstly, we will prove that the maximum value of $p_{A}$ is at most 4 . Without loss of generality, we may assume that $a_{1}<a_{2}<a_{3}<a_{4}$. We observe that for each pair of indices $(i, j)$ with $1 \\leq i<j \\leq 4$, the sum $a_{i}+a_{j}$ divides $s_{A}$ if and only if $a_{i}+a_{j}$ divides $s_{A}-\\left(a_{i}+a_{j}\\right)=a_{k}+a_{l}$, where $k$ and $l$ are the other two indices. Since there are 6 distinct pairs, we have to prove that at least two of them do not satisfy the previous condition. We claim that two such pairs are $\\left(a_{2}, a_{4}\\right)$ and $\\left(a_{3}, a_{4}\\right)$. Indeed, note that $a_{2}+a_{4}>a_{1}+a_{3}$ and $a_{3}+a_{4}>a_{1}+a_{2}$. Hence $a_{2}+a_{4}$ and $a_{3}+a_{4}$ do not divide $s_{A}$. This proves $p_{A} \\leq 4$.\n\nNow suppose $p_{A}=4$. By the previous argument we have\n\n$$\n\\begin{array}{llll|l}\na_{1}+a_{4} \\mid a_{2}+a_{3} & \\text { and } & a_{2}+a_{3} \\mid a_{1}+a_{4}, \\\\\na_{1}+a_{2} \\mid a_{3}+a_{4} & \\text { and } & a_{3}+a_{4} \\nless a_{1}+a_{2}, \\\\\na_{1}+a_{3} & a_{2}+a_{4} & \\text { and } & a_{2}+a_{4} \\nless a_{1}+a_{3} .\n\\end{array}\n$$\n\nHence, there exist positive integers $m$ and $n$ with $m>n \\geq 2$ such that\n\n$$\n\\left\\{\\begin{array}{l}\na_{1}+a_{4}=a_{2}+a_{3} \\\\\nm\\left(a_{1}+a_{2}\\right)=a_{3}+a_{4} \\\\\nn\\left(a_{1}+a_{3}\\right)=a_{2}+a_{4}\n\\end{array}\\right.\n$$\n\nAdding up the first equation and the third one, we get $n\\left(a_{1}+a_{3}\\right)=2 a_{2}+a_{3}-a_{1}$. If $n \\geq 3$, then $n\\left(a_{1}+a_{3}\\right)>3 a_{3}>2 a_{2}+a_{3}>2 a_{2}+a_{3}-a_{1}$. This is a contradiction. Therefore $n=2$. If we multiply by 2 the sum of the first equation and the third one, we obtain\n\n$$\n6 a_{1}+2 a_{3}=4 a_{2},\n$$\n\nwhile the sum of the first one and the second one is\n\n$$\n(m+1) a_{1}+(m-1) a_{2}=2 a_{3} .\n$$\n\nAdding up the last two equations we get\n\n$$\n(m+7) a_{1}=(5-m) a_{2} .\n$$\n\nIt follows that $5-m \\geq 1$, because the left-hand side of the last equation and $a_{2}$ are positive. Since we have $m>n=2$, the integer $m$ can be equal only to either 3 or 4 . Substituting $(3,2)$ and $(4,2)$ for $(m, n)$ and solving the previous system of equations, we find the families of solutions $\\{d, 5 d, 7 d, 11 d\\}$ and $\\{d, 11 d, 19 d, 29 d\\}$, where $d$ is any positive integer."
  },
  {
    "id": "fimo_2011_algebra_p2",
    "enunciado": "Determine all sequences $\\left(x_{1}, x_{2}, \\ldots, x_{2011}\\right)$ of positive integers such that for every positive integer $n$ there is an integer $a$ with\n\n$$\nx_{1}^{n}+2 x_{2}^{n}+\\cdots+2011 x_{2011}^{n}=a^{n+1}+1 .\n$$\n\nThe final answer is that the only sequence that satisfies the condition is\n\n$$\n\\left(x_{1}, \\ldots, x_{2011}\\right)=(1, k, \\ldots, k) \\quad \\text { with } k=2+3+\\cdots+2011=2023065\n$$",
    "solucao": "Throughout this solution, the set of positive integers will be denoted by $\\mathbb{Z}_{+}$.\n\nPut $k=2+3+\\cdots+2011=2023065$. We have\n\n$$\n1^{n}+2 k^{n}+\\cdots 2011 k^{n}=1+k \\cdot k^{n}=k^{n+1}+1\n$$\n\nfor all $n$, so $(1, k, \\ldots, k)$ is a valid sequence. We shall prove that it is the only one.\n\nLet a valid sequence $\\left(x_{1}, \\ldots, x_{2011}\\right)$ be given. For each $n \\in \\mathbb{Z}_{+}$we have some $y_{n} \\in \\mathbb{Z}_{+}$with\n\n$$\nx_{1}^{n}+2 x_{2}^{n}+\\cdots+2011 x_{2011}^{n}=y_{n}^{n+1}+1 .\n$$\n\nNote that $x_{1}^{n}+2 x_{2}^{n}+\\cdots+2011 x_{2011}^{n}<\\left(x_{1}+2 x_{2}+\\cdots+2011 x_{2011}\\right)^{n+1}$, which implies that the sequence $\\left(y_{n}\\right)$ is bounded. In particular, there is some $y \\in \\mathbb{Z}_{+}$with $y_{n}=y$ for infinitely many $n$.\n\nLet $m$ be the maximum of all the $x_{i}$. Grouping terms with equal $x_{i}$ together, the sum $x_{1}^{n}+$ $2 x_{2}^{n}+\\cdots+2011 x_{2011}^{n}$ can be written as\n\n$$\nx_{1}^{n}+2 x_{2}^{n}+\\cdots+x_{2011}^{n}=a_{m} m^{n}+a_{m-1}(m-1)^{n}+\\cdots+a_{1}\n$$\n\nwith $a_{i} \\geq 0$ for all $i$ and $a_{1}+\\cdots+a_{m}=1+2+\\cdots+2011$. So there exist arbitrarily large values of $n$, for which\n\n$$\na_{m} m^{n}+\\cdots+a_{1}-1-y \\cdot y^{n}=0 .\n$$\n\nThe following lemma will help us to determine the $a_{i}$ and $y$ :\n\nLemma. Let integers $b_{1}, \\ldots, b_{N}$ be given and assume that there are arbitrarily large positive integers $n$ with $b_{1}+b_{2} 2^{n}+\\cdots+b_{N} N^{n}=0$. Then $b_{i}=0$ for all $i$.\n\nProof. Suppose that not all $b_{i}$ are zero. We may assume without loss of generality that $b_{N} \\neq 0$. Dividing through by $N^{n}$ gives\n\n$$\n\\left|b_{N}\\right|=\\left|b_{N-1}\\left(\\frac{N-1}{N}\\right)^{n}+\\cdots+b_{1}\\left(\\frac{1}{N}\\right)^{n}\\right| \\leq\\left(\\left|b_{N-1}\\right|+\\cdots+\\left|b_{1}\\right|\\right)\\left(\\frac{N-1}{N}\\right)^{n} .\n$$\n\nThe expression $\\left(\\frac{N-1}{N}\\right)^{n}$ can be made arbitrarily small for $n$ large enough, contradicting the assumption that $b_{N}$ be non-zero.\n\nWe obviously have $y>1$. Applying the lemma to (1) we see that $a_{m}=y=m, a_{1}=1$, and all the other $a_{i}$ are zero. This implies $\\left(x_{1}, \\ldots, x_{2011}\\right)=(1, m, \\ldots, m)$. But we also have $1+m=a_{1}+\\cdots+a_{m}=1+\\cdots+2011=1+k$ so $m=k$, which is what we wanted to show."
  },
  {
    "id": "fimo_2011_algebra_p3",
    "enunciado": "Determine all pairs $(f, g)$ of functions from the set of real numbers to itself that satisfy\n\n$$\ng(f(x+y))=f(x)+(2 x+y) g(y)\n$$\n\nfor all real numbers $x$ and $y$.\n\nThe final answer is that either both $f$ and $g$ vanish identically, or there exists a real number $C$ such that $f(x)=x^{2}+C$ and $g(x)=x$ for all real numbers $x$.",
    "solucao": "Solution. Clearly all these pairs of functions satisfy the functional equation in question, so it suffices to verify that there cannot be any further ones. Substituting $-2 x$ for $y$ in the given functional equation we obtain\n\n$$\ng(f(-x))=f(x) .\n$$\n\nUsing this equation for $-x-y$ in place of $x$ we obtain\n\n$$\nf(-x-y)=g(f(x+y))=f(x)+(2 x+y) g(y)\n$$\n\nNow for any two real numbers $a$ and $b$, setting $x=-b$ and $y=a+b$ we get\n\n$$\nf(-a)=f(-b)+(a-b) g(a+b) .\n$$\n\nIf $c$ denotes another arbitrary real number we have similarly\n\n$$\nf(-b)=f(-c)+(b-c) g(b+c)\n$$\n\nas well as\n\n$$\nf(-c)=f(-a)+(c-a) g(c+a) .\n$$\n\nAdding all these equations up, we obtain\n\n$$\n((a+c)-(b+c)) g(a+b)+((a+b)-(a+c)) g(b+c)+((b+c)-(a+b)) g(a+c)=0 .\n$$\n\nNow given any three real numbers $x, y$, and $z$ one may determine three reals $a, b$, and $c$ such that $x=b+c, y=c+a$, and $z=a+b$, so that we get\n\n$$\n(y-x) g(z)+(z-y) g(x)+(x-z) g(y)=0 .\n$$\n\nThis implies that the three points $(x, g(x)),(y, g(y))$, and $(z, g(z))$ from the graph of $g$ are collinear. Hence that graph is a line, i.e., $g$ is either a constant or a linear function. Let us write $g(x)=A x+B$, where $A$ and $B$ are two real numbers. Substituting $(0,-y)$ for $(x, y)$ in (2) and denoting $C=f(0)$, we have $f(y)=A y^{2}-B y+C$. Now, comparing the coefficients of $x^{2}$ in (1) we see that $A^{2}=A$, so $A=0$ or $A=1$.\n\nIf $A=0$, then (1) becomes $B=-B x+C$ and thus $B=C=0$, which provides the first of the two solutions mentioned above.\n\nNow suppose $A=1$. Then (1) becomes $x^{2}-B x+C+B=x^{2}-B x+C$, so $B=0$. Thus, $g(x)=x$ and $f(x)=x^{2}+C$, which is the second solution from above."
  },
  {
    "id": "fimo_2011_algebra_p4",
    "enunciado": "Determine all pairs $(f, g)$ of functions from the set of positive integers to itself that satisfy\n\n$$\nf^{g(n)+1}(n)+g^{f(n)}(n)=f(n+1)-g(n+1)+1\n$$\n\nfor every positive integer $n$. Here, $f^{k}(n)$ means $\\underbrace{f(f(\\ldots f}_{k}(n) \\ldots))$.\n\nThe final answer is that the only pair $(f, g)$ of functions that satisfies the equation is given by $f(n)=n$ and $g(n)=1$ for all $n$.",
    "solucao": "The given relation implies\n\n$$\nf\\left(f^{g(n)}(n)\\right)<f(n+1) \\quad \\text { for all } n\n$$\n\nwhich will turn out to be sufficient to determine $f$.\n\nLet $y_{1}<y_{2}<\\ldots$ be all the values attained by $f$ (this sequence might be either finite or infinite). We will prove that for every positive $n$ the function $f$ attains at least $n$ values, and we have $(\\mathrm{i})_{n}: f(x)=y_{n}$ if and only if $x=n$, and (ii) $)_{n}: y_{n}=n$. The proof will follow the scheme\n\n$$\n\\left.(\\mathrm{i})_{1}, \\text { (ii }\\right)_{1},(\\mathrm{i})_{2},(\\text { ii })_{2}, \\ldots,(\\mathrm{i})_{n},(\\text { ii })_{n}, \\ldots\n$$\n\nTo start, consider any $x$ such that $f(x)=y_{1}$. If $x>1$, then (1) reads $f\\left(f^{g(x-1)}(x-1)\\right)<y_{1}$, contradicting the minimality of $y_{1}$. So we have that $f(x)=y_{1}$ is equivalent to $x=1$, establish$\\operatorname{ing}(\\mathrm{i})_{1}$.\n\nNext, assume that for some $n$ statement $(\\mathrm{i})_{n}$ is established, as well as all the previous statements in (2). Note that these statements imply that for all $k \\geq 1$ and $a<n$ we have $f^{k}(x)=a$ if and only if $x=a$.\n\nNow, each value $y_{i}$ with $1 \\leq i \\leq n$ is attained at the unique integer $i$, so $y_{n+1}$ exists. Choose an arbitrary $x$ such that $f(x)=y_{n+1}$; we necessarily have $x>n$. Substituting $x-1$ into (1) we have $f\\left(f^{g(x-1)}(x-1)\\right)<y_{n+1}$, which implies\n\n$$\nf^{g(x-1)}(x-1) \\in\\{1, \\ldots, n\\}\n$$\n\nSet $b=f^{g(x-1)}(x-1)$. If $b<n$ then we would have $x-1=b$ which contradicts $x>n$. So $b=n$, and hence $y_{n}=n$, which proves (ii) ${ }_{n}$. Next, from $(\\mathrm{i})_{n}$ we now get $f(k)=n \\Longleftrightarrow k=n$, so removing all the iterations of $f$ in (3) we obtain $x-1=b=n$, which proves $(\\mathrm{i})_{n+1}$.\n\nSo, all the statements in (2) are valid and hence $f(n)=n$ for all $n$. The given relation between $f$ and $g$ now reads $n+g^{n}(n)=n+1-g(n+1)+1$ or $g^{n}(n)+g(n+1)=2$, from which it immediately follows that we have $g(n)=1$ for all $n$."
  },
  {
    "id": "fimo_2011_algebra_p5",
    "enunciado": "Prove that for every positive integer $n$, the set $\\{2,3,4, \\ldots, 3 n+1\\}$ can be partitioned into $n$ triples in such a way that the numbers from each triple are the lengths of the sides of some obtuse triangle.",
    "solucao": "Throughout the solution, we denote by $[a, b]$ the set $\\{a, a+1, \\ldots, b\\}$. We say that $\\{a, b, c\\}$ is an obtuse triple if $a, b, c$ are the sides of some obtuse triangle.\n\nWe prove by induction on $n$ that there exists a partition of $[2,3 n+1]$ into $n$ obtuse triples $A_{i}$ $(2 \\leq i \\leq n+1)$ having the form $A_{i}=\\left\\{i, a_{i}, b_{i}\\right\\}$. For the base case $n=1$, one can simply set $A_{2}=\\{2,3,4\\}$. For the induction step, we need the following simple lemma.\n\nLemma. Suppose that the numbers $a<b<c$ form an obtuse triple, and let $x$ be any positive number. Then the triple $\\{a, b+x, c+x\\}$ is also obtuse.\n\nProof. The numbers $a<b+x<c+x$ are the sides of a triangle because $(c+x)-(b+x)=$ $c-b<a$. This triangle is obtuse since $(c+x)^{2}-(b+x)^{2}=(c-b)(c+b+2 x)>(c-b)(c+b)>a^{2}$.\n\nNow we turn to the induction step. Let $n>1$ and put $t=\\lfloor n / 2\\rfloor<n$. By the induction hypothesis, there exists a partition of the set $[2,3 t+1]$ into $t$ obtuse triples $A_{i}^{\\prime}=\\left\\{i, a_{i}^{\\prime}, b_{i}^{\\prime}\\right\\}$ $(i \\in[2, t+1])$. For the same values of $i$, define $A_{i}=\\left\\{i, a_{i}^{\\prime}+(n-t), b_{i}^{\\prime}+(n-t)\\right\\}$. The constructed triples are obviously disjoint, and they are obtuse by the lemma. Moreover, we have\n\n$$\n\\bigcup_{i=2}^{t+1} A_{i}=[2, t+1] \\cup[n+2, n+2 t+1] .\n$$\n\nNext, for each $i \\in[t+2, n+1]$, define $A_{i}=\\{i, n+t+i, 2 n+i\\}$. All these sets are disjoint, and\n\n$$\n\\bigcup_{i=t+2}^{n+1} A_{i}=[t+2, n+1] \\cup[n+2 t+2,2 n+t+1] \\cup[2 n+t+2,3 n+1]\n$$\n\nso\n\n$$\n\\bigcup_{i=2}^{n+1} A_{i}=[2,3 n+1] .\n$$\n\nThus, we are left to prove that the triple $A_{i}$ is obtuse for each $i \\in[t+2, n+1]$.\n\nSince $(2 n+i)-(n+t+i)=n-t<t+2 \\leq i$, the elements of $A_{i}$ are the sides of a triangle. Next, we have\n\n$(2 n+i)^{2}-(n+t+i)^{2}=(n-t)(3 n+t+2 i) \\geq \\frac{n}{2} \\cdot(3 n+3(t+1)+1)>\\frac{n}{2} \\cdot \\frac{9 n}{2} \\geq(n+1)^{2} \\geq i^{2}$, so this triangle is obtuse. The proof is completed."
  },
  {
    "id": "fimo_2011_algebra_p6",
    "enunciado": "Let $f$ be a function from the set of real numbers to itself that satisfies\n\n$$\nf(x+y) \\leq y f(x)+f(f(x))\n$$\n\nfor all real numbers $x$ and $y$. Prove that $f(x)=0$ for all $x \\leq 0$.",
    "solucao": "Substituting $y=t-x$, we rewrite (1) as\n\n$$\nf(t) \\leq t f(x)-x f(x)+f(f(x))\n$$\n\nConsider now some real numbers $a, b$ and use (2) with $t=f(a), x=b$ as well as with $t=f(b)$, $x=a$. We get\n\n$$\n\\begin{aligned}\n& f(f(a))-f(f(b)) \\leq f(a) f(b)-b f(b) \\\\\n& f(f(b))-f(f(a)) \\leq f(a) f(b)-a f(a)\n\\end{aligned}\n$$\n\nAdding these two inequalities yields\n\n$$\n2 f(a) f(b) \\geq a f(a)+b f(b) .\n$$\n\nNow, substitute $b=2 f(a)$ to obtain $2 f(a) f(b) \\geq a f(a)+2 f(a) f(b)$, or $a f(a) \\leq 0$. So, we get\n\n$$\nf(a) \\geq 0 \\quad \\text { for all } a<0 .\n$$\n\nNow suppose $f(x)>0$ for some real number $x$. From (2) we immediately get that for every $t<\\frac{x f(x)-f(f(x))}{f(x)}$ we have $f(t)<0$. This contradicts (3) ; therefore\n\n$$\nf(x) \\leq 0 \\quad \\text { for all real } x\n$$\n\nand by (3) again we get $f(x)=0$ for all $x<0$.\n\nWe are left to find $f(0)$. Setting $t=x<0$ in (2) we get\n\n$$\n0 \\leq 0-0+f(0)\n$$\n\nso $f(0) \\geq 0$. Combining this with (4) we obtain $f(0)=0$."
  },
  {
    "id": "fimo_2011_algebra_p7",
    "enunciado": "Let $a, b$, and $c$ be positive real numbers satisfying $\\min (a+b, b+c, c+a)>\\sqrt{2}$ and $a^{2}+b^{2}+c^{2}=3$. Prove that\n\n$$\n\\frac{a}{(b+c-a)^{2}}+\\frac{b}{(c+a-b)^{2}}+\\frac{c}{(a+b-c)^{2}} \\geq \\frac{3}{(a b c)^{2}}\n$$",
    "solucao": "Throughout the solution, we denote the sums of the form $f(a, b, c)+f(b, c, a)+f(c, a, b)$ by $\\sum f(a, b, c)$.\n\nThe condition $b+c>\\sqrt{2}$ implies $b^{2}+c^{2}>1$, so $a^{2}=3-\\left(b^{2}+c^{2}\\right)<2$, i.e. $a<\\sqrt{2}<b+c$. Hence we have $b+c-a>0$, and also $c+a-b>0$ and $a+b-c>0$ for similar reasons.\n\nWe will use the variant of HLDER's inequality\n\n$$\n\\frac{x_{1}^{p+1}}{y_{1}^{p}}+\\frac{x_{1}^{p+1}}{y_{1}^{p}}+\\ldots+\\frac{x_{n}^{p+1}}{y_{n}^{p}} \\geq \\frac{\\left(x_{1}+x_{2}+\\ldots+x_{n}\\right)^{p+1}}{\\left(y_{1}+y_{2}+\\ldots+y_{n}\\right)^{p}}\n$$\n\nwhich holds for all positive real numbers $p, x_{1}, x_{2}, \\ldots, x_{n}, y_{1}, y_{2}, \\ldots, y_{n}$. Applying it to the left-hand side of (1) with $p=2$ and $n=3$, we get\n\n$$\n\\sum \\frac{a}{(b+c-a)^{2}}=\\sum \\frac{\\left(a^{2}\\right)^{3}}{a^{5}(b+c-a)^{2}} \\geq \\frac{\\left(a^{2}+b^{2}+c^{2}\\right)^{3}}{\\left(\\sum a^{5 / 2}(b+c-a)\\right)^{2}}=\\frac{27}{\\left(\\sum a^{5 / 2}(b+c-a)\\right)^{2}}\n$$\n\nTo estimate the denominator of the right-hand part, we use an instance of ScHUR's inequality, namely\n\n$$\n\\sum a^{3 / 2}(a-b)(a-c) \\geq 0\n$$\n\nwhich can be rewritten as\n\n$$\n\\sum a^{5 / 2}(b+c-a) \\leq a b c(\\sqrt{a}+\\sqrt{b}+\\sqrt{c}) .\n$$\n\nMoreover, by the inequality between the arithmetic mean and the fourth power mean we also have\n\n$$\n\\left(\\frac{\\sqrt{a}+\\sqrt{b}+\\sqrt{c}}{3}\\right)^{4} \\leq \\frac{a^{2}+b^{2}+c^{2}}{3}=1\n$$\n\ni.e., $\\sqrt{a}+\\sqrt{b}+\\sqrt{c} \\leq 3$. Hence, (2) yields\n\n$$\n\\sum \\frac{a}{(b+c-a)^{2}} \\geq \\frac{27}{(a b c(\\sqrt{a}+\\sqrt{b}+\\sqrt{c}))^{2}} \\geq \\frac{3}{a^{2} b^{2} c^{2}}\n$$\n\nthus solving the problem."
  },
  {
    "id": "fimo_2011_number_theory_p1",
    "enunciado": "For any integer $d>0$, let $f(d)$ be the smallest positive integer that has exactly $d$ positive divisors (so for example we have $f(1)=1, f(5)=16$, and $f(6)=12$ ). Prove that for every integer $k \\geq 0$ the number $f\\left(2^{k}\\right)$ divides $f\\left(2^{k+1}\\right)$.",
    "solucao": "For any positive integer $n$, let $d(n)$ be the number of positive divisors of $n$. Let $n=\\prod_{p} p^{a(p)}$ be the prime factorization of $n$ where $p$ ranges over the prime numbers, the integers $a(p)$ are nonnegative and all but finitely many $a(p)$ are zero. Then we have $d(n)=\\prod_{p}(a(p)+1)$. Thus, $d(n)$ is a power of 2 if and only if for every prime $p$ there is a nonnegative integer $b(p)$ with $a(p)=2^{b(p)}-1=1+2+2^{2}+\\cdots+2^{b(p)-1}$. We then have\n\n$$\nn=\\prod_{p} \\prod_{i=0}^{b(p)-1} p^{2^{i}}, \\quad \\text { and } \\quad d(n)=2^{k} \\quad \\text { with } \\quad k=\\sum_{p} b(p) .\n$$\n\nLet $\\mathcal{S}$ be the set of all numbers of the form $p^{2^{r}}$ with $p$ prime and $r$ a nonnegative integer. Then we deduce that $d(n)$ is a power of 2 if and only if $n$ is the product of the elements of some finite subset $\\mathcal{T}$ of $\\mathcal{S}$ that satisfies the following condition: for all $t \\in \\mathcal{T}$ and $s \\in \\mathcal{S}$ with $s \\mid t$ we have $s \\in \\mathcal{T}$. Moreover, if $d(n)=2^{k}$ then the corresponding set $\\mathcal{T}$ has $k$ elements.\n\nNote that the set $\\mathcal{T}_{k}$ consisting of the smallest $k$ elements from $\\mathcal{S}$ obviously satisfies the condition above. Thus, given $k$, the smallest $n$ with $d(n)=2^{k}$ is the product of the elements of $\\mathcal{T}_{k}$. This $n$ is $f\\left(2^{k}\\right)$. Since obviously $\\mathcal{T}_{k} \\subset \\mathcal{T}_{k+1}$, it follows that $f\\left(2^{k}\\right) \\mid f\\left(2^{k+1}\\right)$."
  },
  {
    "id": "fimo_2011_number_theory_p2",
    "enunciado": "Consider a polynomial $P(x)=\\left(x+d_{1}\\right)\\left(x+d_{2}\\right) \\cdot \\ldots \\cdot\\left(x+d_{9}\\right)$, where $d_{1}, d_{2}, \\ldots, d_{9}$ are nine distinct integers. Prove that there exists an integer $N$ such that for all integers $x \\geq N$ the number $P(x)$ is divisible by a prime number greater than 20 .",
    "solucao": "Note that the statement of the problem is invariant under translations of $x$; hence without loss of generality we may suppose that the numbers $d_{1}, d_{2}, \\ldots, d_{9}$ are positive.\n\nThe key observation is that there are only eight primes below 20 , while $P(x)$ involves more than eight factors.\n\nWe shall prove that $N=d^{8}$ satisfies the desired property, where $d=\\max \\left\\{d_{1}, d_{2}, \\ldots, d_{9}\\right\\}$. Suppose for the sake of contradiction that there is some integer $x \\geq N$ such that $P(x)$ is composed of primes below 20 only. Then for every index $i \\in\\{1,2, \\ldots, 9\\}$ the number $x+d_{i}$ can be expressed as product of powers of the first 8 primes.\n\nSince $x+d_{i}>x \\geq d^{8}$ there is some prime power $f_{i}>d$ that divides $x+d_{i}$. Invoking the pigeonhole principle we see that there are two distinct indices $i$ and $j$ such that $f_{i}$ and $f_{j}$ are powers of the same prime number. For reasons of symmetry, we may suppose that $f_{i} \\leq f_{j}$. Now both of the numbers $x+d_{i}$ and $x+d_{j}$ are divisible by $f_{i}$ and hence so is their difference $d_{i}-d_{j}$. But as\n\n$$\n0<\\left|d_{i}-d_{j}\\right| \\leq \\max \\left(d_{i}, d_{j}\\right) \\leq d<f_{i},\n$$\n\nthis is impossible. Thereby the problem is solved."
  },
  {
    "id": "fimo_2011_number_theory_p3",
    "enunciado": "Let $n \\geq 1$ be an odd integer. Determine all functions $f$ from the set of integers to itself such that for all integers $x$ and $y$ the difference $f(x)-f(y)$ divides $x^{n}-y^{n}$.\n\nThe final answers are all functions $f$ of the form $f(x)=\\varepsilon x^{d}+c$, where $\\varepsilon$ is in $\\{1,-1\\}$, the integer $d$ is a positive divisor of $n$, and $c$ is an integer.",
    "solucao": "Obviously, all functions in the answer satisfy the condition of the problem. We will show that there are no other functions satisfying that condition.\n\nLet $f$ be a function satisfying the given condition. For each integer $n$, the function $g$ defined by $g(x)=f(x)+n$ also satisfies the same condition. Therefore, by subtracting $f(0)$ from $f(x)$ we may assume that $f(0)=0$.\n\nFor any prime $p$, the condition on $f$ with $(x, y)=(p, 0)$ states that $f(p)$ divides $p^{n}$. Since the set of primes is infinite, there exist integers $d$ and $\\varepsilon$ with $0 \\leq d \\leq n$ and $\\varepsilon \\in\\{1,-1\\}$ such that for infinitely many primes $p$ we have $f(p)=\\varepsilon p^{d}$. Denote the set of these primes by $P$. Since a function $g$ satisfies the given condition if and only if $-g$ satisfies the same condition, we may $\\operatorname{suppose} \\varepsilon=1$\n\nThe case $d=0$ is easily ruled out, because 0 does not divide any nonzero integer. Suppose $d \\geq 1$ and write $n$ as $m d+r$, where $m$ and $r$ are integers such that $m \\geq 1$ and $0 \\leq r \\leq d-1$. Let $x$ be an arbitrary integer. For each prime $p$ in $P$, the difference $f(p)-f(x)$ divides $p^{n}-x^{n}$. Using the equality $f(p)=p^{d}$, we get\n\n$$\np^{n}-x^{n}=p^{r}\\left(p^{d}\\right)^{m}-x^{n} \\equiv p^{r} f(x)^{m}-x^{n} \\equiv 0 \\quad\\left(\\bmod p^{d}-f(x)\\right)\n$$\n\nSince we have $r<d$, for large enough primes $p \\in P$ we obtain\n\n$$\n\\left|p^{r} f(x)^{m}-x^{n}\\right|<p^{d}-f(x) .\n$$\n\nHence $p^{r} f(x)^{m}-x^{n}$ has to be zero. This implies $r=0$ and $x^{n}=\\left(x^{d}\\right)^{m}=f(x)^{m}$. Since $m$ is odd, we obtain $f(x)=x^{d}$"
  },
  {
    "id": "fimo_2011_number_theory_p4",
    "enunciado": "For each positive integer $k$, let $t(k)$ be the largest odd divisor of $k$. Determine all positive integers $a$ for which there exists a positive integer $n$ such that all the differences\n\n$$\nt(n+a)-t(n), \\quad t(n+a+1)-t(n+1), \\quad \\ldots, \\quad t(n+2 a-1)-t(n+a-1)\n$$\n\nare divisible by 4.\n\nThe final answer is $a=1,3$, or 5 .",
    "solucao": "A pair $(a, n)$ satisfying the condition of the problem will be called a winning pair. It is straightforward to check that the pairs $(1,1),(3,1)$, and $(5,4)$ are winning pairs.\n\nNow suppose that $a$ is a positive integer not equal to 1,3 , and 5 . We will show that there are no winning pairs $(a, n)$ by distinguishing three cases.\n\nCase 1: $a$ is even. In this case we have $a=2^{\\alpha} d$ for some positive integer $\\alpha$ and some odd $d$. Since $a \\geq 2^{\\alpha}$, for each positive integer $n$ there exists an $i \\in\\{0,1, \\ldots, a-1\\}$ such that $n+i=2^{\\alpha-1} e$, where $e$ is some odd integer. Then we have $t(n+i)=t\\left(2^{\\alpha-1} e\\right)=e$ and\n\n$$\nt(n+a+i)=t\\left(2^{\\alpha} d+2^{\\alpha-1} e\\right)=2 d+e \\equiv e+2 \\quad(\\bmod 4)\n$$\n\nSo we get $t(n+i)-t(n+a+i) \\equiv 2(\\bmod 4)$, and $(a, n)$ is not a winning pair.\n\nCase 2: $a$ is odd and $a>8$. For each positive integer $n$, there exists an $i \\in\\{0,1, \\ldots, a-5\\}$ such that $n+i=2 d$ for some odd $d$. We get\n\n$$\nt(n+i)=d \\not \\equiv d+2=t(n+i+4) \\quad(\\bmod 4)\n$$\n\nand\n\n$$\nt(n+a+i)=n+a+i \\equiv n+a+i+4=t(n+a+i+4) \\quad(\\bmod 4) .\n$$\n\nTherefore, the integers $t(n+a+i)-t(n+i)$ and $t(n+a+i+4)-t(n+i+4)$ cannot be both divisible by 4 , and therefore there are no winning pairs in this case.\n\nCase 3: $a=7$. For each positive integer $n$, there exists an $i \\in\\{0,1, \\ldots, 6\\}$ such that $n+i$ is either of the form $8 k+3$ or of the form $8 k+6$, where $k$ is a nonnegative integer. But we have\n\n$$\nt(8 k+3) \\equiv 3 \\not \\equiv 1 \\equiv 4 k+5=t(8 k+3+7) \\quad(\\bmod 4)\n$$\n\nand\n\n$$\nt(8 k+6)=4 k+3 \\equiv 3 \\not \\equiv 1 \\equiv t(8 k+6+7) \\quad(\\bmod 4) .\n$$\n\nHence, there are no winning pairs of the form $(7, n)$."
  },
  {
    "id": "fimo_2011_number_theory_p5",
    "enunciado": "Let $f$ be a function from the set of integers to the set of positive integers. Suppose that for any two integers $m$ and $n$, the difference $f(m)-f(n)$ is divisible by $f(m-n)$. Prove that for all integers $m, n$ with $f(m) \\leq f(n)$ the number $f(n)$ is divisible by $f(m)$.",
    "solucao": "Suppose that $x$ and $y$ are two integers with $f(x)<f(y)$. We will show that $f(x) \\mid f(y)$. By taking $m=x$ and $n=y$ we see that\n\n$$\nf(x-y)|| f(x)-f(y) \\mid=f(y)-f(x)>0,\n$$\n\nso $f(x-y) \\leq f(y)-f(x)<f(y)$. Hence the number $d=f(x)-f(x-y)$ satisfies\n\n$$\n-f(y)<-f(x-y)<d<f(x)<f(y) .\n$$\n\nTaking $m=x$ and $n=x-y$ we see that $f(y) \\mid d$, so we deduce $d=0$, or in other words $f(x)=f(x-y)$. Taking $m=x$ and $n=y$ we see that $f(x)=f(x-y) \\mid f(x)-f(y)$, which implies $f(x) \\mid f(y)$."
  },
  {
    "id": "fimo_2011_number_theory_p6",
    "enunciado": "Let $P(x)$ and $Q(x)$ be two polynomials with integer coefficients such that no nonconstant polynomial with rational coefficients divides both $P(x)$ and $Q(x)$. Suppose that for every positive integer $n$ the integers $P(n)$ and $Q(n)$ are positive, and $2^{Q(n)}-1$ divides $3^{P(n)}-1$. Prove that $Q(x)$ is a constant polynomial.",
    "solucao": "First we show that there exists an integer $d$ such that for all positive integers $n$ we have $\\operatorname{gcd}(P(n), Q(n)) \\leq d$\n\nSince $P(x)$ and $Q(x)$ are coprime (over the polynomials with rational coefficients), EucLid's algorithm provides some polynomials $R_{0}(x), S_{0}(x)$ with rational coefficients such that $P(x) R_{0}(x)-$ $Q(x) S_{0}(x)=1$. Multiplying by a suitable positive integer $d$, we obtain polynomials $R(x)=$ $d \\cdot R_{0}(x)$ and $S(x)=d \\cdot S_{0}(x)$ with integer coefficients for which $P(x) R(x)-Q(x) S(x)=d$. Then we have $\\operatorname{gcd}(P(n), Q(n)) \\leq d$ for any integer $n$.\n\nTo prove the problem statement, suppose that $Q(x)$ is not constant. Then the sequence $Q(n)$ is not bounded and we can choose a positive integer $m$ for which\n\n$$\nM=2^{Q(m)}-1 \\geq 3^{\\max \\{P(1), P(2), \\ldots, P(d)\\}} .\n$$\n\nSince $M=2^{Q(n)}-1 \\mid 3^{P(n)}-1$, we have $2,3 X M$. Let $a$ and $b$ be the multiplicative orders of 2 and 3 modulo $M$, respectively. Obviously, $a=Q(m)$ since the lower powers of 2 do not reach $M$. Since $M$ divides $3^{P(m)}-1$, we have $b \\mid P(m)$. Then $\\operatorname{gcd}(a, b) \\leq \\operatorname{gcd}(P(m), Q(m)) \\leq d$. Since the expression $a x-b y$ attains all integer values divisible by $\\operatorname{gcd}(a, b)$ when $x$ and $y$ run over all nonnegative integer values, there exist some nonnegative integers $x, y$ such that $1 \\leq m+a x-b y \\leq d$\n\nBy $Q(m+a x) \\equiv Q(m)(\\bmod a)$ we have\n\n$$\n2^{Q(m+a x)} \\equiv 2^{Q(m)} \\equiv 1 \\quad(\\bmod M)\n$$\n\nand therefore\n\n$$\nM\\left|2^{Q(m+a x)}-1\\right| 3^{P(m+a x)}-1 .\n$$\n\nThen, by $P(m+a x-b y) \\equiv P(m+a x)(\\bmod b)$ we have\n\n$$\n3^{P(m+a x-b y)} \\equiv 3^{P(m+a x)} \\equiv 1 \\quad(\\bmod M)\n$$\n\nSince $P(m+a x-b y)>0$ this implies $M \\leq 3^{P(m+a x-b y)}-1$. But $P(m+a x-b y)$ is listed among $P(1), P(2), \\ldots, P(d)$, so\n\n$$\nM<3^{P(m+a x-b y)} \\leq 3^{\\max \\{P(1), P(2), \\ldots, P(d)\\}}\n$$\n\nwhich contradicts (1)."
  },
  {
    "id": "fimo_2011_number_theory_p7",
    "enunciado": "Let $p$ be an odd prime number. For every integer $a$, define the number\n\n$$\nS_{a}=\\frac{a}{1}+\\frac{a^{2}}{2}+\\cdots+\\frac{a^{p-1}}{p-1} .\n$$\n\nLet $m$ and $n$ be integers such that\n\n$$\nS_{3}+S_{4}-3 S_{2}=\\frac{m}{n} .\n$$\n\nProve that $p$ divides $m$.",
    "solucao": "For rational numbers $p_{1} / q_{1}$ and $p_{2} / q_{2}$ with the denominators $q_{1}, q_{2}$ not divisible by $p$, we write $p_{1} / q_{1} \\equiv p_{2} / q_{2}(\\bmod p)$ if the numerator $p_{1} q_{2}-p_{2} q_{1}$ of their difference is divisible by $p$.\n\nWe start with finding an explicit formula for the residue of $S_{a}$ modulo $p$. Note first that for every $k=1, \\ldots, p-1$ the number $\\left(\\begin{array}{l}p \\\\ k\\end{array}\\right)$ is divisible by $p$, and\n\n$$\n\\frac{1}{p}\\left(\\begin{array}{l}\np \\\\\nk\n\\end{array}\\right)=\\frac{(p-1)(p-2) \\cdots(p-k+1)}{k !} \\equiv \\frac{(-1) \\cdot(-2) \\cdots(-k+1)}{k !}=\\frac{(-1)^{k-1}}{k} \\quad(\\bmod p)\n$$\n\nTherefore, we have\n\n$$\nS_{a}=-\\sum_{k=1}^{p-1} \\frac{(-a)^{k}(-1)^{k-1}}{k} \\equiv-\\sum_{k=1}^{p-1}(-a)^{k} \\cdot \\frac{1}{p}\\left(\\begin{array}{l}\np \\\\\nk\n\\end{array}\\right) \\quad(\\bmod p) .\n$$\n\nThe number on the right-hand side is integer. Using the binomial formula we express it as\n\n$$\n-\\sum_{k=1}^{p-1}(-a)^{k} \\cdot \\frac{1}{p}\\left(\\begin{array}{l}\np \\\\\nk\n\\end{array}\\right)=-\\frac{1}{p}\\left(-1-(-a)^{p}+\\sum_{k=0}^{p}(-a)^{k}\\left(\\begin{array}{l}\np \\\\\nk\n\\end{array}\\right)\\right)=\\frac{(a-1)^{p}-a^{p}+1}{p}\n$$\n\nsince $p$ is odd. So, we have\n\n$$\nS_{a} \\equiv \\frac{(a-1)^{p}-a^{p}+1}{p} \\quad(\\bmod p) .\n$$\n\nFinally, using the obtained formula we get\n\n$$\n\\begin{aligned}\nS_{3}+S_{4}-3 S_{2} & \\equiv \\frac{\\left(2^{p}-3^{p}+1\\right)+\\left(3^{p}-4^{p}+1\\right)-3\\left(1^{p}-2^{p}+1\\right)}{p} \\\\\n& =\\frac{4 \\cdot 2^{p}-4^{p}-4}{p}=-\\frac{\\left(2^{p}-2\\right)^{2}}{p} \\quad(\\bmod p) .\n\\end{aligned}\n$$\n\nBy FERMAT's theorem, $p \\mid 2^{p}-2$, so $p^{2} \\mid\\left(2^{p}-2\\right)^{2}$ and hence $S_{3}+S_{4}-3 S_{2} \\equiv 0(\\bmod p)$."
  },
  {
    "id": "fimo_2011_number_theory_p8",
    "enunciado": "Let $k$ be a positive integer and set $n=2^{k}+1$. Prove that $n$ is a prime number if and only if the following holds: there is a permutation $a_{1}, \\ldots, a_{n-1}$ of the numbers $1,2, \\ldots, n-1$ and a sequence of integers $g_{1}, g_{2}, \\ldots, g_{n-1}$ such that $n$ divides $g_{i}^{a_{i}}-a_{i+1}$ for every $i \\in\\{1,2, \\ldots, n-1\\}$, where we set $a_{n}=a_{1}$.",
    "solucao": "Let $N=\\{1,2, \\ldots, n-1\\}$. For $a, b \\in N$, we say that $b$ follows $a$ if there exists an integer $g$ such that $b \\equiv g^{a}(\\bmod n)$ and denote this property as $a \\rightarrow b$. This way we have a directed graph with $N$ as set of vertices. If $a_{1}, \\ldots, a_{n-1}$ is a permutation of $1,2, \\ldots, n-1$ such that $a_{1} \\rightarrow a_{2} \\rightarrow \\ldots \\rightarrow a_{n-1} \\rightarrow a_{1}$ then this is a Hamiltonian cycle in the graph.\n\nStep I. First consider the case when $n$ is composite. Let $n=p_{1}^{\\alpha_{1}} \\ldots p_{s}^{\\alpha_{s}}$ be its prime factorization. All primes $p_{i}$ are odd.\n\nSuppose that $\\alpha_{i}>1$ for some $i$. For all integers $a, g$ with $a \\geq 2$, we have $g^{a} \\not \\equiv p_{i}\\left(\\bmod p_{i}^{2}\\right)$, because $g^{a}$ is either divisible by $p_{i}^{2}$ or it is not divisible by $p_{i}$. It follows that in any Hamiltonian cycle $p_{i}$ comes immediately after 1 . The same argument shows that $2 p_{i}$ also should come immediately after 1, which is impossible. Hence, there is no Hamiltonian cycle in the graph.\n\nNow suppose that $n$ is square-free. We have $n=p_{1} p_{2} \\ldots p_{s}>9$ and $s \\geq 2$. Assume that there exists a Hamiltonian cycle. There are $\\frac{n-1}{2}$ even numbers in this cycle, and each number which follows one of them should be a quadratic residue modulo $n$. So, there should be at least $\\frac{n-1}{2}$ nonzero quadratic residues modulo $n$. On the other hand, for each $p_{i}$ there exist exactly $\\frac{p_{i}+1}{2}$ quadratic residues modulo $p_{i}$; by the Chinese Remainder Theorem, the number of quadratic residues modulo $n$ is exactly $\\frac{p_{1}+1}{2} \\cdot \\frac{p_{2}+1}{2} \\cdot \\ldots \\cdot \\frac{p_{s}+1}{2}$, including 0 . Then we have a contradiction by\n\n$$\n\\frac{p_{1}+1}{2} \\cdot \\frac{p_{2}+1}{2} \\cdot \\ldots \\cdot \\frac{p_{s}+1}{2} \\leq \\frac{2 p_{1}}{3} \\cdot \\frac{2 p_{2}}{3} \\cdot \\ldots \\cdot \\frac{2 p_{s}}{3}=\\left(\\frac{2}{3}\\right)^{s} n \\leq \\frac{4 n}{9}<\\frac{n-1}{2}\n$$\n\nThis proves the \"if\"-part of the problem.\n\nStep II. Now suppose that $n$ is prime. For any $a \\in N$, denote by $\\nu_{2}(a)$ the exponent of 2 in the prime factorization of $a$, and let $\\mu(a)=\\max \\left\\{t \\in[0, k] \\mid 2^{t} \\rightarrow a\\right\\}$.\n\nLemma. For any $a, b \\in N$, we have $a \\rightarrow b$ if and only if $\\nu_{2}(a) \\leq \\mu(b)$.\n\nProof. Let $\\ell=\\nu_{2}(a)$ and $m=\\mu(b)$.\n\nSuppose $\\ell \\leq m$. Since $b$ follows $2^{m}$, there exists some $g_{0}$ such that $b \\equiv g_{0}^{2^{m}}(\\bmod n)$. By $\\operatorname{gcd}(a, n-1)=2^{\\ell}$ there exist some integers $p$ and $q$ such that $p a-q(n-1)=2^{\\ell}$. Choosing $g=g_{0}^{2^{m-\\ell} p}$ we have $g^{a}=g_{0}^{2^{m-\\ell} p a}=g_{0}^{2^{m}+2^{m-\\ell} q(n-1)} \\equiv g_{0}^{2^{m}} \\equiv b(\\bmod n)$ by FERMAT's theorem. Hence, $a \\rightarrow b$.\n\nTo prove the reverse statement, suppose that $a \\rightarrow b$, so $b \\equiv g^{a}(\\bmod n)$ with some $g$. Then $b \\equiv\\left(g^{a / 2^{\\ell}}\\right)^{2^{\\ell}}$, and therefore $2^{\\ell} \\rightarrow b$. By the definition of $\\mu(b)$, we have $\\mu(b) \\geq \\ell$. The lemma is proved.\n\nNow for every $i$ with $0 \\leq i \\leq k$, let\n\n$$\n\\begin{aligned}\nA_{i} & =\\left\\{a \\in N \\mid \\nu_{2}(a)=i\\right\\}, \\\\\nB_{i} & =\\{a \\in N \\mid \\mu(a)=i\\}, \\\\\n\\text { and } C_{i} & =\\{a \\in N \\mid \\mu(a) \\geq i\\}=B_{i} \\cup B_{i+1} \\cup \\ldots \\cup B_{k} .\n\\end{aligned}\n$$\n\nWe claim that $\\left|A_{i}\\right|=\\left|B_{i}\\right|$ for all $0 \\leq i \\leq k$. Obviously we have $\\left|A_{i}\\right|=2^{k-i-1}$ for all $i=$ $0, \\ldots, k-1$, and $\\left|A_{k}\\right|=1$. Now we determine $\\left|C_{i}\\right|$. We have $\\left|C_{0}\\right|=n-1$ and by Fermat's theorem we also have $C_{k}=\\{1\\}$, so $\\left|C_{k}\\right|=1$. Next, notice that $C_{i+1}=\\left\\{x^{2} \\bmod n \\mid x \\in C_{i}\\right\\}$. For every $a \\in N$, the relation $x^{2} \\equiv a(\\bmod n)$ has at most two solutions in $N$. Therefore we have $2\\left|C_{i+1}\\right| \\leq\\left|C_{i}\\right|$, with the equality achieved only if for every $y \\in C_{i+1}$, there exist distinct elements $x, x^{\\prime} \\in C_{i}$ such that $x^{2} \\equiv x^{\\prime 2} \\equiv y(\\bmod n)$ (this implies $\\left.x+x^{\\prime}=n\\right)$. Now, since $2^{k}\\left|C_{k}\\right|=\\left|C_{0}\\right|$, we obtain that this equality should be achieved in each step. Hence $\\left|C_{i}\\right|=2^{k-i}$ for $0 \\leq i \\leq k$, and therefore $\\left|B_{i}\\right|=2^{k-i-1}$ for $0 \\leq i \\leq k-1$ and $\\left|B_{k}\\right|=1$.\n\nFrom the previous arguments we can see that for each $z \\in C_{i}(0 \\leq i<k)$ the equation $x^{2} \\equiv z^{2}$ $(\\bmod n)$ has two solutions in $C_{i}$, so we have $n-z \\in C_{i}$. Hence, for each $i=0,1, \\ldots, k-1$, exactly half of the elements of $C_{i}$ are odd. The same statement is valid for $B_{i}=C_{i} \\backslash C_{i+1}$ for $0 \\leq i \\leq k-2$. In particular, each such $B_{i}$ contains an odd number. Note that $B_{k}=\\{1\\}$ also contains an odd number, and $B_{k-1}=\\left\\{2^{k}\\right\\}$ since $C_{k-1}$ consists of the two square roots of 1 modulo $n$.\n\nStep III. Now we construct a Hamiltonian cycle in the graph. First, for each $i$ with $0 \\leq i \\leq k$, connect the elements of $A_{i}$ to the elements of $B_{i}$ by means of an arbitrary bijection. After performing this for every $i$, we obtain a subgraph with all vertices having in-degree 1 and outdegree 1 , so the subgraph is a disjoint union of cycles. If there is a unique cycle, we are done. Otherwise, we modify the subgraph in such a way that the previous property is preserved and the number of cycles decreases; after a finite number of steps we arrive at a single cycle.\n\nFor every cycle $C$, let $\\lambda(C)=\\min _{c \\in C} \\nu_{2}(c)$. Consider a cycle $C$ for which $\\lambda(C)$ is maximal. If $\\lambda(C)=0$, then for any other cycle $C^{\\prime}$ we have $\\lambda\\left(C^{\\prime}\\right)=0$. Take two arbitrary vertices $a \\in C$ and $a^{\\prime} \\in C^{\\prime}$ such that $\\nu_{2}(a)=\\nu_{2}\\left(a^{\\prime}\\right)=0$; let their direct successors be $b$ and $b^{\\prime}$, respectively. Then we can unify $C$ and $C^{\\prime}$ to a single cycle by replacing the edges $a \\rightarrow b$ and $a^{\\prime} \\rightarrow b^{\\prime}$ by $a \\rightarrow b^{\\prime}$ and $a^{\\prime} \\rightarrow b$.\n\nNow suppose that $\\lambda=\\lambda(C) \\geq 1$; let $a \\in C \\cap A_{\\lambda}$. If there exists some $a^{\\prime} \\in A_{\\lambda} \\backslash C$, then $a^{\\prime}$ lies in another cycle $C^{\\prime}$ and we can merge the two cycles in exactly the same way as above. So, the only remaining case is $A_{\\lambda} \\subset C$. Since the edges from $A_{\\lambda}$ lead to $B_{\\lambda}$, we get also $B_{\\lambda} \\subset C$. If $\\lambda \\neq k-1$ then $B_{\\lambda}$ contains an odd number; this contradicts the assumption $\\lambda(C)>0$. Finally, if $\\lambda=k-1$, then $C$ contains $2^{k-1}$ which is the only element of $A_{k-1}$. Since $B_{k-1}=\\left\\{2^{k}\\right\\}=A_{k}$ and $B_{k}=\\{1\\}$, the cycle $C$ contains the path $2^{k-1} \\rightarrow 2^{k} \\rightarrow 1$ and it contains an odd number again. This completes the proof of the \"only if\"-part of the problem."
  },
  {
    "id": "fimo_2012_algebra_p1",
    "enunciado": "Find all the functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that\n\n$$\nf(a)^{2}+f(b)^{2}+f(c)^{2}=2 f(a) f(b)+2 f(b) f(c)+2 f(c) f(a)\n$$\n\nfor all integers $a, b, c$ satisfying $a+b+c=0$.\n\nThe final answer is that the only possible solutions of the functional equation are the constant function $f_{1}(x)=0$ and the following functions:\n\n$$\nf_{2}(x)=k x^{2} \\quad f_{3}(x)=\\left\\{\\begin{array}{ccc}\n0 & x \\text { even } \\\\\nk & x \\text { odd }\n\\end{array} \\quad f_{4}(x)=\\left\\{\\begin{array}{ccc}\n0 & x \\equiv 0 & (\\bmod 4) \\\\\nk & x \\equiv 1 & (\\bmod 2) \\\\\n4 k & x \\equiv 2 & (\\bmod 4)\n\\end{array}\\right.\\right.\n$$\n\nfor any non-zero integer $k$.",
    "solucao": "The substitution $a=b=c=0$ gives $3 f(0)^{2}=6 f(0)^{2}$, hence\n\n$$\nf(0)=0 \\text {. }\n$$\n\nThe substitution $b=-a$ and $c=0$ gives $\\left((f(a)-f(-a))^{2}=0\\right.$. Hence $f$ is an even function:\n\n$$\nf(a)=f(-a) \\quad \\text { for all } a \\in \\mathbb{Z} \\text {. }\n$$\n\nNow set $b=a$ and $c=-2 a$ to obtain $2 f(a)^{2}+f(2 a)^{2}=2 f(a)^{2}+4 f(a) f(2 a)$. Hence\n\n$$\nf(2 a)=0 \\text { or } f(2 a)=4 f(a) \\text { for all } a \\in \\mathbb{Z} .\n$$\n\nIf $f(r)=0$ for some $r \\geq 1$ then the substitution $b=r$ and $c=-a-r$ gives $(f(a+r)-f(a))^{2}=0$. So $f$ is periodic with period $r$, i. e.\n\n$$\nf(a+r)=f(a) \\quad \\text { for all } a \\in \\mathbb{Z} .\n$$\n\nIn particular, if $f(1)=0$ then $f$ is constant, thus $f(a)=0$ for all $a \\in \\mathbb{Z}$. This function clearly satisfies the functional equation. For the rest of the analysis, we assume $f(1)=k \\neq 0$.\n\nBy (3) we have $f(2)=0$ or $f(2)=4 k$. If $f(2)=0$ then $f$ is periodic of period 2 , thus $f($ even $)=0$ and $f($ odd $)=k$. This function is a solution for every $k$. We postpone the verification; for the sequel assume $f(2)=4 k \\neq 0$.\n\nBy (3) again, we have $f(4)=0$ or $f(4)=16 k$. In the first case $f$ is periodic of period 4 , and $f(3)=f(-1)=f(1)=k$, so we have $f(4 n)=0, f(4 n+1)=f(4 n+3)=k$, and $f(4 n+2)=4 k$ for all $n \\in \\mathbb{Z}$. This function is a solution too, which we justify later. For the rest of the analysis, we assume $f(4)=16 k \\neq 0$.\n\nWe show now that $f(3)=9 k$. In order to do so, we need two substitutions:\n\n$$\n\\begin{gathered}\na=1, b=2, c=-3 \\Longrightarrow f(3)^{2}-10 k f(3)+9 k^{2}=0 \\Longrightarrow f(3) \\in\\{k, 9 k\\} \\\\\na=1, b=3, c=-4 \\Longrightarrow f(3)^{2}-34 k f(3)+225 k^{2}=0 \\Longrightarrow f(3) \\in\\{9 k, 25 k\\}\n\\end{gathered}\n$$\n\nTherefore $f(3)=9 k$, as claimed. Now we prove inductively that the only remaining function is $f(x)=k x^{2}, x \\in \\mathbb{Z}$. We proved this for $x=0,1,2,3,4$. Assume that $n \\geq 4$ and that $f(x)=k x^{2}$ holds for all integers $x \\in[0, n]$. Then the substitutions $a=n, b=1, c=-n-1$ and $a=n-1$, $b=2, c=-n-1$ lead respectively to\n\n$$\nf(n+1) \\in\\left\\{k(n+1)^{2}, k(n-1)^{2}\\right\\} \\quad \\text { and } \\quad f(n+1) \\in\\left\\{k(n+1)^{2}, k(n-3)^{2}\\right\\} .\n$$\n\nSince $k(n-1)^{2} \\neq k(n-3)^{2}$ for $n \\neq 2$, the only possibility is $f(n+1)=k(n+1)^{2}$. This completes the induction, so $f(x)=k x^{2}$ for all $x \\geq 0$. The same expression is valid for negative values of $x$ since $f$ is even. To verify that $f(x)=k x^{2}$ is actually a solution, we need to check the identity $a^{4}+b^{4}+(a+b)^{4}=2 a^{2} b^{2}+2 a^{2}(a+b)^{2}+2 b^{2}(a+b)^{2}$, which follows directly by expanding both sides. Therefore the only possible solutions of the functional equation are the constant function $f_{1}(x)=0$ and the following functions:\n\n$$\nf_{2}(x)=k x^{2} \\quad f_{3}(x)=\\left\\{\\begin{array}{ccc}\n0 & x \\text { even } \\\\\nk & x \\text { odd }\n\\end{array} \\quad f_{4}(x)=\\left\\{\\begin{array}{ccc}\n0 & x \\equiv 0 & (\\bmod 4) \\\\\nk & x \\equiv 1 & (\\bmod 2) \\\\\n4 k & x \\equiv 2 & (\\bmod 4)\n\\end{array}\\right.\\right.\n$$\n\nfor any non-zero integer $k$. The verification that they are indeed solutions was done for the first two. For $f_{3}$ note that if $a+b+c=0$ then either $a, b, c$ are all even, in which case $f(a)=f(b)=f(c)=0$, or one of them is even and the other two are odd, so both sides of the equation equal $2 k^{2}$. For $f_{4}$ we use similar parity considerations and the symmetry of the equation, which reduces the verification to the triples $(0, k, k),(4 k, k, k),(0,0,0),(0,4 k, 4 k)$. They all satisfy the equation."
  },
  {
    "id": "fimo_2012_algebra_p2_1",
    "enunciado": "Let $\\mathbb{Z}$ and $\\mathbb{Q}$ be the sets of integers and rationals respectively.\n\nDoes there exist a partition of $\\mathbb{Z}$ into three non-empty subsets $A, B, C$ such that the sets $A+B, B+C, C+A$ are disjoint?\n\nThe final answer is yes.",
    "solucao": "The residue classes modulo 3 yield such a partition:\n\n$$\nA=\\{3 k \\mid k \\in \\mathbb{Z}\\}, \\quad B=\\{3 k+1 \\mid k \\in \\mathbb{Z}\\}, \\quad C=\\{3 k+2 \\mid k \\in \\mathbb{Z}\\} .\n$$"
  },
  {
    "id": "fimo_2012_algebra_p2_2",
    "enunciado": "Let $\\mathbb{Z}$ and $\\mathbb{Q}$ be the sets of integers and rationals respectively.\n\nDoes there exist a partition of $\\mathbb{Q}$ into three non-empty subsets $A, B, C$ such that the sets $A+B, B+C, C+A$ are disjoint?\n\nThe final answer is no.",
    "solucao": "The answer is no. Suppose that $\\mathbb{Q}$ can be partitioned into non-empty subsets $A, B, C$ as stated. Note that for all $a \\in A, b \\in B, c \\in C$ one has\n\n$$\na+b-c \\in C, \\quad b+c-a \\in A, \\quad c+a-b \\in B .\n$$\n\nIndeed $a+b-c \\notin A$ as $(A+B) \\cap(A+C)=\\emptyset$, and similarly $a+b-c \\notin B$, hence $a+b-c \\in C$. The other two relations follow by symmetry. Hence $A+B \\subset C+C, B+C \\subset A+A, C+A \\subset B+B$.\n\nThe opposite inclusions also hold. Let $a, a^{\\prime} \\in A$ and $b \\in B, c \\in C$ be arbitrary. By (1) $a^{\\prime}+c-b \\in B$, and since $a \\in A, c \\in C$, we use (1) again to obtain\n\n$$\na+a^{\\prime}-b=a+\\left(a^{\\prime}+c-b\\right)-c \\in C .\n$$\n\nSo $A+A \\subset B+C$ and likewise $B+B \\subset C+A, C+C \\subset A+B$. In summary\n\n$$\nB+C=A+A, \\quad C+A=B+B, \\quad A+B=C+C .\n$$\n\nFurthermore suppose that $0 \\in A$ without loss of generality. Then $B=\\{0\\}+B \\subset A+B$ and $C=\\{0\\}+C \\subset A+C$. So, since $B+C$ is disjoint with $A+B$ and $A+C$, it is also disjoint with $B$ and $C$. Hence $B+C$ is contained in $\\mathbb{Z} \\backslash(B \\cup C)=A$. Because $B+C=A+A$, we obtain $A+A \\subset A$. On the other hand $A=\\{0\\}+A \\subset A+A$, implying $A=A+A=B+C$.\n\nTherefore $A+B+C=A+A+A=A$, and now $B+B=C+A$ and $C+C=A+B$ yield $B+B+B=A+B+C=A, C+C+C=A+B+C=A$. In particular if $r \\in \\mathbb{Q}=A \\cup B \\cup C$ is arbitrary then $3 r \\in A$.\n\nHowever such a conclusion is impossible. Take any $b \\in B(B \\neq \\emptyset)$ and let $r=b / 3 \\in \\mathbb{Q}$. Then $b=3 r \\in A$ which is a contradiction."
  },
  {
    "id": "fimo_2012_algebra_p3",
    "enunciado": "Let $a_{2}, \\ldots, a_{n}$ be $n-1$ positive real numbers, where $n \\geq 3$, such that $a_{2} a_{3} \\cdots a_{n}=1$. Prove that\n\n$$\n\\left(1+a_{2}\\right)^{2}\\left(1+a_{3}\\right)^{3} \\cdots\\left(1+a_{n}\\right)^{n}>n^{n} .\n$$",
    "solucao": "The substitution $a_{2}=\\frac{x_{2}}{x_{1}}, a_{3}=\\frac{x_{3}}{x_{2}}, \\ldots, a_{n}=\\frac{x_{1}}{x_{n-1}}$ transforms the original problem into the inequality\n\n$$\n\\left(x_{1}+x_{2}\\right)^{2}\\left(x_{2}+x_{3}\\right)^{3} \\cdots\\left(x_{n-1}+x_{1}\\right)^{n}>n^{n} x_{1}^{2} x_{2}^{3} \\cdots x_{n-1}^{n}\n$$\n\nfor all $x_{1}, \\ldots, x_{n-1}>0$. To prove this, we use the AM-GM inequality for each factor of the left-hand side as follows:\n\n$$\n\\begin{aligned}\n& \\left(x_{1}+x_{2}\\right)^{2} \\quad \\geq 2^{2} x_{1} x_{2} \\\\\n& \\left(x_{2}+x_{3}\\right)^{3}=\\left(2\\left(\\frac{x_{2}}{2}\\right)+x_{3}\\right)^{3} \\geq 3^{3}\\left(\\frac{x_{2}}{2}\\right)^{2} x_{3} \\\\\n& \\left(x_{3}+x_{4}\\right)^{4}=\\left(3\\left(\\frac{x_{3}}{3}\\right)+x_{4}\\right)^{4} \\geq 4^{4}\\left(\\frac{x_{3}}{3}\\right)^{3} x_{4} \\\\\n& \\left(x_{n-1}+x_{1}\\right)^{n}=\\left((n-1)\\left(\\frac{x_{n-1}}{n-1}\\right)+x_{1}\\right)^{n} \\geq n^{n}\\left(\\frac{x_{n-1}}{n-1}\\right)^{n-1} x_{1} .\n\\end{aligned}\n$$\n\nMultiplying these inequalities together gives $\\left(^{*}\\right)$, with inequality $\\operatorname{sign} \\geq$ instead of $>$. However for the equality to occur it is necessary that $x_{1}=x_{2}, x_{2}=2 x_{3}, \\ldots, x_{n-1}=(n-1) x_{1}$, implying $x_{1}=(n-1) ! x_{1}$. This is impossible since $x_{1}>0$ and $n \\geq 3$. Therefore the inequality is strict."
  },
  {
    "id": "fimo_2012_algebra_p4",
    "enunciado": "Let $f$ and $g$ be two nonzero polynomials with integer coefficients and $\\operatorname{deg} f>\\operatorname{deg} g$. Suppose that for infinitely many primes $p$ the polynomial $p f+g$ has a rational root. Prove that $f$ has a rational root.",
    "solucao": "Since $\\operatorname{deg} f>\\operatorname{deg} g$, we have $|g(x) / f(x)|<1$ for sufficiently large $x$; more precisely, there is a real number $R$ such that $|g(x) / f(x)|<1$ for all $x$ with $|x|>R$. Then for all such $x$ and all primes $p$ we have\n\n$$\n|p f(x)+g(x)| \\geq|f(x)|\\left(p-\\frac{|g(x)|}{|f(x)|}\\right)>0\n$$\n\nHence all real roots of the polynomials $p f+g$ lie in the interval $[-R, R]$.\n\nLet $f(x)=a_{n} x^{n}+a_{n-1} x^{n-1}+\\cdots+a_{0}$ and $g(x)=b_{m} x^{m}+b_{m-1} x^{m-1}+\\cdots+b_{0}$ where $n>m, a_{n} \\neq 0$ and $b_{m} \\neq 0$. Upon replacing $f(x)$ and $g(x)$ by $a_{n}^{n-1} f\\left(x / a_{n}\\right)$ and $a_{n}^{n-1} g\\left(x / a_{n}\\right)$ respectively, we reduce the problem to the case $a_{n}=1$. In other words one can assume that $f$ is monic. Then the leading coefficient of $p f+g$ is $p$, and if $r=u / v$ is a rational root of $p f+g$ with $(u, v)=1$ and $v>0$, then either $v=1$ or $v=p$.\n\nFirst consider the case when $v=1$ infinitely many times. If $v=1$ then $|u| \\leq R$, so there are only finitely many possibilities for the integer $u$. Therefore there exist distinct primes $p$ and $q$ for which we have the same value of $u$. Then the polynomials $p f+g$ and $q f+g$ share this root, implying $f(u)=g(u)=0$. So in this case $f$ and $g$ have an integer root in common.\n\nNow suppose that $v=p$ infinitely many times. By comparing the exponent of $p$ in the denominators of $p f(u / p)$ and $g(u / p)$ we get $m=n-1$ and $p f(u / p)+g(u / p)=0$ reduces to an equation of the form\n\n$$\n\\left(u^{n}+a_{n-1} p u^{n-1}+\\ldots+a_{0} p^{n}\\right)+\\left(b_{n-1} u^{n-1}+b_{n-2} p u^{n-2}+\\ldots+b_{0} p^{n-1}\\right)=0 .\n$$\n\nThe equation above implies that $u^{n}+b_{n-1} u^{n-1}$ is divisible by $p$ and hence, since $(u, p)=1$, we have $u+b_{n-1}=p k$ with some integer $k$. On the other hand all roots of $p f+g$ lie in the interval $[-R, R]$, so that\n\n$$\n\\begin{gathered}\n\\frac{\\left|p k-b_{n-1}\\right|}{p}=\\frac{|u|}{p}<R \\\\\n|k|<R+\\frac{\\left|b_{n-1}\\right|}{p}<R+\\left|b_{n-1}\\right| .\n\\end{gathered}\n$$\n\nTherefore the integer $k$ can attain only finitely many values. Hence there exists an integer $k$ such that the number $\\frac{p k-b_{n-1}}{p}=k-\\frac{b_{n-1}}{p}$ is a root of $p f+g$ for infinitely many primes $p$. For these primes we have\n\n$$\nf\\left(k-b_{n-1} \\frac{1}{p}\\right)+\\frac{1}{p} g\\left(k-b_{n-1} \\frac{1}{p}\\right)=0 .\n$$\n\nSo the equation\n\n$$\nf\\left(k-b_{n-1} x\\right)+x g\\left(k-b_{n-1} x\\right)=0\n$$\n\nhas infinitely many solutions of the form $x=1 / p$. Since the left-hand side is a polynomial, this implies that (1) is a polynomial identity, so it holds for all real $x$. In particular, by substituting $x=0$ in (1) we get $f(k)=0$. Thus the integer $k$ is a root of $f$.\n\nIn summary the monic polynomial $f$ obtained after the initial reduction always has an integer root. Therefore the original polynomial $f$ has a rational root."
  },
  {
    "id": "fimo_2012_algebra_p5",
    "enunciado": "Find all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ that satisfy the conditions\n\n$$\nf(1+x y)-f(x+y)=f(x) f(y) \\text { for all } x, y \\in \\mathbb{R}\n$$\n\nand $f(-1) \\neq 0$\n\nThe final answer is the function $f(x)=x-1, x \\in \\mathbb{R}$.",
    "solucao": "The only solution is the function $f(x)=x-1, x \\in \\mathbb{R}$.\n\nWe set $g(x)=f(x)+1$ and show that $g(x)=x$ for all real $x$. The conditions take the form\n\n$$\ng(1+x y)-g(x+y)=(g(x)-1)(g(y)-1) \\quad \\text { for all } x, y \\in \\mathbb{R} \\text { and } g(-1) \\neq 1 .\n$$\n\nDenote $C=g(-1)-1 \\neq 0$. Setting $y=-1$ in (1) gives\n\n$$\ng(1-x)-g(x-1)=C(g(x)-1) .\n$$\n\nSet $x=1$ in (2) to obtain $C(g(1)-1)=0$. Hence $g(1)=1$ as $C \\neq 0$. Now plugging in $x=0$ and $x=2$ yields $g(0)=0$ and $g(2)=2$ respectively.\n\nWe pass on to the key observations\n\n$$\n\\begin{array}{ll}\ng(x)+g(2-x)=2 & \\text { for all } x \\in \\mathbb{R}, \\\\\ng(x+2)-g(x)=2 & \\text { for all } x \\in \\mathbb{R} .\n\\end{array}\n$$\n\nReplace $x$ by $1-x$ in (2), then change $x$ to $-x$ in the resulting equation. We obtain the relations $g(x)-g(-x)=C(g(1-x)-1), g(-x)-g(x)=C(g(1+x)-1)$. Then adding them up leads to $C(g(1-x)+g(1+x)-2)=0$. Thus $C \\neq 0$ implies (3).\n\nLet $u, v$ be such that $u+v=1$. Apply (1) to the pairs $(u, v)$ and $(2-u, 2-v)$ :\n\n$$\ng(1+u v)-g(1)=(g(u)-1)(g(v)-1), \\quad g(3+u v)-g(3)=(g(2-u)-1)(g(2-v)-1) .\n$$\n\nObserve that the last two equations have equal right-hand sides by (3). Hence $u+v=1$ implies\n\n$$\ng(u v+3)-g(u v+1)=g(3)-g(1) .\n$$\n\nEach $x \\leq 5 / 4$ is expressible in the form $x=u v+1$ with $u+v=1$ (the quadratic function $t^{2}-t+(x-1)$ has real roots for $\\left.x \\leq 5 / 4\\right)$. Hence $g(x+2)-g(x)=g(3)-g(1)$ whenever $x \\leq 5 / 4$. Because $g(x)=x$ holds for $x=0,1,2$, setting $x=0$ yields $g(3)=3$. This proves (4) for $x \\leq 5 / 4$. If $x>5 / 4$ then $-x<5 / 4$ and so $g(2-x)-g(-x)=2$ by the above. On the other hand (3) gives $g(x)=2-g(2-x), g(x+2)=2-g(-x)$, so that $g(x+2)-g(x)=g(2-x)-g(-x)=2$. Thus (4) is true for all $x \\in \\mathbb{R}$.\n\nNow replace $x$ by $-x$ in (3) to obtain $g(-x)+g(2+x)=2$. In view of (4) this leads to $g(x)+g(-x)=0$, i. e. $g(-x)=-g(x)$ for all $x$. Taking this into account, we apply (1) to the pairs $(-x, y)$ and $(x,-y)$ :\n\n$g(1-x y)-g(-x+y)=(g(x)+1)(1-g(y)), \\quad g(1-x y)-g(x-y)=(1-g(x))(g(y)+1)$.\n\nAdding up yields $g(1-x y)=1-g(x) g(y)$. Then $g(1+x y)=1+g(x) g(y)$ by (3). Now the original equation (1) takes the form $g(x+y)=g(x)+g(y)$. Hence $g$ is additive.\n\nBy additvity $g(1+x y)=g(1)+g(x y)=1+g(x y)$; since $g(1+x y)=1+g(x) g(y)$ was shown above, we also have $g(x y)=g(x) g(y)(g$ is multiplicative $)$. In particular $y=x$ gives $g\\left(x^{2}\\right)=g(x)^{2} \\geq 0$ for all $x$, meaning that $g(x) \\geq 0$ for $x \\geq 0$. Since $g$ is additive and bounded from below on $[0,+\\infty)$, it is linear; more exactly $g(x)=g(1) x=x$ for all $x \\in \\mathbb{R}$.\n\nIn summary $f(x)=x-1, x \\in \\mathbb{R}$. It is straightforward that this function satisfies the requirements."
  },
  {
    "id": "fimo_2012_algebra_p6",
    "enunciado": "Let $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ be a function, and let $f^{m}$ be $f$ applied $m$ times. Suppose that for every $n \\in \\mathbb{N}$ there exists a $k \\in \\mathbb{N}$ such that $f^{2 k}(n)=n+k$, and let $k_{n}$ be the smallest such $k$. Prove that the sequence $k_{1}, k_{2}, \\ldots$ is unbounded.",
    "solucao": "We restrict attention to the set\n\n$$\nS=\\left\\{1, f(1), f^{2}(1), \\ldots\\right\\} .\n$$\n\nObserve that $S$ is unbounded because for every number $n$ in $S$ there exists a $k>0$ such that $f^{2 k}(n)=n+k$ is in $S$. Clearly $f$ maps $S$ into itself; moreover $f$ is injective on $S$. Indeed if $f^{i}(1)=f^{j}(1)$ with $i \\neq j$ then the values $f^{m}(1)$ start repeating periodically from some point on, and $S$ would be finite.\n\nDefine $g: S \\rightarrow S$ by $g(n)=f^{2 k_{n}}(n)=n+k_{n}$. We prove that $g$ is injective too. Suppose that $g(a)=g(b)$ with $a<b$. Then $a+k_{a}=f^{2 k_{a}}(a)=f^{2 k_{b}}(b)=b+k_{b}$ implies $k_{a}>k_{b}$. So, since $f$ is injective on $S$, we obtain\n\n$$\nf^{2\\left(k_{a}-k_{b}\\right)}(a)=b=a+\\left(k_{a}-k_{b}\\right)\n$$\n\nHowever this contradicts the minimality of $k_{a}$ as $0<k_{a}-k_{b}<k_{a}$.\n\nLet $T$ be the set of elements of $S$ that are not of the form $g(n)$ with $n \\in S$. Note that $1 \\in T$ by $g(n)>n$ for $n \\in S$, so $T$ is non-empty. For each $t \\in T \\operatorname{denote} C_{t}=\\left\\{t, g(t), g^{2}(t), \\ldots\\right\\}$; call $C_{t}$ the chain starting at $t$. Observe that distinct chains are disjoint because $g$ is injective. Each $n \\in S \\backslash T$ has the form $n=g\\left(n^{\\prime}\\right)$ with $n^{\\prime}<n, n^{\\prime} \\in S$. Repeated applications of the same observation show that $n \\in C_{t}$ for some $t \\in T$, i. e. $S$ is the disjoint union of the chains $C_{t}$.\n\nIf $f^{n}(1)$ is in the chain $C_{t}$ starting at $t=f^{n_{t}}(1)$ then $n=n_{t}+2 a_{1}+\\cdots+2 a_{j}$ with\n\n$$\nf^{n}(1)=g^{j}\\left(f^{n_{t}}(1)\\right)=f^{2 a_{j}}\\left(f^{2 a_{j-1}}\\left(\\cdots f^{2 a_{1}}\\left(f^{n_{t}}(1)\\right)\\right)\\right)=f^{n_{t}}(1)+a_{1}+\\cdots+a_{j} .\n$$\n\nHence\n\n$$\nf^{n}(1)=f^{n_{t}}(1)+\\frac{n-n_{t}}{2}=t+\\frac{n-n_{t}}{2} .\n$$\n\nNow we show that $T$ is infinite. We argue by contradiction. Suppose that there are only finitely many chains $C_{t_{1}}, \\ldots, C_{t_{r}}$, starting at $t_{1}<\\cdots<t_{r}$. Fix $N$. If $f^{n}(1)$ with $1 \\leq n \\leq N$ is in $C_{t}$ then $f^{n}(1)=t+\\frac{n-n_{t}}{2} \\leq t_{r}+\\frac{N}{2}$ by (1). But then the $N+1$ distinct natural numbers $1, f(1), \\ldots, f^{N}(1)$ are all less than $t_{r}+\\frac{N}{2}$ and hence $N+1 \\leq t_{r}+\\frac{N}{2}$. This is a contradiction if $N$ is sufficiently large, and hence $T$ is infinite.\n\nTo complete the argument, choose any $k$ in $\\mathbb{N}$ and consider the $k+1$ chains starting at the first $k+1$ numbers in $T$. Let $t$ be the greatest one among these numbers. Then each of the chains in question contains a number not exceeding $t$, and at least one of them does not contain any number among $t+1, \\ldots, t+k$. So there is a number $n$ in this chain such that $g(n)-n>k$, i. e. $k_{n}>k$. In conclusion $k_{1}, k_{2}, \\ldots$ is unbounded."
  },
  {
    "id": "fimo_2012_algebra_p7",
    "enunciado": "We say that a function $f: \\mathbb{R}^{k} \\rightarrow \\mathbb{R}$ is a metapolynomial if, for some positive integers $m$ and $n$, it can be represented in the form\n\n$$\nf\\left(x_{1}, \\ldots, x_{k}\\right)=\\max _{i=1, \\ldots, m} \\min _{j=1, \\ldots, n} P_{i, j}\\left(x_{1}, \\ldots, x_{k}\\right)\n$$\n\nwhere $P_{i, j}$ are multivariate polynomials. Prove that the product of two metapolynomials is also a metapolynomial.",
    "solucao": "We use the notation $f(x)=f\\left(x_{1}, \\ldots, x_{k}\\right)$ for $x=\\left(x_{1}, \\ldots, x_{k}\\right)$ and $[m]=\\{1,2, \\ldots, m\\}$. Observe that if a metapolynomial $f(x)$ admits a representation like the one in the statement for certain positive integers $m$ and $n$, then they can be replaced by any $m^{\\prime} \\geq m$ and $n^{\\prime} \\geq n$. For instance, if we want to replace $m$ by $m+1$ then it is enough to define $P_{m+1, j}(x)=P_{m, j}(x)$ and note that repeating elements of a set do not change its maximum nor its minimum. So one can assume that any two metapolynomials are defined with the same $m$ and $n$. We reserve letters $P$ and $Q$ for polynomials, so every function called $P, P_{i, j}, Q, Q_{i, j}, \\ldots$ is a polynomial function.\n\nWe start with a lemma that is useful to change expressions of the form $\\min \\max f_{i, j}$ to ones of the form $\\max \\min g_{i, j}$.\n\nLemma. Let $\\left\\{a_{i, j}\\right\\}$ be real numbers, for all $i \\in[m]$ and $j \\in[n]$. Then\n\n$$\n\\min _{i \\in[m]} \\max _{j \\in[n]} a_{i, j}=\\max _{j_{1}, \\ldots, j_{m} \\in[n]} \\min _{i \\in[m]} a_{i, j_{i}},\n$$\n\nwhere the max in the right-hand side is over all vectors $\\left(j_{1}, \\ldots, j_{m}\\right)$ with $j_{1}, \\ldots, j_{m} \\in[n]$.\n\nProof. We can assume for all $i$ that $a_{i, n}=\\max \\left\\{a_{i, 1}, \\ldots, a_{i, n}\\right\\}$ and $a_{m, n}=\\min \\left\\{a_{1, n}, \\ldots, a_{m, n}\\right\\}$. The left-hand side is $=a_{m, n}$ and hence we need to prove the same for the right-hand side. If $\\left(j_{1}, j_{2}, \\ldots, j_{m}\\right)=(n, n, \\ldots, n)$ then $\\min \\left\\{a_{1, j_{1}}, \\ldots, a_{m, j_{m}}\\right\\}=\\min \\left\\{a_{1, n}, \\ldots, a_{m, n}\\right\\}=a_{m, n}$ which implies that the right-hand side is $\\geq a_{m, n}$. It remains to prove the opposite inequality and this is equivalent to $\\min \\left\\{a_{1, j_{1}}, \\ldots, a_{m, j_{m}}\\right\\} \\leq a_{m, n}$ for all possible $\\left(j_{1}, j_{2}, \\ldots, j_{m}\\right)$. This is true because $\\min \\left\\{a_{1, j_{1}}, \\ldots, a_{m, j_{m}}\\right\\} \\leq a_{m, j_{m}} \\leq a_{m, n}$\n\nWe need to show that the family $\\mathcal{M}$ of metapolynomials is closed under multiplication, but it turns out easier to prove more: that it is also closed under addition, maxima and minima.\n\nFirst we prove the assertions about the maxima and the minima. If $f_{1}, \\ldots, f_{r}$ are metapolynomials, assume them defined with the same $m$ and $n$. Then\n\n$$\nf=\\max \\left\\{f_{1}, \\ldots, f_{r}\\right\\}=\\max \\left\\{\\max _{i \\in[m]} \\min _{j \\in[n]} P_{i, j}^{1}, \\ldots, \\max _{i \\in[m]} \\min _{j \\in[n]} P_{i, j}^{r}\\right\\}=\\max _{s \\in[r], i \\in[m]} \\min _{j \\in[n]} P_{i, j}^{s}\n$$\n\nIt follows that $f=\\max \\left\\{f_{1}, \\ldots, f_{r}\\right\\}$ is a metapolynomial. The same argument works for the minima, but first we have to replace min max by max min, and this is done via the lemma.\n\nAnother property we need is that if $f=\\max \\min P_{i, j}$ is a metapolynomial then so is $-f$. Indeed, $-f=\\min \\left(-\\min P_{i, j}\\right)=\\min \\max P_{i, j}$.\n\nTo prove $\\mathcal{M}$ is closed under addition let $f=\\max \\min P_{i, j}$ and $g=\\max \\min Q_{i, j}$. Then\n\n$$\n\\begin{gathered}\nf(x)+g(x)=\\max _{i \\in[m]} \\min _{j \\in[n]} P_{i, j}(x)+\\max _{i \\in[m]} \\min _{j \\in[n]} Q_{i, j}(x) \\\\\n=\\max _{i_{1}, i_{2} \\in[m]}\\left(\\min _{j \\in[n]} P_{i_{1}, j}(x)+\\min _{j \\in[n]} Q_{i_{2}, j}(x)\\right)=\\max _{i_{1}, i_{2} \\in[m]} \\min _{j_{1}, j_{2} \\in[n]}\\left(P_{i_{1}, j_{1}}(x)+Q_{i_{2}, j_{2}}(x)\\right),\n\\end{gathered}\n$$\n\nand hence $f(x)+g(x)$ is a metapolynomial.\n\nWe proved that $\\mathcal{M}$ is closed under sums, maxima and minima, in particular any function that can be expressed by sums, max, min, polynomials or even metapolynomials is in $\\mathcal{M}$.\n\nWe would like to proceed with multiplication along the same lines like with addition, but there is an essential difference. In general the product of the maxima of two sets is not equal to the maximum of the product of the sets. We need to deal with the fact that $a<b$ and $c<d$ do not imply $a c<b d$. However this is true for $a, b, c, d \\geq 0$.\n\nIn view of this we decompose each function $f(x)$ into its positive part $f^{+}(x)=\\max \\{f(x), 0\\}$ and its negative part $f^{-}(x)=\\max \\{0,-f(x)\\}$. Note that $f=f^{+}-f^{-}$and $f^{+}, f^{-} \\in \\mathcal{M}$ if $f \\in \\mathcal{M}$. The whole problem reduces to the claim that if $f$ and $g$ are metapolynomials with $f, g \\geq 0$ then $f g$ it is also a metapolynomial.\n\nAssuming this claim, consider arbitrary $f, g \\in \\mathcal{M}$. We have\n\n$$\nf g=\\left(f^{+}-f^{-}\\right)\\left(g^{+}-g^{-}\\right)=f^{+} g^{+}-f^{+} g^{-}-f^{-} g^{+}+f^{-} g^{-},\n$$\n\nand hence $f g \\in \\mathcal{M}$. Indeed, $\\mathcal{M}$ is closed under addition, also $f^{+} g^{+}, f^{+} g^{-}, f^{-} g^{+}, f^{-} g^{-} \\in \\mathcal{M}$ because $f^{+}, f^{-}, g^{+}, g^{-} \\geq 0$.\n\nIt remains to prove the claim. In this case $f, g \\geq 0$, and one can try to repeat the argument for the sum. More precisely, let $f=\\max \\min P_{i j} \\geq 0$ and $g=\\max \\min Q_{i j} \\geq 0$. Then\n\n$$\nf g=\\max \\min P_{i, j} \\cdot \\max \\min Q_{i, j}=\\max \\min P_{i, j}^{+} \\cdot \\max \\min Q_{i, j}^{+}=\\max \\min P_{i_{1}, j_{1}}^{+} \\cdot Q_{i_{2}, j_{2}}^{+} .\n$$\n\nHence it suffices to check that $P^{+} Q^{+} \\in \\mathcal{M}$ for any pair of polynomials $P$ and $Q$. This reduces to the identity\n\n$$\nu^{+} v^{+}=\\max \\left\\{0, \\min \\{u v, u, v\\}, \\min \\left\\{u v, u v^{2}, u^{2} v\\right\\}, \\min \\left\\{u v, u, u^{2} v\\right\\}, \\min \\left\\{u v, u v^{2}, v\\right\\}\\right\\},\n$$\n\nwith $u$ replaced by $P(x)$ and $v$ replaced by $Q(x)$. The formula is proved by a case-by-case analysis. If $u \\leq 0$ or $v \\leq 0$ then both sides equal 0 . In case $u, v \\geq 0$, the right-hand side is clearly $\\leq u v$. To prove the opposite inequality we use that $u v$ equals\n\n$$\n\\begin{array}{ll}\n\\min \\{u v, u, v\\} & \\text { if } 0 \\leq u, v \\leq 1 \\\\\n\\min \\left\\{u v, u v^{2}, u^{2} v\\right\\} & \\text { if } 1 \\leq u, v \\\\\n\\min \\left\\{u v, u, u^{2} v\\right\\} & \\text { if } 0 \\leq v \\leq 1 \\leq u \\\\\n\\min \\left\\{u v, u v^{2}, v\\right\\} & \\text { if } 0 \\leq u \\leq 1 \\leq v\n\\end{array}\n$$"
  },
  {
    "id": "fimo_2012_number_theory_p1",
    "enunciado": "Call admissible a set $A$ of integers that has the following property:\n\n$$\n\\text { If } x, y \\in A \\text { (possibly } x=y \\text { ) then } x^{2}+k x y+y^{2} \\in A \\text { for every integer } k \\text {. }\n$$\n\nDetermine all pairs $m, n$ of nonzero integers such that the only admissible set containing both $m$ and $n$ is the set of all integers.\n\nThe final answer is that a pair of integers $m, n$ fulfills the condition if and only if $\\operatorname{gcd}(m, n)=1$.",
    "solucao": "A pair of integers $m, n$ fulfills the condition if and only if $\\operatorname{gcd}(m, n)=1$. Suppose that $\\operatorname{gcd}(m, n)=d>1$. The set\n\n$$\nA=\\{\\ldots,-2 d,-d, 0, d, 2 d, \\ldots\\}\n$$\n\nis admissible, because if $d$ divides $x$ and $y$ then it divides $x^{2}+k x y+y^{2}$ for every integer $k$. Also $m, n \\in A$ and $A \\neq \\mathbb{Z}$.\n\nNow let $\\operatorname{gcd}(m, n)=1$, and let $A$ be an admissible set containing $m$ and $n$. We use the following observations to prove that $A=\\mathbb{Z}$ :\n\n(i) $k x^{2} \\in A$ for every $x \\in A$ and every integer $k$.\n\n(ii) $(x+y)^{2} \\in A$ for all $x, y \\in A$.\n\nTo justify (i) let $y=x$ in the definition of an admissible set; to justify (ii) let $k=2$.\n\nSince $\\operatorname{gcd}(m, n)=1$, we also have $\\operatorname{gcd}\\left(m^{2}, n^{2}\\right)=1$. Hence one can find integers $a, b$ such that $a m^{2}+b n^{2}=1$. It follows from (i) that $a m^{2} \\in A$ and $b n^{2} \\in A$. Now we deduce from (ii) that $1=\\left(a m^{2}+b n^{2}\\right)^{2} \\in A$. But if $1 \\in A$ then (i) implies $k \\in A$ for every integer $k$."
  },
  {
    "id": "fimo_2012_number_theory_p2",
    "enunciado": "Find all triples $(x, y, z)$ of positive integers such that $x \\leq y \\leq z$ and\n\n$$\nx^{3}\\left(y^{3}+z^{3}\\right)=2012(x y z+2) .\n$$\n\nThe final answer is the triple $(2,251,252)$.",
    "solucao": "First note that $x$ divides $2012 \\cdot 2=2^{3} \\cdot 503$. If $503 \\mid x$ then the right-hand side of the equation is divisible by $503^{3}$, and it follows that $503^{2} \\mid x y z+2$. This is false as $503 \\mid x$. Hence $x=2^{m}$ with $m \\in\\{0,1,2,3\\}$. If $m \\geq 2$ then $2^{6} \\mid 2012(x y z+2)$. However the highest powers of 2 dividing 2012 and $x y z+2=2^{m} y z+2$ are $2^{2}$ and $2^{1}$ respectively. So $x=1$ or $x=2$, yielding the two equations\n\n$$\ny^{3}+z^{3}=2012(y z+2), \\quad \\text { and } \\quad y^{3}+z^{3}=503(y z+1) .\n$$\n\nIn both cases the prime $503=3 \\cdot 167+2$ divides $y^{3}+z^{3}$. We claim that $503 \\mid y+z$. This is clear if $503 \\mid y$, so let $503 \\nmid y$ and $503 \\nmid z$. Then $y^{502} \\equiv z^{502}(\\bmod 503)$ by FERMAT's little theorem. On the other hand $y^{3} \\equiv-z^{3}(\\bmod 503)$ implies $y^{3 \\cdot 167} \\equiv-z^{3 \\cdot 167}(\\bmod 503)$, i. e. $y^{501} \\equiv-z^{501}(\\bmod 503)$. It follows that $y \\equiv-z(\\bmod 503)$ as claimed.\n\nTherefore $y+z=503 k$ with $k \\geq 1$. In view of $y^{3}+z^{3}=(y+z)\\left((y-z)^{2}+y z\\right)$ the two equations take the form\n\n$$\n\\begin{aligned}\n& k(y-z)^{2}+(k-4) y z=8 \\\\\n& k(y-z)^{2}+(k-1) y z=1\n\\end{aligned}\n$$\n\nIn (1) we have $(k-4) y z \\leq 8$, which implies $k \\leq 4$. Indeed if $k>4$ then $1 \\leq(k-4) y z \\leq 8$, so that $y \\leq 8$ and $z \\leq 8$. This is impossible as $y+z=503 k \\geq 503$. Note next that $y^{3}+z^{3}$ is even in the first equation. Hence $y+z=503 k$ is even too, meaning that $k$ is even. Thus $k=2$ or $k=4$. Clearly (1) has no integer solutions for $k=4$. If $k=2$ then (1) takes the form $(y+z)^{2}-5 y z=4$. Since $y+z=503 k=503 \\cdot 2$, this leads to $5 y z=503^{2} \\cdot 2^{2}-4$. However $503^{2} \\cdot 2^{2}-4$ is not a multiple of 5 . Therefore (1) has no integer solutions.\n\nEquation (2) implies $0 \\leq(k-1) y z \\leq 1$, so that $k=1$ or $k=2$. Also $0 \\leq k(y-z)^{2} \\leq 1$, hence $k=2$ only if $y=z$. However then $y=z=1$, which is false in view of $y+z \\geq 503$. Therefore $k=1$ and (2) takes the form $(y-z)^{2}=1$, yielding $z-y=|y-z|=1$. Combined with $k=1$ and $y+z=503 k$, this leads to $y=251, z=252$.\n\nIn summary the triple $(2,251,252)$ is the only solution."
  },
  {
    "id": "fimo_2012_number_theory_p3",
    "enunciado": "Determine all integers $m \\geq 2$ such that every $n$ with $\\frac{m}{3} \\leq n \\leq \\frac{m}{2}$ divides the binomial coefficient $\\left(\\begin{array}{c}n \\\\ m-2 n\\end{array}\\right)$.\n\nThe final answers are all prime numbers.",
    "solucao": "The integers in question are all prime numbers.\n\nFirst we check that all primes satisfy the condition, and even a stronger one. Namely, if $p$ is a prime then every $n$ with $1 \\leq n \\leq \\frac{p}{2}$ divides $\\left(\\begin{array}{c}n \\\\ p-2 n\\end{array}\\right)$. This is true for $p=2$ where $n=1$ is the only possibility. For an odd prime $p$ take $n \\in\\left[1, \\frac{p}{2}\\right]$ and consider the following identity of binomial coefficients:\n\n$$\n(p-2 n) \\cdot\\left(\\begin{array}{c}\nn \\\\\np-2 n\n\\end{array}\\right)=n \\cdot\\left(\\begin{array}{c}\nn-1 \\\\\np-2 n-1\n\\end{array}\\right) .\n$$\n\nSince $p \\geq 2 n$ and $p$ is odd, all factors are non-zero. If $d=\\operatorname{gcd}(p-2 n, n)$ then $d$ divides $p$, but $d \\leq n<p$ and hence $d=1$. It follows that $p-2 n$ and $n$ are relatively prime, and so the factor $n$ in the right-hand side divides the binomial coefficient $\\left(\\begin{array}{c}n \\\\ p-2 n\\end{array}\\right)$.\n\nNext we show that no composite number $m$ has the stated property. Consider two cases.\n\n\\begin{itemize}\n  \\item If $m=2 k$ with $k>1$, pick $n=k$. Then $\\frac{m}{3} \\leq n \\leq \\frac{m}{2}$ but $\\left(\\begin{array}{c}n \\\\ m-2 n\\end{array}\\right)=\\left(\\begin{array}{l}k \\\\ 0\\end{array}\\right)=1$ is not divisible by $k>1$.\n\n  \\item If $m$ is odd then there exist an odd prime $p$ and an integer $k \\geq 1$ with $m=p(2 k+1)$. Pick $n=p k$, then $\\frac{m}{3} \\leq n \\leq \\frac{m}{2}$ by $k \\geq 1$. However\n\n\\end{itemize}\n\n$$\n\\frac{1}{n}\\left(\\begin{array}{c}\nn \\\\\nm-2 n\n\\end{array}\\right)=\\frac{1}{p k}\\left(\\begin{array}{c}\np k \\\\\np\n\\end{array}\\right)=\\frac{(p k-1)(p k-2) \\cdots(p k-(p-1))}{p !}\n$$\n\nis not an integer, because $p$ divides the denominator but not the numerator."
  },
  {
    "id": "fimo_2012_number_theory_p4_1",
    "enunciado": "An integer $a$ is called friendly if the equation $\\left(m^{2}+n\\right)\\left(n^{2}+m\\right)=a(m-n)^{3}$ has a solution over the positive integers.\n\nProve that there are at least 500 friendly integers in the set $\\{1,2, \\ldots, 2012\\}$.",
    "solucao": "Every $a$ of the form $a=4 k-3$ with $k \\geq 2$ is friendly. Indeed the numbers $m=2 k-1>0$ and $n=k-1>0$ satisfy the given equation with $a=4 k-3$ :\n\n$$\n\\left(m^{2}+n\\right)\\left(n^{2}+m\\right)=\\left((2 k-1)^{2}+(k-1)\\right)\\left((k-1)^{2}+(2 k-1)\\right)=(4 k-3) k^{3}=a(m-n)^{3} .\n$$\n\nHence $5,9, \\ldots, 2009$ are friendly and so $\\{1,2, \\ldots, 2012\\}$ contains at least 502 friendly numbers."
  },
  {
    "id": "fimo_2012_number_theory_p4_2",
    "enunciado": "An integer $a$ is called friendly if the equation $\\left(m^{2}+n\\right)\\left(n^{2}+m\\right)=a(m-n)^{3}$ has a solution over the positive integers.\n\nDecide whether $a=2$ is friendly.\n\nThe final answer is that $a=2$ is not friendly.",
    "solucao": "We show that $a=2$ is not friendly. Consider the equation with $a=2$ and rewrite its left-hand side as a difference of squares:\n\n$$\n\\frac{1}{4}\\left(\\left(m^{2}+n+n^{2}+m\\right)^{2}-\\left(m^{2}+n-n^{2}-m\\right)^{2}\\right)=2(m-n)^{3} .\n$$\n\nSince $m^{2}+n-n^{2}-m=(m-n)(m+n-1)$, we can further reformulate the equation as\n\n$$\n\\left(m^{2}+n+n^{2}+m\\right)^{2}=(m-n)^{2}\\left(8(m-n)+(m+n-1)^{2}\\right) .\n$$\n\nIt follows that $8(m-n)+(m+n-1)^{2}$ is a perfect square. Clearly $m>n$, hence there is an integer $s \\geq 1$ such that\n\n$$\n(m+n-1+2 s)^{2}=8(m-n)+(m+n-1)^{2} .\n$$\n\nSubtracting the squares gives $s(m+n-1+s)=2(m-n)$. Since $m+n-1+s>m-n$, we conclude that $s<2$. Therefore the only possibility is $s=1$ and $m=3 n$. However then the left-hand side of the given equation (with $a=2$ ) is greater than $m^{3}=27 n^{3}$, whereas its right-hand side equals $16 n^{3}$. The contradiction proves that $a=2$ is not friendly."
  },
  {
    "id": "fimo_2012_number_theory_p5",
    "enunciado": "For a nonnegative integer $n$ define $\\operatorname{rad}(n)=1$ if $n=0$ or $n=1$, and $\\operatorname{rad}(n)=p_{1} p_{2} \\cdots p_{k}$ where $p_{1}<p_{2}<\\cdots<p_{k}$ are all prime factors of $n$. Find all polynomials $f(x)$ with nonnegative integer coefficients such that $\\operatorname{rad}(f(n))$ divides $\\operatorname{rad}\\left(f\\left(n^{\\operatorname{rad}(n)}\\right)\\right)$ for every nonnegative integer $n$.\n\nThe final answer is $f(x)=a x^{m}$.",
    "solucao": "We are going to prove that $f(x)=a x^{m}$ for some nonnegative integers $a$ and $m$. If $f(x)$ is the zero polynomial we are done, so assume that $f(x)$ has at least one positive coefficient. In particular $f(1)>0$.\n\nLet $p$ be a prime number. The condition is that $f(n) \\equiv 0(\\bmod p)$ implies\n\n$$\nf\\left(n^{\\operatorname{rad}(n)}\\right) \\equiv 0 \\quad(\\bmod p) .\n$$\n\nSince $\\operatorname{rad}\\left(n^{\\operatorname{rad}(n)^{k}}\\right)=\\operatorname{rad}(n)$ for all $k$, repeated applications of the preceding implication show that if $p$ divides $f(n)$ then\n\n$$\nf\\left(n^{\\operatorname{rad}(n)^{k}}\\right) \\equiv 0 \\quad(\\bmod p) \\quad \\text { for all } k .\n$$\n\nThe idea is to construct a prime $p$ and a positive integer $n$ such that $p-1$ divides $n$ and $p$ divides $f(n)$. In this case, for $k$ large enough $p-1$ divides $\\operatorname{rad}(n)^{k}$. Hence if $(p, n)=1$ then $n^{\\operatorname{rad}(n)^{k}} \\equiv 1(\\bmod p)$ by FERMAT's little theorem, so that\n\n$$\nf(1) \\equiv f\\left(n^{\\operatorname{rad}(n)^{k}}\\right) \\equiv 0 \\quad(\\bmod p) .\n$$\n\nSuppose that $f(x)=g(x) x^{m}$ with $g(0) \\neq 0$. Let $t$ be a positive integer, $p$ any prime factor of $g(-t)$ and $n=(p-1) t$. So $p-1$ divides $n$ and $f(n)=f((p-1) t) \\equiv f(-t) \\equiv 0(\\bmod p)$, hence either $(p, n)>1$ or $(2)$ holds. If $(p,(p-1) t)>1$ then $p$ divides $t$ and $g(0) \\equiv g(-t) \\equiv 0(\\bmod p)$, meaning that $p$ divides $g(0)$.\n\nIn conclusion we proved that each prime factor of $g(-t)$ divides $g(0) f(1) \\neq 0$, and thus the set of prime factors of $g(-t)$ when $t$ ranges through the positive integers is finite. This is known to imply that $g(x)$ is a constant polynomial, and so $f(x)=a x^{m}$."
  },
  {
    "id": "fimo_2012_number_theory_p6",
    "enunciado": "Let $x$ and $y$ be positive integers. If $x^{2^{n}}-1$ is divisible by $2^{n} y+1$ for every positive integer $n$, prove that $x=1$.",
    "solucao": "First we prove the following fact: For every positive integer $y$ there exist infinitely many primes $p \\equiv 3(\\bmod 4)$ such that $p$ divides some number of the form $2^{n} y+1$.\n\nClearly it is enough to consider the case $y$ odd. Let\n\n$$\n2 y+1=p_{1}^{e_{1}} \\cdots p_{r}^{e_{r}}\n$$\n\nbe the prime factorization of $2 y+1$. Suppose on the contrary that there are finitely many primes $p_{r+1}, \\ldots, p_{r+s} \\equiv 3(\\bmod 4)$ that divide some number of the form $2^{n} y+1$ but do not divide $2 y+1$.\n\nWe want to find an $n$ such that $p_{i}^{e_{i}} \\| 2^{n} y+1$ for $1 \\leq i \\leq r$ and $p_{i} \\nmid 2^{n} y+1$ for $r+1 \\leq i \\leq r+s$. For this it suffices to take\n\n$$\nn=1+\\varphi\\left(p_{1}^{e_{1}+1} \\cdots p_{r}^{e_{r}+1} p_{r+1}^{1} \\cdots p_{r+s}^{1}\\right),\n$$\n\nbecause then\n\n$$\n2^{n} y+1 \\equiv 2 y+1 \\quad\\left(\\bmod p_{1}^{e_{1}+1} \\cdots p_{r}^{e_{r}+1} p_{r+1}^{1} \\cdots p_{r+s}^{1}\\right)\n$$\n\nThe last congruence means that $p_{1}^{e_{1}}, \\ldots, p_{r}^{e_{r}}$ divide exactly $2^{n} y+1$ and no prime $p_{r+1}, \\ldots, p_{r+s}$ divides $2^{n} y+1$. It follows that the prime factorization of $2^{n} y+1$ consists of the prime powers $p_{1}^{e_{1}}, \\ldots, p_{r}^{e_{r}}$ and powers of primes $\\equiv 1(\\bmod 4)$. Because $y$ is odd, we obtain\n\n$$\n2^{n} y+1 \\equiv p_{1}^{e_{1}} \\cdots p_{r}^{e_{r}} \\equiv 2 y+1 \\equiv 3 \\quad(\\bmod 4)\n$$\n\nThis is a contradiction since $n>1$, and so $2^{n} y+1 \\equiv 1(\\bmod 4)$.\n\nNow we proceed to the problem. If $p$ is a prime divisor of $2^{n} y+1$ the problem statement implies that $x^{d} \\equiv 1(\\bmod p)$ for $d=2^{n}$. By FERMAT's little theorem the same congruence holds for $d=p-1$, so it must also hold for $d=\\left(2^{n}, p-1\\right)$. For $p \\equiv 3(\\bmod 4)$ we have $\\left(2^{n}, p-1\\right)=2$, therefore in this case $x^{2} \\equiv 1(\\bmod p)$.\n\nIn summary, we proved that every prime $p \\equiv 3(\\bmod 4)$ that divides some number of the form $2^{n} y+1$ also divides $x^{2}-1$. This is possible only if $x=1$, otherwise by the above $x^{2}-1$ would be a positive integer with infinitely many prime factors."
  },
  {
    "id": "fimo_2012_number_theory_p7",
    "enunciado": "Find all $n \\in \\mathbb{N}$ for which there exist nonnegative integers $a_{1}, a_{2}, \\ldots, a_{n}$ such that\n\n$$\n\\frac{1}{2^{a_{1}}}+\\frac{1}{2^{a_{2}}}+\\cdots+\\frac{1}{2^{a_{n}}}=\\frac{1}{3^{a_{1}}}+\\frac{2}{3^{a_{2}}}+\\cdots+\\frac{n}{3^{a_{n}}}=1 .\n$$",
    "solucao": "Such numbers $a_{1}, a_{2}, \\ldots, a_{n}$ exist if and only if $n \\equiv 1(\\bmod 4)$ or $n \\equiv 2(\\bmod 4)$.\n\nLet $\\sum_{k=1}^{n} \\frac{k}{3^{a_{k}}}=1$ with $a_{1}, a_{2}, \\ldots, a_{n}$ nonnegative integers. Then $1 \\cdot x_{1}+2 \\cdot x_{2}+\\cdots+n \\cdot x_{n}=3^{a}$ with $x_{1}, \\ldots, x_{n}$ powers of 3 and $a \\geq 0$. The right-hand side is odd, and the left-hand side has the same parity as $1+2+\\cdots+n$. Hence the latter sum is odd, which implies $n \\equiv 1,2(\\bmod 4)$. Now we prove the converse.\n\nCall feasible a sequence $b_{1}, b_{2}, \\ldots, b_{n}$ if there are nonnegative integers $a_{1}, a_{2}, \\ldots, a_{n}$ such that\n\n$$\n\\frac{1}{2^{a_{1}}}+\\frac{1}{2^{a_{2}}}+\\cdots+\\frac{1}{2^{a_{n}}}=\\frac{b_{1}}{3^{a_{1}}}+\\frac{b_{2}}{3^{a_{2}}}+\\cdots+\\frac{b_{n}}{3^{a_{n}}}=1 .\n$$\n\nLet $b_{k}$ be a term of a feasible sequence $b_{1}, b_{2}, \\ldots, b_{n}$ with exponents $a_{1}, a_{2}, \\ldots, a_{n}$ like above, and let $u, v$ be nonnegative integers with sum $3 b_{k}$. Observe that\n\n$$\n\\frac{1}{2^{a_{k}+1}}+\\frac{1}{2^{a_{k}+1}}=\\frac{1}{2^{a_{k}}} \\quad \\text { and } \\quad \\frac{u}{3^{a_{k}+1}}+\\frac{v}{3^{a_{k}+1}}=\\frac{b_{k}}{3^{a_{k}}} \\text {. }\n$$\n\nIt follows that the sequence $b_{1}, \\ldots, b_{k-1}, u, v, b_{k+1}, \\ldots, b_{n}$ is feasible. The exponents $a_{i}$ are the same for the unchanged terms $b_{i}, i \\neq k$; the new terms $u, v$ have exponents $a_{k}+1$.\n\nWe state the conclusion in reverse. If two terms $u, v$ of a sequence are replaced by one term $\\frac{u+v}{3}$ and the obtained sequence is feasible, then the original sequence is feasible too. Denote by $\\alpha_{n}$ the sequence $1,2, \\ldots, n$. To show that $\\alpha_{n}$ is feasible for $n \\equiv 1,2(\\bmod 4)$, we transform it by $n-1$ replacements $\\{u, v\\} \\mapsto \\frac{u+v}{3}$ to the one-term sequence $\\alpha_{1}$. The latter is feasible, with $a_{1}=0$. Note that if $m$ and $2 m$ are terms of a sequence then $\\{m, 2 m\\} \\mapsto m$, so $2 m$ can be ignored if necessary.\n\nLet $n \\geq 16$. We prove that $\\alpha_{n}$ can be reduced to $\\alpha_{n-12}$ by 12 operations. Write $n=12 k+r$ where $k \\geq 1$ and $0 \\leq r \\leq 11$. If $0 \\leq r \\leq 5$ then the last 12 terms of $\\alpha_{n}$ can be partitioned into 2 singletons $\\{12 k-6\\},\\{12 k\\}$ and the following 5 pairs:\n\n$$\n\\{12 k-6-i, 12 k-6+i\\}, i=1, \\ldots, 5-r ; \\quad\\{12 k-j, 12 k+j\\}, j=1, \\ldots, r .\n$$\n\n(There is only one kind of pairs if $r \\in\\{0,5\\}$.) One can ignore $12 k-6$ and $12 k$ since $\\alpha_{n}$ contains $6 k-3$ and $6 k$. Furthermore the 5 operations $\\{12 k-6-i, 12 k-6+i\\} \\mapsto 8 k-4$ and $\\{12 k-j, 12 k+j\\} \\mapsto 8 k$ remove the 10 terms in the pairs and bring in 5 new terms equal to $8 k-4$ or $8 k$. All of these can be ignored too as $4 k-2$ and $4 k$ are still present in the sequence. Indeed $4 k \\leq n-12$ is equivalent to $8 k \\geq 12-r$, which is true for $r \\in\\{4,5\\}$. And if $r \\in\\{0,1,2,3\\}$ then $n \\geq 16$ implies $k \\geq 2$, so $8 k \\geq 12-r$ also holds. Thus $\\alpha_{n}$ reduces to $\\alpha_{n-12}$.\n\nThe case $6 \\leq r \\leq 11$ is analogous. Consider the singletons $\\{12 k\\},\\{12 k+6\\}$ and the 5 pairs\n\n$$\n\\{12 k-i, 12 k+i\\}, i=1, \\ldots, 11-r ; \\quad\\{12 k+6-j, 12 k+6+j\\}, j=1, \\ldots, r-6 .\n$$\n\nIgnore the singletons like before, then remove the pairs via operations $\\{12 k-i, 12 k+i\\} \\mapsto 8 k$ and $\\{12 k+6-j, 12 k+6+j\\} \\mapsto 8 k+4$. The 5 newly-appeared terms $8 k$ and $8 k+4$ can be ignored too since $4 k+2 \\leq n-12$ (this follows from $k \\geq 1$ and $r \\geq 6$ ). We obtain $\\alpha_{n-12}$ again.\n\nThe problem reduces to $2 \\leq n \\leq 15$. In fact $n \\in\\{2,5,6,9,10,13,14\\}$ by $n \\equiv 1,2(\\bmod 4)$. The cases $n=2,6,10,14$ reduce to $n=1,5,9,13$ respectively because the last even term of $\\alpha_{n}$ can be ignored. For $n=5$ apply $\\{4,5\\} \\mapsto 3$, then $\\{3,3\\} \\mapsto 2$, then ignore the 2 occurrences of 2 . For $n=9$ ignore 6 first, then apply $\\{5,7\\} \\mapsto 4,\\{4,8\\} \\mapsto 4,\\{3,9\\} \\mapsto 4$. Now ignore the 3 occurrences of 4 , then ignore 2. Finally $n=13$ reduces to $n=10$ by $\\{11,13\\} \\mapsto 8$ and ignoring 8 and 12 . The proof is complete.\n"
  },
  {
    "id": "fimo_2012_number_theory_p8",
    "enunciado": "Prove that for every prime $p>100$ and every integer $r$ there exist two integers $a$ and $b$ such that $p$ divides $a^{2}+b^{5}-r$.",
    "solucao": "Throughout the solution, all congruence relations are meant modulo $p$.\n\nFix $p$, and let $\\mathcal{P}=\\{0,1, \\ldots, p-1\\}$ be the set of residue classes modulo $p$. For every $r \\in \\mathcal{P}$, let $S_{r}=\\left\\{(a, b) \\in \\mathcal{P} \\times \\mathcal{P}: a^{2}+b^{5} \\equiv r\\right\\}$, and let $s_{r}=\\left|S_{r}\\right|$. Our aim is to prove $s_{r}>0$ for all $r \\in \\mathcal{P}$.\n\nWe will use the well-known fact that for every residue class $r \\in \\mathcal{P}$ and every positive integer $k$, there are at most $k$ values $x \\in \\mathcal{P}$ such that $x^{k} \\equiv r$.\n\nLemma. Let $N$ be the number of quadruples $(a, b, c, d) \\in \\mathcal{P}^{4}$ for which $a^{2}+b^{5} \\equiv c^{2}+d^{5}$. Then\n\n$$\nN=\\sum_{r \\in \\mathcal{P}} s_{r}^{2}\n$$\n\nand\n\n$$\nN \\leq p\\left(p^{2}+4 p-4\\right)\n$$\n\nProof. (a) For each residue class $r$ there exist exactly $s_{r}$ pairs $(a, b)$ with $a^{2}+b^{5} \\equiv r$ and $s_{r}$ pairs $(c, d)$ with $c^{2}+d^{5} \\equiv r$. So there are $s_{r}^{2}$ quadruples with $a^{2}+b^{5} \\equiv c^{2}+d^{5} \\equiv r$. Taking the sum over all $r \\in \\mathcal{P}$, the statement follows.\n\n(b) Choose an arbitrary pair $(b, d) \\in \\mathcal{P}$ and look for the possible values of $a, c$.\n\n\\begin{enumerate}\n  \\item Suppose that $b^{5} \\equiv d^{5}$, and let $k$ be the number of such pairs $(b, d)$. The value $b$ can be chosen in $p$ different ways. For $b \\equiv 0$ only $d=0$ has this property; for the nonzero values of $b$ there are at most 5 possible values for $d$. So we have $k \\leq 1+5(p-1)=5 p-4$.\n\\end{enumerate}\n\nThe values $a$ and $c$ must satisfy $a^{2} \\equiv c^{2}$, so $a \\equiv \\pm c$, and there are exactly $2 p-1$ such pairs $(a, c)$.\n\n\\begin{enumerate}\n  \\setcounter{enumi}{1}\n  \\item Now suppose $b^{5} \\not \\equiv d^{5}$. In this case $a$ and $c$ must be distinct. By $(a-c)(a+c)=d^{5}-b^{5}$, the value of $a-c$ uniquely determines $a+c$ and thus $a$ and $c$ as well. Hence, there are $p-1$ suitable pairs $(a, c)$.\n\\end{enumerate}\n\nThus, for each of the $k$ pairs $(b, d)$ with $b^{5} \\equiv d^{5}$ there are $2 p-1$ pairs $(a, c)$, and for each of the other $p^{2}-k$ pairs $(b, d)$ there are $p-1$ pairs $(a, c)$. Hence,\n\n$$\nN=k(2 p-1)+\\left(p^{2}-k\\right)(p-1)=p^{2}(p-1)+k p \\leq p^{2}(p-1)+(5 p-4) p=p\\left(p^{2}+4 p-4\\right) .\n$$\n\nTo prove the statement of the problem, suppose that $S_{r}=\\emptyset$ for some $r \\in \\mathcal{P}$; obviously $r \\not \\equiv 0$. Let $T=\\left\\{x^{10}: x \\in \\mathcal{P} \\backslash\\{0\\}\\right\\}$ be the set of nonzero 10th powers modulo $p$. Since each residue class is the 10 th power of at most 10 elements in $\\mathcal{P}$, we have $|T| \\geq \\frac{p-1}{10} \\geq 4$ by $p>100$.\n\nFor every $t \\in T$, we have $S_{t r}=\\emptyset$. Indeed, if $(x, y) \\in S_{t r}$ and $t \\equiv z^{10}$ then\n\n$$\n\\left(z^{-5} x\\right)^{2}+\\left(z^{-2} y\\right)^{5} \\equiv t^{-1}\\left(x^{2}+y^{5}\\right) \\equiv r\n$$\n\nso $\\left(z^{-5} x, z^{-2} y\\right) \\in S_{r}$. So, there are at least $\\frac{p-1}{10} \\geq 4$ empty sets among $S_{1}, \\ldots, S_{p-1}$, and there are at most $p-4$ nonzero values among $s_{0}, s_{2}, \\ldots, s_{p-1}$. Then by the AM-QM inequality we obtain\n\n$$\nN=\\sum_{r \\in \\mathcal{P} \\backslash r T} s_{r}^{2} \\geq \\frac{1}{p-4}\\left(\\sum_{r \\in \\mathcal{P} \\backslash r T} s_{r}\\right)^{2}=\\frac{|\\mathcal{P} \\times \\mathcal{P}|^{2}}{p-4}=\\frac{p^{4}}{p-4}>p\\left(p^{2}+4 p-4\\right)\n$$\n\nwhich is impossible by the lemma."
  },
  {
    "id": "fimo_2013_algebra_p1",
    "enunciado": "Let $n$ be a positive integer and let $a_{1}, \\ldots, a_{n-1}$ be arbitrary real numbers. Define the sequences $u_{0}, \\ldots, u_{n}$ and $v_{0}, \\ldots, v_{n}$ inductively by $u_{0}=u_{1}=v_{0}=v_{1}=1$, and\n\n$$\nu_{k+1}=u_{k}+a_{k} u_{k-1}, \\quad v_{k+1}=v_{k}+a_{n-k} v_{k-1} \\quad \\text { for } k=1, \\ldots, n-1 \\text {. }\n$$\n\nProve that $u_{n}=v_{n}$",
    "solucao": "We prove by induction on $k$ that\n\n$$\nu_{k}=\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k, i_{j+1}-i_{j} \\geqslant 2}} a_{i_{1}} \\ldots a_{i_{t}} .\n$$\n\nNote that we have one trivial summand equal to 1 (which corresponds to $t=0$ and the empty sequence, whose product is 1 ).\n\nFor $k=0,1$ the sum on the right-hand side only contains the empty product, so (1) holds due to $u_{0}=u_{1}=1$. For $k \\geqslant 1$, assuming the result is true for $0,1, \\ldots, k$, we have\n\n$$\n\\begin{aligned}\n& u_{k+1}=\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k, i_{j+1}-i_{j} \\geqslant 2}} a_{i_{1}} \\ldots a_{i_{t}}+\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k-1, i_{j+1}-i_{j} \\geqslant 2}} a_{i_{1}} \\ldots a_{i_{t}} \\cdot a_{k} \\\\\n& =\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k+1, i_{j+1}-i_{j} \\geqslant 2, k \\notin\\left\\{i_{1}, \\ldots, i_{t}\\right\\}}} a_{i_{1}} \\ldots a_{i_{t}}+\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k+1 \\\\ i_{j+1}-i_{j} \\geqslant 2, k \\in\\left\\{i_{1}, \\ldots, i_{t}\\right\\}}} a_{i_{1}} \\ldots a_{i_{t}} \\\\\n& =\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k+1, i_{j+1}-i_{j} \\geqslant 2}} a_{i_{1}} \\ldots a_{i_{t}},\n\\end{aligned}\n$$\n\nas required.\n\nApplying (1) to the sequence $b_{1}, \\ldots, b_{n}$ given by $b_{k}=a_{n-k}$ for $1 \\leqslant k \\leqslant n$, we get\n\n$$\nv_{k}=\\sum_{\\substack{0<i_{1}<\\ldots<i_{t}<k, i_{j+1}-i_{j} \\geqslant 2}} b_{i_{1}} \\ldots b_{i_{t}}=\\sum_{\\substack{n>i_{1}>\\ldots>i_{t}>n-k \\\\ i_{j}-i_{j+1} \\geqslant 2}} a_{i_{1}} \\ldots a_{i_{t}} .\n$$\n\nFor $k=n$ the expressions (1) and (2) coincide, so indeed $u_{n}=v_{n}$."
  },
  {
    "id": "fimo_2013_algebra_p2",
    "enunciado": "Prove that in any set of 2000 distinct real numbers there exist two pairs $a>b$ and $c>d$ with $a \\neq c$ or $b \\neq d$, such that\n\n$$\n\\left|\\frac{a-b}{c-d}-1\\right|<\\frac{1}{100000} \\text {. }\n$$",
    "solucao": "For any set $S$ of $n=2000$ distinct real numbers, let $D_{1} \\leqslant D_{2} \\leqslant \\cdots \\leqslant D_{m}$ be the distances between them, displayed with their multiplicities. Here $m=n(n-1) / 2$. By rescaling the numbers, we may assume that the smallest distance $D_{1}$ between two elements of $S$ is $D_{1}=1$. Let $D_{1}=1=y-x$ for $x, y \\in S$. Evidently $D_{m}=v-u$ is the difference between the largest element $v$ and the smallest element $u$ of $S$.\n\nIf $D_{i+1} / D_{i}<1+10^{-5}$ for some $i=1,2, \\ldots, m-1$ then the required inequality holds, because $0 \\leqslant D_{i+1} / D_{i}-1<10^{-5}$. Otherwise, the reverse inequality\n\n$$\n\\frac{D_{i+1}}{D_{i}} \\geqslant 1+\\frac{1}{10^{5}}\n$$\n\nholds for each $i=1,2, \\ldots, m-1$, and therefore\n\n$$\nv-u=D_{m}=\\frac{D_{m}}{D_{1}}=\\frac{D_{m}}{D_{m-1}} \\cdots \\frac{D_{3}}{D_{2}} \\cdot \\frac{D_{2}}{D_{1}} \\geqslant\\left(1+\\frac{1}{10^{5}}\\right)^{m-1} .\n$$\n\nFrom $m-1=n(n-1) / 2-1=1000 \\cdot 1999-1>19 \\cdot 10^{5}$, together with the fact that for all $n \\geqslant 1$, $\\left(1+\\frac{1}{n}\\right)^{n} \\geqslant 1+\\left(\\begin{array}{l}n \\\\ 1\\end{array}\\right) \\cdot \\frac{1}{n}=2$, we get\n\n$$\n\\left(1+\\frac{1}{10^{5}}\\right)^{19 \\cdot 10^{5}}=\\left(\\left(1+\\frac{1}{10^{5}}\\right)^{10^{5}}\\right)^{19} \\geqslant 2^{19}=2^{9} \\cdot 2^{10}>500 \\cdot 1000>2 \\cdot 10^{5} \\text {, }\n$$\n\nand so $v-u=D_{m}>2 \\cdot 10^{5}$.\n\nSince the distance of $x$ to at least one of the numbers $u, v$ is at least $(u-v) / 2>10^{5}$, we have\n\n$$\n|x-z|>10^{5} .\n$$\n\nfor some $z \\in\\{u, v\\}$. Since $y-x=1$, we have either $z>y>x$ (if $z=v$ ) or $y>x>z$ (if $z=u$ ). If $z>y>x$, selecting $a=z, b=y, c=z$ and $d=x$ (so that $b \\neq d$ ), we obtain\n\n$$\n\\left|\\frac{a-b}{c-d}-1\\right|=\\left|\\frac{z-y}{z-x}-1\\right|=\\left|\\frac{x-y}{z-x}\\right|=\\frac{1}{z-x}<10^{-5} .\n$$\n\nOtherwise, if $y>x>z$, we may choose $a=y, b=z, c=x$ and $d=z$ (so that $a \\neq c$ ), and obtain\n\n$$\n\\left|\\frac{a-b}{c-d}-1\\right|=\\left|\\frac{y-z}{x-z}-1\\right|=\\left|\\frac{y-x}{x-z}\\right|=\\frac{1}{x-z}<10^{-5} .\n$$\n\nThe desired result follows."
  },
  {
    "id": "fimo_2013_algebra_p3",
    "enunciado": "Let $\\mathbb{Q}_{>0}$ be the set of positive rational numbers. Let $f: \\mathbb{Q}_{>0} \\rightarrow \\mathbb{R}$ be a function satisfying the conditions\n\n$$\n\\begin{aligned}\n& f(x) f(y) \\geqslant f(x y), \\\\\n& f(x+y) \\geqslant f(x)+f(y)\n\\end{aligned}\n$$\n\nfor all $x, y \\in \\mathbb{Q}_{>0}$. Given that $f(a)=a$ for some rational $a>1$, prove that $f(x)=x$ for all $x \\in \\mathbb{Q}_{>0}$.",
    "solucao": "Denote by $\\mathbb{Z}_{>0}$ the set of positive integers.\n\nPlugging $x=1, y=a$ into (1) we get $f(1) \\geqslant 1$. Next, by an easy induction on $n$ we get from (2) that\n\n$$\nf(n x) \\geqslant n f(x) \\quad \\text { for all } n \\in \\mathbb{Z}_{>0} \\text { and } x \\in \\mathbb{Q}_{>0} \\text {. }\n$$\n\nIn particular, we have\n\n$$\nf(n) \\geqslant n f(1) \\geqslant n \\text { for all } n \\in \\mathbb{Z}_{>0} \\text {. }\n$$\n\nFrom (1) again we have $f(m / n) f(n) \\geqslant f(m)$, so $f(q)>0$ for all $q \\in \\mathbb{Q}>0$.\n\nNow, (2) implies that $f$ is strictly increasing; this fact together with (4) yields\n\n$$\nf(x) \\geqslant f(\\lfloor x\\rfloor) \\geqslant\\lfloor x\\rfloor>x-1 \\quad \\text { for all } x \\geqslant 1 .\n$$\n\nBy an easy induction we get from (1) that $f(x)^{n} \\geqslant f\\left(x^{n}\\right)$, so\n\n$$\nf(x)^{n} \\geqslant f\\left(x^{n}\\right)>x^{n}-1 \\Longrightarrow f(x) \\geqslant \\sqrt[n]{x^{n}-1} \\text { for all } x>1 \\text { and } n \\in \\mathbb{Z}_{>0} .\n$$\n\nThis yields\n\n$$\nf(x) \\geqslant x \\text { for every } x>1 .\n$$\n\n(Indeed, if $x>y>1$ then $x^{n}-y^{n}=(x-y)\\left(x^{n-1}+x^{n-2} y+\\cdots+y^{n}\\right)>n(x-y)$, so for a large $n$ we have $x^{n}-1>y^{n}$ and thus $f(x)>y$.)\n\nNow, (1) and (5) give $a^{n}=f(a)^{n} \\geqslant f\\left(a^{n}\\right) \\geqslant a^{n}$, so $f\\left(a^{n}\\right)=a^{n}$. Now, for $x>1$ let us choose $n \\in \\mathbb{Z}_{>0}$ such that $a^{n}-x>1$. Then by (2) and (5) we get\n\n$$\na^{n}=f\\left(a^{n}\\right) \\geqslant f(x)+f\\left(a^{n}-x\\right) \\geqslant x+\\left(a^{n}-x\\right)=a^{n}\n$$\n\nand therefore $f(x)=x$ for $x>1$. Finally, for every $x \\in \\mathbb{Q}>0$ and every $n \\in \\mathbb{Z}_{>0}$, from (1) and (3) we get\n\n$$\nn f(x)=f(n) f(x) \\geqslant f(n x) \\geqslant n f(x),\n$$\n\nwhich gives $f(n x)=n f(x)$. Therefore $f(m / n)=f(m) / n=m / n$ for all $m, n \\in \\mathbb{Z}_{>0}$."
  },
  {
    "id": "fimo_2013_algebra_p4",
    "enunciado": "Let $n$ be a positive integer, and consider a sequence $a_{1}, a_{2}, \\ldots, a_{n}$ of positive integers. Extend it periodically to an infinite sequence $a_{1}, a_{2}, \\ldots$ by defining $a_{n+i}=a_{i}$ for all $i \\geqslant 1$. If\n\n$$\na_{1} \\leqslant a_{2} \\leqslant \\cdots \\leqslant a_{n} \\leqslant a_{1}+n\n$$\n\nand\n\n$$\na_{a_{i}} \\leqslant n+i-1 \\quad \\text { for } i=1,2, \\ldots, n,\n$$\n\nprove that\n\n$$\na_{1}+\\cdots+a_{n} \\leqslant n^{2} .\n$$",
    "solucao": "First, we claim that\n\n$$\na_{i} \\leqslant n+i-1 \\quad \\text { for } i=1,2, \\ldots, n \\text {. }\n$$\n\nAssume contrariwise that $i$ is the smallest counterexample. From $a_{n} \\geqslant a_{n-1} \\geqslant \\cdots \\geqslant a_{i} \\geqslant n+i$ and $a_{a_{i}} \\leqslant n+i-1$, taking into account the periodicity of our sequence, it follows that\n\n$$\na_{i} \\text { cannot be congruent to } i, i+1, \\ldots, n-1, \\text { or } n \\quad(\\bmod n) .\n$$\n\nThus our assumption that $a_{i} \\geqslant n+i$ implies the stronger statement that $a_{i} \\geqslant 2 n+1$, which by $a_{1}+n \\geqslant a_{n} \\geqslant a_{i}$ gives $a_{1} \\geqslant n+1$. The minimality of $i$ then yields $i=1$, and (4) becomes contradictory. This establishes our first claim.\n\nIn particular we now know that $a_{1} \\leqslant n$. If $a_{n} \\leqslant n$, then $a_{1} \\leqslant \\cdots \\leqslant \\cdots a_{n} \\leqslant n$ and the desired inequality holds trivially. Otherwise, consider the number $t$ with $1 \\leqslant t \\leqslant n-1$ such that\n\n$$\na_{1} \\leqslant a_{2} \\leqslant \\ldots \\leqslant a_{t} \\leqslant n<a_{t+1} \\leqslant \\ldots \\leqslant a_{n} .\n$$\n\nSince $1 \\leqslant a_{1} \\leqslant n$ and $a_{a_{1}} \\leqslant n$ by (2), we have $a_{1} \\leqslant t$ and hence $a_{n} \\leqslant n+t$. Therefore if for each positive integer $i$ we let $b_{i}$ be the number of indices $j \\in\\{t+1, \\ldots, n\\}$ satisfying $a_{j} \\geqslant n+i$, we have\n\n$$\nb_{1} \\geqslant b_{2} \\geqslant \\ldots \\geqslant b_{t} \\geqslant b_{t+1}=0 .\n$$\n\nNext we claim that $a_{i}+b_{i} \\leqslant n$ for $1 \\leqslant i \\leqslant t$. Indeed, by $n+i-1 \\geqslant a_{a_{i}}$ and $a_{i} \\leqslant n$, each $j$ with $a_{j} \\geqslant n+i$ (thus $a_{j}>a_{a_{i}}$ ) belongs to $\\left\\{a_{i}+1, \\ldots, n\\right\\}$, and for this reason $b_{i} \\leqslant n-a_{i}$.\n\nIt follows from the definition of the $b_{i} \\mathrm{~s}$ and (5) that\n\n$$\na_{t+1}+\\ldots+a_{n} \\leqslant n(n-t)+b_{1}+\\ldots+b_{t} .\n$$\n\nAdding $a_{1}+\\ldots+a_{t}$ to both sides and using that $a_{i}+b_{i} \\leqslant n$ for $1 \\leqslant i \\leqslant t$, we get\n\n$$\na_{1}+a_{2}+\\cdots+a_{n} \\leqslant n(n-t)+n t=n^{2}\n$$\n\nas we wished to prove."
  },
  {
    "id": "fimo_2013_algebra_p5",
    "enunciado": "Let $\\mathbb{Z}_{\\geqslant 0}$ be the set of all nonnegative integers. Find all the functions $f: \\mathbb{Z}_{\\geqslant 0} \\rightarrow \\mathbb{Z}_{\\geqslant 0}$ satisfying the relation\n\n$$\nf(f(f(n)))=f(n+1)+1\n$$\n\nfor all $n \\in \\mathbb{Z}_{\\geqslant 0}$.\n\nThe final answer is that there are two such functions: $f(n)=n+1$ for all $n \\in \\mathbb{Z}_{\\geqslant 0}$, and\n\n$$\nf(n)=\\left\\{\\begin{array}{ll}\nn+1, & n \\equiv 0(\\bmod 4) \\text { or } n \\equiv 2(\\bmod 4), \\\\\nn+5, & n \\equiv 1(\\bmod 4), \\\\\nn-3, & n \\equiv 3(\\bmod 4)\n\\end{array} \\quad \\text { for all } n \\in \\mathbb{Z}_{\\geqslant 0} .\\right.\n$$",
    "solucao": "Throughout the solution, we write $h^{k}(x)$ to abbreviate the $k$ th iteration of function $h$, so $h^{0}$ is the identity function, and $h^{k}(x)=\\underbrace{h(\\ldots h}_{k \\text { times }}(x) \\ldots))$ for $k \\geqslant 1$.\n\nTo start, we get from $(*)$ that\n\n$$\nf^{4}(n)=f\\left(f^{3}(n)\\right)=f(f(n+1)+1) \\text { and } f^{4}(n+1)=f^{3}(f(n+1))=f(f(n+1)+1)+1,\n$$\n\nthus\n\n$$\nf^{4}(n)+1=f^{4}(n+1) .\n$$\n\nI. Let us denote by $R_{i}$ the range of $f^{i}$; note that $R_{0}=\\mathbb{Z}_{\\geqslant 0}$ since $f^{0}$ is the identity function. Obviously, $R_{0} \\supseteq R_{1} \\supseteq \\ldots$. Next, from (2) we get that if $a \\in R_{4}$ then also $a+1 \\in R_{4}$. This implies that $\\mathbb{Z}_{\\geqslant 0} \\backslash R_{4}$ - and hence $\\mathbb{Z}_{\\geqslant 0} \\backslash R_{1}$ - is finite. In particular, $R_{1}$ is unbounded.\n\nAssume that $f(m)=f(n)$ for some distinct $m$ and $n$. Then from $(*)$ we obtain $f(m+1)=$ $f(n+1)$; by an easy induction we then get that $f(m+c)=f(n+c)$ for every $c \\geqslant 0$. So the function $f(k)$ is periodic with period $|m-n|$ for $k \\geqslant m$, and thus $R_{1}$ should be bounded, which is false. So, $f$ is injective.\n\nII. Denote now $S_{i}=R_{i-1} \\backslash R_{i}$; all these sets are finite for $i \\leqslant 4$. On the other hand, by the injectivity we have $n \\in S_{i} \\Longleftrightarrow f(n) \\in S_{i+1}$. By the injectivity again, $f$ implements a bijection between $S_{i}$ and $S_{i+1}$, thus $\\left|S_{1}\\right|=\\left|S_{2}\\right|=\\ldots$; denote this common cardinality by $k$. If $0 \\in R_{3}$ then $0=f(f(f(n)))$ for some $n$, thus from $(*)$ we get $f(n+1)=-1$ which is impossible. Therefore $0 \\in R_{0} \\backslash R_{3}=S_{1} \\cup S_{2} \\cup S_{3}$, thus $k \\geqslant 1$.\n\nNext, let us describe the elements $b$ of $R_{0} \\backslash R_{3}=S_{1} \\cup S_{2} \\cup S_{3}$. We claim that each such element satisfies at least one of three conditions $(i) b=0,(i i) b=f(0)+1$, and (iii) $b-1 \\in S_{1}$. Otherwise $b-1 \\in \\mathbb{Z}_{\\geqslant 0}$, and there exists some $n>0$ such that $f(n)=b-1$; but then $f^{3}(n-1)=f(n)+1=b$, so $b \\in R_{3}$.\n\nThis yields\n\n$$\n3 k=\\left|S_{1} \\cup S_{2} \\cup S_{3}\\right| \\leqslant 1+1+\\left|S_{1}\\right|=k+2,\n$$\n\nor $k \\leqslant 1$. Therefore $k=1$, and the inequality above comes to equality. So we have $S_{1}=\\{a\\}$, $S_{2}=\\{f(a)\\}$, and $S_{3}=\\left\\{f^{2}(a)\\right\\}$ for some $a \\in \\mathbb{Z}_{\\geqslant 0}$, and each one of the three options $(i)$, $(i i)$, and (iii) should be realized exactly once, which means that\n\n$$\n\\left\\{a, f(a), f^{2}(a)\\right\\}=\\{0, a+1, f(0)+1\\} .\n$$\n\nIII. From (3), we get $a+1 \\in\\left\\{f(a), f^{2}(a)\\right\\}$ (the case $a+1=a$ is impossible). If $a+1=f^{2}(a)$ then we have $f(a+1)=f^{3}(a)=f(a+1)+1$ which is absurd. Therefore\n\n$$\nf(a)=a+1 .\n$$\n\nNext, again from (3) we have $0 \\in\\left\\{a, f^{2}(a)\\right\\}$. Let us consider these two cases separately. Case 1. Assume that $a=0$, then $f(0)=f(a)=a+1=1$. Also from $(3)$ we get $f(1)=f^{2}(a)=$ $f(0)+1=2$. Now, let us show that $f(n)=n+1$ by induction on $n$; the base cases $n \\leqslant 1$ are established. Next, if $n \\geqslant 2$ then the induction hypothesis implies\n\n$$\nn+1=f(n-1)+1=f^{3}(n-2)=f^{2}(n-1)=f(n),\n$$\n\nestablishing the step. In this case we have obtained the first of two answers; checking that is satisfies $(*)$ is straightforward.\n\nCase 2. Assume now that $f^{2}(a)=0$; then by (3) we get $a=f(0)+1$. By (4) we get $f(a+1)=$ $f^{2}(a)=0$, then $f(0)=f^{3}(a)=f(a+1)+1=1$, hence $a=f(0)+1=2$ and $f(2)=3$ by (4). To summarize,\n\n$$\nf(0)=1, \\quad f(2)=3, \\quad f(3)=0 .\n$$\n\nNow let us prove by induction on $m$ that (1) holds for all $n=4 k, 4 k+2,4 k+3$ with $k \\leqslant m$ and for all $n=4 k+1$ with $k<m$. The base case $m=0$ is established above. For the step, assume that $m \\geqslant 1$. From $(*)$ we get $f^{3}(4 m-3)=f(4 m-2)+1=4 m$. Next, by (2) we have\n\n$$\nf(4 m)=f^{4}(4 m-3)=f^{4}(4 m-4)+1=f^{3}(4 m-3)+1=4 m+1 .\n$$\n\nThen by the induction hypothesis together with $(*)$ we successively obtain\n\n$$\n\\begin{aligned}\n& f(4 m-3)=f^{3}(4 m-1)=f(4 m)+1=4 m+2 \\\\\n& f(4 m+2)=f^{3}(4 m-4)=f(4 m-3)+1=4 m+3 \\\\\n& f(4 m+3)=f^{3}(4 m-3)=f(4 m-2)+1=4 m\n\\end{aligned}\n$$\n\nthus finishing the induction step.\n\nFinally, it is straightforward to check that the constructed function works:\n\n$$\n\\begin{array}{rlr}\nf^{3}(4 k) & =4 k+7=f(4 k+1)+1, & f^{3}(4 k+1)=4 k+4=f(4 k+2)+1 \\\\\nf^{3}(4 k+2) & =4 k+1=f(4 k+3)+1, & f^{3}(4 k+3)=4 k+6=f(4 k+4)+1\n\\end{array}\n$$"
  },
  {
    "id": "fimo_2013_algebra_p6",
    "enunciado": "Let $m \\neq 0$ be an integer. Find all polynomials $P(x)$ with real coefficients such that\n\n$$\n\\left(x^{3}-m x^{2}+1\\right) P(x+1)+\\left(x^{3}+m x^{2}+1\\right) P(x-1)=2\\left(x^{3}-m x+1\\right) P(x)\n$$\n\nfor all real numbers $x$.\n\nThe final answer is $P(x)=t x$ for any real number $t$.",
    "solucao": "Let $P(x)=a_{n} x^{n}+\\cdots+a_{0} x^{0}$ with $a_{n} \\neq 0$. Comparing the coefficients of $x^{n+1}$ on both sides gives $a_{n}(n-2 m)(n-1)=0$, so $n=1$ or $n=2 m$.\n\nIf $n=1$, one easily verifies that $P(x)=x$ is a solution, while $P(x)=1$ is not. Since the given condition is linear in $P$, this means that the linear solutions are precisely $P(x)=t x$ for $t \\in \\mathbb{R}$.\n\nNow assume that $n=2 m$. The polynomial $x P(x+1)-(x+1) P(x)=(n-1) a_{n} x^{n}+\\cdots$ has degree $n$, and therefore it has at least one (possibly complex) root $r$. If $r \\notin\\{0,-1\\}$, define $k=P(r) / r=P(r+1) /(r+1)$. If $r=0$, let $k=P(1)$. If $r=-1$, let $k=-P(-1)$. We now consider the polynomial $S(x)=P(x)-k x$. It also satisfies (1) because $P(x)$ and $k x$ satisfy it. Additionally, it has the useful property that $r$ and $r+1$ are roots.\n\nLet $A(x)=x^{3}-m x^{2}+1$ and $B(x)=x^{3}+m x^{2}+1$. Plugging in $x=s$ into (1) implies that:\n\nIf $s-1$ and $s$ are roots of $S$ and $s$ is not a root of $A$, then $s+1$ is a root of $S$.\n\nIf $s$ and $s+1$ are roots of $S$ and $s$ is not a root of $B$, then $s-1$ is a root of $S$.\n\nLet $a \\geqslant 0$ and $b \\geqslant 1$ be such that $r-a, r-a+1, \\ldots, r, r+1, \\ldots, r+b-1, r+b$ are roots of $S$, while $r-a-1$ and $r+b+1$ are not. The two statements above imply that $r-a$ is a root of $B$ and $r+b$ is a root of $A$.\n\nSince $r-a$ is a root of $B(x)$ and of $A(x+a+b)$, it is also a root of their greatest common divisor $C(x)$ as integer polynomials. If $C(x)$ was a non-trivial divisor of $B(x)$, then $B$ would have a rational root $\\alpha$. Since the first and last coefficients of $B$ are $1, \\alpha$ can only be 1 or $-1$; but $B(-1)=m>0$ and $B(1)=m+2>0$ since $n=2 m$.\n\nTherefore $B(x)=A(x+a+b)$. Writing $c=a+b \\geqslant 1$ we compute\n\n$$\n0=A(x+c)-B(x)=(3 c-2 m) x^{2}+c(3 c-2 m) x+c^{2}(c-m) .\n$$\n\nThen we must have $3 c-2 m=c-m=0$, which gives $m=0$, a contradiction. We conclude that $f(x)=t x$ is the only solution."
  },
  {
    "id": "fimo_2013_number_theory_p1",
    "enunciado": "Let $\\mathbb{Z}_{>0}$ be the set of positive integers. Find all functions $f: \\mathbb{Z}_{>0} \\rightarrow \\mathbb{Z}_{>0}$ such that\n\n$$\nm^{2}+f(n) \\mid m f(m)+n\n$$\n\nfor all positive integers $m$ and $n$.\n\nThe final answer is $f(n)=n$.",
    "solucao": "Setting $m=n=2$ tells us that $4+f(2) \\mid 2 f(2)+2$. Since $2 f(2)+2<2(4+f(2))$, we must have $2 f(2)+2=4+f(2)$, so $f(2)=2$. Plugging in $m=2$ then tells us that $4+f(n) \\mid 4+n$, which implies that $f(n) \\leqslant n$ for all $n$.\n\nSetting $m=n$ gives $n^{2}+f(n) \\mid n f(n)+n$, so $n f(n)+n \\geqslant n^{2}+f(n)$ which we rewrite as $(n-1)(f(n)-n) \\geqslant 0$. Therefore $f(n) \\geqslant n$ for all $n \\geqslant 2$. This is trivially true for $n=1$ also.\n\nIt follows that $f(n)=n$ for all $n$. This function obviously satisfies the desired property."
  },
  {
    "id": "fimo_2013_number_theory_p2",
    "enunciado": "Prove that for any pair of positive integers $k$ and $n$ there exist $k$ positive integers $m_{1}, m_{2}, \\ldots, m_{k}$ such that\n\n$$\n1+\\frac{2^{k}-1}{n}=\\left(1+\\frac{1}{m_{1}}\\right)\\left(1+\\frac{1}{m_{2}}\\right) \\cdots\\left(1+\\frac{1}{m_{k}}\\right) .\n$$",
    "solucao": "We proceed by induction on $k$. For $k=1$ the statement is trivial. Assuming we have proved it for $k=j-1$, we now prove it for $k=j$.\n\nCase 1. $n=2 t-1$ for some positive integer $t$.\n\nObserve that\n\n$$\n1+\\frac{2^{j}-1}{2 t-1}=\\frac{2\\left(t+2^{j-1}-1\\right)}{2 t} \\cdot \\frac{2 t}{2 t-1}=\\left(1+\\frac{2^{j-1}-1}{t}\\right)\\left(1+\\frac{1}{2 t-1}\\right) .\n$$\n\nBy the induction hypothesis we can find $m_{1}, \\ldots, m_{j-1}$ such that\n\n$$\n1+\\frac{2^{j-1}-1}{t}=\\left(1+\\frac{1}{m_{1}}\\right)\\left(1+\\frac{1}{m_{2}}\\right) \\cdots\\left(1+\\frac{1}{m_{j-1}}\\right),\n$$\n\nso setting $m_{j}=2 t-1$ gives the desired expression.\n\nCase 2. $n=2 t$ for some positive integer $t$.\n\nNow we have\n\n$$\n1+\\frac{2^{j}-1}{2 t}=\\frac{2 t+2^{j}-1}{2 t+2^{j}-2} \\cdot \\frac{2 t+2^{j}-2}{2 t}=\\left(1+\\frac{1}{2 t+2^{j}-2}\\right)\\left(1+\\frac{2^{j-1}-1}{t}\\right),\n$$\n\nnoting that $2 t+2^{j}-2>0$. Again, we use that\n\n$$\n1+\\frac{2^{j-1}-1}{t}=\\left(1+\\frac{1}{m_{1}}\\right)\\left(1+\\frac{1}{m_{2}}\\right) \\cdots\\left(1+\\frac{1}{m_{j-1}}\\right) .\n$$\n\nSetting $m_{j}=2 t+2^{j}-2$ then gives the desired expression."
  },
  {
    "id": "fimo_2013_number_theory_p3",
    "enunciado": "Prove that there exist infinitely many positive integers $n$ such that the largest prime divisor of $n^{4}+n^{2}+1$ is equal to the largest prime divisor of $(n+1)^{4}+(n+1)^{2}+1$.",
    "solucao": "Let $p_{n}$ be the largest prime divisor of $n^{4}+n^{2}+1$ and let $q_{n}$ be the largest prime divisor of $n^{2}+n+1$. Then $p_{n}=q_{n^{2}}$, and from\n\n$$\nn^{4}+n^{2}+1=\\left(n^{2}+1\\right)^{2}-n^{2}=\\left(n^{2}-n+1\\right)\\left(n^{2}+n+1\\right)=\\left((n-1)^{2}+(n-1)+1\\right)\\left(n^{2}+n+1\\right)\n$$\n\nit follows that $p_{n}=\\max \\left\\{q_{n}, q_{n-1}\\right\\}$ for $n \\geqslant 2$. Keeping in mind that $n^{2}-n+1$ is odd, we have\n\n$$\n\\operatorname{gcd}\\left(n^{2}+n+1, n^{2}-n+1\\right)=\\operatorname{gcd}\\left(2 n, n^{2}-n+1\\right)=\\operatorname{gcd}\\left(n, n^{2}-n+1\\right)=1 .\n$$\n\nTherefore $q_{n} \\neq q_{n-1}$.\n\nTo prove the result, it suffices to show that the set\n\n$$\nS=\\left\\{n \\in \\mathbb{Z}_{\\geqslant 2} \\mid q_{n}>q_{n-1} \\text { and } q_{n}>q_{n+1}\\right\\}\n$$\n\nis infinite, since for each $n \\in S$ one has\n\n$$\np_{n}=\\max \\left\\{q_{n}, q_{n-1}\\right\\}=q_{n}=\\max \\left\\{q_{n}, q_{n+1}\\right\\}=p_{n+1} .\n$$\n\nSuppose on the contrary that $S$ is finite. Since $q_{2}=7<13=q_{3}$ and $q_{3}=13>7=q_{4}$, the set $S$ is non-empty. Since it is finite, we can consider its largest element, say $m$.\n\nNote that it is impossible that $q_{m}>q_{m+1}>q_{m+2}>\\ldots$ because all these numbers are positive integers, so there exists a $k \\geqslant m$ such that $q_{k}<q_{k+1}$ (recall that $q_{k} \\neq q_{k+1}$ ). Next observe that it is impossible to have $q_{k}<q_{k+1}<q_{k+2}<\\ldots$, because $q_{(k+1)^{2}}=p_{k+1}=\\max \\left\\{q_{k}, q_{k+1}\\right\\}=q_{k+1}$, so let us take the smallest $\\ell \\geqslant k+1$ such that $q_{\\ell}>q_{\\ell+1}$. By the minimality of $\\ell$ we have $q_{\\ell-1}<q_{\\ell}$, so $\\ell \\in S$. Since $\\ell \\geqslant k+1>k \\geqslant m$, this contradicts the maximality of $m$, and hence $S$ is indeed infinite."
  },
  {
    "id": "fimo_2013_number_theory_p4",
    "enunciado": "Determine whether there exists an infinite sequence of nonzero digits $a_{1}, a_{2}, a_{3}, \\ldots$ and a positive integer $N$ such that for every integer $k>N$, the number $\\overline{a_{k} a_{k-1} \\ldots a_{1}}$ is a perfect square.\n\nThe final answer is no.",
    "solucao": "Assume that $a_{1}, a_{2}, a_{3}, \\ldots$ is such a sequence. For each positive integer $k$, let $y_{k}=$ $\\overline{a_{k} a_{k-1} \\ldots a_{1}}$. By the assumption, for each $k>N$ there exists a positive integer $x_{k}$ such that $y_{k}=x_{k}^{2}$.\n\nI. For every $n$, let $5^{\\gamma_{n}}$ be the greatest power of 5 dividing $x_{n}$. Let us show first that $2 \\gamma_{n} \\geqslant n$ for every positive integer $n>N$.\n\nAssume, to the contrary, that there exists a positive integer $n>N$ such that $2 \\gamma_{n}<n$, which yields\n\n$$\ny_{n+1}=\\overline{a_{n+1} a_{n} \\ldots a_{1}}=10^{n} a_{n+1}+\\overline{a_{n} a_{n-1} \\ldots a_{1}}=10^{n} a_{n+1}+y_{n}=5^{2 \\gamma_{n}}\\left(2^{n} 5^{n-2 \\gamma_{n}} a_{n+1}+\\frac{y_{n}}{5^{2 \\gamma_{n}}}\\right) .\n$$\n\nSince $5 \\backslash y_{n} / 5^{2 \\gamma_{n}}$, we obtain $\\gamma_{n+1}=\\gamma_{n}<n<n+1$. By the same arguments we obtain that $\\gamma_{n}=\\gamma_{n+1}=\\gamma_{n+2}=\\ldots$. Denote this common value by $\\gamma$.\n\nNow, for each $k \\geqslant n$ we have\n\n$$\n\\left(x_{k+1}-x_{k}\\right)\\left(x_{k+1}+x_{k}\\right)=x_{k+1}^{2}-x_{k}^{2}=y_{k+1}-y_{k}=a_{k+1} \\cdot 10^{k} .\n$$\n\nOne of the numbers $x_{k+1}-x_{k}$ and $x_{k+1}+x_{k}$ is not divisible by $5^{\\gamma+1}$ since otherwise one would have $5^{\\gamma+1} \\mid\\left(\\left(x_{k+1}-x_{k}\\right)+\\left(x_{k+1}+x_{k}\\right)\\right)=2 x_{k+1}$. On the other hand, we have $5^{k} \\mid\\left(x_{k+1}-x_{k}\\right)\\left(x_{k+1}+x_{k}\\right)$, so $5^{k-\\gamma}$ divides one of these two factors. Thus we get\n\n$$\n5^{k-\\gamma} \\leqslant \\max \\left\\{x_{k+1}-x_{k}, x_{k+1}+x_{k}\\right\\}<2 x_{k+1}=2 \\sqrt{y_{k+1}}<2 \\cdot 10^{(k+1) / 2},\n$$\n\nwhich implies $5^{2 k}<4 \\cdot 5^{2 \\gamma} \\cdot 10^{k+1}$, or $(5 / 2)^{k}<40 \\cdot 5^{2 \\gamma}$. The last inequality is clearly false for sufficiently large values of $k$. This contradiction shows that $2 \\gamma_{n} \\geqslant n$ for all $n>N$.\n\nII. Consider now any integer $k>\\max \\{N / 2,2\\}$. Since $2 \\gamma_{2 k+1} \\geqslant 2 k+1$ and $2 \\gamma_{2 k+2} \\geqslant 2 k+2$, we have $\\gamma_{2 k+1} \\geqslant k+1$ and $\\gamma_{2 k+2} \\geqslant k+1$. So, from $y_{2 k+2}=a_{2 k+2} \\cdot 10^{2 k+1}+y_{2 k+1}$ we obtain $5^{2 k+2} \\mid y_{2 k+2}-y_{2 k+1}=a_{2 k+2} \\cdot 10^{2 k+1}$ and thus $5 \\mid a_{2 k+2}$, which implies $a_{2 k+2}=5$. Therefore,\n\n$$\n\\left(x_{2 k+2}-x_{2 k+1}\\right)\\left(x_{2 k+2}+x_{2 k+1}\\right)=x_{2 k+2}^{2}-x_{2 k+1}^{2}=y_{2 k+2}-y_{2 k+1}=5 \\cdot 10^{2 k+1}=2^{2 k+1} \\cdot 5^{2 k+2} .\n$$\n\nSetting $A_{k}=x_{2 k+2} / 5^{k+1}$ and $B_{k}=x_{2 k+1} / 5^{k+1}$, which are integers, we obtain\n\n$$\n\\left(A_{k}-B_{k}\\right)\\left(A_{k}+B_{k}\\right)=2^{2 k+1} .\n$$\n\nBoth $A_{k}$ and $B_{k}$ are odd, since otherwise $y_{2 k+2}$ or $y_{2 k+1}$ would be a multiple of 10 which is false by $a_{1} \\neq 0$; so one of the numbers $A_{k}-B_{k}$ and $A_{k}+B_{k}$ is not divisible by 4 . Therefore (1) yields $A_{k}-B_{k}=2$ and $A_{k}+B_{k}=2^{2 k}$, hence $A_{k}=2^{2 k-1}+1$ and thus\n\n$$\nx_{2 k+2}=5^{k+1} A_{k}=10^{k+1} \\cdot 2^{k-2}+5^{k+1}>10^{k+1} \\text {, }\n$$\n\nsince $k \\geqslant 2$. This implies that $y_{2 k+2}>10^{2 k+2}$ which contradicts the fact that $y_{2 k+2}$ contains $2 k+2$ digits. The desired result follows."
  },
  {
    "id": "fimo_2013_number_theory_p5",
    "enunciado": "Fix an integer $k \\geqslant 2$. Two players, called Ana and Banana, play the following game of numbers: Initially, some integer $n \\geqslant k$ gets written on the blackboard. Then they take moves in turn, with Ana beginning. A player making a move erases the number $m$ just written on the blackboard and replaces it by some number $m^{\\prime}$ with $k \\leqslant m^{\\prime}<m$ that is coprime to $m$. The first player who cannot move anymore loses.\n\nAn integer $n \\geqslant k$ is called good if Banana has a winning strategy when the initial number is $n$, and $b a d$ otherwise.\n\nConsider two integers $n, n^{\\prime} \\geqslant k$ with the property that each prime number $p \\leqslant k$ divides $n$ if and only if it divides $n^{\\prime}$. Prove that either both $n$ and $n^{\\prime}$ are good or both are bad.",
    "solucao": "Let us first observe that the number appearing on the blackboard decreases after every move; so the game necessarily ends after at most $n$ steps, and consequently there always has to be some player possessing a winning strategy. So if some $n \\geqslant k$ is bad, then Ana has a winning strategy in the game with starting number $n$.\n\nMore precisely, if $n \\geqslant k$ is such that there is a good integer $m$ with $n>m \\geqslant k$ and $\\operatorname{gcd}(m, n)=1$, then $n$ itself is bad, for Ana has the following winning strategy in the game with initial number $n$ : She proceeds by first playing $m$ and then using Banana's strategy for the game with starting number $m$.\n\nOtherwise, if some integer $n \\geqslant k$ has the property that every integer $m$ with $n>m \\geqslant k$ and $\\operatorname{gcd}(m, n)=1$ is bad, then $n$ is good. Indeed, if Ana can make a first move at all in the game with initial number $n$, then she leaves it in a position where the first player has a winning strategy, so that Banana can defeat her.\n\nIn particular, this implies that any two good numbers have a non-trivial common divisor. Also, $k$ itself is good.\n\nFor brevity, we say that $n \\longrightarrow x$ is a move if $n$ and $x$ are two coprime integers with $n>x \\geqslant k$.\n\nClaim 1. If $n$ is good and $n^{\\prime}$ is a multiple of $n$, then $n^{\\prime}$ is also good.\n\nProof. If $n^{\\prime}$ were bad, there would have to be some move $n^{\\prime} \\longrightarrow x$, where $x$ is good. As $n^{\\prime}$ is a multiple of $n$ this implies that the two good numbers $n$ and $x$ are coprime, which is absurd.\n\nClaim 2. If $r$ and s denote two positive integers for which $r s \\geqslant k$ is bad, then $r^{2} s$ is also bad. Proof. Since $r s$ is bad, there is a move $r s \\longrightarrow x$ for some good $x$. Evidently $x$ is coprime to $r^{2} s$ as well, and hence the move $r^{2} s \\longrightarrow x$ shows that $r^{2} s$ is indeed bad.\n\nClaim 3. If $p>k$ is prime and $n \\geqslant k$ is bad, then $n p$ is also bad.\n\nProof. Otherwise we choose a counterexample with $n$ being as small as possible. In particular, $n p$ is good. Since $n$ is bad, there is a move $n \\longrightarrow x$ for some good $x$. Now $n p \\longrightarrow x$ cannot be a valid move, which tells us that $x$ has to be divisible by $p$. So we can write $x=p^{r} y$, where $r$ and $y$ denote some positive integers, the latter of which is not divisible by $p$.\n\nNote that $y=1$ is impossible, for then we would have $x=p^{r}$ and the move $x \\longrightarrow k$ would establish that $x$ is bad. In view of this, there is a least power $y^{\\alpha}$ of $y$ that is at least as large as $k$. Since the numbers $n p$ and $y^{\\alpha}$ are coprime and the former is good, the latter has to be bad. Moreover, the minimality of $\\alpha$ implies $y^{\\alpha}<k y<p y=\\frac{x}{p^{r-1}}<\\frac{n}{p^{r-1}}$. So $p^{r-1} \\cdot y^{\\alpha}<n$ and consequently all the numbers $y^{\\alpha}, p y^{\\alpha}, \\ldots, p^{r} \\cdot y^{\\alpha}=p\\left(p^{r-1} \\cdot y^{\\alpha}\\right)$ are bad due to the minimal choice of $n$. But now by Claim 1 the divisor $x$ of $p^{r} \\cdot y^{\\alpha}$ cannot be good, whereby we have reached a contradiction that proves Claim 3. We now deduce the statement of the problem from these three claims. To this end, we call two integers $a, b \\geqslant k$ similar if they are divisible by the same prime numbers not exceeding $k$. We are to prove that if $a$ and $b$ are similar, then either both of them are good or both are bad. As in this case the product $a b$ is similar to both $a$ and $b$, it suffices to show the following: if $c \\geqslant k$ is similar to some of its multiples $d$, then either both $c$ and $d$ are good or both are bad.\n\nAssuming that this is not true in general, we choose a counterexample $\\left(c_{0}, d_{0}\\right)$ with $d_{0}$ being as small as possible. By Claim $1, c_{0}$ is bad whilst $d_{0}$ is good. Plainly $d_{0}$ is strictly greater than $c_{0}$ and hence the quotient $\\frac{d_{0}}{c_{0}}$ has some prime factor $p$. Clearly $p$ divides $d_{0}$. If $p \\leqslant k$, then $p$ divides $c_{0}$ as well due to the similarity, and hence $d_{0}$ is actually divisible by $p^{2}$. So $\\frac{d_{0}}{p}$ is good by the contrapositive of Claim 2. Since $c_{0} \\mid \\frac{d_{0}}{p}$, the pair $\\left(c_{0}, \\frac{d_{0}}{p}\\right)$ contradicts the supposed minimality of $d_{0}$. This proves $p>k$, but now we get the same contradiction using Claim 3 instead of Claim 2. Thereby the problem is solved."
  },
  {
    "id": "fimo_2013_number_theory_p6",
    "enunciado": "Determine all functions $f: \\mathbb{Q} \\longrightarrow \\mathbb{Z}$ satisfying\n\n$$\nf\\left(\\frac{f(x)+a}{b}\\right)=f\\left(\\frac{x+a}{b}\\right)\n$$\n\nfor all $x \\in \\mathbb{Q}, a \\in \\mathbb{Z}$, and $b \\in \\mathbb{Z}_{>0}$. (Here, $\\mathbb{Z}_{>0}$ denotes the set of positive integers.)\n\nThe final answer is that there are three kinds of such functions, which are: all constant functions, the floor function, and the ceiling function.",
    "solucao": "I. We start by verifying that these functions do indeed satisfy (1). This is clear for all constant functions. Now consider any triple $(x, a, b) \\in \\mathbb{Q} \\times \\mathbb{Z} \\times \\mathbb{Z}_{>0}$ and set\n\n$$\nq=\\left\\lfloor\\frac{x+a}{b}\\right\\rfloor .\n$$\n\nThis means that $q$ is an integer and $b q \\leqslant x+a<b(q+1)$. It follows that $b q \\leqslant\\lfloor x\\rfloor+a<b(q+1)$ holds as well, and thus we have\n\n$$\n\\left\\lfloor\\left\\lfloor\\frac{\\lfloor x\\rfloor+a}{b}\\right\\rfloor=\\left\\lfloor\\frac{x+a}{b}\\right\\rfloor,\\right.\n$$\n\nmeaning that the floor function does indeed satisfy (1). One can check similarly that the ceiling function has the same property.\n\nII. Let us now suppose conversely that the function $f: \\mathbb{Q} \\longrightarrow \\mathbb{Z}$ satisfies (1) for all $(x, a, b) \\in$ $\\mathbb{Q} \\times \\mathbb{Z} \\times \\mathbb{Z}_{>0}$. According to the behaviour of the restriction of $f$ to the integers we distinguish two cases.\n\nCase 1: There is some $m \\in \\mathbb{Z}$ such that $f(m) \\neq m$.\n\nWrite $f(m)=C$ and let $\\eta \\in\\{-1,+1\\}$ and $b$ denote the sign and absolute value of $f(m)-m$, respectively. Given any integer $r$, we may plug the triple $(m, r b-C, b)$ into (1), thus getting $f(r)=f(r-\\eta)$. Starting with $m$ and using induction in both directions, we deduce from this that the equation $f(r)=C$ holds for all integers $r$. Now any rational number $y$ can be written in the form $y=\\frac{p}{q}$ with $(p, q) \\in \\mathbb{Z} \\times \\mathbb{Z}_{>0}$, and substituting $(C-p, p-C, q)$ into (1) we get $f(y)=f(0)=C$. Thus $f$ is the constant function whose value is always $C$.\n\nCase 2: One has $f(m)=m$ for all integers $m$.\n\nNote that now the special case $b=1$ of (1) takes a particularly simple form, namely\n\n$$\nf(x)+a=f(x+a) \\quad \\text { for all }(x, a) \\in \\mathbb{Q} \\times \\mathbb{Z} .\n$$\n\nDefining $f\\left(\\frac{1}{2}\\right)=\\omega$ we proceed in three steps.\n\nStep $A$. We show that $\\omega \\in\\{0,1\\}$.\n\nIf $\\omega \\leqslant 0$, we may plug $\\left(\\frac{1}{2},-\\omega, 1-2 \\omega\\right)$ into (1), obtaining $0=f(0)=f\\left(\\frac{1}{2}\\right)=\\omega$. In the contrary case $\\omega \\geqslant 1$ we argue similarly using the triple $\\left(\\frac{1}{2}, \\omega-1,2 \\omega-1\\right)$.\n\nStep B. We show that $f(x)=\\omega$ for all rational numbers $x$ with $0<x<1$.\n\nAssume that this fails and pick some rational number $\\frac{a}{b} \\in(0,1)$ with minimal $b$ such that $f\\left(\\frac{a}{b}\\right) \\neq \\omega$. Obviously, $\\operatorname{gcd}(a, b)=1$ and $b \\geqslant 2$. If $b$ is even, then $a$ has to be odd and we can substitute $\\left(\\frac{1}{2}, \\frac{a-1}{2}, \\frac{b}{2}\\right)$ into (1), which yields\n\n$$\nf\\left(\\frac{\\omega+(a-1) / 2}{b / 2}\\right)=f\\left(\\frac{a}{b}\\right) \\neq \\omega .\n$$\n\nRecall that $0 \\leqslant(a-1) / 2<b / 2$. Thus, in both cases $\\omega=0$ and $\\omega=1$, the left-hand part of (3) equals $\\omega$ either by the minimality of $b$, or by $f(\\omega)=\\omega$. A contradiction.\n\nThus $b$ has to be odd, so $b=2 k+1$ for some $k \\geqslant 1$. Applying $(1)$ to $\\left(\\frac{1}{2}, k, b\\right)$ we get\n\n$$\nf\\left(\\frac{\\omega+k}{b}\\right)=f\\left(\\frac{1}{2}\\right)=\\omega .\n$$\n\nSince $a$ and $b$ are coprime, there exist integers $r \\in\\{1,2, \\ldots, b\\}$ and $m$ such that $r a-m b=k+\\omega$. Note that we actually have $1 \\leqslant r<b$, since the right hand side is not a multiple of $b$. If $m$ is negative, then we have $r a-m b>b \\geqslant k+\\omega$, which is absurd. Similarly, $m \\geqslant r$ leads to $r a-m b<b r-b r=0$, which is likewise impossible; so we must have $0 \\leqslant m \\leqslant r-1$.\n\nWe finally substitute $\\left(\\frac{k+\\omega}{b}, m, r\\right)$ into $(1)$ and use (4) to learn\n\n$$\nf\\left(\\frac{\\omega+m}{r}\\right)=f\\left(\\frac{a}{b}\\right) \\neq \\omega .\n$$\n\nBut as above one may see that the left hand side has to equal $\\omega$ due to the minimality of $b$. This contradiction concludes our step B.\n\nStep $C$. Now notice that if $\\omega=0$, then $f(x)=\\lfloor x\\rfloor$ holds for all rational $x$ with $0 \\leqslant x<1$ and hence by (2) this even holds for all rational numbers $x$. Similarly, if $\\omega=1$, then $f(x)=\\lceil x\\rceil$ holds for all $x \\in \\mathbb{Q}$. Thereby the problem is solved."
  },
  {
    "id": "fimo_2013_number_theory_p7",
    "enunciado": "Let $\\nu$ be an irrational positive number, and let $m$ be a positive integer. A pair $(a, b)$ of positive integers is called $\\operatorname{good}$ if\n\n$$\na\\lceil b \\nu\\rceil-b\\lfloor a \\nu\\rfloor=m .\n$$\n\nA good pair $(a, b)$ is called excellent if neither of the pairs $(a-b, b)$ and $(a, b-a)$ is good. (As usual, by $\\lfloor x\\rfloor$ and $\\lceil x\\rceil$ we denote the integer numbers such that $x-1<\\lfloor x\\rfloor \\leqslant x$ and $x \\leqslant\\lceil x\\rceil<x+1$.)\n\nProve that the number of excellent pairs is equal to the sum of the positive divisors of $m$.",
    "solucao": "For positive integers $a$ and $b$, let us denote\n\n$$\nf(a, b)=a\\lceil b \\nu\\rceil-b\\lfloor a \\nu\\rfloor .\n$$\n\nWe will deal with various values of $m$; thus it is convenient to say that a pair $(a, b)$ is $m$-good or m-excellent if the corresponding conditions are satisfied.\n\nTo start, let us investigate how the values $f(a+b, b)$ and $f(a, b+a)$ are related to $f(a, b)$. If $\\{a \\nu\\}+\\{b \\nu\\}<1$, then we have $\\lfloor(a+b) \\nu\\rfloor=\\lfloor a \\nu\\rfloor+\\lfloor b \\nu\\rfloor$ and $\\lceil(a+b) \\nu\\rceil=\\lceil a \\nu\\rceil+\\lceil b \\nu\\rceil-1$, so\n\n$$\nf(a+b, b)=(a+b)\\lceil b \\nu\\rceil-b(\\lfloor a \\nu\\rfloor+\\lfloor b \\nu\\rfloor)=f(a, b)+b(\\lceil b \\nu\\rceil-\\lfloor b \\nu\\rfloor)=f(a, b)+b\n$$\n\nand\n\n$$\nf(a, b+a)=a(\\lceil b \\nu\\rceil+\\lceil a \\nu\\rceil-1)-(b+a)\\lfloor a \\nu\\rfloor=f(a, b)+a(\\lceil a \\nu\\rceil-1-\\lfloor a \\nu\\rfloor)=f(a, b) .\n$$\n\nSimilarly, if $\\{a \\nu\\}+\\{b \\nu\\} \\geqslant 1$ then one obtains\n\n$$\nf(a+b, b)=f(a, b) \\quad \\text { and } \\quad f(a, b+a)=f(a, b)+a .\n$$\n\nSo, in both cases one of the numbers $f(a+b, a)$ and $f(a, b+a)$ is equal to $f(a, b)$ while the other is greater than $f(a, b)$ by one of $a$ and $b$. Thus, exactly one of the pairs $(a+b, b)$ and $(a, b+a)$ is excellent (for an appropriate value of $m$ ).\n\nNow let us say that the pairs $(a+b, b)$ and $(a, b+a)$ are the children of the pair $(a, b)$, while this pair is their parent. Next, if a pair $(c, d)$ can be obtained from $(a, b)$ by several passings from a parent to a child, we will say that $(c, d)$ is a descendant of $(a, b)$, while $(a, b)$ is an ancestor of $(c, d)$ (a pair is neither an ancestor nor a descendant of itself). Thus each pair $(a, b)$ has two children, it has a unique parent if $a \\neq b$, and no parents otherwise. Therefore, each pair of distinct positive integers has a unique ancestor of the form $(a, a)$; our aim is now to find how many m-excellent descendants each such pair has.\n\nNotice now that if a pair $(a, b)$ is m-excellent then $\\min \\{a, b\\} \\leqslant m$. Indeed, if $a=b$ then $f(a, a)=a=m$, so the statement is valid. Otherwise, the pair $(a, b)$ is a child of some pair $\\left(a^{\\prime}, b^{\\prime}\\right)$. If $b=b^{\\prime}$ and $a=a^{\\prime}+b^{\\prime}$, then we should have $m=f(a, b)=f\\left(a^{\\prime}, b^{\\prime}\\right)+b^{\\prime}$, so $b=b^{\\prime}=m-f\\left(a^{\\prime}, b^{\\prime}\\right)<m$. Similarly, if $a=a^{\\prime}$ and $b=b^{\\prime}+a^{\\prime}$ then $a<m$.\n\nLet us consider the set $S_{m}$ of all pairs $(a, b)$ such that $f(a, b) \\leqslant m$ and $\\min \\{a, b\\} \\leqslant m$. Then all the ancestors of the elements in $S_{m}$ are again in $S_{m}$, and each element in $S_{m}$ either is of the form $(a, a)$ with $a \\leqslant m$, or has a unique ancestor of this form. From the arguments above we see that all $m$-excellent pairs lie in $S_{m}$.\n\nWe claim now that the set $S_{m}$ is finite. Indeed, assume, for instance, that it contains infinitely many pairs $(c, d)$ with $d>2 m$. Such a pair is necessarily a child of $(c, d-c)$, and thus a descendant of some pair $\\left(c, d^{\\prime}\\right)$ with $m<d^{\\prime} \\leqslant 2 m$. Therefore, one of the pairs $(a, b) \\in S_{m}$ with $m<b \\leqslant 2 m$ has infinitely many descendants in $S_{m}$, and all these descendants have the form $(a, b+k a)$ with $k$ a positive integer. Since $f(a, b+k a)$ does not decrease as $k$ grows, it becomes constant for $k \\geqslant k_{0}$, where $k_{0}$ is some positive integer. This means that $\\{a \\nu\\}+\\{(b+k a) \\nu\\}<1$ for all $k \\geqslant k_{0}$. But this yields $1>\\{(b+k a) \\nu\\}=\\left\\{\\left(b+k_{0} a\\right) \\nu\\right\\}+\\left(k-k_{0}\\right)\\{a \\nu\\}$ for all $k>k_{0}$, which is absurd.\n\nSimilarly, one can prove that $S_{m}$ contains finitely many pairs $(c, d)$ with $c>2 m$, thus finitely many elements at all.\n\nWe are now prepared for proving the following crucial lemma.\n\nLemma. Consider any pair $(a, b)$ with $f(a, b) \\neq m$. Then the number $g(a, b)$ of its $m$-excellent descendants is equal to the number $h(a, b)$ of ways to represent the number $t=m-f(a, b)$ as $t=k a+\\ell b$ with $k$ and $\\ell$ being some nonnegative integers.\n\nProof. We proceed by induction on the number $N$ of descendants of $(a, b)$ in $S_{m}$. If $N=0$ then clearly $g(a, b)=0$. Assume that $h(a, b)>0$; without loss of generality, we have $a \\leqslant b$. Then, clearly, $m-f(a, b) \\geqslant a$, so $f(a, b+a) \\leqslant f(a, b)+a \\leqslant m$ and $a \\leqslant m$, hence $(a, b+a) \\in S_{m}$ which is impossible. Thus in the base case we have $g(a, b)=h(a, b)=0$, as desired.\n\nNow let $N>0$. Assume that $f(a+b, b)=f(a, b)+b$ and $f(a, b+a)=f(a, b)$ (the other case is similar). If $f(a, b)+b \\neq m$, then by the induction hypothesis we have\n\n$$\ng(a, b)=g(a+b, b)+g(a, b+a)=h(a+b, b)+h(a, b+a) .\n$$\n\nNotice that both pairs $(a+b, b)$ and $(a, b+a)$ are descendants of $(a, b)$ and thus each of them has strictly less descendants in $S_{m}$ than $(a, b)$ does.\n\nNext, each one of the $h(a+b, b)$ representations of $m-f(a+b, b)=m-b-f(a, b)$ as the sum $k^{\\prime}(a+b)+\\ell^{\\prime} b$ provides the representation $m-f(a, b)=k a+\\ell b$ with $k=k^{\\prime}<k^{\\prime}+\\ell^{\\prime}+1=\\ell$. Similarly, each one of the $h(a, b+a)$ representations of $m-f(a, b+a)=m-f(a, b)$ as the sum $k^{\\prime} a+\\ell^{\\prime}(b+a)$ provides the representation $m-f(a, b)=k a+\\ell b$ with $k=k^{\\prime}+\\ell^{\\prime} \\geqslant \\ell^{\\prime}=\\ell$. This correspondence is obviously bijective, so\n\n$$\nh(a, b)=h(a+b, b)+h(a, b+a)=g(a, b),\n$$\n\nas required.\n\nFinally, if $f(a, b)+b=m$ then $(a+b, b)$ is m-excellent, so $g(a, b)=1+g(a, b+a)=1+h(a, b+a)$ by the induction hypothesis. On the other hand, the number $m-f(a, b)=b$ has a representation $0 \\cdot a+1 \\cdot b$ and sometimes one more representation as $k a+0 \\cdot b$; this last representation exists simultaneously with the representation $m-f(a, b+a)=k a+0 \\cdot(b+a)$, so $h(a, b)=1+h(a, b+a)$ as well. Thus in this case the step is also proved.\n\nNow it is easy to finish the solution. There exists a unique $m$-excellent pair of the form $(a, a)$, and each other $m$-excellent pair $(a, b)$ has a unique ancestor of the form $(x, x)$ with $x<m$. By the lemma, for every $x<m$ the number of its $m$-excellent descendants is $h(x, x)$, which is the number of ways to represent $m-f(x, x)=m-x$ as $k x+\\ell x$ (with nonnegative integer $k$ and $\\ell$ ). This number is 0 if $x \\backslash m$, and $m / x$ otherwise. So the total number of excellent pairs is\n\n$$\n1+\\sum_{x \\mid m, x<m} \\frac{m}{x}=1+\\sum_{d \\mid m, d>1} d=\\sum_{d \\mid m} d\n$$\n\nas required."
  },
  {
    "id": "fimo_2014_algebra_p1",
    "enunciado": "Let $z_{0}<z_{1}<z_{2}<\\cdots$ be an infinite sequence of positive integers. Prove that there exists a unique integer $n \\geqslant 1$ such that\n\n$$\nz_{n}<\\frac{z_{0}+z_{1}+\\cdots+z_{n}}{n} \\leqslant z_{n+1} .\n$$",
    "solucao": "For $n=1,2, \\ldots$ define\n\n$$\nd_{n}=\\left(z_{0}+z_{1}+\\cdots+z_{n}\\right)-n z_{n} .\n$$\n\nThe sign of $d_{n}$ indicates whether the first inequality in (1) holds; i.e., it is satisfied if and only if $d_{n}>0$.\n\nNotice that\n\n$$\nn z_{n+1}-\\left(z_{0}+z_{1}+\\cdots+z_{n}\\right)=(n+1) z_{n+1}-\\left(z_{0}+z_{1}+\\cdots+z_{n}+z_{n+1}\\right)=-d_{n+1},\n$$\n\nso the second inequality in (1) is equivalent to $d_{n+1} \\leqslant 0$. Therefore, we have to prove that there is a unique index $n \\geqslant 1$ that satisfies $d_{n}>0 \\geqslant d_{n+1}$.\n\nBy its definition the sequence $d_{1}, d_{2}, \\ldots$ consists of integers and we have\n\n$$\nd_{1}=\\left(z_{0}+z_{1}\\right)-1 \\cdot z_{1}=z_{0}>0 .\n$$\n\nFrom\n\n$d_{n+1}-d_{n}=\\left(\\left(z_{0}+\\cdots+z_{n}+z_{n+1}\\right)-(n+1) z_{n+1}\\right)-\\left(\\left(z_{0}+\\cdots+z_{n}\\right)-n z_{n}\\right)=n\\left(z_{n}-z_{n+1}\\right)<0$ we can see that $d_{n+1}<d_{n}$ and thus the sequence strictly decreases.\n\nHence, we have a decreasing sequence $d_{1}>d_{2}>\\ldots$ of integers such that its first element $d_{1}$ is positive. The sequence must drop below 0 at some point, and thus there is a unique index $n$, that is the index of the last positive term, satisfying $d_{n}>0 \\geqslant d_{n+1}$."
  },
  {
    "id": "fimo_2014_algebra_p2",
    "enunciado": "Define the function $f:(0,1) \\rightarrow(0,1)$ by\n\n$$\nf(x)= \\begin{cases}x+\\frac{1}{2} & \\text { if } x<\\frac{1}{2} \\\\ x^{2} & \\text { if } x \\geqslant \\frac{1}{2} .\\end{cases}\n$$\n\nLet $a$ and $b$ be two real numbers such that $0<a<b<1$. We define the sequences $a_{n}$ and $b_{n}$ by $a_{0}=a, b_{0}=b$, and $a_{n}=f\\left(a_{n-1}\\right), b_{n}=f\\left(b_{n-1}\\right)$ for $n>0$. Show that there exists a positive integer $n$ such that\n\n$$\n\\left(a_{n}-a_{n-1}\\right)\\left(b_{n}-b_{n-1}\\right)<0 .\n$$",
    "solucao": "Note that\n\nif $x<\\frac{1}{2}$ and\n\n$$\n\\begin{gathered}\nf(x)-x=\\frac{1}{2}>0 \\\\\nf(x)-x=x^{2}-x<0\n\\end{gathered}\n$$\n\nif $x \\geqslant \\frac{1}{2}$. So if we consider $(0,1)$ as being divided into the two subintervals $I_{1}=\\left(0, \\frac{1}{2}\\right)$ and $I_{2}=\\left[\\frac{1}{2}, 1\\right)$, the inequality\n\n$$\n\\left(a_{n}-a_{n-1}\\right)\\left(b_{n}-b_{n-1}\\right)=\\left(f\\left(a_{n-1}\\right)-a_{n-1}\\right)\\left(f\\left(b_{n-1}\\right)-b_{n-1}\\right)<0\n$$\n\nholds if and only if $a_{n-1}$ and $b_{n-1}$ lie in distinct subintervals.\n\nLet us now assume, to the contrary, that $a_{k}$ and $b_{k}$ always lie in the same subinterval. Consider the distance $d_{k}=\\left|a_{k}-b_{k}\\right|$. If both $a_{k}$ and $b_{k}$ lie in $I_{1}$, then\n\n$$\nd_{k+1}=\\left|a_{k+1}-b_{k+1}\\right|=\\left|a_{k}+\\frac{1}{2}-b_{k}-\\frac{1}{2}\\right|=d_{k} .\n$$\n\nIf, on the other hand, $a_{k}$ and $b_{k}$ both lie in $I_{2}$, then $\\min \\left(a_{k}, b_{k}\\right) \\geqslant \\frac{1}{2}$ and $\\max \\left(a_{k}, b_{k}\\right)=$ $\\min \\left(a_{k}, b_{k}\\right)+d_{k} \\geqslant \\frac{1}{2}+d_{k}$, which implies\n\n$d_{k+1}=\\left|a_{k+1}-b_{k+1}\\right|=\\left|a_{k}^{2}-b_{k}^{2}\\right|=\\left|\\left(a_{k}-b_{k}\\right)\\left(a_{k}+b_{k}\\right)\\right| \\geqslant\\left|a_{k}-b_{k}\\right|\\left(\\frac{1}{2}+\\frac{1}{2}+d_{k}\\right)=d_{k}\\left(1+d_{k}\\right) \\geqslant d_{k}$.\n\nThis means that the difference $d_{k}$ is non-decreasing, and in particular $d_{k} \\geqslant d_{0}>0$ for all $k$.\n\nWe can even say more. If $a_{k}$ and $b_{k}$ lie in $I_{2}$, then\n\n$$\nd_{k+2} \\geqslant d_{k+1} \\geqslant d_{k}\\left(1+d_{k}\\right) \\geqslant d_{k}\\left(1+d_{0}\\right) .\n$$\n\nIf $a_{k}$ and $b_{k}$ both lie in $I_{1}$, then $a_{k+1}$ and $b_{k+1}$ both lie in $I_{2}$, and so we have\n\n$$\nd_{k+2} \\geqslant d_{k+1}\\left(1+d_{k+1}\\right) \\geqslant d_{k+1}\\left(1+d_{0}\\right)=d_{k}\\left(1+d_{0}\\right) .\n$$\n\nIn either case, $d_{k+2} \\geqslant d_{k}\\left(1+d_{0}\\right)$, and inductively we get\n\n$$\nd_{2 m} \\geqslant d_{0}\\left(1+d_{0}\\right)^{m}\n$$\n\nFor sufficiently large $m$, the right-hand side is greater than 1 , but since $a_{2 m}, b_{2 m}$ both lie in $(0,1)$, we must have $d_{2 m}<1$, a contradiction.\n\nThus there must be a positive integer $n$ such that $a_{n-1}$ and $b_{n-1}$ do not lie in the same subinterval, which proves the desired statement."
  },
  {
    "id": "fimo_2014_algebra_p3",
    "enunciado": "For a sequence $x_{1}, x_{2}, \\ldots, x_{n}$ of real numbers, we define its price as\n\n$$\n\\max _{1 \\leqslant i \\leqslant n}\\left|x_{1}+\\cdots+x_{i}\\right| .\n$$\n\nGiven $n$ real numbers, Dave and George want to arrange them into a sequence with a low price. Diligent Dave checks all possible ways and finds the minimum possible price $D$. Greedy George, on the other hand, chooses $x_{1}$ such that $\\left|x_{1}\\right|$ is as small as possible; among the remaining numbers, he chooses $x_{2}$ such that $\\left|x_{1}+x_{2}\\right|$ is as small as possible, and so on. Thus, in the $i^{\\text {th }}$ step he chooses $x_{i}$ among the remaining numbers so as to minimise the value of $\\left|x_{1}+x_{2}+\\cdots+x_{i}\\right|$. In each step, if several numbers provide the same value, George chooses one at random. Finally he gets a sequence with price $G$.\n\nFind the least possible constant $c$ such that for every positive integer $n$, for every collection of $n$ real numbers, and for every possible sequence that George might obtain, the resulting values satisfy the inequality $G \\leqslant c D$.\n\nThe final answer is $c=2$.",
    "solucao": "If the initial numbers are $1,-1,2$, and $-2$, then Dave may arrange them as $1,-2,2,-1$, while George may get the sequence $1,-1,2,-2$, resulting in $D=1$ and $G=2$. So we obtain $c \\geqslant 2$.\n\nTherefore, it remains to prove that $G \\leqslant 2 D$. Let $x_{1}, x_{2}, \\ldots, x_{n}$ be the numbers Dave and George have at their disposal. Assume that Dave and George arrange them into sequences $d_{1}, d_{2}, \\ldots, d_{n}$ and $g_{1}, g_{2}, \\ldots, g_{n}$, respectively. Put\n\n$$\nM=\\max _{1 \\leqslant i \\leqslant n}\\left|x_{i}\\right|, \\quad S=\\left|x_{1}+\\cdots+x_{n}\\right|, \\quad \\text { and } \\quad N=\\max \\{M, S\\}\n$$\n\nWe claim that\n\n$$\n\\begin{aligned}\n& D \\geqslant S, \\\\\n& D \\geqslant \\frac{M}{2}, \\quad \\text { and } \\\\\n& G \\leqslant N=\\max \\{M, S\\} .\n\\end{aligned}\n$$\n\nThese inequalities yield the desired estimate, as $G \\leqslant \\max \\{M, S\\} \\leqslant \\max \\{M, 2 S\\} \\leqslant 2 D$.\n\nThe inequality (1) is a direct consequence of the definition of the price.\n\nTo prove (2), consider an index $i$ with $\\left|d_{i}\\right|=M$. Then we have\n\n$M=\\left|d_{i}\\right|=\\left|\\left(d_{1}+\\cdots+d_{i}\\right)-\\left(d_{1}+\\cdots+d_{i-1}\\right)\\right| \\leqslant\\left|d_{1}+\\cdots+d_{i}\\right|+\\left|d_{1}+\\cdots+d_{i-1}\\right| \\leqslant 2 D$,\n\nas required.\n\nIt remains to establish (3). Put $h_{i}=g_{1}+g_{2}+\\cdots+g_{i}$. We will prove by induction on $i$ that $\\left|h_{i}\\right| \\leqslant N$. The base case $i=1$ holds, since $\\left|h_{1}\\right|=\\left|g_{1}\\right| \\leqslant M \\leqslant N$. Notice also that $\\left|h_{n}\\right|=S \\leqslant N$.\n\nFor the induction step, assume that $\\left|h_{i-1}\\right| \\leqslant N$. We distinguish two cases.\n\nCase 1. Assume that no two of the numbers $g_{i}, g_{i+1}, \\ldots, g_{n}$ have opposite signs.\n\nWithout loss of generality, we may assume that they are all nonnegative. Then one has $h_{i-1} \\leqslant h_{i} \\leqslant \\cdots \\leqslant h_{n}$, thus\n\n$$\n\\left|h_{i}\\right| \\leqslant \\max \\left\\{\\left|h_{i-1}\\right|,\\left|h_{n}\\right|\\right\\} \\leqslant N .\n$$\n\nCase 2. Among the numbers $g_{i}, g_{i+1}, \\ldots, g_{n}$ there are positive and negative ones. Then there exists some index $j \\geqslant i$ such that $h_{i-1} g_{j} \\leqslant 0$. By the definition of George's sequence we have\n\n$$\n\\left|h_{i}\\right|=\\left|h_{i-1}+g_{i}\\right| \\leqslant\\left|h_{i-1}+g_{j}\\right| \\leqslant \\max \\left\\{\\left|h_{i-1}\\right|,\\left|g_{j}\\right|\\right\\} \\leqslant N\n$$\n\nThus, the induction step is established."
  },
  {
    "id": "fimo_2014_algebra_p4",
    "enunciado": "Determine all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ satisfying\n\n$$\nf(f(m)+n)+f(m)=f(n)+f(3 m)+2014\n$$\n\nfor all integers $m$ and $n$.\n\nThe final answer is that there is only one such function, namely $n \\longmapsto 2 n+1007$.",
    "solucao": "Let $f$ be a function satisfying (1). Set $C=1007$ and define the function $g: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ by $g(m)=f(3 m)-f(m)+2 C$ for all $m \\in \\mathbb{Z}$; in particular, $g(0)=2 C$. Now (1) rewrites as\n\n$$\nf(f(m)+n)=g(m)+f(n)\n$$\n\nfor all $m, n \\in \\mathbb{Z}$. By induction in both directions it follows that\n\n$$\nf(t f(m)+n)=\\operatorname{tg}(m)+f(n)\n$$\n\nholds for all $m, n, t \\in \\mathbb{Z}$. Applying this, for any $r \\in \\mathbb{Z}$, to the triples $(r, 0, f(0))$ and $(0,0, f(r))$ in place of $(m, n, t)$ we obtain\n\n$$\nf(0) g(r)=f(f(r) f(0))-f(0)=f(r) g(0) .\n$$\n\nNow if $f(0)$ vanished, then $g(0)=2 C>0$ would entail that $f$ vanishes identically, contrary to (1). Thus $f(0) \\neq 0$ and the previous equation yields $g(r)=\\alpha f(r)$, where $\\alpha=\\frac{g(0)}{f(0)}$ is some nonzero constant.\n\nSo the definition of $g$ reveals $f(3 m)=(1+\\alpha) f(m)-2 C$, i.e.,\n\n$$\nf(3 m)-\\beta=(1+\\alpha)(f(m)-\\beta)\n$$\n\nfor all $m \\in \\mathbb{Z}$, where $\\beta=\\frac{2 C}{\\alpha}$. By induction on $k$ this implies\n\n$$\nf\\left(3^{k} m\\right)-\\beta=(1+\\alpha)^{k}(f(m)-\\beta)\n$$\n\nfor all integers $k \\geqslant 0$ and $m$.\n\nSince $3 \\nmid 2014$, there exists by (1) some value $d=f(a)$ attained by $f$ that is not divisible by 3 . Now by $(2)$ we have $f(n+t d)=f(n)+t g(a)=f(n)+\\alpha \\cdot t f(a)$, i.e.,\n\n$$\nf(n+t d)=f(n)+\\alpha \\cdot t d\n$$\n\nfor all $n, t \\in \\mathbb{Z}$.\n\nLet us fix any positive integer $k$ with $d \\mid\\left(3^{k}-1\\right)$, which is possible, since $\\operatorname{gcd}(3, d)=1$. E.g., by the EuleR-Fermat theorem, we may take $k=\\varphi(|d|)$. Now for each $m \\in \\mathbb{Z}$ we get\n\n$$\nf\\left(3^{k} m\\right)=f(m)+\\alpha\\left(3^{k}-1\\right) m\n$$\n\nfrom (5), which in view of (4) yields $\\left((1+\\alpha)^{k}-1\\right)(f(m)-\\beta)=\\alpha\\left(3^{k}-1\\right) m$. Since $\\alpha \\neq 0$, the right hand side does not vanish for $m \\neq 0$, wherefore the first factor on the left hand side cannot vanish either. It follows that\n\n$$\nf(m)=\\frac{\\alpha\\left(3^{k}-1\\right)}{(1+\\alpha)^{k}-1} \\cdot m+\\beta .\n$$\n\nSo $f$ is a linear function, say $f(m)=A m+\\beta$ for all $m \\in \\mathbb{Z}$ with some constant $A \\in \\mathbb{Q}$. Plugging this into $(1)$ one obtains $\\left(A^{2}-2 A\\right) m+(A \\beta-2 C)=0$ for all $m$, which is equivalent to the conjunction of\n\n$$\nA^{2}=2 A \\quad \\text { and } \\quad A \\beta=2 C .\n$$\n\nThe first equation is equivalent to $A \\in\\{0,2\\}$, and as $C \\neq 0$ the second one gives\n\n$$\nA=2 \\quad \\text { and } \\quad \\beta=C .\n$$\n\nThis shows that $f$ is indeed the function mentioned in the answer and as the numbers found in (7) do indeed satisfy the equations (6) this function is indeed as desired."
  },
  {
    "id": "fimo_2014_algebra_p5",
    "enunciado": "Consider all polynomials $P(x)$ with real coefficients that have the following property: for any two real numbers $x$ and $y$ one has\n\n$$\n\\left|y^{2}-P(x)\\right| \\leqslant 2|x| \\quad \\text { if and only if } \\quad\\left|x^{2}-P(y)\\right| \\leqslant 2|y| \\text {. }\n$$\n\nDetermine all possible values of $P(0)$.\n\nThe final answer is that the set of possible values of $P(0)$ is $(-\\infty, 0) \\cup\\{1\\}$.",
    "solucao": "Part I. We begin by verifying that these numbers are indeed possible values of $P(0)$. To see that each negative real number $-C$ can be $P(0)$, it suffices to check that for every $C>0$ the polynomial $P(x)=-\\left(\\frac{2 x^{2}}{C}+C\\right)$ has the property described in the statement of the problem. Due to symmetry it is enough for this purpose to prove $\\left|y^{2}-P(x)\\right|>2|x|$ for any two real numbers $x$ and $y$. In fact we have\n\n$$\n\\left|y^{2}-P(x)\\right|=y^{2}+\\frac{x^{2}}{C}+\\frac{(|x|-C)^{2}}{C}+2|x| \\geqslant \\frac{x^{2}}{C}+2|x| \\geqslant 2|x|,\n$$\n\nwhere in the first estimate equality can only hold if $|x|=C$, whilst in the second one it can only hold if $x=0$. As these two conditions cannot be met at the same time, we have indeed $\\left|y^{2}-P(x)\\right|>2|x|$\n\nTo show that $P(0)=1$ is possible as well, we verify that the polynomial $P(x)=x^{2}+1$ satisfies (1). Notice that for all real numbers $x$ and $y$ we have\n\n$$\n\\begin{aligned}\n\\left|y^{2}-P(x)\\right| \\leqslant 2|x| & \\Longleftrightarrow\\left(y^{2}-x^{2}-1\\right)^{2} \\leqslant 4 x^{2} \\\\\n& \\Longleftrightarrow 0 \\leqslant\\left(\\left(y^{2}-(x-1)^{2}\\right)\\left((x+1)^{2}-y^{2}\\right)\\right. \\\\\n& \\Longleftrightarrow 0 \\leqslant(y-x+1)(y+x-1)(x+1-y)(x+1+y) \\\\\n& \\Longleftrightarrow 0 \\leqslant\\left((x+y)^{2}-1\\right)\\left(1-(x-y)^{2}\\right) .\n\\end{aligned}\n$$\n\nSince this inequality is symmetric in $x$ and $y$, we are done.\n\nPart II. Now we show that no values other than those mentioned in the answer are possible for $P(0)$. To reach this we let $P$ denote any polynomial satisfying $(1)$ and $P(0) \\geqslant 0$; as we shall see, this implies $P(x)=x^{2}+1$ for all real $x$, which is actually more than what we want.\n\nFirst step: We prove that $P$ is even.\n\nBy (1) we have\n\n$$\n\\left|y^{2}-P(x)\\right| \\leqslant 2|x| \\Longleftrightarrow\\left|x^{2}-P(y)\\right| \\leqslant 2|y| \\Longleftrightarrow\\left|y^{2}-P(-x)\\right| \\leqslant 2|x|\n$$\n\nfor all real numbers $x$ and $y$. Considering just the equivalence of the first and third statement and taking into account that $y^{2}$ may vary through $\\mathbb{R}_{\\geqslant 0}$ we infer that\n\n$$\n[P(x)-2|x|, P(x)+2|x|] \\cap \\mathbb{R}_{\\geqslant 0}=[P(-x)-2|x|, P(-x)+2|x|] \\cap \\mathbb{R}_{\\geqslant 0}\n$$\n\nholds for all $x \\in \\mathbb{R}$. We claim that there are infinitely many real numbers $x$ such that $P(x)+2|x| \\geqslant 0$. This holds in fact for any real polynomial with $P(0) \\geqslant 0$; in order to see this, we may assume that the coefficient of $P$ appearing in front of $x$ is nonnegative. In this case the desired inequality holds for all sufficiently small positive real numbers.\n\nFor such numbers $x$ satisfying $P(x)+2|x| \\geqslant 0$ we have $P(x)+2|x|=P(-x)+2|x|$ by the previous displayed formula, and hence also $P(x)=P(-x)$. Consequently the polynomial $P(x)-P(-x)$ has infinitely many zeros, wherefore it has to vanish identically. Thus $P$ is indeed even. Second step: We prove that $P(t)>0$ for all $t \\in \\mathbb{R}$.\n\nLet us assume for a moment that there exists a real number $t \\neq 0$ with $P(t)=0$. Then there is some open interval $I$ around $t$ such that $|P(y)| \\leqslant 2|y|$ holds for all $y \\in I$. Plugging $x=0$ into (1) we learn that $y^{2}=P(0)$ holds for all $y \\in I$, which is clearly absurd. We have thus shown $P(t) \\neq 0$ for all $t \\neq 0$.\n\nIn combination with $P(0) \\geqslant 0$ this informs us that our claim could only fail if $P(0)=0$. In this case there is by our first step a polynomial $Q(x)$ such that $P(x)=x^{2} Q(x)$. Applying (1) to $x=0$ and an arbitrary $y \\neq 0$ we get $|y Q(y)|>2$, which is surely false when $y$ is sufficiently small.\n\nThird step: We prove that $P$ is a quadratic polynomial.\n\nNotice that $P$ cannot be constant, for otherwise if $x=\\sqrt{P(0)}$ and $y$ is sufficiently large, the first part of (1) is false whilst the second part is true. So the degree $n$ of $P$ has to be at least 1 . By our first step $n$ has to be even as well, whence in particular $n \\geqslant 2$.\n\nNow assume that $n \\geqslant 4$. Plugging $y=\\sqrt{P(x)}$ into (1) we get $\\left|x^{2}-P(\\sqrt{P(x)})\\right| \\leqslant 2 \\sqrt{P(x)}$ and hence\n\n$$\nP(\\sqrt{P(x)}) \\leqslant x^{2}+2 \\sqrt{P(x)}\n$$\n\nfor all real $x$. Choose positive real numbers $x_{0}, a$, and $b$ such that if $x \\in\\left(x_{0}, \\infty\\right)$, then $a x^{n}<$ $P(x)<b x^{n}$; this is indeed possible, for if $d>0$ denotes the leading coefficient of $P$, then $\\lim _{x \\rightarrow \\infty} \\frac{P(x)}{x^{n}}=d$, whence for instance the numbers $a=\\frac{d}{2}$ and $b=2 d$ work provided that $x_{0}$ is chosen large enough.\n\nNow for all sufficiently large real numbers $x$ we have\n\n$$\na^{n / 2+1} x^{n^{2} / 2}<a P(x)^{n / 2}<P(\\sqrt{P(x)}) \\leqslant x^{2}+2 \\sqrt{P(x)}<x^{n / 2}+2 b^{1 / 2} x^{n / 2}\n$$\n\ni.e.\n\n$$\nx^{\\left(n^{2}-n\\right) / 2}<\\frac{1+2 b^{1 / 2}}{a^{n / 2+1}},\n$$\n\nwhich is surely absurd. Thus $P$ is indeed a quadratic polynomial.\n\nFourth step: We prove that $P(x)=x^{2}+1$.\n\nIn the light of our first three steps there are two real numbers $a>0$ and $b$ such that $P(x)=$ $a x^{2}+b$. Now if $x$ is large enough and $y=\\sqrt{a} x$, the left part of (1) holds and the right part reads $\\left|\\left(1-a^{2}\\right) x^{2}-b\\right| \\leqslant 2 \\sqrt{a} x$. In view of the fact that $a>0$ this is only possible if $a=1$. Finally, substituting $y=x+1$ with $x>0$ into (1) we get\n\n$$\n|2 x+1-b| \\leqslant 2 x \\Longleftrightarrow|2 x+1+b| \\leqslant 2 x+2,\n$$\n\ni.e.,\n\n$$\nb \\in[1,4 x+1] \\Longleftrightarrow b \\in[-4 x-3,1]\n$$\n\nfor all $x>0$. Choosing $x$ large enough, we can achieve that at least one of these two statements holds; then both hold, which is only possible if $b=1$, as desired."
  },
  {
    "id": "fimo_2014_algebra_p6",
    "enunciado": "Find all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that\n\n$$\nn^{2}+4 f(n)=f(f(n))^{2}\n$$\n\nfor all $n \\in \\mathbb{Z}$.\n\nThe final answer is that the possibilities are:\n\n\\begin{itemize}\n  \\item $f(n)=n+1$ for all $n$\n\n  \\item or, for some $a \\geqslant 1, \\quad f(n)= \\begin{cases}n+1, & n>-a, \\\\ -n+1, & n \\leqslant-a ;\\end{cases}$\n\n  \\item or $f(n)= \\begin{cases}n+1, & n>0 \\\\ 0, & n=0 \\\\ -n+1, & n<0\\end{cases}$\n\n\\end{itemize}",
    "solucao": "Part I. Let us first check that each of the functions above really satisfies the given functional equation. If $f(n)=n+1$ for all $n$, then we have\n\n$$\nn^{2}+4 f(n)=n^{2}+4 n+4=(n+2)^{2}=f(n+1)^{2}=f(f(n))^{2} .\n$$\n\nIf $f(n)=n+1$ for $n>-a$ and $f(n)=-n+1$ otherwise, then we have the same identity for $n>-a$ and\n\n$$\nn^{2}+4 f(n)=n^{2}-4 n+4=(2-n)^{2}=f(1-n)^{2}=f(f(n))^{2}\n$$\n\notherwise. The same applies to the third solution (with $a=0$ ), where in addition one has\n\n$$\n0^{2}+4 f(0)=0=f(f(0))^{2} .\n$$\n\nPart II. It remains to prove that these are really the only functions that satisfy our functional equation. We do so in three steps:\n\nStep 1: We prove that $f(n)=n+1$ for $n>0$.\n\nConsider the sequence $\\left(a_{k}\\right)$ given by $a_{k}=f^{k}(1)$ for $k \\geqslant 0$. Setting $n=a_{k}$ in (1), we get\n\n$$\na_{k}^{2}+4 a_{k+1}=a_{k+2}^{2} .\n$$\n\nOf course, $a_{0}=1$ by definition. Since $a_{2}^{2}=1+4 a_{1}$ is odd, $a_{2}$ has to be odd as well, so we set $a_{2}=2 r+1$ for some $r \\in \\mathbb{Z}$. Then $a_{1}=r^{2}+r$ and consequently\n\n$$\na_{3}^{2}=a_{1}^{2}+4 a_{2}=\\left(r^{2}+r\\right)^{2}+8 r+4 .\n$$\n\nSince $8 r+4 \\neq 0, a_{3}^{2} \\neq\\left(r^{2}+r\\right)^{2}$, so the difference between $a_{3}^{2}$ and $\\left(r^{2}+r\\right)^{2}$ is at least the distance from $\\left(r^{2}+r\\right)^{2}$ to the nearest even square (since $8 r+4$ and $r^{2}+r$ are both even). This implies that\n\n$$\n|8 r+4|=\\left|a_{3}^{2}-\\left(r^{2}+r\\right)^{2}\\right| \\geqslant\\left(r^{2}+r\\right)^{2}-\\left(r^{2}+r-2\\right)^{2}=4\\left(r^{2}+r-1\\right),\n$$\n\n(for $r=0$ and $r=-1$, the estimate is trivial, but this does not matter). Therefore, we ave\n\n$$\n4 r^{2} \\leqslant|8 r+4|-4 r+4 .\n$$\n\nIf $|r| \\geqslant 4$, then\n\n$$\n4 r^{2} \\geqslant 16|r| \\geqslant 12|r|+16>8|r|+4+4|r|+4 \\geqslant|8 r+4|-4 r+4,\n$$\n\na contradiction. Thus $|r|<4$. Checking all possible remaining values of $r$, we find that $\\left(r^{2}+r\\right)^{2}+8 r+4$ is only a square in three cases: $r=-3, r=0$ and $r=1$. Let us now distinguish these three cases:\n\n\\begin{itemize}\n  \\item $r=-3$, thus $a_{1}=6$ and $a_{2}=-5$. For each $k \\geqslant 1$, we have\n\\end{itemize}\n\n$$\na_{k+2}=\\pm \\sqrt{a_{k}^{2}+4 a_{k+1}},\n$$\n\nand the sign needs to be chosen in such a way that $a_{k+1}^{2}+4 a_{k+2}$ is again a square. This yields $a_{3}=-4, a_{4}=-3, a_{5}=-2, a_{6}=-1, a_{7}=0, a_{8}=1, a_{9}=2$. At this point we have reached a contradiction, since $f(1)=f\\left(a_{0}\\right)=a_{1}=6$ and at the same time $f(1)=f\\left(a_{8}\\right)=a_{9}=2$.\n\n\\begin{itemize}\n  \\item $r=0$, thus $a_{1}=0$ and $a_{2}=1$. Then $a_{3}^{2}=a_{1}^{2}+4 a_{2}=4$, so $a_{3}=\\pm 2$. This, however, is a contradiction again, since it gives us $f(1)=f\\left(a_{0}\\right)=a_{1}=0$ and at the same time $f(1)=f\\left(a_{2}\\right)=a_{3}=\\pm 2$\n\n  \\item $r=1$, thus $a_{1}=2$ and $a_{2}=3$. We prove by induction that $a_{k}=k+1$ for all $k \\geqslant 0$ in this case, which we already know for $k \\leqslant 2$ now. For the induction step, assume that $a_{k-1}=k$ and $a_{k}=k+1$. Then\n\n\\end{itemize}\n\n$$\na_{k+1}^{2}=a_{k-1}^{2}+4 a_{k}=k^{2}+4 k+4=(k+2)^{2},\n$$\n\nso $a_{k+1}=\\pm(k+2)$. If $a_{k+1}=-(k+2)$, then\n\n$$\na_{k+2}^{2}=a_{k}^{2}+4 a_{k+1}=(k+1)^{2}-4 k-8=k^{2}-2 k-7=(k-1)^{2}-8 .\n$$\n\nThe latter can only be a square if $k=4$ (since 1 and 9 are the only two squares whose difference is 8). Then, however, $a_{4}=5, a_{5}=-6$ and $a_{6}=\\pm 1$, so\n\n$$\na_{7}^{2}=a_{5}^{2}+4 a_{6}=36 \\pm 4,\n$$\n\nbut neither 32 nor 40 is a perfect square. Thus $a_{k+1}=k+2$, which completes our induction. This also means that $f(n)=f\\left(a_{n-1}\\right)=a_{n}=n+1$ for all $n \\geqslant 1$.\n\nStep 2: We prove that either $f(0)=1$, or $f(0)=0$ and $f(n) \\neq 0$ for $n \\neq 0$.\n\nSet $n=0$ in (1) to get\n\n$$\n4 f(0)=f(f(0))^{2} .\n$$\n\nThis means that $f(0) \\geqslant 0$. If $f(0)=0$, then $f(n) \\neq 0$ for all $n \\neq 0$, since we would otherwise have\n\n$$\nn^{2}=n^{2}+4 f(n)=f(f(n))^{2}=f(0)^{2}=0 .\n$$\n\nIf $f(0)>0$, then we know that $f(f(0))=f(0)+1$ from the first step, so\n\n$$\n4 f(0)=(f(0)+1)^{2},\n$$\n\nwhich yields $f(0)=1$. Step 3: We discuss the values of $f(n)$ for $n<0$.\n\nLemma. For every $n \\geqslant 1$, we have $f(-n)=-n+1$ or $f(-n)=n+1$. Moreover, if $f(-n)=$ $-n+1$ for some $n \\geqslant 1$, then also $f(-n+1)=-n+2$.\n\nProof. We prove this statement by strong induction on $n$. For $n=1$, we get\n\n$$\n1+4 f(-1)=f(f(-1))^{2} .\n$$\n\nThus $f(-1)$ needs to be nonnegative. If $f(-1)=0$, then $f(f(-1))=f(0)=\\pm 1$, so $f(0)=1$ (by our second step). Otherwise, we know that $f(f(-1))=f(-1)+1$, so\n\n$$\n1+4 f(-1)=(f(-1)+1)^{2} \\text {, }\n$$\n\nwhich yields $f(-1)=2$ and thus establishes the base case. For the induction step, we consider two cases:\n\n\\begin{itemize}\n  \\item If $f(-n) \\leqslant-n$, then\n\\end{itemize}\n\n$$\nf(f(-n))^{2}=(-n)^{2}+4 f(-n) \\leqslant n^{2}-4 n<(n-2)^{2},\n$$\n\nso $|f(f(-n))| \\leqslant n-3$ (for $n=2$, this case cannot even occur). If $f(f(-n)) \\geqslant 0$, then we already know from the first two steps that $f(f(f(-n)))=f(f(-n))+1$, unless perhaps if $f(0)=0$ and $f(f(-n))=0$. However, the latter would imply $f(-n)=0$ (as shown in Step 2) and thus $n=0$, which is impossible. If $f(f(-n))<0$, we can apply the induction hypothesis to $f(f(-n))$. In either case, $f(f(f(-n)))=\\pm f(f(-n))+1$. Therefore,\n\n$$\nf(-n)^{2}+4 f(f(-n))=f(f(f(-n)))^{2}=(\\pm f(f(-n))+1)^{2}\n$$\n\nwhich gives us\n\n$$\n\\begin{aligned}\nn^{2} & \\leqslant f(-n)^{2}=(\\pm f(f(-n))+1)^{2}-4 f(f(-n)) \\leqslant f(f(-n))^{2}+6|f(f(-n))|+1 \\\\\n& \\leqslant(n-3)^{2}+6(n-3)+1=n^{2}-8\n\\end{aligned}\n$$\n\na contradiction.\n\n\\begin{itemize}\n  \\item Thus, we are left with the case that $f(-n)>-n$. Now we argue as in the previous case: if $f(-n) \\geqslant 0$, then $f(f(-n))=f(-n)+1$ by the first two steps, since $f(0)=0$ and $f(-n)=0$ would imply $n=0$ (as seen in Step 2) and is thus impossible. If $f(-n)<0$, we can apply the induction hypothesis, so in any case we can infer that $f(f(-n))=\\pm f(-n)+1$. We obtain\n\\end{itemize}\n\n$$\n(-n)^{2}+4 f(-n)=(\\pm f(-n)+1)^{2}\n$$\n\nso either\n\n$$\nn^{2}=f(-n)^{2}-2 f(-n)+1=(f(-n)-1)^{2},\n$$\n\nwhich gives us $f(-n)=\\pm n+1$, or\n\n$$\nn^{2}=f(-n)^{2}-6 f(-n)+1=(f(-n)-3)^{2}-8 .\n$$\n\nSince 1 and 9 are the only perfect squares whose difference is 8 , we must have $n=1$, which we have already considered.\n\nFinally, suppose that $f(-n)=-n+1$ for some $n \\geqslant 2$. Then\n\n$$\nf(-n+1)^{2}=f(f(-n))^{2}=(-n)^{2}+4 f(-n)=(n-2)^{2},\n$$\n\nso $f(-n+1)=\\pm(n-2)$. However, we already know that $f(-n+1)=-n+2$ or $f(-n+1)=n$, so $f(-n+1)=-n+2$. Combining everything we know, we find the solutions as stated in the answer:\n\n\\begin{itemize}\n  \\item One solution is given by $f(n)=n+1$ for all $n$.\n\n  \\item If $f(n)$ is not always equal to $n+1$, then there is a largest integer $m$ (which cannot be positive) for which this is not the case. In view of the lemma that we proved, we must then have $f(n)=-n+1$ for any integer $n<m$. If $m=-a<0$, we obtain $f(n)=-n+1$ for $n \\leqslant-a$ (and $f(n)=n+1$ otherwise). If $m=0$, we have the additional possibility that $f(0)=0, f(n)=-n+1$ for negative $n$ and $f(n)=n+1$ for positive $n$.\n\n\\end{itemize}"
  },
  {
    "id": "fimo_2014_number_theory_p1",
    "enunciado": "Let $n \\geqslant 2$ be an integer, and let $A_{n}$ be the set\n\n$$\nA_{n}=\\left\\{2^{n}-2^{k} \\mid k \\in \\mathbb{Z}, 0 \\leqslant k<n\\right\\} .\n$$\n\nDetermine the largest positive integer that cannot be written as the sum of one or more (not necessarily distinct) elements of $A_{n}$.\n\nThe final answer is $(n-2) 2^{n}+1$.",
    "solucao": "Part I. First we show that every integer greater than $(n-2) 2^{n}+1$ can be represented as such a sum. This is achieved by induction on $n$.\n\nFor $n=2$, the set $A_{n}$ consists of the two elements 2 and 3. Every positive integer $m$ except for 1 can be represented as the sum of elements of $A_{n}$ in this case: as $m=2+2+\\cdots+2$ if $m$ is even, and as $m=3+2+2+\\cdots+2$ if $m$ is odd.\n\nNow consider some $n>2$, and take an integer $m>(n-2) 2^{n}+1$. If $m$ is even, then consider\n\n$$\n\\frac{m}{2} \\geqslant \\frac{(n-2) 2^{n}+2}{2}=(n-2) 2^{n-1}+1>(n-3) 2^{n-1}+1\n$$\n\nBy the induction hypothesis, there is a representation of the form\n\n$$\n\\frac{m}{2}=\\left(2^{n-1}-2^{k_{1}}\\right)+\\left(2^{n-1}-2^{k_{2}}\\right)+\\cdots+\\left(2^{n-1}-2^{k_{r}}\\right)\n$$\n\nfor some $k_{i}$ with $0 \\leqslant k_{i}<n-1$. It follows that\n\n$$\nm=\\left(2^{n}-2^{k_{1}+1}\\right)+\\left(2^{n}-2^{k_{2}+1}\\right)+\\cdots+\\left(2^{n}-2^{k_{r}+1}\\right)\n$$\n\ngiving us the desired representation as a sum of elements of $A_{n}$. If $m$ is odd, we consider\n\n$$\n\\frac{m-\\left(2^{n}-1\\right)}{2}>\\frac{(n-2) 2^{n}+1-\\left(2^{n}-1\\right)}{2}=(n-3) 2^{n-1}+1 .\n$$\n\nBy the induction hypothesis, there is a representation of the form\n\n$$\n\\frac{m-\\left(2^{n}-1\\right)}{2}=\\left(2^{n-1}-2^{k_{1}}\\right)+\\left(2^{n-1}-2^{k_{2}}\\right)+\\cdots+\\left(2^{n-1}-2^{k_{r}}\\right)\n$$\n\nfor some $k_{i}$ with $0 \\leqslant k_{i}<n-1$. It follows that\n\n$$\nm=\\left(2^{n}-2^{k_{1}+1}\\right)+\\left(2^{n}-2^{k_{2}+1}\\right)+\\cdots+\\left(2^{n}-2^{k_{r}+1}\\right)+\\left(2^{n}-1\\right),\n$$\n\ngiving us the desired representation of $m$ once again.\n\nPart II. It remains to show that there is no representation for $(n-2) 2^{n}+1$. Let $N$ be the smallest positive integer that satisfies $N \\equiv 1\\left(\\bmod 2^{n}\\right)$, and which can be represented as a sum of elements of $A_{n}$. Consider a representation of $N$, i.e.,\n\n$$\nN=\\left(2^{n}-2^{k_{1}}\\right)+\\left(2^{n}-2^{k_{2}}\\right)+\\cdots+\\left(2^{n}-2^{k_{r}}\\right),\n$$\n\nwhere $0 \\leqslant k_{1}, k_{2}, \\ldots, k_{r}<n$. Suppose first that two of the terms in the sum are the same, i.e., $k_{i}=k_{j}$ for some $i \\neq j$. If $k_{i}=k_{j}=n-1$, then we can simply remove these two terms to get a representation for\n\n$$\nN-2\\left(2^{n}-2^{n-1}\\right)=N-2^{n}\n$$\n\nas a sum of elements of $A_{n}$, which contradicts our choice of $N$. If $k_{i}=k_{j}=k<n-1$, replace the two terms by $2^{n}-2^{k+1}$, which is also an element of $A_{n}$, to get a representation for\n\n$$\nN-2\\left(2^{n}-2^{k}\\right)+2^{n}-2^{k+1}=N-2^{n} .\n$$\n\nThis is a contradiction once again. Therefore, all $k_{i}$ have to be distinct, which means that\n\n$$\n2^{k_{1}}+2^{k_{2}}+\\cdots+2^{k_{r}} \\leqslant 2^{0}+2^{1}+2^{2}+\\cdots+2^{n-1}=2^{n}-1 .\n$$\n\nOn the other hand, taking (1) modulo $2^{n}$, we find\n\n$$\n2^{k_{1}}+2^{k_{2}}+\\cdots+2^{k_{r}} \\equiv-N \\equiv-1 \\quad\\left(\\bmod 2^{n}\\right) .\n$$\n\nThus we must have $2^{k_{1}}+2^{k_{2}}+\\cdots+2^{k_{r}}=2^{n}-1$, which is only possible if each element of $\\{0,1, \\ldots, n-1\\}$ occurs as one of the $k_{i}$. This gives us\n\n$$\nN=n 2^{n}-\\left(2^{0}+2^{1}+\\cdots+2^{n-1}\\right)=(n-1) 2^{n}+1 .\n$$\n\nIn particular, this means that $(n-2) 2^{n}+1$ cannot be represented as a sum of elements of $A_{n}$."
  },
  {
    "id": "fimo_2014_number_theory_p2",
    "enunciado": "Determine all pairs $(x, y)$ of positive integers such that\n\n$$\n\\sqrt[3]{7 x^{2}-13 x y+7 y^{2}}=|x-y|+1 .\n$$\n\nThe answer is that either $(x, y)=(1,1)$ or $\\{x, y\\}=\\left\\{m^{3}+m^{2}-2 m-1, m^{3}+2 m^{2}-m-1\\right\\}$ for some positive integer $m \\geqslant 2$.",
    "solucao": "Let $(x, y)$ be any pair of positive integers solving (1). We shall prove that it appears in the list displayed above. The converse assertion that all these pairs do actually satisfy (1) either may be checked directly by means of a somewhat laborious calculation, or it can be seen by going in reverse order through the displayed equations that follow.\n\nIn case $x=y$ the given equation reduces to $x^{2 / 3}=1$, which is equivalent to $x=1$, whereby he have found the first solution.\n\nTo find the solutions with $x \\neq y$ we may assume $x>y$ due to symmetry. Then the integer $n=x-y$ is positive and (1) may be rewritten as\n\n$$\n\\sqrt[3]{7(y+n)^{2}-13(y+n) y+7 y^{2}}=n+1\n$$\n\nRaising this to the third power and simplifying the result one obtains\n\n$$\ny^{2}+y n=n^{3}-4 n^{2}+3 n+1 .\n$$\n\nTo complete the square on the left hand side, we multiply by 4 and add $n^{2}$, thus getting\n\n$$\n(2 y+n)^{2}=4 n^{3}-15 n^{2}+12 n+4=(n-2)^{2}(4 n+1) .\n$$\n\nThis shows that the cases $n=1$ and $n=2$ are impossible, whence $n>2$, and $4 n+1$ is the square of the rational number $\\frac{2 y+n}{n-2}$. Consequently, it has to be a perfect square, and, since it is odd as well, there has to exist some nonnegative integer $m$ such that $4 n+1=(2 m+1)^{2}$, i.e.\n\n$$\nn=m^{2}+m .\n$$\n\nNotice that $n>2$ entails $m \\geqslant 2$. Substituting the value of $n$ just found into the previous displayed equation we arrive at\n\n$$\n\\left(2 y+m^{2}+m\\right)^{2}=\\left(m^{2}+m-2\\right)^{2}(2 m+1)^{2}=\\left(2 m^{3}+3 m^{2}-3 m-2\\right)^{2} .\n$$\n\nExtracting square roots and taking $2 m^{3}+3 m^{2}-3 m-2=(m-1)\\left(2 m^{2}+5 m+2\\right)>0$ into account we derive $2 y+m^{2}+m=2 m^{3}+3 m^{2}-3 m-2$, which in turn yields\n\n$$\ny=m^{3}+m^{2}-2 m-1 .\n$$\n\nNotice that $m \\geqslant 2$ implies that $y=\\left(m^{3}-1\\right)+(m-2) m$ is indeed positive, as it should be. In view of $x=y+n=y+m^{2}+m$ it also follows that\n\n$$\nx=m^{3}+2 m^{2}-m-1,\n$$\n\nand that this integer is positive as well."
  },
  {
    "id": "fimo_2014_number_theory_p3",
    "enunciado": "A coin is called a Cape Town coin if its value is $1 / n$ for some positive integer $n$. Given a collection of Cape Town coins of total value at most $99+\\frac{1}{2}$, prove that it is possible to split this collection into at most 100 groups each of total value at most 1.",
    "solucao": "We will show that for every positive integer $N$ any collection of Cape Town coins of total value at most $N-\\frac{1}{2}$ can be split into $N$ groups each of total value at most 1 . The problem statement is a particular case for $N=100$.\n\nWe start with some preparations. If several given coins together have a total value also of the form $\\frac{1}{k}$ for a positive integer $k$, then we may merge them into one new coin. Clearly, if the resulting collection can be split in the required way then the initial collection can also be split.\n\nAfter each such merging, the total number of coins decreases, thus at some moment we come to a situation when no more merging is possible. At this moment, for every even $k$ there is at most one coin of value $\\frac{1}{k}$ (otherwise two such coins may be merged), and for every odd $k>1$ there are at most $k-1$ coins of value $\\frac{1}{k}$ (otherwise $k$ such coins may also be merged).\n\nNow, clearly, each coin of value 1 should form a single group; if there are $d$ such coins then we may remove them from the collection and replace $N$ by $N-d$. So from now on we may assume that there are no coins of value 1.\n\nFinally, we may split all the coins in the following way. For each $k=1,2, \\ldots, N$ we put all the coins of values $\\frac{1}{2 k-1}$ and $\\frac{1}{2 k}$ into a group $G_{k}$; the total value of $G_{k}$ does not exceed\n\n$$\n(2 k-2) \\cdot \\frac{1}{2 k-1}+\\frac{1}{2 k}<1 .\n$$\n\nIt remains to distribute the \"small\" coins of values which are less than $\\frac{1}{2 N}$; we will add them one by one. In each step, take any remaining small coin. The total value of coins in the groups at this moment is at most $N-\\frac{1}{2}$, so there exists a group of total value at most $\\frac{1}{N}\\left(N-\\frac{1}{2}\\right)=1-\\frac{1}{2 N}$; thus it is possible to put our small coin into this group. Acting so, we will finally distribute all the coins."
  },
  {
    "id": "fimo_2014_number_theory_p4",
    "enunciado": "Let $n>1$ be a given integer. Prove that infinitely many terms of the sequence $\\left(a_{k}\\right)_{k \\geqslant 1}$, defined by\n\n$$\na_{k}=\\left\\lfloor\\frac{n^{k}}{k}\\right\\rfloor,\n$$\n\nare odd. (For a real number $x,\\lfloor x\\rfloor$ denotes the largest integer not exceeding $x$.)",
    "solucao": "If $n$ is odd, let $k=n^{m}$ for $m=1,2, \\ldots$. Then $a_{k}=n^{n^{m}-m}$, which is odd for each $m$.\n\nHenceforth, assume that $n$ is even, say $n=2 t$ for some integer $t \\geqslant 1$. Then, for any $m \\geqslant 2$, the integer $n^{2^{m}}-2^{m}=2^{m}\\left(2^{2^{m}-m} \\cdot t^{2^{m}}-1\\right)$ has an odd prime divisor $p$, since $2^{m}-m>1$. Then, for $k=p \\cdot 2^{m}$, we have\n\n$$\nn^{k}=\\left(n^{2^{m}}\\right)^{p} \\equiv\\left(2^{m}\\right)^{p}=\\left(2^{p}\\right)^{m} \\equiv 2^{m},\n$$\n\nwhere the congruences are taken modulo $p$ (recall that $2^{p} \\equiv 2(\\bmod p)$, by Fermat's little theorem). Also, from $n^{k}-2^{m}<n^{k}<n^{k}+2^{m}(p-1)$, we see that the fraction $\\frac{n^{k}}{k}$ lies strictly between the consecutive integers $\\frac{n^{k}-2^{m}}{p \\cdot 2^{m}}$ and $\\frac{n^{k}+2^{m}(p-1)}{p \\cdot 2^{m}}$, which gives\n\n$$\n\\left\\lfloor\\frac{n^{k}}{k}\\right\\rfloor=\\frac{n^{k}-2^{m}}{p \\cdot 2^{m}} .\n$$\n\nWe finally observe that $\\frac{n^{k}-2^{m}}{p \\cdot 2^{m}}=\\frac{\\frac{n^{k}}{2^{m}}-1}{p}$ is an odd integer, since the integer $\\frac{n^{k}}{2^{m}}-1$ is odd (recall that $k>m$ ). Note that for different values of $m$, we get different values of $k$, due to the different powers of 2 in the prime factorisation of $k$."
  },
  {
    "id": "fimo_2014_number_theory_p5",
    "enunciado": "Find all triples $(p, x, y)$ consisting of a prime number $p$ and two positive integers $x$ and $y$ such that $x^{p-1}+y$ and $x+y^{p-1}$ are both powers of $p$.\n\nThe final answer is $(p, x, y) \\in\\{(3,2,5),(3,5,2)\\} \\cup\\left\\{\\left(2, n, 2^{k}-n\\right) \\mid 0<n<2^{k}\\right\\}$.",
    "solucao": "For $p=2$, clearly all pairs of two positive integers $x$ and $y$ whose sum is a power of 2 satisfy the condition. Thus we assume in the following that $p>2$, and we let $a$ and $b$ be positive integers such that $x^{p-1}+y=p^{a}$ and $x+y^{p-1}=p^{b}$. Assume further, without loss of generality, that $x \\leqslant y$, so that $p^{a}=x^{p-1}+y \\leqslant x+y^{p-1}=p^{b}$, which means that $a \\leqslant b$ (and thus $\\left.p^{a} \\mid p^{b}\\right)$\n\nNow we have\n\n$$\np^{b}=y^{p-1}+x=\\left(p^{a}-x^{p-1}\\right)^{p-1}+x .\n$$\n\nWe take this equation modulo $p^{a}$ and take into account that $p-1$ is even, which gives us\n\n$$\n0 \\equiv x^{(p-1)^{2}}+x \\quad\\left(\\bmod p^{a}\\right) .\n$$\n\nIf $p \\mid x$, then $p^{a} \\mid x$, since $x^{(p-1)^{2}-1}+1$ is not divisible by $p$ in this case. However, this is impossible, since $x \\leqslant x^{p-1}<p^{a}$. Thus we know that $p \\nmid x$, which means that\n\n$$\np^{a} \\mid x^{(p-1)^{2}-1}+1=x^{p(p-2)}+1 .\n$$\n\nBy FERMAT's little theorem, $x^{(p-1)^{2}} \\equiv 1(\\bmod p)$, thus $p$ divides $x+1$. Let $p^{r}$ be the highest power of $p$ that divides $x+1$. By the binomial theorem, we have\n\n$$\nx^{p(p-2)}=\\sum_{k=0}^{p(p-2)}\\left(\\begin{array}{c}\np(p-2) \\\\\nk\n\\end{array}\\right)(-1)^{p(p-2)-k}(x+1)^{k} .\n$$\n\nExcept for the terms corresponding to $k=0, k=1$ and $k=2$, all terms in the sum are clearly divisible by $p^{3 r}$ and thus by $p^{r+2}$. The remaining terms are\n\n$$\n-\\frac{p(p-2)\\left(p^{2}-2 p-1\\right)}{2}(x+1)^{2},\n$$\n\nwhich is divisible by $p^{2 r+1}$ and thus also by $p^{r+2}$,\n\n$$\np(p-2)(x+1),\n$$\n\nwhich is divisible by $p^{r+1}$, but not $p^{r+2}$ by our choice of $r$, and the final term $-1$ corresponding to $k=0$. It follows that the highest power of $p$ that divides $x^{p(p-2)}+1$ is $p^{r+1}$.\n\nOn the other hand, we already know that $p^{a}$ divides $x^{p(p-2)}+1$, which means that $a \\leqslant r+1$. Moreover,\n\n$$\np^{r} \\leqslant x+1 \\leqslant x^{p-1}+y=p^{a} .\n$$\n\nHence we either have $a=r$ or $a=r+1$.\n\nIf $a=r$, then $x=y=1$ needs to hold in the inequality above, which is impossible for $p>2$. Thus $a=r+1$. Now since $p^{r} \\leqslant x+1$, we get\n\n$$\nx=\\frac{x^{2}+x}{x+1} \\leqslant \\frac{x^{p-1}+y}{x+1}=\\frac{p^{a}}{x+1} \\leqslant \\frac{p^{a}}{p^{r}}=p,\n$$\n\nso we must have $x=p-1$ for $p$ to divide $x+1$.\n\nIt follows that $r=1$ and $a=2$. If $p \\geqslant 5$, we obtain\n\n$$\np^{a}=x^{p-1}+y>(p-1)^{4}=\\left(p^{2}-2 p+1\\right)^{2}>(3 p)^{2}>p^{2}=p^{a},\n$$\n\na contradiction. So the only case that remains is $p=3$, and indeed $x=2$ and $y=p^{a}-x^{p-1}=5$ satisfy the conditions."
  },
  {
    "id": "fimo_2014_number_theory_p6",
    "enunciado": "Let $a_{1}<a_{2}<\\cdots<a_{n}$ be pairwise coprime positive integers with $a_{1}$ being prime and $a_{1} \\geqslant n+2$. On the segment $I=\\left[0, a_{1} a_{2} \\cdots a_{n}\\right]$ of the real line, mark all integers that are divisible by at least one of the numbers $a_{1}, \\ldots, a_{n}$. These points split $I$ into a number of smaller segments. Prove that the sum of the squares of the lengths of these segments is divisible by $a_{1}$.",
    "solucao": "Let $A=a_{1} \\cdots a_{n}$. Throughout the solution, all intervals will be nonempty and have integer end-points. For any interval $X$, the length of $X$ will be denoted by $|X|$.\n\nDefine the following two families of intervals:\n\n$$\n\\begin{aligned}\n& \\mathcal{S}=\\{[x, y]: x<y \\text { are consecutive marked points }\\} \\\\\n& \\mathcal{T}=\\{[x, y]: x<y \\text { are integers, } 0 \\leqslant x \\leqslant A-1, \\text { and no point is marked in }(x, y)\\}\n\\end{aligned}\n$$\n\nWe are interested in computing $\\sum_{X \\in \\mathcal{S}}|X|^{2} \\operatorname{modulo} a_{1}$.\n\nNote that the number $A$ is marked, so in the definition of $\\mathcal{T}$ the condition $y \\leqslant A$ is enforced without explicitly prescribing it.\n\nAssign weights to the intervals in $\\mathcal{T}$, depending only on their lengths. The weight of an arbitrary interval $Y \\in \\mathcal{T}$ will be $w(|Y|)$, where\n\n$$\nw(k)= \\begin{cases}1 & \\text { if } k=1 \\\\ 2 & \\text { if } k \\geqslant 2\\end{cases}\n$$\n\nConsider an arbitrary interval $X \\in \\mathcal{S}$ and its sub-intervals $Y \\in \\mathcal{T}$. Clearly, $X$ has one sub-interval of length $|X|$, two sub-intervals of length $|X|-1$ and so on; in general $X$ has $|X|-d+1$ sub-intervals of length $d$ for every $d=1,2, \\ldots,|X|$. The sum of the weights of the sub-intervals of $X$ is\n\n$\\sum_{Y \\in \\mathcal{T}, Y \\subseteq X} w(|Y|)=\\sum_{d=1}^{|X|}(|X|-d+1) \\cdot w(d)=|X| \\cdot 1+((|X|-1)+(|X|-2)+\\cdots+1) \\cdot 2=|X|^{2}$.\n\nSince the intervals in $\\mathcal{S}$ are non-overlapping, every interval $Y \\in \\mathcal{T}$ is a sub-interval of a single interval $X \\in \\mathcal{S}$. Therefore,\n\n$$\n\\sum_{X \\in \\mathcal{S}}|X|^{2}=\\sum_{X \\in \\mathcal{S}}\\left(\\sum_{Y \\in \\mathcal{T}, Y \\subseteq X} w(|Y|)\\right)=\\sum_{Y \\in \\mathcal{T}} w(|Y|)\n$$\n\nFor every $d=1,2, \\ldots, a_{1}$, we count how many intervals in $\\mathcal{T}$ are of length $d$. Notice that the multiples of $a_{1}$ are all marked, so the lengths of the intervals in $\\mathcal{S}$ and $\\mathcal{T}$ cannot exceed $a_{1}$. Let $x$ be an arbitrary integer with $0 \\leqslant x \\leqslant A-1$ and consider the interval $[x, x+d]$. Let $r_{1}$, $\\ldots, r_{n}$ be the remainders of $x$ modulo $a_{1}, \\ldots, a_{n}$, respectively. Since $a_{1}, \\ldots, a_{n}$ are pairwise coprime, the number $x$ is uniquely identified by the sequence $\\left(r_{1}, \\ldots, r_{n}\\right)$, due to the Chinese remainder theorem.\n\nFor every $i=1, \\ldots, n$, the property that the interval $(x, x+d)$ does not contain any multiple of $a_{i}$ is equivalent with $r_{i}+d \\leqslant a_{i}$, i.e. $r_{i} \\in\\left\\{0,1, \\ldots, a_{i}-d\\right\\}$, so there are $a_{i}-d+1$ choices for the number $r_{i}$ for each $i$. Therefore, the number of the remainder sequences $\\left(r_{1}, \\ldots, r_{n}\\right)$ that satisfy $[x, x+d] \\in \\mathcal{T}$ is precisely $\\left(a_{1}+1-d\\right) \\cdots\\left(a_{n}+1-d\\right)$. Denote this product by $f(d)$. Now we can group the last sum in (1) by length of the intervals. As we have seen, for every $d=1, \\ldots, a_{1}$ there are $f(d)$ intervals $Y \\in \\mathcal{T}$ with $|Y|=d$. Therefore, (1) can be continued as\n\n$$\n\\sum_{X \\in \\mathcal{S}}|X|^{2}=\\sum_{Y \\in \\mathcal{T}} w(|Y|)=\\sum_{d=1}^{a_{1}} f(d) \\cdot w(d)=2 \\sum_{d=1}^{a_{1}} f(d)-f(1)\n$$\n\nHaving the formula (2), the solution can be finished using the following well-known fact: Lemma. If $p$ is a prime, $F(x)$ is a polynomial with integer coefficients, and $\\operatorname{deg} F \\leqslant p-2$, then $\\sum_{x=1}^{p} F(x)$ is divisible by $p$\n\nProof. Obviously, it is sufficient to prove the lemma for monomials of the form $x^{k}$ with $k \\leqslant p-2$. Apply induction on $k$. If $k=0$ then $F=1$, and the statement is trivial.\n\nLet $1 \\leqslant k \\leqslant p-2$, and assume that the lemma is proved for all lower degrees. Then\n\n$$\n\\begin{aligned}\n0 & \\equiv p^{k+1}=\\sum_{x=1}^{p}\\left(x^{k+1}-(x-1)^{k+1}\\right)=\\sum_{x=1}^{p}\\left(\\sum_{\\ell=0}^{k}(-1)^{k-\\ell}\\left(\\begin{array}{c}\nk+1 \\\\\n\\ell\n\\end{array}\\right) x^{\\ell}\\right) \\\\\n& =(k+1) \\sum_{x=1}^{p} x^{k}+\\sum_{\\ell=0}^{k-1}(-1)^{k-\\ell}\\left(\\begin{array}{c}\nk+1 \\\\\n\\ell\n\\end{array}\\right) \\sum_{x=1}^{p} x^{\\ell} \\equiv(k+1) \\sum_{x=1}^{p} x^{k} \\quad(\\bmod p)\n\\end{aligned}\n$$\n\nSince $0<k+1<p$, this proves $\\sum_{x=1}^{p} x^{k} \\equiv 0(\\bmod p)$.\n\nIn (2), by applying the lemma to the polynomial $f$ and the prime $a_{1}$, we obtain that $\\sum_{d=1}^{a_{1}} f(d)$ is divisible by $a_{1}$. The term $f(1)=a_{1} \\cdots a_{n}$ is also divisible by $a_{1}$; these two facts together prove that $\\sum_{X \\in \\mathcal{S}}|X|^{2}$ is divisible by $a_{1}$."
  },
  {
    "id": "fimo_2014_number_theory_p7",
    "enunciado": "Let $c \\geqslant 1$ be an integer. Define a sequence of positive integers by $a_{1}=c$ and\n\n$$\na_{n+1}=a_{n}^{3}-4 c \\cdot a_{n}^{2}+5 c^{2} \\cdot a_{n}+c\n$$\n\nfor all $n \\geqslant 1$. Prove that for each integer $n \\geqslant 2$ there exists a prime number $p$ dividing $a_{n}$ but none of the numbers $a_{1}, \\ldots, a_{n-1}$.",
    "solucao": "Let us define $x_{0}=0$ and $x_{n}=a_{n} / c$ for all integers $n \\geqslant 1$. It is easy to see that the sequence $\\left(x_{n}\\right)$ thus obtained obeys the recursive law\n\n$$\nx_{n+1}=c^{2}\\left(x_{n}^{3}-4 x_{n}^{2}+5 x_{n}\\right)+1\n$$\n\nfor all integers $n \\geqslant 0$. In particular, all of its terms are positive integers; notice that $x_{1}=1$ and $x_{2}=2 c^{2}+1$. Since\n\n$$\nx_{n+1}=c^{2} x_{n}\\left(x_{n}-2\\right)^{2}+c^{2} x_{n}+1>x_{n}\n$$\n\nholds for all integers $n \\geqslant 0$, it is also strictly increasing. Since $x_{n+1}$ is by (1) coprime to $c$ for any $n \\geqslant 0$, it suffices to prove that for each $n \\geqslant 2$ there exists a prime number $p$ dividing $x_{n}$ but none of the numbers $x_{1}, \\ldots, x_{n-1}$. Let us begin by establishing three preliminary claims.\n\nClaim 1. If $i \\equiv j(\\bmod m)$ holds for some integers $i, j \\geqslant 0$ and $m \\geqslant 1$, then $x_{i} \\equiv x_{j}\\left(\\bmod x_{m}\\right)$ holds as well.\n\nProof. Evidently, it suffices to show $x_{i+m} \\equiv x_{i}\\left(\\bmod x_{m}\\right)$ for all integers $i \\geqslant 0$ and $m \\geqslant 1$. For this purpose we may argue for fixed $m$ by induction on $i$ using $x_{0}=0$ in the base case $i=0$. Now, if we have $x_{i+m} \\equiv x_{i}\\left(\\bmod x_{m}\\right)$ for some integer $i$, then the recursive equation (1) yields\n\n$$\nx_{i+m+1} \\equiv c^{2}\\left(x_{i+m}^{3}-4 x_{i+m}^{2}+5 x_{i+m}\\right)+1 \\equiv c^{2}\\left(x_{i}^{3}-4 x_{i}^{2}+5 x_{i}\\right)+1 \\equiv x_{i+1} \\quad\\left(\\bmod x_{m}\\right),\n$$\n\nwhich completes the induction.\n\nClaim 2. If the integers $i, j \\geqslant 2$ and $m \\geqslant 1$ satisfy $i \\equiv j(\\bmod m)$, then $x_{i} \\equiv x_{j}\\left(\\bmod x_{m}^{2}\\right)$ holds as well.\n\nProof. Again it suffices to prove $x_{i+m} \\equiv x_{i}\\left(\\bmod x_{m}^{2}\\right)$ for all integers $i \\geqslant 2$ and $m \\geqslant 1$. As above, we proceed for fixed $m$ by induction on $i$. The induction step is again easy using (1), but this time the base case $i=2$ requires some calculation. Set $L=5 c^{2}$. By (1) we have $x_{m+1} \\equiv L x_{m}+1\\left(\\bmod x_{m}^{2}\\right)$, and hence\n\n$$\n\\begin{aligned}\nx_{m+1}^{3}-4 x_{m+1}^{2}+5 x_{m+1} & \\equiv\\left(L x_{m}+1\\right)^{3}-4\\left(L x_{m}+1\\right)^{2}+5\\left(L x_{m}+1\\right) \\\\\n& \\equiv\\left(3 L x_{m}+1\\right)-4\\left(2 L x_{m}+1\\right)+5\\left(L x_{m}+1\\right) \\equiv 2 \\quad\\left(\\bmod x_{m}^{2}\\right),\n\\end{aligned}\n$$\n\nwhich in turn gives indeed $x_{m+2} \\equiv 2 c^{2}+1 \\equiv x_{2}\\left(\\bmod x_{m}^{2}\\right)$\n\nClaim 3. For each integer $n \\geqslant 2$, we have $x_{n}>x_{1} \\cdot x_{2} \\cdots x_{n-2}$.\n\nProof. The cases $n=2$ and $n=3$ are clear. Arguing inductively, we assume now that the claim holds for some $n \\geqslant 3$. Recall that $x_{2} \\geqslant 3$, so by monotonicity and (2) we get $x_{n} \\geqslant x_{3} \\geqslant x_{2}\\left(x_{2}-2\\right)^{2}+x_{2}+1 \\geqslant 7$. It follows that\n\n$$\nx_{n+1}>x_{n}^{3}-4 x_{n}^{2}+5 x_{n}>7 x_{n}^{2}-4 x_{n}^{2}>x_{n}^{2}>x_{n} x_{n-1},\n$$\n\nwhich by the induction hypothesis yields $x_{n+1}>x_{1} \\cdot x_{2} \\cdots x_{n-1}$, as desired. Now we direct our attention to the problem itself: let any integer $n \\geqslant 2$ be given. By Claim 3 there exists a prime number $p$ appearing with a higher exponent in the prime factorisation of $x_{n}$ than in the prime factorisation of $x_{1} \\cdots x_{n-2}$. In particular, $p \\mid x_{n}$, and it suffices to prove that $p$ divides none of $x_{1}, \\ldots, x_{n-1}$.\n\nOtherwise let $k \\in\\{1, \\ldots, n-1\\}$ be minimal such that $p$ divides $x_{k}$. Since $x_{n-1}$ and $x_{n}$ are coprime by (1) and $x_{1}=1$, we actually have $2 \\leqslant k \\leqslant n-2$. Write $n=q k+r$ with some integers $q \\geqslant 0$ and $0 \\leqslant r<k$. By Claim 1 we have $x_{n} \\equiv x_{r}\\left(\\bmod x_{k}\\right)$, whence $p \\mid x_{r}$. Due to the minimality of $k$ this entails $r=0$, i.e. $k \\mid n$.\n\nThus from Claim 2 we infer\n\n$$\nx_{n} \\equiv x_{k} \\quad\\left(\\bmod x_{k}^{2}\\right) .\n$$\n\nNow let $\\alpha \\geqslant 1$ be maximal with the property $p^{\\alpha} \\mid x_{k}$. Then $x_{k}^{2}$ is divisible by $p^{\\alpha+1}$ and by our choice of $p$ so is $x_{n}$. So by the previous congruence $x_{k}$ is a multiple of $p^{\\alpha+1}$ as well, contrary to our choice of $\\alpha$. This is the final contradiction concluding the solution."
  },
  {
    "id": "fimo_2014_number_theory_p8",
    "enunciado": "For every real number $x$, let $\\|x\\|$ denote the distance between $x$ and the nearest integer. Prove that for every pair $(a, b)$ of positive integers there exist an odd prime $p$ and a positive integer $k$ satisfying\n\n$$\n\\left\\|\\frac{a}{p^{k}}\\right\\|+\\left\\|\\frac{b}{p^{k}}\\right\\|+\\left\\|\\frac{a+b}{p^{k}}\\right\\|=1 .\n$$",
    "solucao": "Notice first that $\\left\\lfloor x+\\frac{1}{2}\\right\\rfloor$ is an integer nearest to $x$, so $\\left.\\|x\\|=\\| x+\\frac{1}{2}\\right\\rfloor-x \\mid$. Thus we have\n\n$$\n\\left\\lfloor x+\\frac{1}{2}\\right\\rfloor=x \\pm\\|x\\| .\n$$\n\nFor every rational number $r$ and every prime number $p$, denote by $v_{p}(r)$ the exponent of $p$ in the prime factorisation of $r$. Recall the notation $(2 n-1)$ !! for the product of all odd positive integers not exceeding $2 n-1$, i.e., $(2 n-1) ! !=1 \\cdot 3 \\cdot(2 n-1)$.\n\nLemma. For every positive integer $n$ and every odd prime $p$, we have\n\n$$\nv_{p}((2 n-1) ! !)=\\sum_{k=1}^{\\infty}\\left\\lfloor\\frac{n}{p^{k}}+\\frac{1}{2}\\right\\rfloor .\n$$\n\nProof. For every positive integer $k$, let us count the multiples of $p^{k}$ among the factors $1,3, \\ldots$, $2 n-1$. If $\\ell$ is an arbitrary integer, the number $(2 \\ell-1) p^{k}$ is listed above if and only if\n\n$$\n0<(2 \\ell-1) p^{k} \\leqslant 2 n \\Longleftrightarrow \\frac{1}{2}<\\ell \\leqslant \\frac{n}{p^{k}}+\\frac{1}{2} \\Longleftrightarrow 1 \\leqslant \\ell \\leqslant\\left\\lfloor\\frac{n}{p^{k}}+\\frac{1}{2}\\right\\rfloor .\n$$\n\nHence, the number of multiples of $p^{k}$ among the factors is precisely $m_{k}=\\left\\lfloor\\frac{n}{p^{k}}+\\frac{1}{2}\\right\\rfloor$. Thus we obtain\n\n$$\nv_{p}((2 n-1) ! !)=\\sum_{i=1}^{n} v_{p}(2 i-1)=\\sum_{i=1}^{n} \\sum_{k=1}^{v_{p}(2 i-1)} 1=\\sum_{k=1}^{\\infty} \\sum_{\\ell=1}^{m_{k}} 1=\\sum_{k=1}^{\\infty}\\left\\lfloor\\frac{n}{p^{k}}+\\frac{1}{2}\\right\\rfloor .\n$$\n\nIn order to prove the problem statement, consider the rational number\n\n$$\nN=\\frac{(2 a+2 b-1) ! !}{(2 a-1) ! ! \\cdot(2 b-1) ! !}=\\frac{(2 a+1)(2 a+3) \\cdots(2 a+2 b-1)}{1 \\cdot 3 \\cdot(2 b-1)} .\n$$\n\nObviously, $N>1$, so there exists a prime $p$ with $v_{p}(N)>0$. Since $N$ is a fraction of two odd numbers, $p$ is odd.\n\nBy our lemma,\n\n$$\n0<v_{p}(N)=\\sum_{k=1}^{\\infty}\\left(\\left\\lfloor\\frac{a+b}{p^{k}}+\\frac{1}{2}\\right\\rfloor-\\left\\lfloor\\frac{a}{p^{k}}+\\frac{1}{2}\\right\\rfloor-\\left\\lfloor\\frac{b}{p^{k}}+\\frac{1}{2}\\right\\rfloor\\right) .\n$$\n\nTherefore, there exists some positive integer $k$ such that the integer number\n\n$$\nd_{k}=\\left\\lfloor\\frac{a+b}{p^{k}}+\\frac{1}{2}\\right\\rfloor-\\left\\lfloor\\frac{a}{p^{k}}+\\frac{1}{2}\\right\\rfloor-\\left\\lfloor\\frac{b}{p^{k}}+\\frac{1}{2}\\right\\rfloor\n$$\n\nis positive, so $d_{k} \\geqslant 1$. By $(2)$ we have\n\n$$\n1 \\leqslant d_{k}=\\frac{a+b}{p^{k}}-\\frac{a}{p^{k}}-\\frac{b}{p^{k}} \\pm\\left\\|\\frac{a+b}{p^{k}}\\right\\| \\pm\\left\\|\\frac{a}{p^{k}}\\right\\| \\pm\\left\\|\\frac{b}{p^{k}}\\right\\|=\\pm\\left\\|\\frac{a+b}{p^{k}}\\right\\| \\pm\\left\\|\\frac{a}{p^{k}}\\right\\| \\pm\\left\\|\\frac{b}{p^{k}}\\right\\| .\n$$\n\nSince $\\|x\\|<\\frac{1}{2}$ for every rational $x$ with odd denominator, the relation (3) can only be satisfied if all three signs on the right-hand side are positive and $d_{k}=1$. Thus we get\n\n$$\n\\left\\|\\frac{a}{p^{k}}\\right\\|+\\left\\|\\frac{b}{p^{k}}\\right\\|+\\left\\|\\frac{a+b}{p^{k}}\\right\\|=d_{k}=1,\n$$\n\nas required."
  },
  {
    "id": "fimo_2015_algebra_p1",
    "enunciado": "Suppose that a sequence $a_{1}, a_{2}, \\ldots$ of positive real numbers satisfies\n\n$$\na_{k+1} \\geqslant \\frac{k a_{k}}{a_{k}^{2}+(k-1)}\n$$\n\nfor every positive integer $k$. Prove that $a_{1}+a_{2}+\\cdots+a_{n} \\geqslant n$ for every $n \\geqslant 2$.",
    "solucao": "From the constraint (1), it can be seen that\n\n$$\n\\frac{k}{a_{k+1}} \\leqslant \\frac{a_{k}^{2}+(k-1)}{a_{k}}=a_{k}+\\frac{k-1}{a_{k}},\n$$\n\nand so\n\n$$\na_{k} \\geqslant \\frac{k}{a_{k+1}}-\\frac{k-1}{a_{k}} .\n$$\n\nSumming up the above inequality for $k=1, \\ldots, m$, we obtain\n\n$$\na_{1}+a_{2}+\\cdots+a_{m} \\geqslant\\left(\\frac{1}{a_{2}}-\\frac{0}{a_{1}}\\right)+\\left(\\frac{2}{a_{3}}-\\frac{1}{a_{2}}\\right)+\\cdots+\\left(\\frac{m}{a_{m+1}}-\\frac{m-1}{a_{m}}\\right)=\\frac{m}{a_{m+1}} .\n$$\n\nNow we prove the problem statement by induction on $n$. The case $n=2$ can be done by applying (1) to $k=1$ :\n\n$$\na_{1}+a_{2} \\geqslant a_{1}+\\frac{1}{a_{1}} \\geqslant 2 .\n$$\n\nFor the induction step, assume that the statement is true for some $n \\geqslant 2$. If $a_{n+1} \\geqslant 1$, then the induction hypothesis yields\n\n$$\n\\left(a_{1}+\\cdots+a_{n}\\right)+a_{n+1} \\geqslant n+1 .\n$$\n\nOtherwise, if $a_{n+1}<1$ then apply (2) as\n\n$$\n\\left(a_{1}+\\cdots+a_{n}\\right)+a_{n+1} \\geqslant \\frac{n}{a_{n+1}}+a_{n+1}=\\frac{n-1}{a_{n+1}}+\\left(\\frac{1}{a_{n+1}}+a_{n+1}\\right)>(n-1)+2 .\n$$\n\nThat completes the solution."
  },
  {
    "id": "fimo_2015_algebra_p2",
    "enunciado": "Determine all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ with the property that\n\n$$\nf(x-f(y))=f(f(x))-f(y)-1\n$$\n\nholds for all $x, y \\in \\mathbb{Z}$.\n\nThe final answer is that there are two such functions, namely the constant function $x \\mapsto-1$ and the successor function $x \\mapsto x+1$.",
    "solucao": "It is immediately checked that both functions mentioned in the answer are as desired.\n\nNow let $f$ denote any function satisfying (1) for all $x, y \\in \\mathbb{Z}$. Substituting $x=0$ and $y=f(0)$ into $(1)$ we learn that the number $z=-f(f(0))$ satisfies $f(z)=-1$. So by plugging $y=z$ into (1) we deduce that\n\n$$\nf(x+1)=f(f(x))\n$$\n\nholds for all $x \\in \\mathbb{Z}$. Thereby (1) simplifies to\n\n$$\nf(x-f(y))=f(x+1)-f(y)-1 .\n$$\n\nWe now work towards showing that $f$ is linear by contemplating the difference $f(x+1)-f(x)$ for any $x \\in \\mathbb{Z}$. By applying (3) with $y=x$ and (2) in this order, we obtain\n\n$$\nf(x+1)-f(x)=f(x-f(x))+1=f(f(x-1-f(x)))+1 .\n$$\n\nSince (3) shows $f(x-1-f(x))=f(x)-f(x)-1=-1$, this simplifies to\n\n$$\nf(x+1)=f(x)+A,\n$$\n\nwhere $A=f(-1)+1$ is some absolute constant.\n\nNow a standard induction in both directions reveals that $f$ is indeed linear and that in fact we have $f(x)=A x+B$ for all $x \\in \\mathbb{Z}$, where $B=f(0)$. Substituting this into (2) we obtain that\n\n$$\nA x+(A+B)=A^{2} x+(A B+B)\n$$\n\nholds for all $x \\in \\mathbb{Z}$; applying this to $x=0$ and $x=1$ we infer $A+B=A B+B$ and $A^{2}=A$. The second equation leads to $A=0$ or $A=1$. In case $A=1$, the first equation gives $B=1$, meaning that $f$ has to be the successor function. If $A=0$, then $f$ is constant and (1) shows that its constant value has to be $-1$. Thereby the solution is complete."
  },
  {
    "id": "fimo_2015_algebra_p3",
    "enunciado": "Let $n$ be a fixed positive integer. Find the maximum possible value of\n\n$$\n\\sum_{1 \\leqslant r<s \\leqslant 2 n}(s-r-n) x_{r} x_{s},\n$$\n\nwhere $-1 \\leqslant x_{i} \\leqslant 1$ for all $i=1,2, \\ldots, 2 n$.\n\nThe final answer is $n(n-1)$.",
    "solucao": "Let $Z$ be the expression to be maximized. Since this expression is linear in every variable $x_{i}$ and $-1 \\leqslant x_{i} \\leqslant 1$, the maximum of $Z$ will be achieved when $x_{i}=-1$ or 1 . Therefore, it suffices to consider only the case when $x_{i} \\in\\{-1,1\\}$ for all $i=1,2, \\ldots, 2 n$.\n\nFor $i=1,2, \\ldots, 2 n$, we introduce auxiliary variables\n\n$$\ny_{i}=\\sum_{r=1}^{i} x_{r}-\\sum_{r=i+1}^{2 n} x_{r} .\n$$\n\nTaking squares of both sides, we have\n\n$$\n\\begin{aligned}\ny_{i}^{2} & =\\sum_{r=1}^{2 n} x_{r}^{2}+\\sum_{r<s \\leqslant i} 2 x_{r} x_{s}+\\sum_{i<r<s} 2 x_{r} x_{s}-\\sum_{r \\leqslant i<s} 2 x_{r} x_{s} \\\\\n& =2 n+\\sum_{r<s \\leqslant i} 2 x_{r} x_{s}+\\sum_{i<r<s} 2 x_{r} x_{s}-\\sum_{r \\leqslant i<s} 2 x_{r} x_{s},\n\\end{aligned}\n$$\n\nwhere the last equality follows from the fact that $x_{r} \\in\\{-1,1\\}$. Notice that for every $r<s$, the coefficient of $x_{r} x_{s}$ in (1) is 2 for each $i=1, \\ldots, r-1, s, \\ldots, 2 n$, and this coefficient is $-2$ for each $i=r, \\ldots, s-1$. This implies that the coefficient of $x_{r} x_{s}$ in $\\sum_{i=1}^{2 n} y_{i}^{2}$ is $2(2 n-s+r)-2(s-r)=$ $4(n-s+r)$. Therefore, summing (1) for $i=1,2, \\ldots, 2 n$ yields\n\n$$\n\\sum_{i=1}^{2 n} y_{i}^{2}=4 n^{2}+\\sum_{1 \\leqslant r<s \\leqslant 2 n} 4(n-s+r) x_{r} x_{s}=4 n^{2}-4 Z .\n$$\n\nHence, it suffices to find the minimum of the left-hand side.\n\nSince $x_{r} \\in\\{-1,1\\}$, we see that $y_{i}$ is an even integer. In addition, $y_{i}-y_{i-1}=2 x_{i}=\\pm 2$, and so $y_{i-1}$ and $y_{i}$ are consecutive even integers for every $i=2,3, \\ldots, 2 n$. It follows that $y_{i-1}^{2}+y_{i}^{2} \\geqslant 4$, which implies\n\n$$\n\\sum_{i=1}^{2 n} y_{i}^{2}=\\sum_{j=1}^{n}\\left(y_{2 j-1}^{2}+y_{2 j}^{2}\\right) \\geqslant 4 n .\n$$\n\nCombining (2) and (3), we get\n\n$$\n4 n \\leqslant \\sum_{i=1}^{2 n} y_{i}^{2}=4 n^{2}-4 Z\n$$\n\nHence, $Z \\leqslant n(n-1)$.\n\nIf we set $x_{i}=1$ for odd indices $i$ and $x_{i}=-1$ for even indices $i$, then we obtain equality in (3) (and thus in (4)). Therefore, the maximum possible value of $Z$ is $n(n-1)$, as desired."
  },
  {
    "id": "fimo_2015_algebra_p4",
    "enunciado": "Find all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ satisfying the equation\n\n$$\nf(x+f(x+y))+f(x y)=x+f(x+y)+y f(x)\n$$\n\nfor all real numbers $x$ and $y$.\n\nThe final answer is that there are two such functions, namely the identity function and $x \\mapsto 2-x$.",
    "solucao": "Clearly, each of the functions $x \\mapsto x$ and $x \\mapsto 2-x$ satisfies (1). It suffices now to show that they are the only solutions to the problem.\n\nSuppose that $f$ is any function satisfying (1). Then setting $y=1$ in (1), we obtain\n\n$$\nf(x+f(x+1))=x+f(x+1)\n$$\n\nin other words, $x+f(x+1)$ is a fixed point of $f$ for every $x \\in \\mathbb{R}$.\n\nWe distinguish two cases regarding the value of $f(0)$.\n\nCase 1. $f(0) \\neq 0$.\n\nBy letting $x=0$ in (1), we have\n\n$$\nf(f(y))+f(0)=f(y)+y f(0) .\n$$\n\nSo, if $y_{0}$ is a fixed point of $f$, then substituting $y=y_{0}$ in the above equation we get $y_{0}=1$. Thus, it follows from (2) that $x+f(x+1)=1$ for all $x \\in \\mathbb{R}$. That is, $f(x)=2-x$ for all $x \\in \\mathbb{R}$.\n\nCase 2. $f(0)=0$.\n\nBy letting $y=0$ and replacing $x$ by $x+1$ in (1), we obtain\n\n$$\nf(x+f(x+1)+1)=x+f(x+1)+1 .\n$$\n\nFrom (1), the substitution $x=1$ yields\n\n$$\nf(1+f(y+1))+f(y)=1+f(y+1)+y f(1) .\n$$\n\nBy plugging $x=-1$ into (2), we see that $f(-1)=-1$. We then plug $y=-1$ into (4) and deduce that $f(1)=1$. Hence, (4) reduces to\n\n$$\nf(1+f(y+1))+f(y)=1+f(y+1)+y .\n$$\n\nAccordingly, if both $y_{0}$ and $y_{0}+1$ are fixed points of $f$, then so is $y_{0}+2$. Thus, it follows from (2) and (3) that $x+f(x+1)+2$ is a fixed point of $f$ for every $x \\in \\mathbb{R}$; i.e.,\n\n$$\nf(x+f(x+1)+2)=x+f(x+1)+2 .\n$$\n\nReplacing $x$ by $x-2$ simplifies the above equation to\n\n$$\nf(x+f(x-1))=x+f(x-1) .\n$$\n\nOn the other hand, we set $y=-1$ in (1) and get\n\n$$\nf(x+f(x-1))=x+f(x-1)-f(x)-f(-x) .\n$$\n\nTherefore, $f(-x)=-f(x)$ for all $x \\in \\mathbb{R}$.\n\nFinally, we substitute $(x, y)$ by $(-1,-y)$ in $(1)$ and use the fact that $f(-1)=-1$ to get\n\n$$\nf(-1+f(-y-1))+f(y)=-1+f(-y-1)+y .\n$$\n\nSince $f$ is an odd function, the above equation becomes\n\n$$\n-f(1+f(y+1))+f(y)=-1-f(y+1)+y .\n$$\n\nBy adding this equation to (5), we conclude that $f(y)=y$ for all $y \\in \\mathbb{R}$."
  },
  {
    "id": "fimo_2015_algebra_p5",
    "enunciado": "Let $2 \\mathbb{Z}+1$ denote the set of odd integers. Find all functions $f: \\mathbb{Z} \\rightarrow 2 \\mathbb{Z}+1$ satisfying\n\n$$\nf(x+f(x)+y)+f(x-f(x)-y)=f(x+y)+f(x-y)\n$$\n\nfor every $x, y \\in \\mathbb{Z}$.\n\nThe final answer is that fix an odd positive integer $d$, an integer $k$, and odd integers $\\ell_{0}, \\ell_{1}, \\ldots, \\ell_{d-1}$. Then the function defined as\n\n$$\nf(m d+i)=2 k m d+\\ell_{i} d \\quad(m \\in \\mathbb{Z}, \\quad i=0,1, \\ldots, d-1)\n$$\n\nsatisfies the problem requirements, and these are all such functions.",
    "solucao": "Throughout the solution, all functions are assumed to map integers to integers.\n\nFor any function $g$ and any nonzero integer $t$, define\n\n$$\n\\Delta_{t} g(x)=g(x+t)-g(x) .\n$$\n\nFor any nonzero integers $a$ and $b$, notice that $\\Delta_{a} \\Delta_{b} g=\\Delta_{b} \\Delta_{a} g$. Moreover, if $\\Delta_{a} g=0$ and $\\Delta_{b} g=0$, then $\\Delta_{a+b} g=0$ and $\\Delta_{a t} g=0$ for all nonzero integers $t$. We say that $g$ is $t$-quasiperiodic if $\\Delta_{t} g$ is a constant function (in other words, if $\\Delta_{1} \\Delta_{t} g=0$, or $\\Delta_{1} g$ is $t$-periodic). In this case, we call $t$ a quasi-period of $g$. We say that $g$ is quasi-periodic if it is $t$-quasi-periodic for some nonzero integer $t$.\n\nNotice that a quasi-period of $g$ is a period of $\\Delta_{1} g$. So if $g$ is quasi-periodic, then its minimal positive quasi-period $t$ divides all its quasi-periods.\n\nWe now assume that $f$ satisfies (1). First, by setting $a=x+y$, the problem condition can be rewritten as\n\n$$\n\\Delta_{f(x)} f(a)=\\Delta_{f(x)} f(2 x-a-f(x)) \\quad \\text { for all } x, a \\in \\mathbb{Z} .\n$$\n\nLet $b$ be an arbitrary integer and let $k$ be an arbitrary positive integer. Applying (2) when $a$ is substituted by $b, b+f(x), \\ldots, b+(k-1) f(x)$ and summing up all these equations, we get\n\n$$\n\\Delta_{k f(x)} f(b)=\\Delta_{k f(x)} f(2 x-b-k f(x)) .\n$$\n\nNotice that a similar argument works when $k$ is negative, so that\n\n$$\n\\Delta_{M} f(b)=\\Delta_{M} f(2 x-b-M) \\quad \\text { for any nonzero integer } M \\text { such that } f(x) \\mid M\n$$\n\nWe now prove two lemmas.\n\nLemma 1. For any distinct integers $x$ and $y$, the function $\\Delta_{\\operatorname{lcm}(f(x), f(y))} f$ is $2(y-x)$-periodic. Proof. Denote $L=\\operatorname{lcm}(f(x), f(y))$. Applying (3) twice, we obtain\n\n$$\n\\Delta_{L} f(b)=\\Delta_{L} f(2 x-b-L)=\\Delta_{L} f(2 y-(b+2(y-x))-L)=\\Delta_{L} f(b+2(y-x)) .\n$$\n\nThus, the function $\\Delta_{L} f$ is $2(y-x)$-periodic, as required.\n\nLemma 2. Let $g$ be a function. If $t$ and $s$ are nonzero integers such that $\\Delta_{t s} g=0$ and $\\Delta_{t} \\Delta_{t} g=0$, then $\\Delta_{t} g=0$\n\nProof. Assume, without loss of generality, that $s$ is positive. Let a be an arbitrary integer. Since $\\Delta_{t} \\Delta_{t} g=0$, we have\n\n$$\n\\Delta_{t} g(a)=\\Delta_{t} g(a+t)=\\cdots=\\Delta_{t} g(a+(s-1) t) .\n$$\n\nThe sum of these $s$ equal numbers is $\\Delta_{t s} g(a)=0$, so each of them is zero, as required. We now return to the solution.\n\nStep 1. We prove that $f$ is quasi-periodic.\n\nLet $Q=\\operatorname{lcm}(f(0), f(1))$. Applying Lemma 1, we get that the function $g=\\Delta_{Q} f$ is 2-periodic. In other words, the values of $g$ are constant on even numbers and on odd numbers separately. Moreover, setting $M=Q$ and $x=b=0$ in (3), we get $g(0)=g(-Q)$. Since 0 and $-Q$ have different parities, the value of $g$ at even numbers is the same as that at odd numbers. Thus, $g$ is constant, which means that $Q$ is a quasi-period of $f$.\n\nStep 2. Denote the minimal positive quasi-period of $f$ by $T$. We prove that $T \\mid f(x)$ for all integers $x$.\n\nSince an odd number $Q$ is a quasi-period of $f$, the number $T$ is also odd. Now suppose, to the contrary, that there exist an odd prime $p$, a positive integer $\\alpha$, and an integer $u$ such that $p^{\\alpha} \\mid T$ but $p^{\\alpha} \\nmid f(u)$. Setting $x=u$ and $y=0$ in $(1)$, we have $2 f(u)=f(u+f(u))+f(u-f(u))$, so $p^{\\alpha}$ does not divide the value of $f$ at one of the points $u+f(u)$ or $u-f(u)$. Denote this point by $v$.\n\nLet $L=\\operatorname{lcm}(f(u), f(v))$. Since $|u-v|=f(u)$, from Lemma 1 we get $\\Delta_{2 f(u)} \\Delta_{L} f=0$. Hence the function $\\Delta_{L} f$ is $2 f(u)$-periodic as well as $T$-periodic, so it is $\\operatorname{gcd}(T, 2 f(u))$-periodic, or $\\Delta_{\\operatorname{gcd}(T, 2 f(u))} \\Delta_{L} f=0$. Similarly, observe that the function $\\Delta_{\\operatorname{gcd}(T, 2 f(u))} f$ is $L$-periodic as well as $T$-periodic, so we may conclude that $\\Delta_{\\operatorname{gcd}(T, L)} \\Delta_{\\operatorname{gcd}(T, 2 f(u))} f=0$. Since $p^{\\alpha} \\nmid L$, both $\\operatorname{gcd}(T, 2 f(u))$ and $\\operatorname{gcd}(T, L)$ divide $T / p$. We thus obtain $\\Delta_{T / p} \\Delta_{T / p} f=0$, which yields\n\n$$\n\\Delta_{T / p} \\Delta_{T / p} \\Delta_{1} f=0 .\n$$\n\nSince $\\Delta_{T} \\Delta_{1} f=0$, we can apply Lemma 2 to the function $\\Delta_{1} f$, obtaining $\\Delta_{T / p} \\Delta_{1} f=0$. However, this means that $f$ is $(T / p)$-quasi-periodic, contradicting the minimality of $T$. Our claim is proved.\n\nStep 3. We describe all functions $f$.\n\nLet $d$ be the greatest common divisor of all values of $f$. Then $d$ is odd. By Step $2, d$ is a quasi-period of $f$, so that $\\Delta_{d} f$ is constant. Since the value of $\\Delta_{d} f$ is even and divisible by $d$, we may denote this constant by $2 d k$, where $k$ is an integer. Next, for all $i=0,1, \\ldots, d-1$, define $\\ell_{i}=f(i) / d$; notice that $\\ell_{i}$ is odd. Then\n\n$$\nf(m d+i)=\\Delta_{m d} f(i)+f(i)=2 k m d+\\ell_{i} d \\quad \\text { for all } m \\in \\mathbb{Z} \\quad \\text { and } i=0,1, \\ldots, d-1 .\n$$\n\nThis shows that all functions satisfying (1) are listed in the answer.\n\nIt remains to check that all such functions indeed satisfy (1). This is equivalent to checking (2), which is true because for every integer $x$, the value of $f(x)$ is divisible by $d$, so that $\\Delta_{f(x)} f$ is constant."
  },
  {
    "id": "fimo_2015_algebra_p6_1",
    "enunciado": "Let $n$ be a fixed integer with $n \\geqslant 2$. We say that two polynomials $P$ and $Q$ with real coefficients are block-similar if for each $i \\in\\{1,2, \\ldots, n\\}$ the sequences\n\n$$\n\\begin{aligned}\n& P(2015 i), P(2015 i-1), \\ldots, P(2015 i-2014) \\quad \\text { and } \\\\\n& Q(2015 i), Q(2015 i-1), \\ldots, Q(2015 i-2014)\n\\end{aligned}\n$$\n\nare permutations of each other.\n\nProve that there exist distinct block-similar polynomials of degree $n+1$.",
    "solucao": "For convenience, we set $k=2015=2 \\ell+1$.\n\nConsider the following polynomials of degree $n+1$ :\n\n$$\nP(x)=\\prod_{i=0}^{n}(x-i k) \\quad \\text { and } \\quad Q(x)=\\prod_{i=0}^{n}(x-i k-1) .\n$$\n\nSince $Q(x)=P(x-1)$ and $P(0)=P(k)=P(2 k)=\\cdots=P(n k)$, these polynomials are block-similar (and distinct)."
  },
  {
    "id": "fimo_2015_algebra_p6_2",
    "enunciado": "Let $n$ be a fixed integer with $n \\geqslant 2$. We say that two polynomials $P$ and $Q$ with real coefficients are block-similar if for each $i \\in\\{1,2, \\ldots, n\\}$ the sequences\n\n$$\n\\begin{aligned}\n& P(2015 i), P(2015 i-1), \\ldots, P(2015 i-2014) \\quad \\text { and } \\\\\n& Q(2015 i), Q(2015 i-1), \\ldots, Q(2015 i-2014)\n\\end{aligned}\n$$\n\nare permutations of each other.\n\nProve that there do not exist distinct block-similar polynomials of degree $n$.",
    "solucao": "For convenience, we set $k=2015=2 \\ell+1$.\n\nFor every polynomial $F(x)$ and every nonnegative integer $m$, define $\\Sigma_{F}(m)=$ $\\sum_{i=1}^{m} F(i)$; in particular, $\\Sigma_{F}(0)=0$. It is well-known that for every nonnegative integer $d$ the sum $\\sum_{i=1}^{m} i^{d}$ is a polynomial in $m$ of degree $d+1$. Thus $\\Sigma_{F}$ may also be regarded as a real polynomial of degree $\\operatorname{deg} F+1$ (with the exception that if $F=0$, then $\\Sigma_{F}=0$ as well). This allows us to consider the values of $\\Sigma_{F}$ at all real points (where the initial definition does not apply).\n\nAssume for the sake of contradiction that there exist two distinct block-similar polynomials $P(x)$ and $Q(x)$ of degree $n$. Then both polynomials $\\Sigma_{P-Q}(x)$ and $\\Sigma_{P^{2}-Q^{2}}(x)$ have roots at the points $0, k, 2 k, \\ldots, n k$. This motivates the following lemma, where we use the special polynomial\n\n$$\nT(x)=\\prod_{i=0}^{n}(x-i k)\n$$\n\nLemma. Assume that $F(x)$ is a nonzero polynomial such that $0, k, 2 k, \\ldots, n k$ are among the roots of the polynomial $\\Sigma_{F}(x)$. Then $\\operatorname{deg} F \\geqslant n$, and there exists a polynomial $G(x)$ such that $\\operatorname{deg} G=\\operatorname{deg} F-n$ and $F(x)=T(x) G(x)-T(x-1) G(x-1)$.\n\nProof. If $\\operatorname{deg} F<n$, then $\\Sigma_{F}(x)$ has at least $n+1$ roots, while its degree is less than $n+1$. Therefore, $\\Sigma_{F}(x)=0$ and hence $F(x)=0$, which is impossible. Thus $\\operatorname{deg} F \\geqslant n$.\n\nThe lemma condition yields that $\\Sigma_{F}(x)=T(x) G(x)$ for some polynomial $G(x)$ such that $\\operatorname{deg} G=\\operatorname{deg} \\Sigma_{F}-(n+1)=\\operatorname{deg} F-n$.\n\nNow, let us define $F_{1}(x)=T(x) G(x)-T(x-1) G(x-1)$. Then for every positive integer $n$ we have\n\n$$\n\\Sigma_{F_{1}}(n)=\\sum_{i=1}^{n}(T(x) G(x)-T(x-1) G(x-1))=T(n) G(n)-T(0) G(0)=T(n) G(n)=\\Sigma_{F}(n),\n$$\n\nso the polynomial $\\Sigma_{F-F_{1}}(x)=\\Sigma_{F}(x)-\\Sigma_{F_{1}}(x)$ has infinitely many roots. This means that this polynomial is zero, which in turn yields $F(x)=F_{1}(x)$, as required. First, we apply the lemma to the nonzero polynomial $R_{1}(x)=P(x)-Q(x)$. Since the degree of $R_{1}(x)$ is at most $n$, we conclude that it is exactly $n$. Moreover, $R_{1}(x)=\\alpha \\cdot(T(x)-T(x-1))$ for some nonzero constant $\\alpha$.\n\nOur next aim is to prove that the polynomial $S(x)=P(x)+Q(x)$ is constant. Assume the contrary. Then, notice that the polynomial $R_{2}(x)=P(x)^{2}-Q(x)^{2}=R_{1}(x) S(x)$ is also nonzero and satisfies the lemma condition. Since $n<\\operatorname{deg} R_{1}+\\operatorname{deg} S=\\operatorname{deg} R_{2} \\leqslant 2 n$, the lemma yields\n\n$$\nR_{2}(x)=T(x) G(x)-T(x-1) G(x-1)\n$$\n\nwith some polynomial $G(x)$ with $0<\\operatorname{deg} G \\leqslant n$.\n\nSince the polynomial $R_{1}(x)=\\alpha(T(x)-T(x-1))$ divides the polynomial\n\n$$\nR_{2}(x)=T(x)(G(x)-G(x-1))+G(x-1)(T(x)-T(x-1)),\n$$\n\nwe get $R_{1}(x) \\mid T(x)(G(x)-G(x-1))$. On the other hand,\n\n$$\n\\operatorname{gcd}\\left(T(x), R_{1}(x)\\right)=\\operatorname{gcd}(T(x), T(x)-T(x-1))=\\operatorname{gcd}(T(x), T(x-1))=1,\n$$\n\nsince both $T(x)$ and $T(x-1)$ are the products of linear polynomials, and their roots are distinct. Thus $R_{1}(x) \\mid G(x)-G(x-1)$. However, this is impossible since $G(x)-G(x-1)$ is a nonzero polynomial of degree less than $n=\\operatorname{deg} R_{1}$.\n\nThus, our assumption is wrong, and $S(x)$ is a constant polynomial, say $S(x)=\\beta$. Notice that the polynomials $(2 P(x)-\\beta) / \\alpha$ and $(2 Q(x)-\\beta) / \\alpha$ are also block-similar and distinct. So we may replace the initial polynomials by these ones, thus obtaining two block-similar polynomials $P(x)$ and $Q(x)$ with $P(x)=-Q(x)=T(x)-T(x-1)$. It remains to show that this is impossible.\n\nFor every $i=1,2 \\ldots, n$, the values $T(i k-k+1)$ and $T(i k-1)$ have the same sign. This means that the values $P(i k-k+1)=T(i k-k+1)$ and $P(i k)=-T(i k-1)$ have opposite signs, so $P(x)$ has a root in each of the $n$ segments $[i k-k+1, i k]$. Since $\\operatorname{deg} P=n$, it must have exactly one root in each of them.\n\nThus, the sequence $P(1), P(2), \\ldots, P(k)$ should change sign exactly once. On the other hand, since $P(x)$ and $-P(x)$ are block-similar, this sequence must have as many positive terms as negative ones. Since $k=2 \\ell+1$ is odd, this shows that the middle term of the sequence above must be zero, so $P(\\ell+1)=0$, or $T(\\ell+1)=T(\\ell)$. However, this is not true since\n\n$$\n|T(\\ell+1)|=|\\ell+1| \\cdot|\\ell| \\cdot \\prod_{i=2}^{n}|\\ell+1-i k|<|\\ell| \\cdot|\\ell+1| \\cdot \\prod_{i=2}^{n}|\\ell-i k|=|T(\\ell)|,\n$$\n\nwhere the strict inequality holds because $n \\geqslant 2$. We come to the final contradiction."
  },
  {
    "id": "fimo_2015_number_theory_p1",
    "enunciado": "Determine all positive integers $M$ for which the sequence $a_{0}, a_{1}, a_{2}, \\ldots$, defined by $a_{0}=\\frac{2 M+1}{2}$ and $a_{k+1}=a_{k}\\left\\lfloor a_{k}\\right\\rfloor$ for $k=0,1,2, \\ldots$, contains at least one integer term.\n\nThe final answers are all integers $M \\geqslant 2$.",
    "solucao": "Define $b_{k}=2 a_{k}$ for all $k \\geqslant 0$. Then\n\n$$\nb_{k+1}=2 a_{k+1}=2 a_{k}\\left\\lfloor a_{k}\\right\\rfloor=b_{k}\\left\\lfloor\\frac{b_{k}}{2}\\right\\rfloor .\n$$\n\nSince $b_{0}$ is an integer, it follows that $b_{k}$ is an integer for all $k \\geqslant 0$.\n\nSuppose that the sequence $a_{0}, a_{1}, a_{2}, \\ldots$ does not contain any integer term. Then $b_{k}$ must be an odd integer for all $k \\geqslant 0$, so that\n\n$$\nb_{k+1}=b_{k}\\left\\lfloor\\frac{b_{k}}{2}\\right\\rfloor=\\frac{b_{k}\\left(b_{k}-1\\right)}{2} .\n$$\n\nHence\n\n$$\nb_{k+1}-3=\\frac{b_{k}\\left(b_{k}-1\\right)}{2}-3=\\frac{\\left(b_{k}-3\\right)\\left(b_{k}+2\\right)}{2}\n$$\n\nfor all $k \\geqslant 0$.\n\nSuppose that $b_{0}-3>0$. Then equation (2) yields $b_{k}-3>0$ for all $k \\geqslant 0$. For each $k \\geqslant 0$, define $c_{k}$ to be the highest power of 2 that divides $b_{k}-3$. Since $b_{k}-3$ is even for all $k \\geqslant 0$, the number $c_{k}$ is positive for every $k \\geqslant 0$.\n\nNote that $b_{k}+2$ is an odd integer. Therefore, from equation (2), we have that $c_{k+1}=c_{k}-1$. Thus, the sequence $c_{0}, c_{1}, c_{2}, \\ldots$ of positive integers is strictly decreasing, a contradiction. So, $b_{0}-3 \\leqslant 0$, which implies $M=1$.\n\nFor $M=1$, we can check that the sequence is constant with $a_{k}=\\frac{3}{2}$ for all $k \\geqslant 0$. Therefore, the answer is $M \\geqslant 2$."
  },
  {
    "id": "fimo_2015_number_theory_p2",
    "enunciado": "Let $a$ and $b$ be positive integers such that $a ! b$ ! is a multiple of $a !+b !$. Prove that $3 a \\geqslant 2 b+2$.",
    "solucao": "If $a>b$, we immediately get $3 a \\geqslant 2 b+2$. In the case $a=b$, the required inequality is equivalent to $a \\geqslant 2$, which can be checked easily since $(a, b)=(1,1)$ does not satisfy $a !+b ! \\mid a ! b !$. We now assume $a<b$ and denote $c=b-a$. The required inequality becomes $a \\geqslant 2 c+2$.\n\nSuppose, to the contrary, that $a \\leqslant 2 c+1$. Define $M=\\frac{b !}{a !}=(a+1)(a+2) \\cdots(a+c)$. Since $a !+b ! \\mid a ! b$ ! implies $1+M \\mid a ! M$, we obtain $1+M \\mid a$ ! . Note that we must have $c<a$; otherwise $1+M>a$ !, which is impossible. We observe that $c ! \\mid M$ since $M$ is a product of $c$ consecutive integers. Thus $\\operatorname{gcd}(1+M, c !)=1$, which implies\n\n$$\n1+M \\mid \\frac{a !}{c !}=(c+1)(c+2) \\cdots a .\n$$\n\nIf $a \\leqslant 2 c$, then $\\frac{a !}{c !}$ is a product of $a-c \\leqslant c$ integers not exceeding $a$ whereas $M$ is a product of $c$ integers exceeding $a$. Therefore, $1+M>\\frac{a !}{c !}$, which is a contradiction.\n\nIt remains to exclude the case $a=2 c+1$. Since $a+1=2(c+1)$, we have $c+1 \\mid M$. Hence, we can deduce from (1) that $1+M \\mid(c+2)(c+3) \\cdots a$. Now $(c+2)(c+3) \\cdots a$ is a product of $a-c-1=c$ integers not exceeding $a$; thus it is smaller than $1+M$. Again, we arrive at a contradiction."
  },
  {
    "id": "fimo_2015_number_theory_p3",
    "enunciado": "Let $m$ and $n$ be positive integers such that $m>n$. Define $x_{k}=(m+k) /(n+k)$ for $k=$ $1,2, \\ldots, n+1$. Prove that if all the numbers $x_{1}, x_{2}, \\ldots, x_{n+1}$ are integers, then $x_{1} x_{2} \\cdots x_{n+1}-1$ is divisible by an odd prime.",
    "solucao": "Assume that $x_{1}, x_{2}, \\ldots, x_{n+1}$ are integers. Define the integers\n\n$$\na_{k}=x_{k}-1=\\frac{m+k}{n+k}-1=\\frac{m-n}{n+k}>0\n$$\n\nfor $k=1,2, \\ldots, n+1$.\n\nLet $P=x_{1} x_{2} \\cdots x_{n+1}-1$. We need to prove that $P$ is divisible by an odd prime, or in other words, that $P$ is not a power of 2 . To this end, we investigate the powers of 2 dividing the numbers $a_{k}$.\n\nLet $2^{d}$ be the largest power of 2 dividing $m-n$, and let $2^{c}$ be the largest power of 2 not exceeding $2 n+1$. Then $2 n+1 \\leqslant 2^{c+1}-1$, and so $n+1 \\leqslant 2^{c}$. We conclude that $2^{c}$ is one of the numbers $n+1, n+2, \\ldots, 2 n+1$, and that it is the only multiple of $2^{c}$ appearing among these numbers. Let $\\ell$ be such that $n+\\ell=2^{c}$. Since $\\frac{m-n}{n+\\ell}$ is an integer, we have $d \\geqslant c$. Therefore, $2^{d-c+1} \\nmid a_{\\ell}=\\frac{m-n}{n+\\ell}$, while $2^{d-c+1} \\mid a_{k}$ for all $k \\in\\{1, \\ldots, n+1\\} \\backslash\\{\\ell\\}$.\n\nComputing modulo $2^{d-c+1}$, we get\n\n$$\nP=\\left(a_{1}+1\\right)\\left(a_{2}+1\\right) \\cdots\\left(a_{n+1}+1\\right)-1 \\equiv\\left(a_{\\ell}+1\\right) \\cdot 1^{n}-1 \\equiv a_{\\ell} \\not \\equiv 0 \\quad\\left(\\bmod 2^{d-c+1}\\right) .\n$$\n\nTherefore, $2^{d-c+1} \\nmid P$.\n\nOn the other hand, for any $k \\in\\{1, \\ldots, n+1\\} \\backslash\\{\\ell\\}$, we have $2^{d-c+1} \\mid a_{k}$. So $P \\geqslant a_{k} \\geqslant 2^{d-c+1}$, and it follows that $P$ is not a power of 2 .\n\nComment. Instead of attempting to show that $P$ is not a power of 2 , one may try to find an odd factor of $P$ (greater than 1 ) as follows:\n\nFrom $a_{k}=\\frac{m-n}{n+k} \\in \\mathbb{Z}_{>0}$, we get that $m-n$ is divisible by $n+1, n+2, \\ldots, 2 n+1$, and thus it is also divisible by their least common multiple $L$. So $m-n=q L$ for some positive integer $q$; hence $x_{k}=q \\cdot \\frac{L}{n+k}+1$.\n\nThen, since $n+1 \\leqslant 2^{c}=n+\\ell \\leqslant 2 n+1 \\leqslant 2^{c+1}-1$, we have $2^{c} \\mid L$, but $2^{c+1} \\nmid L$. So $\\frac{L}{n+\\ell}$ is odd, while $\\frac{L}{n+k}$ is even for $k \\neq \\ell$. Computing modulo $2 q$ yields\n\n$$\nx_{1} x_{2} \\cdots x_{n+1}-1 \\equiv(q+1) \\cdot 1^{n}-1 \\equiv q \\quad(\\bmod 2 q) .\n$$\n\nThus, $x_{1} x_{2} \\cdots x_{n+1}-1=2 q r+q=q(2 r+1)$ for some integer $r$.\n\nSince $x_{1} x_{2} \\cdots x_{n+1}-1 \\geqslant x_{1} x_{2}-1 \\geqslant(q+1)^{2}-1>q$, we have $r \\geqslant 1$. This implies that $x_{1} x_{2} \\cdots x_{n+1}-1$ is divisible by an odd prime."
  },
  {
    "id": "fimo_2015_number_theory_p4",
    "enunciado": "Suppose that $a_{0}, a_{1}, \\ldots$ and $b_{0}, b_{1}, \\ldots$ are two sequences of positive integers satisfying $a_{0}, b_{0} \\geqslant 2$ and\n\n$$\na_{n+1}=\\operatorname{gcd}\\left(a_{n}, b_{n}\\right)+1, \\quad b_{n+1}=\\operatorname{lcm}\\left(a_{n}, b_{n}\\right)-1\n$$\n\nfor all $n \\geqslant 0$. Prove that the sequence $\\left(a_{n}\\right)$ is eventually periodic; in other words, there exist integers $N \\geqslant 0$ and $t>0$ such that $a_{n+t}=a_{n}$ for all $n \\geqslant N$",
    "solucao": "Let $s_{n}=a_{n}+b_{n}$. Notice that if $a_{n} \\mid b_{n}$, then $a_{n+1}=a_{n}+1, b_{n+1}=b_{n}-1$ and $s_{n+1}=s_{n}$. So, $a_{n}$ increases by 1 and $s_{n}$ does not change until the first index is reached with $a_{n} \\nmid s_{n}$. Define\n\n$$\nW_{n}=\\left\\{m \\in \\mathbb{Z}_{>0}: m \\geqslant a_{n} \\text { and } m \\nmid s_{n}\\right\\} \\quad \\text { and } \\quad w_{n}=\\min W_{n} \\text {. }\n$$\n\nClaim 1. The sequence $\\left(w_{n}\\right)$ is non-increasing.\n\nProof. If $a_{n} \\mid b_{n}$ then $a_{n+1}=a_{n}+1$. Due to $a_{n} \\mid s_{n}$, we have $a_{n} \\notin W_{n}$. Moreover $s_{n+1}=s_{n}$; therefore, $W_{n+1}=W_{n}$ and $w_{n+1}=w_{n}$.\n\nOtherwise, if $a_{n} \\nmid b_{n}$, then $a_{n} \\nmid s_{n}$, so $a_{n} \\in W_{n}$ and thus $w_{n}=a_{n}$. We show that $a_{n} \\in W_{n+1}$; this implies $w_{n+1} \\leqslant a_{n}=w_{n}$. By the definition of $W_{n+1}$, we need that $a_{n} \\geqslant a_{n+1}$ and $a_{n} \\nmid s_{n+1}$. The first relation holds because of $\\operatorname{gcd}\\left(a_{n}, b_{n}\\right)<a_{n}$. For the second relation, observe that in $s_{n+1}=\\operatorname{gcd}\\left(a_{n}, b_{n}\\right)+\\operatorname{lcm}\\left(a_{n}, b_{n}\\right)$, the second term is divisible by $a_{n}$, but the first term is not. So $a_{n} \\nmid s_{n+1}$; that completes the proof of the claim.\n\nLet $w=\\min _{n} w_{n}$ and let $N$ be an index with $w=w_{N}$. Due to Claim 1 , we have $w_{n}=w$ for all $n \\geqslant N$.\n\nLet $g_{n}=\\operatorname{gcd}\\left(w, s_{n}\\right)$. As we have seen, starting from an arbitrary index $n \\geqslant N$, the sequence $a_{n}, a_{n+1}, \\ldots$ increases by 1 until it reaches $w$, which is the first value not dividing $s_{n}$; then it drops to $\\operatorname{gcd}\\left(w, s_{n}\\right)+1=g_{n}+1$.\n\nClaim 2. The sequence $\\left(g_{n}\\right)$ is constant for $n \\geqslant N$.\n\nProof. If $a_{n} \\mid b_{n}$, then $s_{n+1}=s_{n}$ and hence $g_{n+1}=g_{n}$. Otherwise we have $a_{n}=w$,\n\n$$\n\\begin{aligned}\n\\operatorname{gcd}\\left(a_{n}, b_{n}\\right) & =\\operatorname{gcd}\\left(a_{n}, s_{n}\\right)=\\operatorname{gcd}\\left(w, s_{n}\\right)=g_{n} \\\\\ns_{n+1} & =\\operatorname{gcd}\\left(a_{n}, b_{n}\\right)+\\operatorname{lcm}\\left(a_{n}, b_{n}\\right)=g_{n}+\\frac{a_{n} b_{n}}{g_{n}}=g_{n}+\\frac{w\\left(s_{n}-w\\right)}{g_{n}} \\\\\n\\text { and } g_{n+1} & =\\operatorname{gcd}\\left(w, s_{n+1}\\right)=\\operatorname{gcd}\\left(w, g_{n}+\\frac{s_{n}-w}{g_{n}} w\\right)=\\operatorname{gcd}\\left(w, g_{n}\\right)=g_{n} .\n\\end{aligned}\n$$\n\nLet $g=g_{N}$. We have proved that the sequence $\\left(a_{n}\\right)$ eventually repeats the following cycle:\n\n$$\ng+1 \\mapsto g+2 \\mapsto \\ldots \\mapsto w \\mapsto g+1 .\n$$"
  },
  {
    "id": "fimo_2015_number_theory_p5",
    "enunciado": "Determine all triples $(a, b, c)$ of positive integers for which $a b-c, b c-a$, and $c a-b$ are powers of 2.\n\nExplanation: A power of 2 is an integer of the form $2^{n}$, where $n$ denotes some nonnegative integer.\n\nThe final answer is that there are sixteen such triples, namely $(2,2,2)$, the three permutations of $(2,2,3)$, and the six permutations of each of $(2,6,11)$ and $(3,5,7)$.",
    "solucao": "It can easily be verified that these sixteen triples are as required. Now let $(a, b, c)$ be any triple with the desired property. If we would have $a=1$, then both $b-c$ and $c-b$ were powers of 2, which is impossible since their sum is zero; because of symmetry, this argument shows $a, b, c \\geqslant 2$.\n\nCase 1. Among $a, b$, and $c$ there are at least two equal numbers.\n\nWithout loss of generality we may suppose that $a=b$. Then $a^{2}-c$ and $a(c-1)$ are powers of 2. The latter tells us that actually $a$ and $c-1$ are powers of 2 . So there are nonnegative integers $\\alpha$ and $\\gamma$ with $a=2^{\\alpha}$ and $c=2^{\\gamma}+1$. Since $a^{2}-c=2^{2 \\alpha}-2^{\\gamma}-1$ is a power of 2 and thus incongruent to $-1$ modulo 4 , we must have $\\gamma \\leqslant 1$. Moreover, each of the terms $2^{2 \\alpha}-2$ and $2^{2 \\alpha}-3$ can only be a power of 2 if $\\alpha=1$. It follows that the triple $(a, b, c)$ is either $(2,2,2)$ or $(2,2,3)$.\n\nCase 2. The numbers $a, b$, and c are distinct.\n\nDue to symmetry we may suppose that\n\n$$\n2 \\leqslant a<b<c .\n$$\n\nWe are to prove that the triple $(a, b, c)$ is either $(2,6,11)$ or $(3,5,7)$. By our hypothesis, there exist three nonnegative integers $\\alpha, \\beta$, and $\\gamma$ such that\n\n$$\n\\begin{aligned}\nb c-a & =2^{\\alpha}, \\\\\na c-b & =2^{\\beta}, \\\\\na b-c & =2^{\\gamma} .\n\\end{aligned}\n$$\n\nEvidently we have\n\n$$\n\\alpha>\\beta>\\gamma .\n$$\n\nDepending on how large $a$ is, we divide the argument into two further cases.\n\nCase 2.1. $\\quad a=2$.\n\nWe first prove that $\\gamma=0$. Assume for the sake of contradiction that $\\gamma>0$. Then $c$ is even by (4) and, similarly, $b$ is even by (5) and (3). So the left-hand side of (2) is congruent to 2 modulo 4, which is only possible if $b c=4$. As this contradicts (1), we have thereby shown that $\\gamma=0$, i.e., that $c=2 b-1$\n\nNow (3) yields $3 b-2=2^{\\beta}$. Due to $b>2$ this is only possible if $\\beta \\geqslant 4$. If $\\beta=4$, then we get $b=6$ and $c=2 \\cdot 6-1=11$, which is a solution. It remains to deal with the case $\\beta \\geqslant 5$. Now (2) implies\n\n$$\n9 \\cdot 2^{\\alpha}=9 b(2 b-1)-18=(3 b-2)(6 b+1)-16=2^{\\beta}\\left(2^{\\beta+1}+5\\right)-16,\n$$\n\nand by $\\beta \\geqslant 5$ the right-hand side is not divisible by 32 . Thus $\\alpha \\leqslant 4$ and we get a contradiction to $(5)$ Case 2.2. $a \\geqslant 3$.\n\nPick an integer $\\vartheta \\in\\{-1,+1\\}$ such that $c-\\vartheta$ is not divisible by 4 . Now\n\n$$\n2^{\\alpha}+\\vartheta \\cdot 2^{\\beta}=\\left(b c-a \\vartheta^{2}\\right)+\\vartheta(c a-b)=(b+a \\vartheta)(c-\\vartheta)\n$$\n\nis divisible by $2^{\\beta}$ and, consequently, $b+a \\vartheta$ is divisible by $2^{\\beta-1}$. On the other hand, $2^{\\beta}=a c-b>$ $(a-1) c \\geqslant 2 c$ implies in view of $(1)$ that $a$ and $b$ are smaller than $2^{\\beta-1}$. All this is only possible if $\\vartheta=1$ and $a+b=2^{\\beta-1}$. Now (3) yields\n\n$$\na c-b=2(a+b),\n$$\n\nwhence $4 b>a+3 b=a(c-1) \\geqslant a b$, which in turn yields $a=3$.\n\nSo (6) simplifies to $c=b+2$ and (2) tells us that $b(b+2)-3=(b-1)(b+3)$ is a power of 2. Consequently, the factors $b-1$ and $b+3$ are powers of 2 themselves. Since their difference is 4 , this is only possible if $b=5$ and thus $c=7$. Thereby the solution is complete."
  },
  {
    "id": "fimo_2015_number_theory_p6",
    "enunciado": "Let $\\mathbb{Z}_{>0}$ denote the set of positive integers. Consider a function $f: \\mathbb{Z}_{>0} \\rightarrow \\mathbb{Z}_{>0}$. For any $m, n \\in \\mathbb{Z}_{>0}$ we write $f^{n}(m)=\\underbrace{f(f(\\ldots f}_{n}(m) \\ldots))$. Suppose that $f$ has the following two properties:\n\n(i) If $m, n \\in \\mathbb{Z}_{>0}$, then $\\frac{f^{n}(m)-m}{n} \\in \\mathbb{Z}_{>0}$;\n\n(ii) The set $\\mathbb{Z}_{>0} \\backslash\\left\\{f(n) \\mid n \\in \\mathbb{Z}_{>0}\\right\\}$ is finite.\n\nProve that the sequence $f(1)-1, f(2)-2, f(3)-3, \\ldots$ is periodic.",
    "solucao": "We split the solution into three steps. In the first of them, we show that the function $f$ is injective and explain how this leads to a useful visualization of $f$. Then comes the second step, in which most of the work happens: its goal is to show that for any $n \\in \\mathbb{Z}_{>0}$ the sequence $n, f(n), f^{2}(n), \\ldots$ is an arithmetic progression. Finally, in the third step we put everything together, thus solving the problem.\n\nStep 1. We commence by checking that $f$ is injective. For this purpose, we consider any $\\overline{m, k \\in \\mathbb{Z}_{>0}}$ with $f(m)=f(k)$. By $(i)$, every positive integer $n$ has the property that\n\n$$\n\\frac{k-m}{n}=\\frac{f^{n}(m)-m}{n}-\\frac{f^{n}(k)-k}{n}\n$$\n\nis a difference of two integers and thus integral as well. But for $n=|k-m|+1$ this is only possible if $k=m$. Thereby, the injectivity of $f$ is established.\n\nNow recall that due to condition $(i i)$ there are finitely many positive integers $a_{1}, \\ldots, a_{k}$ such that $\\mathbb{Z}_{>0}$ is the disjoint union of $\\left\\{a_{1}, \\ldots, a_{k}\\right\\}$ and $\\left\\{f(n) \\mid n \\in \\mathbb{Z}_{>0}\\right\\}$. Notice that by plugging $n=1$ into condition $(i)$ we get $f(m)>m$ for all $m \\in \\mathbb{Z}_{>0}$.\n\nWe contend that every positive integer $n$ may be expressed uniquely in the form $n=f^{j}\\left(a_{i}\\right)$ for some $j \\geqslant 0$ and $i \\in\\{1, \\ldots, k\\}$. The uniqueness follows from the injectivity of $f$. The existence can be proved by induction on $n$ in the following way. If $n \\in\\left\\{a_{1}, \\ldots, a_{k}\\right\\}$, then we may take $j=0$; otherwise there is some $n^{\\prime}<n$ with $f\\left(n^{\\prime}\\right)=n$ to which the induction hypothesis may be applied.\n\nThe result of the previous paragraph means that every positive integer appears exactly once in the following infinite picture, henceforth referred to as \"the Table\":\n\n\\begin{center}\n\\begin{tabular}{|c|c|c|c|c}\n\\hline\n$a_{1}$ & $f\\left(a_{1}\\right)$ & $f^{2}\\left(a_{1}\\right)$ & $f^{3}\\left(a_{1}\\right)$ & $\\ldots$ \\\\\n\\hline\n$a_{2}$ & $f\\left(a_{2}\\right)$ & $f^{2}\\left(a_{2}\\right)$ & $f^{3}\\left(a_{2}\\right)$ & $\\ldots$ \\\\\n\\hline\n$\\vdots$ & $\\vdots$ & $\\vdots$ & $\\vdots$ &  \\\\\n\\hline\n$a_{k}$ & $f\\left(a_{k}\\right)$ & $f^{2}\\left(a_{k}\\right)$ & $f^{3}\\left(a_{k}\\right)$ & $\\ldots$ \\\\\n\\hline\n\\end{tabular}\n\\end{center}\n\nThe Table\n\nStep 2. Our next goal is to prove that each row of the Table is an arithmetic progression. Assume contrariwise that the number $t$ of rows which are arithmetic progressions would satisfy $0 \\leqslant t<k$. By permuting the rows if necessary we may suppose that precisely the first $t$ rows are arithmetic progressions, say with steps $T_{1}, \\ldots, T_{t}$. Our plan is to find a further row that is \"not too sparse\" in an asymptotic sense, and then to prove that such a row has to be an arithmetic progression as well.\n\nLet us write $T=\\operatorname{lcm}\\left(T_{1}, T_{2}, \\ldots, T_{t}\\right)$ and $A=\\max \\left\\{a_{1}, a_{2}, \\ldots, a_{t}\\right\\}$ if $t>0$; and $T=1$ and $A=0$ if $t=0$. For every integer $n \\geqslant A$, the interval $\\Delta_{n}=[n+1, n+T]$ contains exactly $T / T_{i}$ elements of the $i^{\\text {th }}$ row $(1 \\leqslant i \\leqslant t)$. Therefore, the number of elements from the last $(k-t)$ rows of the Table contained in $\\Delta_{n}$ does not depend on $n \\geqslant A$. It is not possible that none of these intervals $\\Delta_{n}$ contains an element from the $k-t$ last rows, because infinitely many numbers appear in these rows. It follows that for each $n \\geqslant A$ the interval $\\Delta_{n}$ contains at least one member from these rows.\n\nThis yields that for every positive integer $d$, the interval $[A+1, A+(d+1)(k-t) T]$ contains at least $(d+1)(k-t)$ elements from the last $k-t$ rows; therefore, there exists an index $x$ with $t+1 \\leqslant x \\leqslant k$, possibly depending on $d$, such that our interval contains at least $d+1$ elements from the $x^{\\text {th }}$ row. In this situation we have\n\n$$\nf^{d}\\left(a_{x}\\right) \\leqslant A+(d+1)(k-t) T .\n$$\n\nFinally, since there are finitely many possibilities for $x$, there exists an index $x \\geqslant t+1$ such that the set\n\n$$\nX=\\left\\{d \\in \\mathbb{Z}_{>0} \\mid f^{d}\\left(a_{x}\\right) \\leqslant A+(d+1)(k-t) T\\right\\}\n$$\n\nis infinite. Thereby we have found the \"dense row\" promised above.\n\nBy assumption $(i)$, for every $d \\in X$ the number\n\n$$\n\\beta_{d}=\\frac{f^{d}\\left(a_{x}\\right)-a_{x}}{d}\n$$\n\nis a positive integer not exceeding\n\n$$\n\\frac{A+(d+1)(k-t) T}{d} \\leqslant \\frac{A d+2 d(k-t) T}{d}=A+2(k-t) T .\n$$\n\nThis leaves us with finitely many choices for $\\beta_{d}$, which means that there exists a number $T_{x}$ such that the set\n\n$$\nY=\\left\\{d \\in X \\mid \\beta_{d}=T_{x}\\right\\}\n$$\n\nis infinite. Notice that we have $f^{d}\\left(a_{x}\\right)=a_{x}+d \\cdot T_{x}$ for all $d \\in Y$.\n\nNow we are prepared to prove that the numbers in the $x^{\\text {th }}$ row form an arithmetic progression, thus coming to a contradiction with our assumption. Let us fix any positive integer $j$. Since the set $Y$ is infinite, we can choose a number $y \\in Y$ such that $y-j>\\left|f^{j}\\left(a_{x}\\right)-\\left(a_{x}+j T_{x}\\right)\\right|$. Notice that both numbers\n\n$$\nf^{y}\\left(a_{x}\\right)-f^{j}\\left(a_{x}\\right)=f^{y-j}\\left(f^{j}\\left(a_{x}\\right)\\right)-f^{j}\\left(a_{x}\\right) \\quad \\text { and } \\quad f^{y}\\left(a_{x}\\right)-\\left(a_{x}+j T_{x}\\right)=(y-j) T_{x}\n$$\n\nare divisible by $y-j$. Thus, the difference between these numbers is also divisible by $y-j$. Since the absolute value of this difference is less than $y-j$, it has to vanish, so we get $f^{j}\\left(a_{x}\\right)=$ $a_{x}+j \\cdot T_{x}$.\n\nHence, it is indeed true that all rows of the Table are arithmetic progressions.\n\nStep 3. Keeping the above notation in force, we denote the step of the $i^{\\text {th }}$ row of the table by $T_{i}$. Now we claim that we have $f(n)-n=f(n+T)-(n+T)$ for all $n \\in \\mathbb{Z}_{>0}$, where\n\n$$\nT=\\operatorname{lcm}\\left(T_{1}, \\ldots, T_{k}\\right) .\n$$\n\nTo see this, let any $n \\in \\mathbb{Z}_{>0}$ be given and denote the index of the row in which it appears in the Table by $i$. Then we have $f^{j}(n)=n+j \\cdot T_{i}$ for all $j \\in \\mathbb{Z}_{>0}$, and thus indeed\n\n$$\nf(n+T)-f(n)=f^{1+T / T_{i}}(n)-f(n)=\\left(n+T+T_{i}\\right)-\\left(n+T_{i}\\right)=T .\n$$\n\nThis concludes the solution."
  },
  {
    "id": "fimo_2015_number_theory_p7",
    "enunciado": "Let $\\mathbb{Z}_{>0}$ denote the set of positive integers. For any positive integer $k$, a function $f: \\mathbb{Z}_{>0} \\rightarrow \\mathbb{Z}_{>0}$ is called $k-\\operatorname{good}$ if $\\operatorname{gcd}(f(m)+n, f(n)+m) \\leqslant k$ for all $m \\neq n$. Find all $k$ such that there exists a $k$-good function.\n\nThe final answer is $k \\geqslant 2$.",
    "solucao": "For any function $f: \\mathbb{Z}_{>0} \\rightarrow \\mathbb{Z}_{>0}$, let $G_{f}(m, n)=\\operatorname{gcd}(f(m)+n, f(n)+m)$. Note that a $k$-good function is also $(k+1)$-good for any positive integer $k$. Hence, it suffices to show that there does not exist a 1-good function and that there exists a 2-good function.\n\nWe first show that there is no 1-good function. Suppose that there exists a function $f$ such that $G_{f}(m, n)=1$ for all $m \\neq n$. Now, if there are two distinct even numbers $m$ and $n$ such that $f(m)$ and $f(n)$ are both even, then $2 \\mid G_{f}(m, n)$, a contradiction. A similar argument holds if there are two distinct odd numbers $m$ and $n$ such that $f(m)$ and $f(n)$ are both odd. Hence we can choose an even $m$ and an odd $n$ such that $f(m)$ is odd and $f(n)$ is even. This also implies that $2 \\mid G_{f}(m, n)$, a contradiction.\n\nWe now construct a 2-good function. Define $f(n)=2^{g(n)+1}-n-1$, where $g$ is defined recursively by $g(1)=1$ and $g(n+1)=\\left(2^{g(n)+1}\\right) !$.\n\nFor any positive integers $m>n$, set\n\n$$\nA=f(m)+n=2^{g(m)+1}-m+n-1, \\quad B=f(n)+m=2^{g(n)+1}-n+m-1 .\n$$\n\nWe need to show that $\\operatorname{gcd}(A, B) \\leqslant 2$. First, note that $A+B=2^{g(m)+1}+2^{g(n)+1}-2$ is not divisible by 4 , so that $4 \\nmid \\operatorname{gcd}(A, B)$. Now we suppose that there is an odd prime $p$ for which $p \\mid \\operatorname{gcd}(A, B)$ and derive a contradiction.\n\nWe first claim that $2^{g(m-1)+1} \\geqslant B$. This is a rather weak bound; one way to prove it is as follows. Observe that $g(k+1)>g(k)$ and hence $2^{g(k+1)+1} \\geqslant 2^{g(k)+1}+1$ for every positive integer $k$. By repeatedly applying this inequality, we obtain $2^{g(m-1)+1} \\geqslant 2^{g(n)+1}+(m-1)-n=B$.\n\nNow, since $p \\mid B$, we have $p-1<B \\leqslant 2^{g(m-1)+1}$, so that $p-1 \\mid\\left(2^{g(m-1)+1}\\right)$ ! $=g(m)$. Hence $2^{g(m)} \\equiv 1(\\bmod p)$, which yields $A+B \\equiv 2^{g(n)+1}(\\bmod p)$. However, since $p \\mid A+B$, this implies that $p=2$, a contradiction."
  },
  {
    "id": "fimo_2015_number_theory_p8",
    "enunciado": "For every positive integer $n$ with prime factorization $n=\\prod_{i=1}^{k} p_{i}^{\\alpha_{i}}$, define\n\n$$\n\\mho(n)=\\sum_{i: p_{i}>10^{100}} \\alpha_{i} .\n$$\n\nThat is, $\\mho(n)$ is the number of prime factors of $n$ greater than $10^{100}$, counted with multiplicity.\n\nFind all strictly increasing functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that\n\n$$\n\\mho(f(a)-f(b)) \\leqslant \\mho(a-b) \\quad \\text { for all integers } a \\text { and } b \\text { with } a>b .\n$$\n\nThe final answer is $f(x)=a x+b$, where $b$ is an arbitrary integer, and $a$ is an arbitrary positive integer with $\\mho(a)=0$.",
    "solucao": "A straightforward check shows that all the functions listed in the answer satisfy the problem condition. It remains to show the converse.\n\nAssume that $f$ is a function satisfying the problem condition. Notice that the function $g(x)=f(x)-f(0)$ also satisfies this condition. Replacing $f$ by $g$, we assume from now on that $f(0)=0$; then $f(n)>0$ for any positive integer $n$. Thus, we aim to prove that there exists a positive integer $a$ with $\\mho(a)=0$ such that $f(n)=a$ for all $n \\in \\mathbb{Z}$.\n\nWe start by introducing some notation. Set $N=10^{100}$. We say that a prime $p$ is large if $p>N$, and $p$ is small otherwise; let $\\mathcal{S}$ be the set of all small primes. Next, we say that a positive integer is large or small if all its prime factors are such (thus, the number 1 is the unique number which is both large and small). For a positive integer $k$, we denote the greatest large divisor of $k$ and the greatest small divisor of $k$ by $L(k)$ and $S(k)$, respectively; thus, $k=L(k) S(k)$\n\nWe split the proof into three steps.\n\nStep 1. We prove that for every large $k$, we have $k|f(a)-f(b) \\Longleftrightarrow k| a-b$. In other words, $L(f(a)-f(b))=L(a-b)$ for all integers $a$ and $b$ with $a>b$.\n\nWe use induction on $k$. The base case $k=1$ is trivial. For the induction step, assume that $k_{0}$ is a large number, and that the statement holds for all large numbers $k$ with $k<k_{0}$.\n\nClaim 1. For any integers $x$ and $y$ with $0<x-y<k_{0}$, the number $k_{0}$ does not divide $f(x)-f(y)$\n\nProof. Assume, to the contrary, that $k_{0} \\mid f(x)-f(y)$. Let $\\ell=L(x-y)$; then $\\ell \\leqslant x-y<k_{0}$. By the induction hypothesis, $\\ell \\mid f(x)-f(y)$, and thus $\\operatorname{lcm}\\left(k_{0}, \\ell\\right) \\mid f(x)-f(y)$. Notice that $\\operatorname{lcm}\\left(k_{0}, \\ell\\right)$ is large, and $\\operatorname{lcm}\\left(k_{0}, \\ell\\right) \\geqslant k_{0}>\\ell$. But then\n\n$$\n\\mho(f(x)-f(y)) \\geqslant \\mho\\left(\\operatorname{lcm}\\left(k_{0}, \\ell\\right)\\right)>\\mho(\\ell)=\\mho(x-y)\n$$\n\nwhich is impossible.\n\nNow we complete the induction step. By Claim 1, for every integer $a$ each of the sequences\n\n$$\nf(a), f(a+1), \\ldots, f\\left(a+k_{0}-1\\right) \\text { and } f(a+1), f(a+2), \\ldots, f\\left(a+k_{0}\\right)\n$$\n\nforms a complete residue system modulo $k_{0}$. This yields $f(a) \\equiv f\\left(a+k_{0}\\right)\\left(\\bmod k_{0}\\right)$. Thus, $f(a) \\equiv f(b)\\left(\\bmod k_{0}\\right)$ whenever $a \\equiv b\\left(\\bmod k_{0}\\right)$.\n\nFinally, if $a \\neq \\equiv b\\left(\\bmod k_{0}\\right)$ then there exists an integer $b^{\\prime}$ such that $b^{\\prime} \\equiv b\\left(\\bmod k_{0}\\right)$ and $\\left|a-b^{\\prime}\\right|<k_{0}$. Then $f(b) \\equiv f\\left(b^{\\prime}\\right) \\not \\equiv f(a)\\left(\\bmod k_{0}\\right)$. The induction step is proved.\n\nStep 2. We prove that for some small integer a there exist infinitely many integers $n$ such that $\\overline{f(n)}=$ an. In other words, $f$ is linear on some infinite set.\n\nWe start with the following general statement. Claim 2. There exists a constant $c$ such that $f(t)<c t$ for every positive integer $t>N$.\n\nProof. Let $d$ be the product of all small primes, and let $\\alpha$ be a positive integer such that $2^{\\alpha}>f(N)$. Then, for every $p \\in \\mathcal{S}$ the numbers $f(0), f(1), \\ldots, f(N)$ are distinct modulo $p^{\\alpha}$. Set $P=d^{\\alpha}$ and $c=P+f(N)$.\n\nChoose any integer $t>N$. Due to the choice of $\\alpha$, for every $p \\in \\mathcal{S}$ there exists at most one nonnegative integer $i \\leqslant N$ with $p^{\\alpha} \\mid f(t)-f(i)$. Since $|\\mathcal{S}|<N$, we can choose a nonnegative integer $j \\leqslant N$ such that $p^{\\alpha} \\nmid f(t)-f(j)$ for all $p \\in \\mathcal{S}$. Therefore, $S(f(t)-f(j))<P$.\n\nOn the other hand, Step 1 shows that $L(f(t)-f(j))=L(t-j) \\leqslant t-j$. Since $0 \\leqslant j \\leqslant N$, this yields\n\n$$\nf(t)=f(j)+L(f(t)-f(j)) \\cdot S(f(t)-f(j))<f(N)+(t-j) P \\leqslant(P+f(N)) t=c t .\n$$\n\nNow let $\\mathcal{T}$ be the set of large primes. For every $t \\in \\mathcal{T}$, Step 1 implies $L(f(t))=t$, so the ratio $f(t) / t$ is an integer. Now Claim 2 leaves us with only finitely many choices for this ratio, which means that there exists an infinite subset $\\mathcal{T}^{\\prime} \\subseteq \\mathcal{T}$ and a positive integer a such that $f(t)=$ at for all $t \\in \\mathcal{T}^{\\prime}$, as required.\n\nSince $L(t)=L(f(t))=L(a) L(t)$ for all $t \\in \\mathcal{T}^{\\prime}$, we get $L(a)=1$, so the number $a$ is small.\n\nStep 3. We show that $f(x)=$ ax for all $x \\in \\mathbb{Z}$.\n\nLet $R_{i}=\\{x \\in \\mathbb{Z}: x \\equiv i(\\bmod N !)\\}$ denote the residue class of $i$ modulo $N !$.\n\nClaim 3. Assume that for some $r$, there are infinitely many $n \\in R_{r}$ such that $f(n)=a n$. Then $f(x)=a x$ for all $x \\in R_{r+1}$.\n\nProof. Choose any $x \\in R_{r+1}$. By our assumption, we can select $n \\in R_{r}$ such that $f(n)=a$ an and $|n-x|>|f(x)-a x|$. Since $n-x \\equiv r-(r+1)=-1(\\bmod N !)$, the number $|n-x|$ is large. Therefore, by Step 1 we have $f(x) \\equiv f(n)=a n \\equiv a x(\\bmod n-x)$, so $n-x \\mid f(x)-a x$. Due to the choice of $n$, this yields $f(x)=a x$.\n\nTo complete Step 3, notice that the set $\\mathcal{T}^{\\prime}$ found in Step 2 contains infinitely many elements of some residue class $R_{i}$. Applying Claim 3, we successively obtain that $f(x)=a x$ for all $x \\in R_{i+1}, R_{i+2}, \\ldots, R_{i+N !}=R_{i}$. This finishes the solution."
  },
  {
    "id": "fimo_2016_algebra_p1",
    "enunciado": "Let $a, b$ and $c$ be positive real numbers such that $\\min \\{a b, b c, c a\\} \\geqslant 1$. Prove that\n\n$$\n\\sqrt[3]{\\left(a^{2}+1\\right)\\left(b^{2}+1\\right)\\left(c^{2}+1\\right)} \\leqslant\\left(\\frac{a+b+c}{3}\\right)^{2}+1\n$$",
    "solucao": "We first show the following.\n\n\\begin{itemize}\n  \\item Claim. For any positive real numbers $x, y$ with $x y \\geqslant 1$, we have\n\\end{itemize}\n\n$$\n\\left(x^{2}+1\\right)\\left(y^{2}+1\\right) \\leqslant\\left(\\left(\\frac{x+y}{2}\\right)^{2}+1\\right)^{2}\n$$\n\nProof. Note that $x y \\geqslant 1$ implies $\\left(\\frac{x+y}{2}\\right)^{2}-1 \\geqslant x y-1 \\geqslant 0$. We find that\n\n$$\n\\left(x^{2}+1\\right)\\left(y^{2}+1\\right)=(x y-1)^{2}+(x+y)^{2} \\leqslant\\left(\\left(\\frac{x+y}{2}\\right)^{2}-1\\right)^{2}+(x+y)^{2}=\\left(\\left(\\frac{x+y}{2}\\right)^{2}+1\\right)^{2} .\n$$\n\nWithout loss of generality, assume $a \\geqslant b \\geqslant c$. This implies $a \\geqslant 1$. Let $d=\\frac{a+b+c}{3}$. Note that\n\n$$\na d=\\frac{a(a+b+c)}{3} \\geqslant \\frac{1+1+1}{3}=1 .\n$$\n\nThen we can apply (2) to the pair $(a, d)$ and the pair $(b, c)$. We get\n\n$$\n\\left(a^{2}+1\\right)\\left(d^{2}+1\\right)\\left(b^{2}+1\\right)\\left(c^{2}+1\\right) \\leqslant\\left(\\left(\\frac{a+d}{2}\\right)^{2}+1\\right)^{2}\\left(\\left(\\frac{b+c}{2}\\right)^{2}+1\\right)^{2}\n$$\n\nNext, from\n\n$$\n\\frac{a+d}{2} \\cdot \\frac{b+c}{2} \\geqslant \\sqrt{a d} \\cdot \\sqrt{b c} \\geqslant 1\n$$\n\nwe can apply (2) again to the pair $\\left(\\frac{a+d}{2}, \\frac{b+c}{2}\\right)$. Together with (3), we have\n\n$$\n\\left(a^{2}+1\\right)\\left(d^{2}+1\\right)\\left(b^{2}+1\\right)\\left(c^{2}+1\\right) \\leqslant\\left(\\left(\\frac{a+b+c+d}{4}\\right)^{2}+1\\right)^{4}=\\left(d^{2}+1\\right)^{4} .\n$$\n\nTherefore, $\\left(a^{2}+1\\right)\\left(b^{2}+1\\right)\\left(c^{2}+1\\right) \\leqslant\\left(d^{2}+1\\right)^{3}$, and (1) follows by taking cube root of both sides."
  },
  {
    "id": "fimo_2016_algebra_p2",
    "enunciado": "Find the smallest real constant $C$ such that for any positive real numbers $a_{1}, a_{2}, a_{3}, a_{4}$ and $a_{5}$ (not necessarily distinct), one can always choose distinct subscripts $i, j, k$ and $l$ such that\n\n$$\n\\left|\\frac{a_{i}}{a_{j}}-\\frac{a_{k}}{a_{l}}\\right| \\leqslant C .\n$$\n\nThe final answer is that the smallest $C$ is $\\frac{1}{2}$.",
    "solucao": "We first show that $C \\leqslant \\frac{1}{2}$. For any positive real numbers $a_{1} \\leqslant a_{2} \\leqslant a_{3} \\leqslant a_{4} \\leqslant a_{5}$, consider the five fractions\n\n$$\n\\frac{a_{1}}{a_{2}}, \\frac{a_{3}}{a_{4}}, \\frac{a_{1}}{a_{5}}, \\frac{a_{2}}{a_{3}}, \\frac{a_{4}}{a_{5}} .\n$$\n\nEach of them lies in the interval $(0,1]$. Therefore, by the Pigeonhole Principle, at least three of them must lie in $\\left(0, \\frac{1}{2}\\right]$ or lie in $\\left(\\frac{1}{2}, 1\\right]$ simultaneously. In particular, there must be two consecutive terms in (2) which belong to an interval of length $\\frac{1}{2}$ (here, we regard $\\frac{a_{1}}{a_{2}}$ and $\\frac{a_{4}}{a_{5}}$ as consecutive). In other words, the difference of these two fractions is less than $\\frac{1}{2}$. As the indices involved in these two fractions are distinct, we can choose them to be $i, j, k, l$ and conclude that $C \\leqslant \\frac{1}{2}$.\n\nNext, we show that $C=\\frac{1}{2}$ is best possible. Consider the numbers $1,2,2,2, n$ where $n$ is a large real number. The fractions formed by two of these numbers in ascending order are $\\frac{1}{n}, \\frac{2}{n}, \\frac{1}{2}, \\frac{2}{2}, \\frac{2}{1}, \\frac{n}{2}, \\frac{n}{1}$. Since the indices $i, j, k, l$ are distinct, $\\frac{1}{n}$ and $\\frac{2}{n}$ cannot be chosen simultaneously. Therefore the minimum value of the left-hand side of $(1)$ is $\\frac{1}{2}-\\frac{2}{n}$. When $n$ tends to infinity, this value approaches $\\frac{1}{2}$, and so $C$ cannot be less than $\\frac{1}{2}$.\n\nThese conclude that $C=\\frac{1}{2}$ is the smallest possible choice."
  },
  {
    "id": "fimo_2016_algebra_p3",
    "enunciado": "Find all integers $n \\geqslant 3$ with the following property: for all real numbers $a_{1}, a_{2}, \\ldots, a_{n}$ and $b_{1}, b_{2}, \\ldots, b_{n}$ satisfying $\\left|a_{k}\\right|+\\left|b_{k}\\right|=1$ for $1 \\leqslant k \\leqslant n$, there exist $x_{1}, x_{2}, \\ldots, x_{n}$, each of which is either $-1$ or 1 , such that\n\n$$\n\\left|\\sum_{k=1}^{n} x_{k} a_{k}\\right|+\\left|\\sum_{k=1}^{n} x_{k} b_{k}\\right| \\leqslant 1 .\n$$\n\nThe final answer is that $n$ can be any odd integer greater than or equal to 3 .",
    "solucao": "For any even integer $n \\geqslant 4$, we consider the case\n\n$$\na_{1}=a_{2}=\\cdots=a_{n-1}=b_{n}=0 \\quad \\text { and } \\quad b_{1}=b_{2}=\\cdots=b_{n-1}=a_{n}=1 .\n$$\n\nThe condition $\\left|a_{k}\\right|+\\left|b_{k}\\right|=1$ is satisfied for each $1 \\leqslant k \\leqslant n$. No matter how we choose each $x_{k}$, both sums $\\sum_{k=1}^{n} x_{k} a_{k}$ and $\\sum_{k=1}^{n} x_{k} b_{k}$ are odd integers. This implies $\\left|\\sum_{k=1}^{n} x_{k} a_{k}\\right| \\geqslant 1$ and $\\left|\\sum_{k=1}^{n} x_{k} b_{k}\\right| \\geqslant 1$, which shows (1) cannot hold.\n\nFor any odd integer $n \\geqslant 3$, we may assume without loss of generality $b_{k} \\geqslant 0$ for $1 \\leqslant k \\leqslant n$ (this can be done by flipping the pair $\\left(a_{k}, b_{k}\\right)$ to $\\left(-a_{k},-b_{k}\\right)$ and $x_{k}$ to $-x_{k}$ if necessary) and $a_{1} \\geqslant a_{2} \\geqslant \\cdots \\geqslant a_{m} \\geqslant 0>a_{m+1} \\geqslant \\cdots \\geqslant a_{n}$. We claim that the choice $x_{k}=(-1)^{k+1}$ for $1 \\leqslant k \\leqslant n$ will work. Define\n\n$$\ns=\\sum_{k=1}^{m} x_{k} a_{k} \\quad \\text { and } \\quad t=-\\sum_{k=m+1}^{n} x_{k} a_{k} .\n$$\n\nNote that\n\n$$\ns=\\left(a_{1}-a_{2}\\right)+\\left(a_{3}-a_{4}\\right)+\\cdots \\geqslant 0\n$$\n\nby the assumption $a_{1} \\geqslant a_{2} \\geqslant \\cdots \\geqslant a_{m}$ (when $m$ is odd, there is a single term $a_{m}$ at the end, which is also positive). Next, we have\n\n$$\ns=a_{1}-\\left(a_{2}-a_{3}\\right)-\\left(a_{4}-a_{5}\\right)-\\cdots \\leqslant a_{1} \\leqslant 1 .\n$$\n\nSimilarly,\n\n$$\nt=\\left(-a_{n}+a_{n-1}\\right)+\\left(-a_{n-2}+a_{n-3}\\right)+\\cdots \\geqslant 0\n$$\n\nand\n\n$$\nt=-a_{n}+\\left(a_{n-1}-a_{n-2}\\right)+\\left(a_{n-3}-a_{n-4}\\right)+\\cdots \\leqslant-a_{n} \\leqslant 1 .\n$$\n\nFrom the condition, we have $a_{k}+b_{k}=1$ for $1 \\leqslant k \\leqslant m$ and $-a_{k}+b_{k}=1$ for $m+1 \\leqslant k \\leqslant n$. It follows that $\\sum_{k=1}^{n} x_{k} a_{k}=s-t$ and $\\sum_{k=1}^{n} x_{k} b_{k}=1-s-t$. Hence it remains to prove\n\n$$\n|s-t|+|1-s-t| \\leqslant 1\n$$\n\nunder the constraint $0 \\leqslant s, t \\leqslant 1$. By symmetry, we may assume $s \\geqslant t$. If $1-s-t \\geqslant 0$, then we have\n\n$$\n|s-t|+|1-s-t|=s-t+1-s-t=1-2 t \\leqslant 1 .\n$$\n\nIf $1-s-t \\leqslant 0$, then we have\n\n$$\n|s-t|+|1-s-t|=s-t-1+s+t=2 s-1 \\leqslant 1 .\n$$\n\nHence, the inequality is true in both cases.\n\nThese show $n$ can be any odd integer greater than or equal to 3 ."
  },
  {
    "id": "fimo_2016_algebra_p4",
    "enunciado": "Denote by $\\mathbb{R}^{+}$the set of all positive real numbers. Find all functions $f: \\mathbb{R}^{+} \\rightarrow \\mathbb{R}^{+}$such that\n\n$$\nx f\\left(x^{2}\\right) f(f(y))+f(y f(x))=f(x y)\\left(f\\left(f\\left(x^{2}\\right)\\right)+f\\left(f\\left(y^{2}\\right)\\right)\\right)\n$$\n\nfor all positive real numbers $x$ and $y$.\n\nThe final answer is $f(x)=\\frac{1}{x}$ for any $x \\in \\mathbb{R}^{+}$.",
    "solucao": "Taking $x=y=1$ in (1), we get $f(1) f(f(1))+f(f(1))=2 f(1) f(f(1))$ and hence $f(1)=1$. Swapping $x$ and $y$ in (1) and comparing with (1) again, we find\n\n$$\nx f\\left(x^{2}\\right) f(f(y))+f(y f(x))=y f\\left(y^{2}\\right) f(f(x))+f(x f(y)) .\n$$\n\nTaking $y=1$ in $(2)$, we have $x f\\left(x^{2}\\right)+f(f(x))=f(f(x))+f(x)$, that is,\n\n$$\nf\\left(x^{2}\\right)=\\frac{f(x)}{x}\n$$\n\nTake $y=1$ in (1) and apply (3) to $x f\\left(x^{2}\\right)$. We get $f(x)+f(f(x))=f(x)\\left(f\\left(f\\left(x^{2}\\right)\\right)+1\\right)$, which implies\n\n$$\nf\\left(f\\left(x^{2}\\right)\\right)=\\frac{f(f(x))}{f(x)}\n$$\n\nFor any $x \\in \\mathbb{R}^{+}$, we find that\n\n$$\nf\\left(f(x)^{2}\\right) \\stackrel{(3)}{=} \\frac{f(f(x))}{f(x)} \\stackrel{(4)}{=} f\\left(f\\left(x^{2}\\right)\\right) \\stackrel{(3)}{=} f\\left(\\frac{f(x)}{x}\\right) .\n$$\n\nIt remains to show the following key step.\n\n\\begin{itemize}\n  \\item Claim. The function $f$ is injective.\n\\end{itemize}\n\nProof. Using (3) and (4), we rewrite (1) as\n\n$$\nf(x) f(f(y))+f(y f(x))=f(x y)\\left(\\frac{f(f(x))}{f(x)}+\\frac{f(f(y))}{f(y)}\\right) .\n$$\n\nTake $x=y$ in (6) and apply (3). This gives $f(x) f(f(x))+f(x f(x))=2 \\frac{f(f(x))}{x}$, which means\n\n$$\nf(x f(x))=f(f(x))\\left(\\frac{2}{x}-f(x)\\right)\n$$\n\nUsing (3), equation (2) can be rewritten as\n\n$$\nf(x) f(f(y))+f(y f(x))=f(y) f(f(x))+f(x f(y))\n$$\n\nSuppose $f(x)=f(y)$ for some $x, y \\in \\mathbb{R}^{+}$. Then (8) implies\n\n$$\nf(y f(y))=f(y f(x))=f(x f(y))=f(x f(x)) .\n$$\n\nUsing $(7)$, this gives\n\n$$\nf(f(y))\\left(\\frac{2}{y}-f(y)\\right)=f(f(x))\\left(\\frac{2}{x}-f(x)\\right) .\n$$\n\nNoting $f(x)=f(y)$, we find $x=y$. This establishes the injectivity. By the Claim and (5), we get the only possible solution $f(x)=\\frac{1}{x}$. It suffices to check that this is a solution. Indeed, the left-hand side of (1) becomes\n\n$$\nx \\cdot \\frac{1}{x^{2}} \\cdot y+\\frac{x}{y}=\\frac{y}{x}+\\frac{x}{y}\n$$\n\nwhile the right-hand side becomes\n\n$$\n\\frac{1}{x y}\\left(x^{2}+y^{2}\\right)=\\frac{x}{y}+\\frac{y}{x}\n$$\n\nThe two sides agree with each other."
  },
  {
    "id": "fimo_2016_algebra_p5_1",
    "enunciado": "Prove that for every positive integer $n$, there exists a fraction $\\frac{a}{b}$ where $a$ and $b$ are integers satisfying $0<b \\leqslant \\sqrt{n}+1$ and $\\sqrt{n} \\leqslant \\frac{a}{b} \\leqslant \\sqrt{n+1}$.",
    "solucao": "Let $r$ be the unique positive integer for which $r^{2} \\leqslant n<(r+1)^{2}$. Write $n=r^{2}+s$. Then we have $0 \\leqslant s \\leqslant 2 r$. We discuss in two cases according to the parity of $s$.\n\n\\begin{itemize}\n  \\item Case 1. $s$ is even.\n\\end{itemize}\n\nConsider the number $\\left(r+\\frac{s}{2 r}\\right)^{2}=r^{2}+s+\\left(\\frac{s}{2 r}\\right)^{2}$. We find that\n\n$$\nn=r^{2}+s \\leqslant r^{2}+s+\\left(\\frac{s}{2 r}\\right)^{2} \\leqslant r^{2}+s+1=n+1\n$$\n\nIt follows that\n\n$$\n\\sqrt{n} \\leqslant r+\\frac{s}{2 r} \\leqslant \\sqrt{n+1}\n$$\n\nSince $s$ is even, we can choose the fraction $r+\\frac{s}{2 r}=\\frac{r^{2}+(s / 2)}{r}$ since $r \\leqslant \\sqrt{n}$.\n\n\\begin{itemize}\n  \\item Case 2. $s$ is odd.\n\\end{itemize}\n\nConsider the number $\\left(r+1-\\frac{2 r+1-s}{2(r+1)}\\right)^{2}=(r+1)^{2}-(2 r+1-s)+\\left(\\frac{2 r+1-s}{2(r+1)}\\right)^{2}$. We find that\n\n$$\n\\begin{aligned}\nn=r^{2}+s=(r+1)^{2}-(2 r+1-s) & \\leqslant(r+1)^{2}-(2 r+1-s)+\\left(\\frac{2 r+1-s}{2(r+1)}\\right)^{2} \\\\\n& \\leqslant(r+1)^{2}-(2 r+1-s)+1=n+1 .\n\\end{aligned}\n$$\n\nIt follows that\n\n$$\n\\sqrt{n} \\leqslant r+1-\\frac{2 r+1-s}{2(r+1)} \\leqslant \\sqrt{n+1}\n$$\n\nSince $s$ is odd, we can choose the fraction $(r+1)-\\frac{2 r+1-s}{2(r+1)}=\\frac{(r+1)^{2}-r+((s-1) / 2)}{r+1}$ since $r+1 \\leqslant \\sqrt{n}+1$"
  },
  {
    "id": "fimo_2016_algebra_p5_2",
    "enunciado": "Prove that there are infinitely many positive integers $n$ such that there is no fraction $\\frac{a}{b}$ where $a$ and $b$ are integers satisfying $0<b \\leqslant \\sqrt{n}$ and $\\sqrt{n} \\leqslant \\frac{a}{b} \\leqslant \\sqrt{n+1}$.",
    "solucao": "We show that for every positive integer $r$, there is no fraction $\\frac{a}{b}$ with $b \\leqslant \\sqrt{r^{2}+1}$ such that $\\sqrt{r^{2}+1} \\leqslant \\frac{a}{b} \\leqslant \\sqrt{r^{2}+2}$. Suppose on the contrary that such a fraction exists. Since $b \\leqslant \\sqrt{r^{2}+1}<r+1$ and $b$ is an integer, we have $b \\leqslant r$. Hence,\n\n$$\n(b r)^{2}<b^{2}\\left(r^{2}+1\\right) \\leqslant a^{2} \\leqslant b^{2}\\left(r^{2}+2\\right) \\leqslant b^{2} r^{2}+2 b r<(b r+1)^{2} .\n$$\n\nThis shows the square number $a^{2}$ is strictly bounded between the two consecutive squares $(b r)^{2}$ and $(b r+1)^{2}$, which is impossible. Hence, we have found infinitely many $n=r^{2}+1$ for which there is no fraction of the desired form."
  },
  {
    "id": "fimo_2016_algebra_p6",
    "enunciado": "The equation\n\n$$\n(x-1)(x-2) \\cdots(x-2016)=(x-1)(x-2) \\cdots(x-2016)\n$$\n\nis written on the board. One tries to erase some linear factors from both sides so that each side still has at least one factor, and the resulting equation has no real roots. Find the least number of linear factors one needs to erase to achieve this.\n\nThe final answer is 2016.",
    "solucao": "Since there are 2016 common linear factors on both sides, we need to erase at least 2016 factors. We claim that the equation has no real roots if we erase all factors $(x-k)$ on the left-hand side with $k \\equiv 2,3(\\bmod 4)$, and all factors $(x-m)$ on the right-hand side with $m \\equiv 0,1(\\bmod 4)$. Therefore, it suffices to show that no real number $x$ satisfies\n\n$$\n\\prod_{j=0}^{503}(x-4 j-1)(x-4 j-4)=\\prod_{j=0}^{503}(x-4 j-2)(x-4 j-3) .\n$$\n\n\\begin{itemize}\n  \\item Case 1. $x=1,2, \\ldots, 2016$.\n\\end{itemize}\n\nIn this case, one side of (1) is zero while the other side is not. This shows $x$ cannot satisfy (1).\n\n\\begin{itemize}\n  \\item Case 2. $4 k+1<x<4 k+2$ or $4 k+3<x<4 k+4$ for some $k=0,1, \\ldots, 503$.\n\\end{itemize}\n\nFor $j=0,1, \\ldots, 503$ with $j \\neq k$, the product $(x-4 j-1)(x-4 j-4)$ is positive. For $j=k$, the product $(x-4 k-1)(x-4 k-4)$ is negative. This shows the left-hand side of (1) is negative. On the other hand, each product $(x-4 j-2)(x-4 j-3)$ on the right-hand side of (1) is positive. This yields a contradiction.\n\n\\begin{itemize}\n  \\item Case 3. $x<1$ or $x>2016$ or $4 k<x<4 k+1$ for some $k=1,2, \\ldots, 503$.\n\\end{itemize}\n\nThe equation (1) can be rewritten as\n\n$$\n1=\\prod_{j=0}^{503} \\frac{(x-4 j-1)(x-4 j-4)}{(x-4 j-2)(x-4 j-3)}=\\prod_{j=0}^{503}\\left(1-\\frac{2}{(x-4 j-2)(x-4 j-3)}\\right) .\n$$\n\nNote that $(x-4 j-2)(x-4 j-3)>2$ for $0 \\leqslant j \\leqslant 503$ in this case. So each term in the product lies strictly between 0 and 1 , and the whole product must be less than 1 , which is impossible.\n\n\\begin{itemize}\n  \\item Case 4. $4 k+2<x<4 k+3$ for some $k=0,1, \\ldots, 503$.\n\\end{itemize}\n\nThis time we rewrite (1) as\n\n$$\n\\begin{aligned}\n1 & =\\frac{x-1}{x-2} \\cdot \\frac{x-2016}{x-2015} \\prod_{j=1}^{503} \\frac{(x-4 j)(x-4 j-1)}{(x-4 j+1)(x-4 j-2)} \\\\\n& =\\frac{x-1}{x-2} \\cdot \\frac{x-2016}{x-2015} \\prod_{j=1}^{503}\\left(1+\\frac{2}{(x-4 j+1)(x-4 j-2)}\\right) .\n\\end{aligned}\n$$\n\nClearly, $\\frac{x-1}{x-2}$ and $\\frac{x-2016}{x-2015}$ are both greater than 1. For the range of $x$ in this case, each term in the product is also greater than 1. Then the right-hand side must be greater than 1 and hence a contradiction arises. From the four cases, we conclude that (1) has no real roots. Hence, the minimum number of linear factors to be erased is 2016 ."
  },
  {
    "id": "fimo_2016_algebra_p7",
    "enunciado": "Denote by $\\mathbb{R}$ the set of all real numbers. Find all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ such that $f(0) \\neq 0$ and\n\n$$\nf(x+y)^{2}=2 f(x) f(y)+\\max \\left\\{f\\left(x^{2}\\right)+f\\left(y^{2}\\right), f\\left(x^{2}+y^{2}\\right)\\right\\}\n$$\n\nfor all real numbers $x$ and $y$.\n\nThe final answer is\n\n\\begin{itemize}\n  \\item $f(x)=-1$ for any $x \\in \\mathbb{R}$; or\n\n  \\item $f(x)=x-1$ for any $x \\in \\mathbb{R}$.\n\n\\end{itemize}",
    "solucao": "Taking $x=y=0$ in (1), we get $f(0)^{2}=2 f(0)^{2}+\\max \\{2 f(0), f(0)\\}$. If $f(0)>0$, then $f(0)^{2}+2 f(0)=0$ gives no positive solution. If $f(0)<0$, then $f(0)^{2}+f(0)=0$ gives $f(0)=-1$. Putting $y=0$ in (1), we have $f(x)^{2}=-2 f(x)+f\\left(x^{2}\\right)$, which is the same as $(f(x)+1)^{2}=f\\left(x^{2}\\right)+1$. Let $g(x)=f(x)+1$. Then for any $x \\in \\mathbb{R}$, we have\n\n$$\ng\\left(x^{2}\\right)=g(x)^{2} \\geqslant 0 .\n$$\n\nFrom (1), we find that $f(x+y)^{2} \\geqslant 2 f(x) f(y)+f\\left(x^{2}\\right)+f\\left(y^{2}\\right)$. In terms of $g$, this becomes $(g(x+y)-1)^{2} \\geqslant 2(g(x)-1)(g(y)-1)+g\\left(x^{2}\\right)+g\\left(y^{2}\\right)-2$. Using (2), this means\n\n$$\n(g(x+y)-1)^{2} \\geqslant(g(x)+g(y)-1)^{2}-1 .\n$$\n\nPutting $x=1$ in (2), we get $g(1)=0$ or 1 . The two cases are handled separately.\n\n\\begin{itemize}\n  \\item Case 1. $g(1)=0$, which is the same as $f(1)=-1$.\n\\end{itemize}\n\nWe put $x=-1$ and $y=0$ in (1). This gives $f(-1)^{2}=-2 f(-1)-1$, which forces $f(-1)=-1$. Next, we take $x=-1$ and $y=1$ in (1) to get $1=2+\\max \\{-2, f(2)\\}$. This clearly implies $1=2+f(2)$ and hence $f(2)=-1$, that is, $g(2)=0$. From (2), we can prove inductively that $g\\left(2^{2^{n}}\\right)=g(2)^{2^{n}}=0$ for any $n \\in \\mathbb{N}$. Substitute $y=2^{2^{n}}-x$ in (3). We obtain\n\n$$\n\\left(g(x)+g\\left(2^{2^{n}}-x\\right)-1\\right)^{2} \\leqslant\\left(g\\left(2^{2^{n}}\\right)-1\\right)^{2}+1=2 .\n$$\n\nFor any fixed $x \\geqslant 0$, we consider $n$ to be sufficiently large so that $2^{2^{n}}-x>0$. From (2), this implies $g\\left(2^{2^{n}}-x\\right) \\geqslant 0$ so that $g(x) \\leqslant 1+\\sqrt{2}$. Using (2) again, we get\n\n$$\ng(x)^{2^{n}}=g\\left(x^{2^{n}}\\right) \\leqslant 1+\\sqrt{2}\n$$\n\nfor any $n \\in \\mathbb{N}$. Therefore, $|g(x)| \\leqslant 1$ for any $x \\geqslant 0$.\n\nIf there exists $a \\in \\mathbb{R}$ for which $g(a) \\neq 0$, then for sufficiently large $n$ we must have $g\\left(\\left(a^{2}\\right)^{\\frac{1}{2^{n}}}\\right)=g\\left(a^{2}\\right)^{\\frac{1}{2^{n}}}>\\frac{1}{2}$. By taking $x=-y=-\\left(a^{2}\\right)^{\\frac{1}{2^{n}}}$ in (1), we obtain\n\n$$\n\\begin{aligned}\n1 & =2 f(x) f(-x)+\\max \\left\\{2 f\\left(x^{2}\\right), f\\left(2 x^{2}\\right)\\right\\} \\\\\n& =2(g(x)-1)(g(-x)-1)+\\max \\left\\{2\\left(g\\left(x^{2}\\right)-1\\right), g\\left(2 x^{2}\\right)-1\\right\\} \\\\\n& \\leqslant 2\\left(-\\frac{1}{2}\\right)\\left(-\\frac{1}{2}\\right)+0=\\frac{1}{2}\n\\end{aligned}\n$$\n\nsince $|g(-x)|=|g(x)| \\in\\left(\\frac{1}{2}, 1\\right]$ by $(2)$ and the choice of $x$, and since $g(z) \\leqslant 1$ for $z \\geqslant 0$. This yields a contradiction and hence $g(x)=0$ must hold for any $x$. This means $f(x)=-1$ for any $x \\in \\mathbb{R}$, which clearly satisfies (1). - Case 2. $g(1)=1$, which is the same as $f(1)=0$.\n\nWe put $x=-1$ and $y=1$ in $(1)$ to get $1=\\max \\{0, f(2)\\}$. This clearly implies $f(2)=1$ and hence $g(2)=2$. Setting $x=2 n$ and $y=2$ in $(3)$, we have\n\n$$\n(g(2 n+2)-1)^{2} \\geqslant(g(2 n)+1)^{2}-1\n$$\n\nBy induction on $n$, it is easy to prove that $g(2 n) \\geqslant n+1$ for all $n \\in \\mathbb{N}$. For any real number $a>1$, we choose a large $n \\in \\mathbb{N}$ and take $k$ to be the positive integer such that $2 k \\leqslant a^{2^{n}}<2 k+2$. From $(2)$ and $(3)$, we have\n\n$$\n\\left(g(a)^{2^{n}}-1\\right)^{2}+1=\\left(g\\left(a^{2^{n}}\\right)-1\\right)^{2}+1 \\geqslant\\left(g(2 k)+g\\left(a^{2^{n}}-2 k\\right)-1\\right)^{2} \\geqslant k^{2}>\\frac{1}{4}\\left(a^{2^{n}}-2\\right)^{2}\n$$\n\nsince $g\\left(a^{2^{n}}-2 k\\right) \\geqslant 0$. For large $n$, this clearly implies $g(a)^{2^{n}}>1$. Thus,\n\n$$\n\\left(g(a)^{2^{n}}\\right)^{2}>\\left(g(a)^{2^{n}}-1\\right)^{2}+1>\\frac{1}{4}\\left(a^{2^{n}}-2\\right)^{2}\n$$\n\nThis yields\n\n$$\ng(a)^{2^{n}}>\\frac{1}{2}\\left(a^{2^{n}}-2\\right)\n$$\n\nNote that\n\n$$\n\\frac{a^{2^{n}}}{a^{2^{n}}-2}=1+\\frac{2}{a^{2^{n}}-2} \\leqslant\\left(1+\\frac{2}{2^{n}\\left(a^{2^{n}}-2\\right)}\\right)^{2^{n}}\n$$\n\nby binomial expansion. This can be rewritten as\n\n$$\n\\left(a^{2^{n}}-2\\right)^{\\frac{1}{2^{n}}} \\geqslant \\frac{a}{1+\\frac{2}{2^{n}\\left(a^{2^{n}}-2\\right)}} .\n$$\n\nTogether with (4), we conclude $g(a) \\geqslant a$ by taking $n$ sufficiently large.\n\nConsider $x=n a$ and $y=a>1$ in $(3)$. This gives $(g((n+1) a)-1)^{2} \\geqslant(g(n a)+g(a)-1)^{2}-1$. By induction on $n$, it is easy to show $g(n a) \\geqslant(n-1)(g(a)-1)+a$ for any $n \\in \\mathbb{N}$. We choose a large $n \\in \\mathbb{N}$ and take $k$ to be the positive integer such that $k a \\leqslant 2^{2^{n}}<(k+1) a$. Using (2) and $(3)$, we have\n\n$2^{2^{n+1}}>\\left(2^{2^{n}}-1\\right)^{2}+1=\\left(g\\left(2^{2^{n}}\\right)-1\\right)^{2}+1 \\geqslant\\left(g\\left(2^{2^{n}}-k a\\right)+g(k a)-1\\right)^{2} \\geqslant((k-1)(g(a)-1)+a-1)^{2}$, from which it follows that\n\n$$\n2^{2^{n}} \\geqslant(k-1)(g(a)-1)+a-1>\\frac{2^{2^{n}}}{a}(g(a)-1)-2(g(a)-1)+a-1\n$$\n\nholds for sufficiently large $n$. Hence, we must have $\\frac{g(a)-1}{a} \\leqslant 1$, which implies $g(a) \\leqslant a+1$ for any $a>1$. Then for large $n \\in \\mathbb{N}$, from (3) and (2) we have\n\n$$\n4 a^{2^{n+1}}=\\left(2 a^{2^{n}}\\right)^{2} \\geqslant\\left(g\\left(2 a^{2^{n}}\\right)-1\\right)^{2} \\geqslant\\left(2 g\\left(a^{2^{n}}\\right)-1\\right)^{2}-1=\\left(2 g(a)^{2^{n}}-1\\right)^{2}-1\n$$\n\nThis implies\n\n$$\n2 a^{2^{n}}>\\frac{1}{2}\\left(1+\\sqrt{4 a^{2^{n+1}}+1}\\right) \\geqslant g(a)^{2^{n}}\n$$\n\nWhen $n$ tends to infinity, this forces $g(a) \\leqslant a$. Together with $g(a) \\geqslant a$, we get $g(a)=a$ for all real numbers $a>1$, that is, $f(a)=a-1$ for all $a>1$.\n\nFinally, for any $x \\in \\mathbb{R}$, we choose $y$ sufficiently large in (1) so that $y, x+y>1$. This gives $(x+y-1)^{2}=2 f(x)(y-1)+\\max \\left\\{f\\left(x^{2}\\right)+y^{2}-1, x^{2}+y^{2}-1\\right\\}$, which can be rewritten as\n\n$$\n2(x-1-f(x)) y=-x^{2}+2 x-2-2 f(x)+\\max \\left\\{f\\left(x^{2}\\right), x^{2}\\right\\} .\n$$\n\nAs the right-hand side is fixed, this can only hold for all large $y$ when $f(x)=x-1$. We now check that this function satisfies (1). Indeed, we have\n\n$$\n\\begin{aligned}\nf(x+y)^{2} & =(x+y-1)^{2}=2(x-1)(y-1)+\\left(x^{2}+y^{2}-1\\right) \\\\\n& =2 f(x) f(y)+\\max \\left\\{f\\left(x^{2}\\right)+f\\left(y^{2}\\right), f\\left(x^{2}+y^{2}\\right)\\right\\}\n\\end{aligned}\n$$"
  },
  {
    "id": "fimo_2016_algebra_p8",
    "enunciado": "Determine the largest real number $a$ such that for all $n \\geqslant 1$ and for all real numbers $x_{0}, x_{1}, \\ldots, x_{n}$ satisfying $0=x_{0}<x_{1}<x_{2}<\\cdots<x_{n}$, we have\n\n$$\n\\frac{1}{x_{1}-x_{0}}+\\frac{1}{x_{2}-x_{1}}+\\cdots+\\frac{1}{x_{n}-x_{n-1}} \\geqslant a\\left(\\frac{2}{x_{1}}+\\frac{3}{x_{2}}+\\cdots+\\frac{n+1}{x_{n}}\\right) .\n$$\n\nThe final answer is that the largest $a$ is $\\frac{4}{9}$.",
    "solucao": "We first show that $a=\\frac{4}{9}$ is admissible. For each $2 \\leqslant k \\leqslant n$, by the CauchySchwarz Inequality, we have\n\n$$\n\\left(x_{k-1}+\\left(x_{k}-x_{k-1}\\right)\\right)\\left(\\frac{(k-1)^{2}}{x_{k-1}}+\\frac{3^{2}}{x_{k}-x_{k-1}}\\right) \\geqslant(k-1+3)^{2},\n$$\n\nwhich can be rewritten as\n\n$$\n\\frac{9}{x_{k}-x_{k-1}} \\geqslant \\frac{(k+2)^{2}}{x_{k}}-\\frac{(k-1)^{2}}{x_{k-1}} \\text {. }\n$$\n\nSumming (2) over $k=2,3, \\ldots, n$ and adding $\\frac{9}{x_{1}}$ to both sides, we have\n\n$$\n9 \\sum_{k=1}^{n} \\frac{1}{x_{k}-x_{k-1}} \\geqslant 4 \\sum_{k=1}^{n} \\frac{k+1}{x_{k}}+\\frac{n^{2}}{x_{n}}>4 \\sum_{k=1}^{n} \\frac{k+1}{x_{k}} .\n$$\n\nThis shows (1) holds for $a=\\frac{4}{9}$.\n\nNext, we show that $a=\\frac{4}{9}$ is the optimal choice. Consider the sequence defined by $x_{0}=0$ and $x_{k}=x_{k-1}+k(k+1)$ for $k \\geqslant 1$, that is, $x_{k}=\\frac{1}{3} k(k+1)(k+2)$. Then the left-hand side of (1) equals\n\n$$\n\\sum_{k=1}^{n} \\frac{1}{k(k+1)}=\\sum_{k=1}^{n}\\left(\\frac{1}{k}-\\frac{1}{k+1}\\right)=1-\\frac{1}{n+1}\n$$\n\nwhile the right-hand side equals\n\n$$\na \\sum_{k=1}^{n} \\frac{k+1}{x_{k}}=3 a \\sum_{k=1}^{n} \\frac{1}{k(k+2)}=\\frac{3}{2} a \\sum_{k=1}^{n}\\left(\\frac{1}{k}-\\frac{1}{k+2}\\right)=\\frac{3}{2}\\left(1+\\frac{1}{2}-\\frac{1}{n+1}-\\frac{1}{n+2}\\right) a .\n$$\n\nWhen $n$ tends to infinity, the left-hand side tends to 1 while the right-hand side tends to $\\frac{9}{4} a$. Therefore $a$ has to be at most $\\frac{4}{9}$.\n\nHence the largest value of $a$ is $\\frac{4}{9}$."
  },
  {
    "id": "fimo_2016_number_theory_p1",
    "enunciado": "For any positive integer $k$, denote the sum of digits of $k$ in its decimal representation by $S(k)$. Find all polynomials $P(x)$ with integer coefficients such that for any positive integer $n \\geqslant 2016$, the integer $P(n)$ is positive and\n\n$$\nS(P(n))=P(S(n))\n$$\n\nThe final answer is\n\n\\begin{itemize}\n  \\item $P(x)=c$ where $1 \\leqslant c \\leqslant 9$ is an integer; or\n\n  \\item $P(x)=x$.\n\n\\end{itemize}",
    "solucao": "We consider three cases according to the degree of $P$.\n\n\\begin{itemize}\n  \\item Case 1. $P(x)$ is a constant polynomial.\n\\end{itemize}\n\nLet $P(x)=c$ where $c$ is an integer constant. Then (1) becomes $S(c)=c$. This holds if and only if $1 \\leqslant c \\leqslant 9$.\n\n\\begin{itemize}\n  \\item Case 2. $\\operatorname{deg} P=1$.\n\\end{itemize}\n\nWe have the following observation. For any positive integers $m, n$, we have\n\n$$\nS(m+n) \\leqslant S(m)+S(n)\n$$\n\nand equality holds if and only if there is no carry in the addition $m+n$.\n\nLet $P(x)=a x+b$ for some integers $a, b$ where $a \\neq 0$. As $P(n)$ is positive for large $n$, we must have $a \\geqslant 1$. The condition (1) becomes $S(a n+b)=a S(n)+b$ for all $n \\geqslant 2016$. Setting $n=2025$ and $n=2020$ respectively, we get\n\n$$\nS(2025 a+b)-S(2020 a+b)=(a S(2025)+b)-(a S(2020)+b)=5 a .\n$$\n\nOn the other hand, (2) implies\n\n$$\nS(2025 a+b)=S((2020 a+b)+5 a) \\leqslant S(2020 a+b)+S(5 a)\n$$\n\nThese give $5 a \\leqslant S(5 a)$. As $a \\geqslant 1$, this holds only when $a=1$, in which case (1) reduces to $S(n+b)=S(n)+b$ for all $n \\geqslant 2016$. Then we find that\n\n$$\nS(n+1+b)-S(n+b)=(S(n+1)+b)-(S(n)+b)=S(n+1)-S(n) .\n$$\n\nIf $b>0$, we choose $n$ such that $n+1+b=10^{k}$ for some sufficiently large $k$. Note that all the digits of $n+b$ are 9's, so that the left-hand side of (3) equals $1-9 k$. As $n$ is a positive integer less than $10^{k}-1$, we have $S(n)<9 k$. Therefore, the right-hand side of (3) is at least $1-(9 k-1)=2-9 k$, which is a contradiction.\n\nThe case $b<0$ can be handled similarly by considering $n+1$ to be a large power of 10 . Therefore, we conclude that $P(x)=x$, in which case (1) is trivially satisfied. - Case 3. $\\operatorname{deg} P \\geqslant 2$\n\nSuppose the leading term of $P$ is $a_{d} n^{d}$ where $a_{d} \\neq 0$. Clearly, we have $a_{d}>0$. Consider $n=10^{k}-1$ in (1). We get $S(P(n))=P(9 k)$. Note that $P(n)$ grows asymptotically as fast as $n^{d}$, so $S(P(n))$ grows asymptotically as no faster than a constant multiple of $k$. On the other hand, $P(9 k)$ grows asymptotically as fast as $k^{d}$. This shows the two sides of the last equation cannot be equal for sufficiently large $k$ since $d \\geqslant 2$.\n\nTherefore, we conclude that $P(x)=c$ where $1 \\leqslant c \\leqslant 9$ is an integer, or $P(x)=x$."
  },
  {
    "id": "fimo_2016_number_theory_p2",
    "enunciado": "Let $\\tau(n)$ be the number of positive divisors of $n$. Let $\\tau_{1}(n)$ be the number of positive divisors of $n$ which have remainders 1 when divided by 3 . Find all possible integral values of the fraction $\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}$\n\nThe final answer are all composite numbers together with 2.",
    "solucao": "In this solution, we always use $p_{i}$ to denote primes congruent to $1 \\bmod 3$, and use $q_{j}$ to denote primes congruent to $2 \\bmod 3$. When we express a positive integer $m$ using its prime factorization, we also include the special case $m=1$ by allowing the exponents to be zeros. We first compute $\\tau_{1}(m)$ for a positive integer $m$.\n\n\\begin{itemize}\n  \\item Claim. Let $m=3^{x} p_{1}^{a_{1}} p_{2}^{a_{2}} \\cdots p_{s}^{a_{s}} q_{1}^{b_{1}} q_{2}^{b_{2}} \\cdots q_{t}^{b_{t}}$ be the prime factorization of $m$. Then\n\\end{itemize}\n\n$$\n\\tau_{1}(m)=\\prod_{i=1}^{s}\\left(a_{i}+1\\right)\\left[\\frac{1}{2} \\prod_{j=1}^{t}\\left(b_{j}+1\\right)\\right]\n$$\n\nProof. To choose a divisor of $m$ congruent to $1 \\bmod 3$, it cannot have the prime divisor 3, while there is no restriction on choosing prime factors congruent to $1 \\bmod 3$. Also, we have to choose an even number of prime factors (counted with multiplicity) congruent to $2 \\bmod 3$.\n\nIf $\\prod_{j=1}^{t}\\left(b_{j}+1\\right)$ is even, then we may assume without loss of generality $b_{1}+1$ is even. We can choose the prime factors $q_{2}, q_{3}, \\ldots, q_{t}$ freely in $\\prod_{j=2}^{t}\\left(b_{j}+1\\right)$ ways. Then the parity of the number of $q_{1}$ is uniquely determined, and hence there are $\\frac{1}{2}\\left(b_{1}+1\\right)$ ways to choose the exponent of $q_{1}$. Hence (1) is verified in this case.\n\nIf $\\prod_{j=1}^{t}\\left(b_{j}+1\\right)$ is odd, we use induction on $t$ to count the number of choices. When $t=1$, there are $\\left\\lceil\\frac{b_{1}+1}{2}\\right\\rceil$ choices for which the exponent is even and $\\left\\lfloor\\frac{b_{1}+1}{2}\\right\\rfloor$ choices for which the exponent is odd. For the inductive step, we find that there are\n\n$$\n\\left\\lceil\\frac{1}{2} \\prod_{j=1}^{t-1}\\left(b_{j}+1\\right)\\right\\rceil \\cdot\\left\\lceil\\frac{b_{t}+1}{2}\\right\\rceil+\\left\\lfloor\\frac{1}{2} \\prod_{j=1}^{t-1}\\left(b_{j}+1\\right)\\right\\rfloor \\cdot\\left\\lfloor\\frac{b_{t}+1}{2}\\right\\rfloor=\\left\\lceil\\frac{1}{2} \\prod_{j=1}^{t}\\left(b_{j}+1\\right)\\right\\rceil\n$$\n\nchoices with an even number of prime factors and hence $\\left\\lfloor\\frac{1}{2} \\prod_{j=1}^{t}\\left(b_{j}+1\\right)\\right\\rfloor$ choices with an odd number of prime factors. Hence (1) is also true in this case.\n\nLet $n=3^{x} 2^{y} 5^{z} p_{1}^{a_{1}} p_{2}^{a_{2}} \\cdots p_{s}^{a_{s}} q_{1}^{b_{1}} q_{2}^{b_{2}} \\cdots q_{t}^{b_{t}}$. Using the well-known formula for computing the divisor function, we get\n\n$$\n\\tau(10 n)=(x+1)(y+2)(z+2) \\prod_{i=1}^{s}\\left(a_{i}+1\\right) \\prod_{j=1}^{t}\\left(b_{j}+1\\right)\n$$\n\nBy the Claim, we have\n\n$$\n\\tau_{1}(10 n)=\\prod_{i=1}^{s}\\left(a_{i}+1\\right)\\left[\\frac{1}{2}(y+2)(z+2) \\prod_{j=1}^{t}\\left(b_{j}+1\\right)\\right]\n$$\n\nIf $c=(y+2)(z+2) \\prod_{j=1}^{t}\\left(b_{j}+1\\right)$ is even, then (2) and (3) imply\n\n$$\n\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}=2(x+1)\n$$\n\nIn this case $\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}$ can be any even positive integer as $x$ runs through all nonnegative integers. If $c$ is odd, which means $y, z$ are odd and each $b_{j}$ is even, then (2) and (3) imply\n\n$$\n\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}=\\frac{2(x+1) c}{c+1}\n$$\n\nFor this to be an integer, we need $c+1$ divides $2(x+1)$ since $c$ and $c+1$ are relatively prime. Let $2(x+1)=k(c+1)$. Then $(4)$ reduces to\n\n$$\n\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}=k c=k(y+2)(z+2) \\prod_{j=1}^{t}\\left(b_{j}+1\\right) .\n$$\n\nNoting that $y, z$ are odd, the integers $y+2$ and $z+2$ are at least 3 . This shows the integer in this case must be composite. On the other hand, for any odd composite number $a b$ with $a, b \\geqslant 3$, we may simply take $n=3^{\\frac{a b-1}{2}} \\cdot 2^{a-2} \\cdot 5^{b-2}$ so that $\\frac{\\tau(10 n)}{\\tau_{1}(10 n)}=a b$ from (5).\n\nWe conclude that the fraction can be any even integer or any odd composite number. Equivalently, it can be 2 or any composite number."
  },
  {
    "id": "fimo_2016_number_theory_p3",
    "enunciado": "Define $P(n)=n^{2}+n+1$. For any positive integers $a$ and $b$, the set\n\n$$\n\\{P(a), P(a+1), P(a+2), \\ldots, P(a+b)\\}\n$$\n\nis said to be fragrant if none of its elements is relatively prime to the product of the other elements. Determine the smallest size of a fragrant set.\n\nThe final answer is 6 .",
    "solucao": "We have the following observations.\n\n(i) $(P(n), P(n+1))=1$ for any $n$.\n\nWe have $(P(n), P(n+1))=\\left(n^{2}+n+1, n^{2}+3 n+3\\right)=\\left(n^{2}+n+1,2 n+2\\right)$. Noting that $n^{2}+n+1$ is odd and $\\left(n^{2}+n+1, n+1\\right)=(1, n+1)=1$, the claim follows.\n\n(ii) $(P(n), P(n+2))=1$ for $n \\not \\equiv 2(\\bmod 7)$ and $(P(n), P(n+2))=7$ for $n \\equiv 2(\\bmod 7)$.\n\nFrom $(2 n+7) P(n)-(2 n-1) P(n+2)=14$ and the fact that $P(n)$ is odd, $(P(n), P(n+2))$ must be a divisor of 7 . The claim follows by checking $n \\equiv 0,1, \\ldots, 6(\\bmod 7)$ directly.\n\n(iii) $(P(n), P(n+3))=1$ for $n \\not \\equiv 1(\\bmod 3)$ and $3 \\mid(P(n), P(n+3))$ for $n \\equiv 1(\\bmod 3)$.\n\nFrom $(n+5) P(n)-(n-1) P(n+3)=18$ and the fact that $P(n)$ is odd, $(P(n), P(n+3))$ must be a divisor of 9 . The claim follows by checking $n \\equiv 0,1,2(\\bmod 3)$ directly.\n\nSuppose there exists a fragrant set with at most 5 elements. We may assume it contains exactly 5 elements $P(a), P(a+1), \\ldots, P(a+4)$ since the following argument also works with fewer elements. Consider $P(a+2)$. From (i), it is relatively prime to $P(a+1)$ and $P(a+3)$. Without loss of generality, assume $(P(a), P(a+2))>1$. From (ii), we have $a \\equiv 2(\\bmod 7)$. The same observation implies $(P(a+1), P(a+3))=1$. In order that the set is fragrant, $(P(a), P(a+3))$ and $(P(a+1), P(a+4))$ must both be greater than 1. From (iii), this holds only when both $a$ and $a+1$ are congruent to $1 \\bmod 3$, which is a contradiction.\n\nIt now suffices to construct a fragrant set of size 6. By the Chinese Remainder Theorem, we can take a positive integer $a$ such that\n\n$$\na \\equiv 7 \\quad(\\bmod 19), \\quad a+1 \\equiv 2 \\quad(\\bmod 7), \\quad a+2 \\equiv 1 \\quad(\\bmod 3) .\n$$\n\nFor example, we may take $a=197$. From (ii), both $P(a+1)$ and $P(a+3)$ are divisible by 7. From (iii), both $P(a+2)$ and $P(a+5)$ are divisible by 3 . One also checks from 19|P(7) $=57$ and $19 \\mid P(11)=133$ that $P(a)$ and $P(a+4)$ are divisible by 19 . Therefore, the set $\\{P(a), P(a+1), \\ldots, P(a+5)\\}$ is fragrant.\n\nTherefore, the smallest size of a fragrant set is 6 ."
  },
  {
    "id": "fimo_2016_number_theory_p4",
    "enunciado": "Let $n, m, k$ and $l$ be positive integers with $n \\neq 1$ such that $n^{k}+m n^{l}+1$ divides $n^{k+l}-1$. Prove that\n\n\\begin{itemize}\n  \\item $m=1$ and $l=2 k ;$ or\n\n  \\item $l \\mid k$ and $m=\\frac{n^{k-l}-1}{n^{l}-1}$.\n\n\\end{itemize}",
    "solucao": "It is given that\n\n$$\nn^{k}+m n^{l}+1 \\mid n^{k+l}-1\n$$\n\nThis implies\n\n$$\nn^{k}+m n^{l}+1 \\mid\\left(n^{k+l}-1\\right)+\\left(n^{k}+m n^{l}+1\\right)=n^{k+l}+n^{k}+m n^{l} .\n$$\n\nWe have two cases to discuss.\n\n\\begin{itemize}\n  \\item Case 1. $l \\geqslant k$.\n\\end{itemize}\n\nSince $\\left(n^{k}+m n^{l}+1, n\\right)=1,(2)$ yields\n\n$$\nn^{k}+m n^{l}+1 \\mid n^{l}+m n^{l-k}+1\n$$\n\nIn particular, we get $n^{k}+m n^{l}+1 \\leqslant n^{l}+m n^{l-k}+1$. As $n \\geqslant 2$ and $k \\geqslant 1$, $(m-1) n^{l}$ is at least $2(m-1) n^{l-k}$. It follows that the inequality cannot hold when $m \\geqslant 2$. For $m=1$, the above divisibility becomes\n\n$$\nn^{k}+n^{l}+1 \\mid n^{l}+n^{l-k}+1\n$$\n\nNote that $n^{l}+n^{l-k}+1<n^{l}+n^{l}+1<2\\left(n^{k}+n^{l}+1\\right)$. Thus we must have $n^{l}+n^{l-k}+1=n^{k}+n^{l}+1$ so that $l=2 k$, which gives the first result.\n\n\\begin{itemize}\n  \\item Case 2. $l<k$.\n\\end{itemize}\n\nThis time (2) yields\n\n$$\nn^{k}+m n^{l}+1 \\mid n^{k}+n^{k-l}+m\n$$\n\nIn particular, we get $n^{k}+m n^{l}+1 \\leqslant n^{k}+n^{k-l}+m$, which implies\n\n$$\nm \\leqslant \\frac{n^{k-l}-1}{n^{l}-1}\n$$\n\nOn the other hand, from (1) we may let $n^{k+l}-1=\\left(n^{k}+m n^{l}+1\\right) t$ for some positive integer $t$. Obviously, $t$ is less than $n^{l}$, which means $t \\leqslant n^{l}-1$ as it is an integer. Then we have $n^{k+l}-1 \\leqslant\\left(n^{k}+m n^{l}+1\\right)\\left(n^{l}-1\\right)$, which is the same as\n\n$$\nm \\geqslant \\frac{n^{k-l}-1}{n^{l}-1} .\n$$\n\nEquations (3) and (4) combine to give $m=\\frac{n^{k-l}-1}{n^{l}-1}$. As this is an integer, we have $l \\mid k-l$. This means $l \\mid k$ and it corresponds to the second result."
  },
  {
    "id": "fimo_2016_number_theory_p5",
    "enunciado": "Let $a$ be a positive integer which is not a square number. Denote by $A$ the set of all positive integers $k$ such that\n\n$$\nk=\\frac{x^{2}-a}{x^{2}-y^{2}}\n$$\n\nfor some integers $x$ and $y$ with $x>\\sqrt{a}$. Denote by $B$ the set of all positive integers $k$ such that (1) is satisfied for some integers $x$ and $y$ with $0 \\leqslant x<\\sqrt{a}$. Prove that $A=B$.",
    "solucao": "We first prove the following preliminary result.\n\n\\begin{itemize}\n  \\item Claim. For fixed $k$, let $x, y$ be integers satisfying (1). Then the numbers $x_{1}, y_{1}$ defined by\n\\end{itemize}\n\n$$\nx_{1}=\\frac{1}{2}\\left(x-y+\\frac{(x-y)^{2}-4 a}{x+y}\\right), \\quad y_{1}=\\frac{1}{2}\\left(x-y-\\frac{(x-y)^{2}-4 a}{x+y}\\right)\n$$\n\nare integers and satisfy (1) (with $x, y$ replaced by $x_{1}, y_{1}$ respectively).\n\nProof. Since $x_{1}+y_{1}=x-y$ and\n\n$$\nx_{1}=\\frac{x^{2}-x y-2 a}{x+y}=-x+\\frac{2\\left(x^{2}-a\\right)}{x+y}=-x+2 k(x-y),\n$$\n\nboth $x_{1}$ and $y_{1}$ are integers. Let $u=x+y$ and $v=x-y$. The relation (1) can be rewritten as\n\n$$\nu^{2}-(4 k-2) u v+\\left(v^{2}-4 a\\right)=0\n$$\n\nBy Vieta's Theorem, the number $z=\\frac{v^{2}-4 a}{u}$ satisfies\n\n$$\nv^{2}-(4 k-2) v z+\\left(z^{2}-4 a\\right)=0\n$$\n\nSince $x_{1}$ and $y_{1}$ are defined so that $v=x_{1}+y_{1}$ and $z=x_{1}-y_{1}$, we can reverse the process and verify (1) for $x_{1}, y_{1}$\n\nWe first show that $B \\subset A$. Take any $k \\in B$ so that (1) is satisfied for some integers $x, y$ with $0 \\leqslant x<\\sqrt{a}$. Clearly, $y \\neq 0$ and we may assume $y$ is positive. Since $a$ is not a square, we have $k>1$. Hence, we get $0 \\leqslant x<y<\\sqrt{a}$. Define\n\n$$\nx_{1}=\\frac{1}{2}\\left|x-y+\\frac{(x-y)^{2}-4 a}{x+y}\\right|, \\quad y_{1}=\\frac{1}{2}\\left(x-y-\\frac{(x-y)^{2}-4 a}{x+y}\\right) .\n$$\n\nBy the Claim, $x_{1}, y_{1}$ are integers satisfying (1). Also, we have\n\n$$\nx_{1} \\geqslant-\\frac{1}{2}\\left(x-y+\\frac{(x-y)^{2}-4 a}{x+y}\\right)=\\frac{2 a+x(y-x)}{x+y} \\geqslant \\frac{2 a}{x+y}>\\sqrt{a} .\n$$\n\nThis implies $k \\in A$ and hence $B \\subset A$. Next, we shall show that $A \\subset B$. Take any $k \\in A$ so that (1) is satisfied for some integers $x, y$ with $x>\\sqrt{a}$. Again, we may assume $y$ is positive. Among all such representations of $k$, we choose the one with smallest $x+y$. Define\n\n$$\nx_{1}=\\frac{1}{2}\\left|x-y+\\frac{(x-y)^{2}-4 a}{x+y}\\right|, \\quad y_{1}=\\frac{1}{2}\\left(x-y-\\frac{(x-y)^{2}-4 a}{x+y}\\right) .\n$$\n\nBy the Claim, $x_{1}, y_{1}$ are integers satisfying (1). Since $k>1$, we get $x>y>\\sqrt{a}$. Therefore, we have $y_{1}>\\frac{4 a}{x+y}>0$ and $\\frac{4 a}{x+y}<x+y$. It follows that\n\n$$\nx_{1}+y_{1} \\leqslant \\max \\left\\{x-y, \\frac{4 a-(x-y)^{2}}{x+y}\\right\\}<x+y\n$$\n\nIf $x_{1}>\\sqrt{a}$, we get a contradiction due to the minimality of $x+y$. Therefore, we must have $0 \\leqslant x_{1}<\\sqrt{a}$, which means $k \\in B$ so that $A \\subset B$.\n\nThe two subset relations combine to give $A=B$."
  },
  {
    "id": "fimo_2016_number_theory_p6",
    "enunciado": "Denote by $\\mathbb{N}$ the set of all positive integers. Find all functions $f: \\mathbb{N} \\rightarrow \\mathbb{N}$ such that for all positive integers $m$ and $n$, the integer $f(m)+f(n)-m n$ is nonzero and divides $m f(m)+n f(n)$.\n\nThe final answer is $f(n)=n^{2}$ for any $n \\in \\mathbb{N}$.",
    "solucao": "It is given that\n\n$$\nf(m)+f(n)-m n \\mid m f(m)+n f(n) .\n$$\n\nTaking $m=n=1$ in (1), we have $2 f(1)-1 \\mid 2 f(1)$. Then $2 f(1)-1 \\mid 2 f(1)-(2 f(1)-1)=1$ and hence $f(1)=1$.\n\nLet $p \\geqslant 7$ be a prime. Taking $m=p$ and $n=1$ in (1), we have $f(p)-p+1 \\mid p f(p)+1$ and hence\n\n$$\nf(p)-p+1 \\mid p f(p)+1-p(f(p)-p+1)=p^{2}-p+1 .\n$$\n\nIf $f(p)-p+1=p^{2}-p+1$, then $f(p)=p^{2}$. If $f(p)-p+1 \\neq p^{2}-p+1$, as $p^{2}-p+1$ is an odd positive integer, we have $p^{2}-p+1 \\geqslant 3(f(p)-p+1)$, that is,\n\n$$\nf(p) \\leqslant \\frac{1}{3}\\left(p^{2}+2 p-2\\right) .\n$$\n\nTaking $m=n=p$ in (1), we have $2 f(p)-p^{2} \\mid 2 p f(p)$. This implies\n\n$$\n2 f(p)-p^{2} \\mid 2 p f(p)-p\\left(2 f(p)-p^{2}\\right)=p^{3} .\n$$\n\nBy $(2)$ and $f(p) \\geqslant 1$, we get\n\n$$\n-p^{2}<2 f(p)-p^{2} \\leqslant \\frac{2}{3}\\left(p^{2}+2 p-2\\right)-p^{2}<-p\n$$\n\nsince $p \\geqslant 7$. This contradicts the fact that $2 f(p)-p^{2}$ is a factor of $p^{3}$. Thus we have proved that $f(p)=p^{2}$ for all primes $p \\geqslant 7$.\n\nLet $n$ be a fixed positive integer. Choose a sufficiently large prime $p$. Consider $m=p$ in (1). We obtain\n\n$$\nf(p)+f(n)-p n \\mid p f(p)+n f(n)-n(f(p)+f(n)-p n)=p f(p)-n f(p)+p n^{2} .\n$$\n\nAs $f(p)=p^{2}$, this implies $p^{2}-p n+f(n) \\mid p\\left(p^{2}-p n+n^{2}\\right)$. As $p$ is sufficiently large and $n$ is fixed, $p$ cannot divide $f(n)$, and so $\\left(p, p^{2}-p n+f(n)\\right)=1$. It follows that $p^{2}-p n+f(n) \\mid p^{2}-p n+n^{2}$ and hence\n\n$$\np^{2}-p n+f(n) \\mid\\left(p^{2}-p n+n^{2}\\right)-\\left(p^{2}-p n+f(n)\\right)=n^{2}-f(n) .\n$$\n\nNote that $n^{2}-f(n)$ is fixed while $p^{2}-p n+f(n)$ is chosen to be sufficiently large. Therefore, we must have $n^{2}-f(n)=0$ so that $f(n)=n^{2}$ for any positive integer $n$.\n\nFinally, we check that when $f(n)=n^{2}$ for any positive integer $n$, then\n\n$$\nf(m)+f(n)-m n=m^{2}+n^{2}-m n\n$$\n\nand\n\n$$\nm f(m)+n f(n)=m^{3}+n^{3}=(m+n)\\left(m^{2}+n^{2}-m n\\right) .\n$$\n\nThe latter expression is divisible by the former for any positive integers $m, n$. This shows $f(n)=n^{2}$ is the only solution."
  },
  {
    "id": "fimo_2016_number_theory_p7",
    "enunciado": "Let $n$ be an odd positive integer. In the Cartesian plane, a cyclic polygon $P$ with area $S$ is chosen. All its vertices have integral coordinates, and the squares of its side lengths are all divisible by $n$. Prove that $2 S$ is an integer divisible by $n$.",
    "solucao": "Let $P=A_{1} A_{2} \\ldots A_{k}$ and let $A_{k+i}=A_{i}$ for $i \\geqslant 1$. By the Shoelace Formula, the area of any convex polygon with integral coordinates is half an integer. Therefore, $2 S$ is an integer. We shall prove by induction on $k \\geqslant 3$ that $2 S$ is divisible by $n$. Clearly, it suffices to consider $n=p^{t}$ where $p$ is an odd prime and $t \\geqslant 1$.\n\nFor the base case $k=3$, let the side lengths of $P$ be $\\sqrt{n a}, \\sqrt{n b}, \\sqrt{n c}$ where $a, b, c$ are positive integers. By Heron's Formula,\n\n$$\n16 S^{2}=n^{2}\\left(2 a b+2 b c+2 c a-a^{2}-b^{2}-c^{2}\\right) .\n$$\n\nThis shows $16 S^{2}$ is divisible by $n^{2}$. Since $n$ is odd, $2 S$ is divisible by $n$.\n\nAssume $k \\geqslant 4$. If the square of length of one of the diagonals is divisible by $n$, then that diagonal divides $P$ into two smaller polygons, to which the induction hypothesis applies. Hence we may assume that none of the squares of diagonal lengths is divisible by $n$. As usual, we denote by $\\nu_{p}(r)$ the exponent of $p$ in the prime decomposition of $r$. We claim the following.\n\n\\begin{itemize}\n  \\item Claim. $\\nu_{p}\\left(A_{1} A_{m}^{2}\\right)>\\nu_{p}\\left(A_{1} A_{m+1}^{2}\\right)$ for $2 \\leqslant m \\leqslant k-1$.\n\\end{itemize}\n\nProof. The case $m=2$ is obvious since $\\nu_{p}\\left(A_{1} A_{2}^{2}\\right) \\geqslant p^{t}>\\nu_{p}\\left(A_{1} A_{3}^{2}\\right)$ by the condition and the above assumption.\n\nSuppose $\\nu_{p}\\left(A_{1} A_{2}^{2}\\right)>\\nu_{p}\\left(A_{1} A_{3}^{2}\\right)>\\cdots>\\nu_{p}\\left(A_{1} A_{m}^{2}\\right)$ where $3 \\leqslant m \\leqslant k-1$. For the induction step, we apply Ptolemy's Theorem to the cyclic quadrilateral $A_{1} A_{m-1} A_{m} A_{m+1}$ to get\n\n$$\nA_{1} A_{m+1} \\times A_{m-1} A_{m}+A_{1} A_{m-1} \\times A_{m} A_{m+1}=A_{1} A_{m} \\times A_{m-1} A_{m+1},\n$$\n\nwhich can be rewritten as\n\n$$\n\\begin{aligned}\nA_{1} A_{m+1}^{2} \\times A_{m-1} A_{m}^{2}= & A_{1} A_{m-1}^{2} \\times A_{m} A_{m+1}^{2}+A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2} \\\\\n& -2 A_{1} A_{m-1} \\times A_{m} A_{m+1} \\times A_{1} A_{m} \\times A_{m-1} A_{m+1} .\n\\end{aligned}\n$$\n\nFrom this, $2 A_{1} A_{m-1} \\times A_{m} A_{m+1} \\times A_{1} A_{m} \\times A_{m-1} A_{m+1}$ is an integer. We consider the component of $p$ of each term in (1). By the inductive hypothesis, we have $\\nu_{p}\\left(A_{1} A_{m-1}^{2}\\right)>\\nu_{p}\\left(A_{1} A_{m}^{2}\\right)$. Also, we have $\\nu_{p}\\left(A_{m} A_{m+1}^{2}\\right) \\geqslant p^{t}>\\nu_{p}\\left(A_{m-1} A_{m+1}^{2}\\right)$. These give\n\n$$\n\\nu_{p}\\left(A_{1} A_{m-1}^{2} \\times A_{m} A_{m+1}^{2}\\right)>\\nu_{p}\\left(A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right) \\text {. }\n$$\n\nNext, we have $\\nu_{p}\\left(4 A_{1} A_{m-1}^{2} \\times A_{m} A_{m+1}^{2} \\times A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right)=\\nu_{p}\\left(A_{1} A_{m-1}^{2} \\times A_{m} A_{m+1}^{2}\\right)+$ $\\nu_{p}\\left(A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right)>2 \\nu_{p}\\left(A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right)$ from (2). This implies\n\n$$\n\\nu_{p}\\left(2 A_{1} A_{m-1} \\times A_{m} A_{m+1} \\times A_{1} A_{m} \\times A_{m-1} A_{m+1}\\right)>\\nu_{p}\\left(A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right) .\n$$\n\nCombining (1), (2) and (3), we conclude that\n\n$$\n\\nu_{p}\\left(A_{1} A_{m+1}^{2} \\times A_{m-1} A_{m}^{2}\\right)=\\nu_{p}\\left(A_{1} A_{m}^{2} \\times A_{m-1} A_{m+1}^{2}\\right) \\text {. }\n$$\n\nBy $\\nu_{p}\\left(A_{m-1} A_{m}^{2}\\right) \\geqslant p^{t}>\\nu_{p}\\left(A_{m-1} A_{m+1}^{2}\\right)$, we get $\\nu_{p}\\left(A_{1} A_{m+1}^{2}\\right)<\\nu_{p}\\left(A_{1} A_{m}^{2}\\right)$. The Claim follows by induction. From the Claim, we get a chain of inequalities\n\n$$\np^{t}>\\nu_{p}\\left(A_{1} A_{3}^{2}\\right)>\\nu_{p}\\left(A_{1} A_{4}^{2}\\right)>\\cdots>\\nu_{p}\\left(A_{1} A_{k}^{2}\\right) \\geqslant p^{t}\n$$\n\nwhich yields a contradiction. Therefore, we can show by induction that $2 S$ is divisible by $n$."
  },
  {
    "id": "fimo_2016_number_theory_p8",
    "enunciado": "Find all polynomials $P(x)$ of odd degree $d$ and with integer coefficients satisfying the following property: for each positive integer $n$, there exist $n$ positive integers $x_{1}, x_{2}, \\ldots, x_{n}$ such that $\\frac{1}{2}<\\frac{P\\left(x_{i}\\right)}{P\\left(x_{j}\\right)}<2$ and $\\frac{P\\left(x_{i}\\right)}{P\\left(x_{j}\\right)}$ is the $d$-th power of a rational number for every pair of indices $i$ and $j$ with $1 \\leqslant i, j \\leqslant n$.\n\nThe final answer is $P(x)=a(r x+s)^{d}$ where $a, r, s$ are integers with $a \\neq 0, r \\geqslant 1$ and $(r, s)=1$.",
    "solucao": "Let $P(x)=a_{d} x^{d}+a_{d-1} x^{d-1}+\\cdots+a_{0}$. Consider the substitution $y=d a_{d} x+a_{d-1}$. By defining $Q(y)=P(x)$, we find that $Q$ is a polynomial with rational coefficients without the term $y^{d-1}$. Let $Q(y)=b_{d} y^{d}+b_{d-2} y^{d-2}+b_{d-3} y^{d-3}+\\cdots+b_{0}$ and $B=\\max _{0 \\leqslant i \\leqslant d}\\left\\{\\left|b_{i}\\right|\\right\\}$ (where $b_{d-1}=0$ ).\n\nThe condition shows that for each $n \\geqslant 1$, there exist integers $y_{1}, y_{2}, \\ldots, y_{n}$ such that $\\frac{1}{2}<\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{j}\\right)}<2$ and $\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{j}\\right)}$ is the $d$-th power of a rational number for $1 \\leqslant i, j \\leqslant n$. Since $n$ can be arbitrarily large, we may assume all $x_{i}$ 's and hence $y_{i}$ 's are integers larger than some absolute constant in the following.\n\nBy Dirichlet's Theorem, since $d$ is odd, we can find a sufficiently large prime $p$ such that $p \\equiv 2(\\bmod d)$. In particular, we have $(p-1, d)=1$. For this fixed $p$, we choose $n$ to be sufficiently large. Then by the Pigeonhole Principle, there must be $d+1$ of $y_{1}, y_{2}, \\ldots, y_{n}$ which are congruent $\\bmod p$. Without loss of generality, assume $y_{i} \\equiv y_{j}(\\bmod p)$ for $1 \\leqslant i, j \\leqslant d+1$. We shall establish the following.\n\n\\begin{itemize}\n  \\item Claim. $\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{1}\\right)}=\\frac{y_{i}^{d}}{y_{1}^{d}}$ for $2 \\leqslant i \\leqslant d+1$.\n\\end{itemize}\n\nProof. Let $\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{1}\\right)}=\\frac{l^{d}}{m^{d}}$ where $(l, m)=1$ and $l, m>0$. This can be rewritten in the expanded form\n\n$$\nb_{d}\\left(m^{d} y_{i}^{d}-l^{d} y_{1}^{d}\\right)=-\\sum_{j=0}^{d-2} b_{j}\\left(m^{d} y_{i}^{j}-l^{d} y_{1}^{j}\\right) .\n$$\n\nLet $c$ be the common denominator of $Q$, so that $c Q(k)$ is an integer for any integer $k$. Note that $c$ depends only on $P$ and so we may assume $(p, c)=1$. Then $y_{1} \\equiv y_{i}(\\bmod p)$ implies $c Q\\left(y_{1}\\right) \\equiv c Q\\left(y_{i}\\right)(\\bmod p)$.\n\n\\begin{itemize}\n  \\item Case 1. $p \\mid c Q\\left(y_{1}\\right)$.\n\\end{itemize}\n\nIn this case, there is a cancellation of $p$ in the numerator and denominator of $\\frac{c Q\\left(y_{i}\\right)}{c Q\\left(y_{1}\\right)}$, so that $m^{d} \\leqslant p^{-1}\\left|c Q\\left(y_{1}\\right)\\right|$. Noting $\\left|Q\\left(y_{1}\\right)\\right|<2 B y_{1}^{d}$ as $y_{1}$ is large, we get\n\n$$\nm \\leqslant p^{-\\frac{1}{d}}(2 c B)^{\\frac{1}{d}} y_{1} .\n$$\n\nFor large $y_{1}$ and $y_{i}$, the relation $\\frac{1}{2}<\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{1}\\right)}<2$ implies\n\n$$\n\\frac{1}{3}<\\frac{y_{i}^{d}}{y_{1}^{d}}<3\n$$\n\nWe also have\n\n$$\n\\frac{1}{2}<\\frac{l^{d}}{m^{d}}<2\n$$\n\nNow, the left-hand side of $(1)$ is\n\n$$\nb_{d}\\left(m y_{i}-l y_{1}\\right)\\left(m^{d-1} y_{i}^{d-1}+m^{d-2} y_{i}^{d-2} l y_{1}+\\cdots+l^{d-1} y_{1}^{d-1}\\right)\n$$\n\nSuppose on the contrary that $m y_{i}-l y_{1} \\neq 0$. Then the absolute value of the above expression is at least $\\left|b_{d}\\right| m^{d-1} y_{i}^{d-1}$. On the other hand, the absolute value of the right-hand side of (1) is at most\n\n$$\n\\begin{aligned}\n\\sum_{j=0}^{d-2} B\\left(m^{d} y_{i}^{j}+l^{d} y_{1}^{j}\\right) & \\leqslant(d-1) B\\left(m^{d} y_{i}^{d-2}+l^{d} y_{1}^{d-2}\\right) \\\\\n& \\leqslant(d-1) B\\left(7 m^{d} y_{i}^{d-2}\\right) \\\\\n& \\leqslant 7(d-1) B\\left(p^{-\\frac{1}{d}}(2 c B)^{\\frac{1}{d}} y_{1}\\right) m^{d-1} y_{i}^{d-2} \\\\\n& \\leqslant 21(d-1) B p^{-\\frac{1}{d}}(2 c B)^{\\frac{1}{d}} m^{d-1} y_{i}^{d-1}\n\\end{aligned}\n$$\n\nby using successively (3), (4), (2) and again (3). This shows\n\n$$\n\\left|b_{d}\\right| m^{d-1} y_{i}^{d-1} \\leqslant 21(d-1) B p^{-\\frac{1}{d}}(2 c B)^{\\frac{1}{d}} m^{d-1} y_{i}^{d-1}\n$$\n\nwhich is a contradiction for large $p$ as $b_{d}, B, c, d$ depend only on the polynomial $P$. Therefore, we have $m y_{i}-l y_{1}=0$ in this case.\n\n\\begin{itemize}\n  \\item Case 2. $\\left(p, c Q\\left(y_{1}\\right)\\right)=1$.\n\\end{itemize}\n\nFrom $c Q\\left(y_{1}\\right) \\equiv c Q\\left(y_{i}\\right)(\\bmod p)$, we have $l^{d} \\equiv m^{d}(\\bmod p)$. Since $(p-1, d)=1$, we use Fermat Little Theorem to conclude $l \\equiv m(\\bmod p)$. Then $p \\mid m y_{i}-l y_{1}$. Suppose on the contrary that $m y_{i}-l y_{1} \\neq 0$. Then the left-hand side of (1) has absolute value at least $\\left|b_{d}\\right| p m^{d-1} y_{i}^{d-1}$. Similar to Case 1 , the right-hand side of (1) has absolute value at most\n\n$$\n21(d-1) B(2 c B)^{\\frac{1}{d}} m^{d-1} y_{i}^{d-1}\n$$\n\nwhich must be smaller than $\\left|b_{d}\\right| p m^{d-1} y_{i}^{d-1}$ for large $p$. Again this yields a contradiction and hence $m y_{i}-l y_{1}=0$.\n\nIn both cases, we find that $\\frac{Q\\left(y_{i}\\right)}{Q\\left(y_{1}\\right)}=\\frac{l^{d}}{m^{d}}=\\frac{y_{i}^{d}}{y_{1}^{d}}$.\n\nFrom the Claim, the polynomial $Q\\left(y_{1}\\right) y^{d}-y_{1}^{d} Q(y)$ has roots $y=y_{1}, y_{2}, \\ldots, y_{d+1}$. Since its degree is at most $d$, this must be the zero polynomial. Hence, $Q(y)=b_{d} y^{d}$. This implies $P(x)=a_{d}\\left(x+\\frac{a_{d-1}}{d a_{d}}\\right)^{d}$. Let $\\frac{a_{d-1}}{d a_{d}}=\\frac{s}{r}$ with integers $r, s$ where $r \\geqslant 1$ and $(r, s)=1$. Since $P$ has integer coefficients, we need $r^{d} \\mid a_{d}$. Let $a_{d}=r^{d} a$. Then $P(x)=a(r x+s)^{d}$. It is obvious that such a polynomial satisfies the conditions."
  },
  {
    "id": "fimo_2017_algebra_p1",
    "enunciado": "Let $a_{1}, a_{2}, \\ldots, a_{n}, k$, and $M$ be positive integers such that\n\n$$\n\\frac{1}{a_{1}}+\\frac{1}{a_{2}}+\\cdots+\\frac{1}{a_{n}}=k \\quad \\text { and } \\quad a_{1} a_{2} \\ldots a_{n}=M .\n$$\n\nIf $M>1$, prove that the polynomial\n\n$$\nP(x)=M(x+1)^{k}-\\left(x+a_{1}\\right)\\left(x+a_{2}\\right) \\cdots\\left(x+a_{n}\\right)\n$$\n\nhas no positive roots.",
    "solucao": "We first prove that, for $x>0$,\n\n$$\na_{i}(x+1)^{1 / a_{i}} \\leqslant x+a_{i}\n$$\n\nwith equality if and only if $a_{i}=1$. It is clear that equality occurs if $a_{i}=1$.\n\nIf $a_{i}>1$, the AM-GM inequality applied to a single copy of $x+1$ and $a_{i}-1$ copies of 1 yields\n\n$$\n\\frac{(x+1)+\\overbrace{1+1+\\cdots+1}^{a_{i}-1 \\text { ones }}}{a_{i}} \\geqslant \\sqrt[a_{i}]{(x+1) \\cdot 1^{a_{i}-1}} \\Longrightarrow a_{i}(x+1)^{1 / a_{i}} \\leqslant x+a_{i} .\n$$\n\nSince $x+1>1$, the inequality is strict for $a_{i}>1$.\n\nMultiplying the inequalities (1) for $i=1,2, \\ldots, n$ yields\n\n$$\n\\prod_{i=1}^{n} a_{i}(x+1)^{1 / a_{i}} \\leqslant \\prod_{i=1}^{n}\\left(x+a_{i}\\right) \\Longleftrightarrow M(x+1)^{\\sum_{i=1}^{n} 1 / a_{i}}-\\prod_{i=1}^{n}\\left(x+a_{i}\\right) \\leqslant 0 \\Longleftrightarrow P(x) \\leqslant 0\n$$\n\nwith equality iff $a_{i}=1$ for all $i \\in\\{1,2, \\ldots, n\\}$. But this implies $M=1$, which is not possible. Hence $P(x)<0$ for all $x \\in \\mathbb{R}^{+}$, and $P$ has no positive roots."
  },
  {
    "id": "fimo_2017_algebra_p2",
    "enunciado": "Let $q$ be a real number. Gugu has a napkin with ten distinct real numbers written on it, and he writes the following three lines of real numbers on the blackboard:\n\n\\begin{itemize}\n  \\item In the first line, Gugu writes down every number of the form $a-b$, where $a$ and $b$ are two (not necessarily distinct) numbers on his napkin.\n\n  \\item In the second line, Gugu writes down every number of the form $q a b$, where $a$ and $b$ are two (not necessarily distinct) numbers from the first line.\n\n  \\item In the third line, Gugu writes down every number of the form $a^{2}+b^{2}-c^{2}-d^{2}$, where $a, b, c, d$ are four (not necessarily distinct) numbers from the first line.\n\n\\end{itemize}\n\nDetermine all values of $q$ such that, regardless of the numbers on Gugu's napkin, every number in the second line is also a number in the third line.\n\nThe final answer is $-2,0,2$.",
    "solucao": "Call a number $q$ good if every number in the second line appears in the third line unconditionally. We first show that the numbers 0 and $\\pm 2$ are good. The third line necessarily contains 0 , so 0 is good. For any two numbers $a, b$ in the first line, write $a=x-y$ and $b=u-v$, where $x, y, u, v$ are (not necessarily distinct) numbers on the napkin. We may now write\n\n$$\n2 a b=2(x-y)(u-v)=(x-v)^{2}+(y-u)^{2}-(x-u)^{2}-(y-v)^{2},\n$$\n\nwhich shows that 2 is good. By negating both sides of the above equation, we also see that $-2$ is good.\n\nWe now show that $-2,0$, and 2 are the only good numbers. Assume for sake of contradiction that $q$ is a good number, where $q \\notin\\{-2,0,2\\}$. We now consider some particular choices of numbers on Gugu's napkin to arrive at a contradiction.\n\nAssume that the napkin contains the integers $1,2, \\ldots, 10$. Then, the first line contains the integers $-9,-8, \\ldots, 9$. The second line then contains $q$ and $81 q$, so the third line must also contain both of them. But the third line only contains integers, so $q$ must be an integer. Furthermore, the third line contains no number greater than $162=9^{2}+9^{2}-0^{2}-0^{2}$ or less than $-162$, so we must have $-162 \\leqslant 81 q \\leqslant 162$. This shows that the only possibilities for $q$ are $\\pm 1$\n\nNow assume that $q=\\pm 1$. Let the napkin contain $0,1,4,8,12,16,20,24,28,32$. The first line contains $\\pm 1$ and $\\pm 4$, so the second line contains $\\pm 4$. However, for every number $a$ in the first line, $a \\neq 2(\\bmod 4)$, so we may conclude that $a^{2} \\equiv 0,1(\\bmod 8)$. Consequently, every number in the third line must be congruent to $-2,-1,0,1,2(\\bmod 8)$; in particular, $\\pm 4$ cannot be in the third line, which is a contradiction."
  },
  {
    "id": "fimo_2017_algebra_p3",
    "enunciado": "Let $S$ be a finite set, and let $\\mathcal{A}$ be the set of all functions from $S$ to $S$. Let $f$ be an element of $\\mathcal{A}$, and let $T=f(S)$ be the image of $S$ under $f$. Suppose that $f \\circ g \\circ f \\neq g \\circ f \\circ g$ for every $g$ in $\\mathcal{A}$ with $g \\neq f$. Show that $f(T)=T$.",
    "solucao": "For $n \\geqslant 1$, denote the $n$-th composition of $f$ with itself by\n\n$$\nf^{n} \\stackrel{\\text { def }}{=} \\underbrace{f \\circ f \\circ \\cdots \\circ f}_{n \\text { times }} .\n$$\n\nBy hypothesis, if $g \\in \\mathcal{A}$ satisfies $f \\circ g \\circ f=g \\circ f \\circ g$, then $g=f$. A natural idea is to try to plug in $g=f^{n}$ for some $n$ in the expression $f \\circ g \\circ f=g \\circ f \\circ g$ in order to get $f^{n}=f$, which solves the problem:\n\nClaim. If there exists $n \\geqslant 3$ such that $f^{n+2}=f^{2 n+1}$, then the restriction $f: T \\rightarrow T$ of $f$ to $T$ is a bijection.\n\nProof. Indeed, by hypothesis, $f^{n+2}=f^{2 n+1} \\Longleftrightarrow f \\circ f^{n} \\circ f=f^{n} \\circ f \\circ f^{n} \\Longrightarrow f^{n}=f$. Since $n-2 \\geqslant 1$, the image of $f^{n-2}$ is contained in $T=f(S)$, hence $f^{n-2}$ restricts to a function $f^{n-2}: T \\rightarrow T$. This is the inverse of $f: T \\rightarrow T$. In fact, given $t \\in T$, say $t=f(s)$ with $s \\in S$, we have\n\n$$\nt=f(s)=f^{n}(s)=f^{n-2}(f(t))=f\\left(f^{n-2}(t)\\right), \\quad \\text { i.e., } \\quad f^{n-2} \\circ f=f \\circ f^{n-2}=\\text { id on } T\n$$\n\n(here id stands for the identity function). Hence, the restriction $f: T \\rightarrow T$ of $f$ to $T$ is bijective with inverse given by $f^{n-2}: T \\rightarrow T$.\n\nIt remains to show that $n$ as in the claim exists. For that, define\n\n$$\nS_{m} \\stackrel{\\text { def }}{=} f^{m}(S) \\quad\\left(S_{m} \\text { is image of } f^{m}\\right)\n$$\n\nClearly the image of $f^{m+1}$ is contained in the image of $f^{m}$, i.e., there is a descending chain of subsets of $S$\n\n$$\nS \\supseteq S_{1} \\supseteq S_{2} \\supseteq S_{3} \\supseteq S_{4} \\supseteq \\cdots\n$$\n\nwhich must eventually stabilise since $S$ is finite, i.e., there is a $k \\geqslant 1$ such that\n\n$$\nS_{k}=S_{k+1}=S_{k+2}=S_{k+3}=\\cdots \\stackrel{\\text { def }}{=} S_{\\infty}\n$$\n\nHence $f$ restricts to a surjective function $f: S_{\\infty} \\rightarrow S_{\\infty}$, which is also bijective since $S_{\\infty} \\subseteq S$ is finite. To sum up, $f: S_{\\infty} \\rightarrow S_{\\infty}$ is a permutation of the elements of the finite set $S_{\\infty}$, hence there exists an integer $r \\geqslant 1$ such that $f^{r}=$ id on $S_{\\infty}$ (for example, we may choose $r=\\left|S_{\\infty}\\right| !$ ). In other words,\n\n$$\nf^{m+r}=f^{m} \\text { on } S \\text { for all } m \\geqslant k .\n$$\n\nClearly, (*) also implies that $f^{m+t r}=f^{m}$ for all integers $t \\geqslant 1$ and $m \\geqslant k$. So, to find $n$ as in the claim and finish the problem, it is enough to choose $m$ and $t$ in order to ensure that there exists $n \\geqslant 3$ satisfying\n\n$$\n\\left\\{\\begin{array} { l } \n{ 2 n + 1 = m + t r } \\\\\n{ n + 2 = m }\n\\end{array} \\Longleftrightarrow \\left\\{\\begin{array}{l}\nm=3+t r \\\\\nn=m-2\n\\end{array}\\right.\\right.\n$$\n\nThis can be clearly done by choosing $m$ large enough with $m \\equiv 3(\\bmod r)$. For instance, we may take $n=2 k r+1$, so that\n\n$$\nf^{n+2}=f^{2 k r+3}=f^{4 k r+3}=f^{2 n+1}\n$$\n\nwhere the middle equality follows by $(*)$ since $2 k r+3 \\geqslant k$."
  },
  {
    "id": "fimo_2017_algebra_p4",
    "enunciado": "A sequence of real numbers $a_{1}, a_{2}, \\ldots$ satisfies the relation\n\n$$\na_{n}=-\\max _{i+j=n}\\left(a_{i}+a_{j}\\right) \\quad \\text { for all } n>2017\n$$\n\nProve that this sequence is bounded, i.e., there is a constant $M$ such that $\\left|a_{n}\\right| \\leqslant M$ for all positive integers $n$.",
    "solucao": "Set $D=2017$. Denote\n\n$$\nM_{n}=\\max _{k<n} a_{k} \\quad \\text { and } \\quad m_{n}=-\\min _{k<n} a_{k}=\\max _{k<n}\\left(-a_{k}\\right)\n$$\n\nClearly, the sequences $\\left(m_{n}\\right)$ and $\\left(M_{n}\\right)$ are nondecreasing. We need to prove that both are bounded.\n\nConsider an arbitrary $n>D$; our first aim is to bound $a_{n}$ in terms of $m_{n}$ and $M_{n}$.\n\n(i) There exist indices $p$ and $q$ such that $a_{n}=-\\left(a_{p}+a_{q}\\right)$ and $p+q=n$. Since $a_{p}, a_{q} \\leqslant M_{n}$, we have $a_{n} \\geqslant-2 M_{n}$.\n\n(ii) On the other hand, choose an index $k<n$ such that $a_{k}=M_{n}$. Then, we have\n\n$$\na_{n}=-\\max _{\\ell<n}\\left(a_{n-\\ell}+a_{\\ell}\\right) \\leqslant-\\left(a_{n-k}+a_{k}\\right)=-a_{n-k}-M_{n} \\leqslant m_{n}-M_{n}\n$$\n\nSummarizing (i) and (ii), we get\n\n$$\n-2 M_{n} \\leqslant a_{n} \\leqslant m_{n}-M_{n}\n$$\n\nwhence\n\n$$\nm_{n} \\leqslant m_{n+1} \\leqslant \\max \\left\\{m_{n}, 2 M_{n}\\right\\} \\quad \\text { and } \\quad M_{n} \\leqslant M_{n+1} \\leqslant \\max \\left\\{M_{n}, m_{n}-M_{n}\\right\\}\n$$\n\nNow, say that an index $n>D$ is lucky if $m_{n} \\leqslant 2 M_{n}$. Two cases are possible.\n\nCase 1. Assume that there exists a lucky index $n$. In this case, (1) yields $m_{n+1} \\leqslant 2 M_{n}$ and $M_{n} \\leqslant M_{n+1} \\leqslant M_{n}$. Therefore, $M_{n+1}=M_{n}$ and $m_{n+1} \\leqslant 2 M_{n}=2 M_{n+1}$. So, the index $n+1$ is also lucky, and $M_{n+1}=M_{n}$. Applying the same arguments repeatedly, we obtain that all indices $k>n$ are lucky (i.e., $m_{k} \\leqslant 2 M_{k}$ for all these indices), and $M_{k}=M_{n}$ for all such indices. Thus, all of the $m_{k}$ and $M_{k}$ are bounded by $2 M_{n}$.\n\nCase 2. Assume now that there is no lucky index, i.e., $2 M_{n}<m_{n}$ for all $n>D$. Then (1) shows that for all $n>D$ we have $m_{n} \\leqslant m_{n+1} \\leqslant m_{n}$, so $m_{n}=m_{D+1}$ for all $n>D$. Since $M_{n}<m_{n} / 2$ for all such indices, all of the $m_{n}$ and $M_{n}$ are bounded by $m_{D+1}$.\n\nThus, in both cases the sequences $\\left(m_{n}\\right)$ and $\\left(M_{n}\\right)$ are bounded, as desired."
  },
  {
    "id": "fimo_2017_algebra_p5",
    "enunciado": "An integer $n \\geqslant 3$ is given. We call an $n$-tuple of real numbers $\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)$ Shiny if for each permutation $y_{1}, y_{2}, \\ldots, y_{n}$ of these numbers we have\n\n$$\n\\sum_{i=1}^{n-1} y_{i} y_{i+1}=y_{1} y_{2}+y_{2} y_{3}+y_{3} y_{4}+\\cdots+y_{n-1} y_{n} \\geqslant-1 \\text {. }\n$$\n\nFind the largest constant $K=K(n)$ such that\n\n$$\n\\sum_{1 \\leqslant i<j \\leqslant n} x_{i} x_{j} \\geqslant K\n$$\n\nholds for every Shiny $n$-tuple $\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)$.\n\nThe final answer is $K=-(n-1) / 2$.",
    "solucao": "We present another proof that $\\sum_{i<j} x_{i} x_{j} \\geqslant-(n-1) / 2$ for any Shiny $n$-tuple $\\left(x_{1}, \\ldots, x_{n}\\right)$. Assume an ordering of the $x_{i}$ as in $(2)$, and let $\\ell=n-k$. Assume without loss of generality that $k \\geqslant \\ell$. Also assume $k \\neq n$, (as otherwise, all of the $x_{i}$ are nonpositive, and so the inequality is trivial). Define the sets of indices $S=\\{1,2, \\ldots, k\\}$ and $T=\\{k+1, \\ldots, n\\}$. Define the following sums:\n\n$$\nK=\\sum_{\\substack{i<j \\\\ i, j \\in S}} x_{i} x_{j}, \\quad M=\\sum_{\\substack{i \\in S \\\\ j \\in T}} x_{i} x_{j}, \\quad \\text { and } \\quad L=\\sum_{\\substack{i<j \\\\ i, j \\in T}} x_{i} x_{j}\n$$\n\nBy definition, $K, L \\geqslant 0$ and $M \\leqslant 0$. We aim to show that $K+L+M \\geqslant-(n-1) / 2$.\n\nWe split into cases based on whether $k=\\ell$ or $k>\\ell$.\n\nCase $1: k>\\ell$.\n\nConsider all permutations $\\phi:\\{1,2, \\ldots, n\\} \\rightarrow\\{1,2, \\ldots, n\\}$ such that $\\phi^{-1}(T)=\\{2,4, \\ldots, 2 \\ell\\}$. Note that there are $k ! \\ell !$ such permutations $\\phi$. Define\n\n$$\nf(\\phi)=\\sum_{i=1}^{n-1} x_{\\phi(i)} x_{\\phi(i+1)}\n$$\n\nWe know that $f(\\phi) \\geqslant-1$ for every permutation $\\phi$ with the above property. Averaging $f(\\phi)$ over all $\\phi$ gives\n\n$$\n-1 \\leqslant \\frac{1}{k ! \\ell !} \\sum_{\\phi} f(\\phi)=\\frac{2 \\ell}{k \\ell} M+\\frac{2(k-\\ell-1)}{k(k-1)} K\n$$\n\nwhere the equality holds because there are $k \\ell$ products in $M$, of which $2 \\ell$ are selected for each $\\phi$, and there are $k(k-1) / 2$ products in $K$, of which $k-\\ell-1$ are selected for each $\\phi$. We now have\n\n$$\nK+L+M \\geqslant K+L+\\left(-\\frac{k}{2}-\\frac{k-\\ell-1}{k-1} K\\right)=-\\frac{k}{2}+\\frac{\\ell}{k-1} K+L\n$$\n\nSince $k \\leqslant n-1$ and $K, L \\geqslant 0$, we get the desired inequality.\n\nCase 2: $k=\\ell=n / 2$.\n\nWe do a similar approach, considering all $\\phi:\\{1,2, \\ldots, n\\} \\rightarrow\\{1,2, \\ldots, n\\}$ such that $\\phi^{-1}(T)=$ $\\{2,4, \\ldots, 2 \\ell\\}$, and defining $f$ the same way. Analogously to Case 1 , we have\n\n$$\n-1 \\leqslant \\frac{1}{k ! \\ell !} \\sum_{\\phi} f(\\phi)=\\frac{2 \\ell-1}{k \\ell} M\n$$\n\nbecause there are $k \\ell$ products in $M$, of which $2 \\ell-1$ are selected for each $\\phi$. Now, we have that\n\n$$\nK+L+M \\geqslant M \\geqslant-\\frac{n^{2}}{4(n-1)} \\geqslant-\\frac{n-1}{2}\n$$\n\nwhere the last inequality holds because $n \\geqslant 4$."
  },
  {
    "id": "fimo_2017_algebra_p6",
    "enunciado": "Find all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ such that\n\n$$\nf(f(x) f(y))+f(x+y)=f(x y)\n$$\n\nfor all $x, y \\in \\mathbb{R}$.\n\nThe final answer is that there are 3 solutions:\n\n$$\nx \\mapsto 0 \\quad \\text { or } \\quad x \\mapsto x-1 \\quad \\text { or } \\quad x \\mapsto 1-x \\quad(x \\in \\mathbb{R}) .\n$$",
    "solucao": "n easy check shows that all the 3 above mentioned functions indeed satisfy the original equation $(*)$.\n\nIn order to show that these are the only solutions, first observe that if $f(x)$ is a solution then $-f(x)$ is also a solution. Hence, without loss of generality we may (and will) assume that $f(0) \\leqslant 0$ from now on. We have to show that either $f$ is identically zero or $f(x)=x-1$ $(\\forall x \\in \\mathbb{R})$\n\nObserve that, for a fixed $x \\neq 1$, we may choose $y \\in \\mathbb{R}$ so that $x+y=x y \\Longleftrightarrow y=\\frac{x}{x-1}$, and therefore from the original equation $(*)$ we have\n\n$$\nf\\left(f(x) \\cdot f\\left(\\frac{x}{x-1}\\right)\\right)=0 \\quad(x \\neq 1)\n$$\n\nIn particular, plugging in $x=0$ in $(1)$, we conclude that $f$ has at least one zero, namely $(f(0))^{2}$ :\n\n$$\nf\\left((f(0))^{2}\\right)=0\n$$\n\nWe analyze two cases (recall that $f(0) \\leqslant 0)$ :\n\nCase 1: $f(0)=0$.\n\nSetting $y=0$ in the original equation we get the identically zero solution:\n\n$$\nf(f(x) f(0))+f(x)=f(0) \\Longrightarrow f(x)=0 \\text { for all } x \\in \\mathbb{R}\n$$\n\nFrom now on, we work on the main\n\nCase 2: $f(0)<0$.\n\nWe begin with the following\n\n\\section{Claim 1.}\n$$\nf(1)=0, \\quad f(a)=0 \\Longrightarrow a=1, \\quad \\text { and } \\quad f(0)=-1\n$$\n\nProof. We need to show that 1 is the unique zero of $f$. First, observe that $f$ has at least one zero $a$ by $(2)$; if $a \\neq 1$ then setting $x=a$ in (1) we get $f(0)=0$, a contradiction. Hence from (2) we get $(f(0))^{2}=1$. Since we are assuming $f(0)<0$, we conclude that $f(0)=-1$.\n\nSetting $y=1$ in the original equation $(*)$ we get\n\n$$\nf(f(x) f(1))+f(x+1)=f(x) \\Longleftrightarrow f(0)+f(x+1)=f(x) \\Longleftrightarrow f(x+1)=f(x)+1 \\quad(x \\in \\mathbb{R}) .\n$$\n\nAn easy induction shows that\n\n$$\nf(x+n)=f(x)+n \\quad(x \\in \\mathbb{R}, n \\in \\mathbb{Z})\n$$\n\nNow we make the following\n\nClaim 2. $f$ is injective.\n\nProof. Suppose that $f(a)=f(b)$ with $a \\neq b$. Then by (4), for all $N \\in \\mathbb{Z}$,\n\n$$\nf(a+N+1)=f(b+N)+1\n$$\n\nChoose any integer $N<-b$; then there exist $x_{0}, y_{0} \\in \\mathbb{R}$ with $x_{0}+y_{0}=a+N+1, x_{0} y_{0}=b+N$. Since $a \\neq b$, we have $x_{0} \\neq 1$ and $y_{0} \\neq 1$. Plugging in $x_{0}$ and $y_{0}$ in the original equation $(*)$ we get\n\n$$\n\\begin{array}{rlr}\nf\\left(f\\left(x_{0}\\right) f\\left(y_{0}\\right)\\right)+f(a+N+1)=f(b+N) & \\Longleftrightarrow f\\left(f\\left(x_{0}\\right) f\\left(y_{0}\\right)\\right)+1=0 & \\\\\n& \\Longleftrightarrow f\\left(f\\left(x_{0}\\right) f\\left(y_{0}\\right)+1\\right)=0 & \\text { by (4) } \\\\\n& \\Longleftrightarrow f\\left(x_{0}\\right) f\\left(y_{0}\\right)=0 & \\text { by (3) }\n\\end{array}\n$$\n\nHowever, by Claim 1 we have $f\\left(x_{0}\\right) \\neq 0$ and $f\\left(y_{0}\\right) \\neq 0$ since $x_{0} \\neq 1$ and $y_{0} \\neq 1$, a contradiction.\n\nNow the end is near. For any $t \\in \\mathbb{R}$, plug in $(x, y)=(t,-t)$ in the original equation $(*)$ to get\n\n$$\n\\begin{aligned}\nf(f(t) f(-t))+f(0)=f\\left(-t^{2}\\right) & \\Longleftrightarrow f(f(t) f(-t))=f\\left(-t^{2}\\right)+1 & & \\text { by (3) } \\\\\n& \\Longleftrightarrow f(f(t) f(-t))=f\\left(-t^{2}+1\\right) & & \\text { by (4) } \\\\\n& \\Longleftrightarrow f(t) f(-t)=-t^{2}+1 & & \\text { by injectivity of } f .\n\\end{aligned}\n$$\n\nSimilarly, plugging in $(x, y)=(t, 1-t)$ in $(*)$ we get\n\n$$\n\\begin{array}{rlrl}\nf(f(t) f(1-t))+f(1)=f(t(1-t)) & \\Longleftrightarrow f(f(t) f(1-t))=f(t(1-t)) & \\text { by }(3) \\\\\n& \\Longleftrightarrow f(t) f(1-t)=t(1-t) \\quad \\text { by injectivity of } f .\n\\end{array}\n$$\n\nBut since $f(1-t)=1+f(-t)$ by $(4)$, we get\n\n$$\n\\begin{aligned}\nf(t) f(1-t)=t(1-t) & \\Longleftrightarrow f(t)(1+f(-t))=t(1-t) \\Longleftrightarrow f(t)+\\left(-t^{2}+1\\right)=t(1-t) \\\\\n& \\Longleftrightarrow f(t)=t-1,\n\\end{aligned}\n$$\n\nas desired."
  },
  {
    "id": "fimo_2017_algebra_p7",
    "enunciado": "Let $a_{0}, a_{1}, a_{2}, \\ldots$ be a sequence of integers and $b_{0}, b_{1}, b_{2}, \\ldots$ be a sequence of positive integers such that $a_{0}=0, a_{1}=1$, and\n\n$$\na_{n+1}=\\left\\{\\begin{array}{ll}\na_{n} b_{n}+a_{n-1}, & \\text { if } b_{n-1}=1 \\\\\na_{n} b_{n}-a_{n-1}, & \\text { if } b_{n-1}>1\n\\end{array} \\quad \\text { for } n=1,2, \\ldots\\right.\n$$\n\nProve that at least one of the two numbers $a_{2017}$ and $a_{2018}$ must be greater than or equal to 2017.",
    "solucao": "The value of $b_{0}$ is irrelevant since $a_{0}=0$, so we may assume that $b_{0}=1$.\n\nLemma. We have $a_{n} \\geqslant 1$ for all $n \\geqslant 1$.\n\nProof. Let us suppose otherwise in order to obtain a contradiction. Let\n\n$$\nn \\geqslant 1 \\text { be the smallest integer with } a_{n} \\leqslant 0 .\n$$\n\nNote that $n \\geqslant 2$. It follows that $a_{n-1} \\geqslant 1$ and $a_{n-2} \\geqslant 0$. Thus we cannot have $a_{n}=$ $a_{n-1} b_{n-1}+a_{n-2}$, so we must have $a_{n}=a_{n-1} b_{n-1}-a_{n-2}$. Since $a_{n} \\leqslant 0$, we have $a_{n-1} \\leqslant a_{n-2}$. Thus we have $a_{n-2} \\geqslant a_{n-1} \\geqslant a_{n}$.\n\nLet\n\n$$\nr \\text { be the smallest index with } a_{r} \\geqslant a_{r+1} \\geqslant a_{r+2} \\text {. }\n$$\n\nThen $r \\leqslant n-2$ by the above, but also $r \\geqslant 2$ : if $b_{1}=1$, then $a_{2}=a_{1}=1$ and $a_{3}=a_{2} b_{2}+a_{1}>a_{2}$; if $b_{1}>1$, then $a_{2}=b_{1}>1=a_{1}$.\n\nBy the minimal choice (2) of $r$, it follows that $a_{r-1}<a_{r}$. And since $2 \\leqslant r \\leqslant n-2$, by the minimal choice (1) of $n$ we have $a_{r-1}, a_{r}, a_{r+1}>0$. In order to have $a_{r+1} \\geqslant a_{r+2}$, we must have $a_{r+2}=a_{r+1} b_{r+1}-a_{r}$ so that $b_{r} \\geqslant 2$. Putting everything together, we conclude that\n\n$$\na_{r+1}=a_{r} b_{r} \\pm a_{r-1} \\geqslant 2 a_{r}-a_{r-1}=a_{r}+\\left(a_{r}-a_{r-1}\\right)>a_{r}\n$$\n\nwhich contradicts (2).\n\nTo complete the problem, we prove that $\\max \\left\\{a_{n}, a_{n+1}\\right\\} \\geqslant n$ by induction. The cases $n=0,1$ are given. Assume it is true for all non-negative integers strictly less than $n$, where $n \\geqslant 2$. There are two cases:\n\nCase 1: $b_{n-1}=1$\n\nThen $a_{n+1}=a_{n} b_{n}+a_{n-1}$. By the inductive assumption one of $a_{n-1}, a_{n}$ is at least $n-1$ and the other, by the lemma, is at least 1 . Hence\n\n$$\na_{n+1}=a_{n} b_{n}+a_{n-1} \\geqslant a_{n}+a_{n-1} \\geqslant(n-1)+1=n .\n$$\n\nThus $\\max \\left\\{a_{n}, a_{n+1}\\right\\} \\geqslant n$, as desired.\n\nCase 2: $b_{n-1}>1$.\n\nSince we defined $b_{0}=1$ there is an index $r$ with $1 \\leqslant r \\leqslant n-1$ such that\n\n$$\nb_{n-1}, b_{n-2}, \\ldots, b_{r} \\geqslant 2 \\quad \\text { and } \\quad b_{r-1}=1 .\n$$\n\nWe have $a_{r+1}=a_{r} b_{r}+a_{r-1} \\geqslant 2 a_{r}+a_{r-1}$. Thus $a_{r+1}-a_{r} \\geqslant a_{r}+a_{r-1}$.\n\nNow we claim that $a_{r}+a_{r-1} \\geqslant r$. Indeed, this holds by inspection for $r=1$; for $r \\geqslant 2$, one of $a_{r}, a_{r-1}$ is at least $r-1$ by the inductive assumption, while the other, by the lemma, is at least 1 . Hence $a_{r}+a_{r-1} \\geqslant r$, as claimed, and therefore $a_{r+1}-a_{r} \\geqslant r$ by the last inequality in the previous paragraph.\n\nSince $r \\geqslant 1$ and, by the lemma, $a_{r} \\geqslant 1$, from $a_{r+1}-a_{r} \\geqslant r$ we get the following two inequalities:\n\n$$\na_{r+1} \\geqslant r+1 \\quad \\text { and } \\quad a_{r+1}>a_{r}\n$$\n\nNow observe that\n\n$$\na_{m}>a_{m-1} \\Longrightarrow a_{m+1}>a_{m} \\text { for } m=r+1, r+2, \\ldots, n-1,\n$$\n\nsince $a_{m+1}=a_{m} b_{m}-a_{m-1} \\geqslant 2 a_{m}-a_{m-1}=a_{m}+\\left(a_{m}-a_{m-1}\\right)>a_{m}$. Thus\n\n$$\na_{n}>a_{n-1}>\\cdots>a_{r+1} \\geqslant r+1 \\Longrightarrow a_{n} \\geqslant n \\text {. }\n$$\n\nSo $\\max \\left\\{a_{n}, a_{n+1}\\right\\} \\geqslant n$, as desired."
  },
  {
    "id": "fimo_2017_algebra_p8",
    "enunciado": "Assume that a function $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ satisfies the following condition:\n\nFor every $x, y \\in \\mathbb{R}$ such that $(f(x)+y)(f(y)+x)>0$, we have $f(x)+y=f(y)+x$.\n\nProve that $f(x)+y \\leqslant f(y)+x$ whenever $x>y$.",
    "solucao": "Define $g(x)=x-f(x)$. The condition on $f$ then rewrites as follows:\n\nFor every $x, y \\in \\mathbb{R}$ such that $((x+y)-g(x))((x+y)-g(y))>0$, we have $g(x)=g(y)$.\n\nThis condition may in turn be rewritten in the following form:\n\nIf $g(x) \\neq g(y)$, then the number $x+y$ lies (non-strictly) between $g(x)$ and $g(y)$.\n\nNotice here that the function $g_{1}(x)=-g(-x)$ also satisfies $(*)$, since\n\n$g_{1}(x) \\neq g_{1}(y) \\Longrightarrow g(-x) \\neq g(-y) \\quad \\Longrightarrow \\quad-(x+y)$ lies between $g(-x)$ and $g(-y)$\n\n$\\Longrightarrow \\quad x+y$ lies between $g_{1}(x)$ and $g_{1}(y)$.\n\nOn the other hand, the relation we need to prove reads now as\n\n$$\ng(x) \\leqslant g(y) \\quad \\text { whenever } x<y .\n$$\n\nAgain, this condition is equivalent to the same one with $g$ replaced by $g_{1}$.\n\nIf $g(x)=2 x$ for all $x \\in \\mathbb{R}$, then $(*)$ is obvious; so in what follows we consider the other case. We split the solution into a sequence of lemmas, strengthening one another. We always consider some value of $x$ with $g(x) \\neq 2 x$ and denote $X=g(x)$.\n\nLemma 1. Assume that $X<2 x$. Then on the interval $(X-x ; x]$ the function $g$ attains at most two values - namely, $X$ and, possibly, some $Y>X$. Similarly, if $X>2 x$, then $g$ attains at most two values on $[x ; X-x)$ - namely, $X$ and, possibly, some $Y<X$.\n\nProof. We start with the first claim of the lemma. Notice that $X-x<x$, so the considered interval is nonempty.\n\nTake any $a \\in(X-x ; x)$ with $g(a) \\neq X$ (if it exists). If $g(a)<X$, then $(*)$ yields $g(a) \\leqslant$ $a+x \\leqslant g(x)=X$, so $a \\leqslant X-x$ which is impossible. Thus, $g(a)>X$ and hence by $(*)$ we get $X \\leqslant a+x \\leqslant g(a)$.\n\nNow, for any $b \\in(X-x ; x)$ with $g(b) \\neq X$ we similarly get $b+x \\leqslant g(b)$. Therefore, the number $a+b$ (which is smaller than each of $a+x$ and $b+x)$ cannot lie between $g(a)$ and $g(b)$, which by $(*)$ implies that $g(a)=g(b)$. Hence $g$ may attain only two values on $(X-x ; x]$, namely $X$ and $g(a)>X$.\n\nTo prove the second claim, notice that $g_{1}(-x)=-X<2 \\cdot(-x)$, so $g_{1}$ attains at most two values on $(-X+x,-x]$, i.e., $-X$ and, possibly, some $-Y>-X$. Passing back to $g$, we get what we need.\n\nLemma 2. If $X<2 x$, then $g$ is constant on $(X-x ; x)$. Similarly, if $X>2 x$, then $g$ is constant on $(x ; X-x)$.\n\nProof. Again, it suffices to prove the first claim only. Assume, for the sake of contradiction, that there exist $a, b \\in(X-x ; x)$ with $g(a) \\neq g(b)$; by Lemma 1 , we may assume that $g(a)=X$ and $Y=g(b)>X$.\n\nNotice that $\\min \\{X-a, X-b\\}>X-x$, so there exists a $u \\in(X-x ; x)$ such that $u<\\min \\{X-a, X-b\\}$. By Lemma 1, we have either $g(u)=X$ or $g(u)=Y$. In the former case, by $(*)$ we have $X \\leqslant u+b \\leqslant Y$ which contradicts $u<X-b$. In the second case, by $(*)$ we have $X \\leqslant u+a \\leqslant Y$ which contradicts $u<X-a$. Thus the lemma is proved. Lemma 3. If $X<2 x$, then $g(a)=X$ for all $a \\in(X-x ; x)$. Similarly, if $X>2 x$, then $g(a)=X$ for all $a \\in(x ; X-x)$.\n\nProof. Again, we only prove the first claim.\n\nBy Lemmas 1 and 2, this claim may be violated only if $g$ takes on a constant value $Y>X$ on $(X-x, x)$. Choose any $a, b \\in(X-x ; x)$ with $a<b$. By $(*)$, we have\n\n$$\nY \\geqslant b+x \\geqslant X\n$$\n\nIn particular, we have $Y \\geqslant b+x>2 a$. Applying Lemma 2 to $a$ in place of $x$, we obtain that $g$ is constant on $(a, Y-a)$. By (2) again, we have $x \\leqslant Y-b<Y-a$; so $x, b \\in(a ; Y-a)$. But $X=g(x) \\neq g(b)=Y$, which is a contradiction.\n\nNow we are able to finish the solution. Assume that $g(x)>g(y)$ for some $x<y$. Denote $X=g(x)$ and $Y=g(y)$; by $(*)$, we have $X \\geqslant x+y \\geqslant Y$, so $Y-y \\leqslant x<y \\leqslant X-x$, and hence $(Y-y ; y) \\cap(x ; X-x)=(x, y) \\neq \\varnothing$. On the other hand, since $Y-y<y$ and $x<X-x$, Lemma 3 shows that $g$ should attain a constant value $X$ on $(x ; X-x)$ and a constant value $Y \\neq X$ on $(Y-y ; y)$. Since these intervals overlap, we get the final contradiction."
  },
  {
    "id": "fimo_2017_number_theory_p1",
    "enunciado": "The sequence $a_{0}, a_{1}, a_{2}, \\ldots$ of positive integers satisfies\n\n$$\na_{n+1}=\\left\\{\\begin{array}{ll}\n\\sqrt{a_{n}}, & \\text { if } \\sqrt{a_{n}} \\text { is an integer } \\\\\na_{n}+3, & \\text { otherwise }\n\\end{array} \\quad \\text { for every } n \\geqslant 0 .\\right.\n$$\n\nDetermine all values of $a_{0}>1$ for which there is at least one number $a$ such that $a_{n}=a$ for infinitely many values of $n$.\n\nThe final answers are all positive multiples of 3 .",
    "solucao": "Since the value of $a_{n+1}$ only depends on the value of $a_{n}$, if $a_{n}=a_{m}$ for two different indices $n$ and $m$, then the sequence is eventually periodic. So we look for the values of $a_{0}$ for which the sequence is eventually periodic.\n\nClaim 1. If $a_{n} \\equiv-1(\\bmod 3)$, then, for all $m>n, a_{m}$ is not a perfect square. It follows that the sequence is eventually strictly increasing, so it is not eventually periodic.\n\nProof. A square cannot be congruent to $-1$ modulo 3 , so $a_{n} \\equiv-1(\\bmod 3)$ implies that $a_{n}$ is not a square, therefore $a_{n+1}=a_{n}+3>a_{n}$. As a consequence, $a_{n+1} \\equiv a_{n} \\equiv-1(\\bmod 3)$, so $a_{n+1}$ is not a square either. By repeating the argument, we prove that, from $a_{n}$ on, all terms of the sequence are not perfect squares and are greater than their predecessors, which completes the proof.\n\nClaim 2. If $a_{n} \\not=-1(\\bmod 3)$ and $a_{n}>9$ then there is an index $m>n$ such that $a_{m}<a_{n}$.\n\nProof. Let $t^{2}$ be the largest perfect square which is less than $a_{n}$. Since $a_{n}>9, t$ is at least 3. The first square in the sequence $a_{n}, a_{n}+3, a_{n}+6, \\ldots$ will be $(t+1)^{2},(t+2)^{2}$ or $(t+3)^{2}$, therefore there is an index $m>n$ such that $a_{m} \\leqslant t+3<t^{2}<a_{n}$, as claimed.\n\nClaim 3. If $a_{n} \\equiv 0(\\bmod 3)$, then there is an index $m>n$ such that $a_{m}=3$.\n\nProof. First we notice that, by the definition of the sequence, a multiple of 3 is always followed by another multiple of 3 . If $a_{n} \\in\\{3,6,9\\}$ the sequence will eventually follow the periodic pattern $3,6,9,3,6,9, \\ldots$. If $a_{n}>9$, let $j$ be an index such that $a_{j}$ is equal to the minimum value of the set $\\left\\{a_{n+1}, a_{n+2}, \\ldots\\right\\}$. We must have $a_{j} \\leqslant 9$, otherwise we could apply Claim 2 to $a_{j}$ and get a contradiction on the minimality hypothesis. It follows that $a_{j} \\in\\{3,6,9\\}$, and the proof is complete.\n\nClaim 4. If $a_{n} \\equiv 1(\\bmod 3)$, then there is an index $m>n$ such that $a_{m} \\equiv-1(\\bmod 3)$.\n\nProof. In the sequence, 4 is always followed by $2 \\equiv-1(\\bmod 3)$, so the claim is true for $a_{n}=4$. If $a_{n}=7$, the next terms will be $10,13,16,4,2, \\ldots$ and the claim is also true. For $a_{n} \\geqslant 10$, we again take an index $j>n$ such that $a_{j}$ is equal to the minimum value of the set $\\left\\{a_{n+1}, a_{n+2}, \\ldots\\right\\}$, which by the definition of the sequence consists of non-multiples of 3 . Suppose $a_{j} \\equiv 1(\\bmod 3)$. Then we must have $a_{j} \\leqslant 9$ by Claim 2 and the minimality of $a_{j}$. It follows that $a_{j} \\in\\{4,7\\}$, so $a_{m}=2<a_{j}$ for some $m>j$, contradicting the minimality of $a_{j}$. Therefore, we must have $a_{j} \\equiv-1(\\bmod 3)$\n\nIt follows from the previous claims that if $a_{0}$ is a multiple of 3 the sequence will eventually reach the periodic pattern $3,6,9,3,6,9, \\ldots$; if $a_{0} \\equiv-1(\\bmod 3)$ the sequence will be strictly increasing; and if $a_{0} \\equiv 1(\\bmod 3)$ the sequence will be eventually strictly increasing.\n\nSo the sequence will be eventually periodic if, and only if, $a_{0}$ is a multiple of 3 ."
  },
  {
    "id": "fimo_2017_number_theory_p2",
    "enunciado": "Let $p \\geqslant 2$ be a prime number. Eduardo and Fernando play the following game making moves alternately: in each move, the current player chooses an index $i$ in the set $\\{0,1, \\ldots, p-1\\}$ that was not chosen before by either of the two players and then chooses an element $a_{i}$ of the set $\\{0,1,2,3,4,5,6,7,8,9\\}$. Eduardo has the first move. The game ends after all the indices $i \\in\\{0,1, \\ldots, p-1\\}$ have been chosen. Then the following number is computed:\n\n$$\nM=a_{0}+10 \\cdot a_{1}+\\cdots+10^{p-1} \\cdot a_{p-1}=\\sum_{j=0}^{p-1} a_{j} \\cdot 10^{j}\n$$\n\nThe goal of Eduardo is to make the number $M$ divisible by $p$, and the goal of Fernando is to prevent this.\n\nProve that Eduardo has a winning strategy.",
    "solucao": "We say that a player makes the move $\\left(i, a_{i}\\right)$ if he chooses the index $i$ and then the element $a_{i}$ of the set $\\{0,1,2,3,4,5,6,7,8,9\\}$ in this move.\n\nIf $p=2$ or $p=5$ then Eduardo chooses $i=0$ and $a_{0}=0$ in the first move, and wins, since, independently of the next moves, $M$ will be a multiple of 10 .\n\nNow assume that the prime number $p$ does not belong to $\\{2,5\\}$. Eduardo chooses $i=p-1$ and $a_{p-1}=0$ in the first move. By Fermat's Little Theorem, $\\left(10^{(p-1) / 2}\\right)^{2}=10^{p-1} \\equiv 1(\\bmod p)$, So $p \\mid\\left(10^{(p-1) / 2}\\right)^{2}-1=\\left(10^{(p-1) / 2}+1\\right)\\left(10^{(p-1) / 2}-1\\right)$. Since $p$ is prime, either $p \\mid 10^{(p-1) / 2}+1$ or $p \\mid 10^{(p-1) / 2}-1$. Thus we have two cases:\n\nCase $a: 10^{(p-1) / 2} \\equiv-1(\\bmod p)$\n\nIn this case, for each move $\\left(i, a_{i}\\right)$ of Fernando, Eduardo immediately makes the move $\\left(j, a_{j}\\right)=$ $\\left(i+\\frac{p-1}{2}, a_{i}\\right)$, if $0 \\leqslant i \\leqslant \\frac{p-3}{2}$, or $\\left(j, a_{j}\\right)=\\left(i-\\frac{p-1}{2}, a_{i}\\right)$, if $\\frac{p-1}{2} \\leqslant i \\leqslant p-2$. We will have $10^{j} \\equiv-10^{i}$ $(\\bmod p)$, and so $a_{j} \\cdot 10^{j}=a_{i} \\cdot 10^{j} \\equiv-a_{i} \\cdot 10^{i}(\\bmod p)$. Notice that this move by Eduardo is always possible. Indeed, immediately before a move by Fernando, for any set of the type $\\{r, r+(p-1) / 2\\}$ with $0 \\leqslant r \\leqslant(p-3) / 2$, either no element of this set was chosen as an index by the players in the previous moves or else both elements of this set were chosen as indices by the players in the previous moves. Therefore, after each of his moves, Eduardo always makes the sum of the numbers $a_{k} \\cdot 10^{k}$ corresponding to the already chosen pairs $\\left(k, a_{k}\\right)$ divisible by $p$, and thus wins the game.\n\nCase $b: 10^{(p-1) / 2} \\equiv 1(\\bmod p)$\n\nIn this case, for each move $\\left(i, a_{i}\\right)$ of Fernando, Eduardo immediately makes the move $\\left(j, a_{j}\\right)=$ $\\left(i+\\frac{p-1}{2}, 9-a_{i}\\right)$, if $0 \\leqslant i \\leqslant \\frac{p-3}{2}$, or $\\left(j, a_{j}\\right)=\\left(i-\\frac{p-1}{2}, 9-a_{i}\\right)$, if $\\frac{p-1}{2} \\leqslant i \\leqslant p-2$. The same argument as above shows that Eduardo can always make such move. We will have $10^{j} \\equiv 10^{i}$ $(\\bmod p)$, and so $a_{j} \\cdot 10^{j}+a_{i} \\cdot 10^{i} \\equiv\\left(a_{i}+a_{j}\\right) \\cdot 10^{i}=9 \\cdot 10^{i}(\\bmod p)$. Therefore, at the end of the game, the sum of all terms $a_{k} \\cdot 10^{k}$ will be congruent to\n\n$$\n\\sum_{i=0}^{\\frac{p-3}{2}} 9 \\cdot 10^{i}=10^{(p-1) / 2}-1 \\equiv 0 \\quad(\\bmod p)\n$$\n\nand Eduardo wins the game."
  },
  {
    "id": "fimo_2017_number_theory_p3",
    "enunciado": "Determine all integers $n \\geqslant 2$ with the following property: for any integers $a_{1}, a_{2}, \\ldots, a_{n}$ whose sum is not divisible by $n$, there exists an index $1 \\leqslant i \\leqslant n$ such that none of the numbers\n\n$$\na_{i}, a_{i}+a_{i+1}, \\ldots, a_{i}+a_{i+1}+\\cdots+a_{i+n-1}\n$$\n\nis divisible by $n$. (We let $a_{i}=a_{i-n}$ when $i>n$.)\n\nThe final answers is that these integers are exactly the prime numbers.",
    "solucao": "Let us first show that, if $n=a b$, with $a, b \\geqslant 2$ integers, then the property in the statement of the problem does not hold. Indeed, in this case, let $a_{k}=a$ for $1 \\leqslant k \\leqslant n-1$ and $a_{n}=0$. The sum $a_{1}+a_{2}+\\cdots+a_{n}=a \\cdot(n-1)$ is not divisible by $n$. Let $i$ with $1 \\leqslant i \\leqslant n$ be an arbitrary index. Taking $j=b$ if $1 \\leqslant i \\leqslant n-b$, and $j=b+1$ if $n-b<i \\leqslant n$, we have\n\n$$\na_{i}+a_{i+1}+\\cdots+a_{i+j-1}=a \\cdot b=n \\equiv 0 \\quad(\\bmod n)\n$$\n\nIt follows that the given example is indeed a counterexample to the property of the statement.\n\nNow let $n$ be a prime number. Suppose by contradiction that the property in the statement of the problem does not hold. Then there are integers $a_{1}, a_{2}, \\ldots, a_{n}$ whose sum is not divisible by $n$ such that for each $i, 1 \\leqslant i \\leqslant n$, there is $j, 1 \\leqslant j \\leqslant n$, for which the number $a_{i}+a_{i+1}+$ $\\cdots+a_{i+j-1}$ is divisible by $n$. Notice that, in any such case, we should have $1 \\leqslant j \\leqslant n-1$, since $a_{1}+a_{2}+\\cdots+a_{n}$ is not divisible by $n$. So we may construct recursively a finite sequence of integers $0=i_{0}<i_{1}<i_{2}<\\cdots<i_{n}$ with $i_{s+1}-i_{s} \\leqslant n-1$ for $0 \\leqslant s \\leqslant n-1$ such that, for $0 \\leqslant s \\leqslant n-1$\n\n$$\na_{i_{s}+1}+a_{i_{s}+2}+\\cdots+a_{i_{s+1}} \\equiv 0 \\quad(\\bmod n)\n$$\n\n(where we take indices modulo $n$ ). Indeed, for $0 \\leqslant s<n$, we apply the previous observation to $i=i_{s}+1$ in order to define $i_{s+1}=i_{s}+j$.\n\nIn the sequence of $n+1$ indices $i_{0}, i_{1}, i_{2}, \\ldots, i_{n}$, by the pigeonhole principle, we have two distinct elements which are congruent modulo $n$. So there are indices $r, s$ with $0 \\leqslant r<s \\leqslant n$ such that $i_{s} \\equiv i_{r}(\\bmod n)$ and\n\n$$\na_{i_{r}+1}+a_{i_{r}+2}+\\cdots+a_{i_{s}}=\\sum_{j=r}^{s-1}\\left(a_{i_{j}+1}+a_{i_{j}+2}+\\cdots+a_{i_{j+1}}\\right) \\equiv 0 \\quad(\\bmod n) .\n$$\n\nSince $i_{s} \\equiv i_{r}(\\bmod n)$, we have $i_{s}-i_{r}=k \\cdot n$ for some positive integer $k$, and, since $i_{j+1}-i_{j} \\leqslant$ $n-1$ for $0 \\leqslant j \\leqslant n-1$, we have $i_{s}-i_{r} \\leqslant(n-1) \\cdot n$, so $k \\leqslant n-1$. But in this case\n\n$$\na_{i_{r}+1}+a_{i_{r}+2}+\\cdots+a_{i_{s}}=k \\cdot\\left(a_{1}+a_{2}+\\cdots+a_{n}\\right)\n$$\n\ncannot be a multiple of $n$, since $n$ is prime and neither $k$ nor $a_{1}+a_{2}+\\cdots+a_{n}$ is a multiple of $n$. A contradiction."
  },
  {
    "id": "fimo_2017_number_theory_p4",
    "enunciado": "Call a rational number short if it has finitely many digits in its decimal expansion. For a positive integer $m$, we say that a positive integer $t$ is $m$-tastic if there exists a number $c \\in\\{1,2,3, \\ldots, 2017\\}$ such that $\\frac{10^{t}-1}{c \\cdot m}$ is short, and such that $\\frac{10^{k}-1}{c \\cdot m}$ is not short for any $1 \\leqslant k<t$. Let $S(m)$ be the set of $m$-tastic numbers. Consider $S(m)$ for $m=1,2, \\ldots$. What is the maximum number of elements in $S(m)$ ?\n\nThe final answer is 807.",
    "solucao": "First notice that $x \\in \\mathbb{Q}$ is short if and only if there are exponents $a, b \\geqslant 0$ such that $2^{a} \\cdot 5^{b} \\cdot x \\in \\mathbb{Z}$. In fact, if $x$ is short, then $x=\\frac{n}{10^{k}}$ for some $k$ and we can take $a=b=k$; on the other hand, if $2^{a} \\cdot 5^{b} \\cdot x=q \\in \\mathbb{Z}$ then $x=\\frac{2^{b} \\cdot 5^{a} q}{10^{a+b}}$, so $x$ is short.\n\nIf $m=2^{a} \\cdot 5^{b} \\cdot s$, with $\\operatorname{gcd}(s, 10)=1$, then $\\frac{10^{t}-1}{m}$ is short if and only if $s$ divides $10^{t}-1$. So we may (and will) suppose without loss of generality that $\\operatorname{gcd}(m, 10)=1$. Define\n\n$$\nC=\\{1 \\leqslant c \\leqslant 2017: \\operatorname{gcd}(c, 10)=1\\}\n$$\n\nThe $m$-tastic numbers are then precisely the smallest exponents $t>0$ such that $10^{t} \\equiv 1$ $(\\bmod \\mathrm{cm})$ for some integer $c \\in C$, that is, the set of orders of $10 \\operatorname{modulo~} \\mathrm{cm}$. In other words,\n\n$$\nS(m)=\\left\\{\\operatorname{ord}_{c m}(10): c \\in C\\right\\}\n$$\n\nSince there are $4 \\cdot 201+3=807$ numbers $c$ with $1 \\leqslant c \\leqslant 2017$ and $\\operatorname{gcd}(c, 10)=1$, namely those such that $c \\equiv 1,3,7,9(\\bmod 10)$,\n\n$$\n|S(m)| \\leqslant|C|=807\n$$\n\nNow we find $m$ such that $|S(m)|=807$. Let\n\n$$\nP=\\{1<p \\leqslant 2017: p \\text { is prime, } p \\neq 2,5\\}\n$$\n\nand choose a positive integer $\\alpha$ such that every $p \\in P$ divides $10^{\\alpha}-1($ e.g. $\\alpha=\\varphi(T), T$ being the product of all primes in $P$ ), and let $m=10^{\\alpha}-1$.\n\nClaim. For every $c \\in C$, we have\n\n$$\n\\operatorname{ord}_{c m}(10)=c \\alpha\n$$\n\nAs an immediate consequence, this implies $|S(m)|=|C|=807$, finishing the problem. Proof. Obviously $\\operatorname{ord}_{m}(10)=\\alpha$. Let $t=\\operatorname{ord}_{c m}(10)$. Then\n\n$$\nc m\\left|10^{t}-1 \\Longrightarrow m\\right| 10^{t}-1 \\Longrightarrow \\alpha \\mid t \\text {. }\n$$\n\nHence $t=k \\alpha$ for some $k \\in \\mathbb{Z}_{>0}$. We will show that $k=c$.\n\nDenote by $\\nu_{p}(n)$ the number of prime factors $p$ in $n$, that is, the maximum exponent $\\beta$ for which $p^{\\beta} \\mid n$. For every $\\ell \\geqslant 1$ and $p \\in P$, the Lifting the Exponent Lemma provides\n\n$$\n\\nu_{p}\\left(10^{\\ell \\alpha}-1\\right)=\\nu_{p}\\left(\\left(10^{\\alpha}\\right)^{\\ell}-1\\right)=\\nu_{p}\\left(10^{\\alpha}-1\\right)+\\nu_{p}(\\ell)=\\nu_{p}(m)+\\nu_{p}(\\ell)\n$$\n\nso\n\n$$\n\\begin{aligned}\nc m \\mid 10^{k \\alpha}-1 & \\Longleftrightarrow \\forall p \\in P ; \\nu_{p}(c m) \\leqslant \\nu_{p}\\left(10^{k \\alpha}-1\\right) \\\\\n& \\Longleftrightarrow \\forall p \\in P ; \\nu_{p}(m)+\\nu_{p}(c) \\leqslant \\nu_{p}(m)+\\nu_{p}(k) \\\\\n& \\Longleftrightarrow \\forall p \\in P ; \\nu_{p}(c) \\leqslant \\nu_{p}(k) \\\\\n& \\Longleftrightarrow c \\mid k .\n\\end{aligned}\n$$\n\nThe first $\\operatorname{such} k$ is $k=c$, so $\\operatorname{ord}_{c m}(10)=c \\alpha$."
  },
  {
    "id": "fimo_2017_number_theory_p5",
    "enunciado": "Find all pairs $(p, q)$ of prime numbers with $p>q$ for which the number\n\n$$\n\\frac{(p+q)^{p+q}(p-q)^{p-q}-1}{(p+q)^{p-q}(p-q)^{p+q}-1}\n$$\n\nis an integer.\n\nThe final answer is that the only such pair is $(3,2)$.",
    "solucao": "Let $M=(p+q)^{p-q}(p-q)^{p+q}-1$, which is relatively prime with both $p+q$ and $p-q$. Denote by $(p-q)^{-1}$ the multiplicative inverse of $(p-q)$ modulo $M$.\n\nBy eliminating the term $-1$ in the numerator,\n\n$$\n\\begin{aligned}\n(p+q)^{p+q}(p-q)^{p-q}-1 & \\equiv(p+q)^{p-q}(p-q)^{p+q}-1 \\quad(\\bmod M) \\\\\n(p+q)^{2 q} & \\equiv(p-q)^{2 q} \\quad(\\bmod M) \\\\\n\\left((p+q) \\cdot(p-q)^{-1}\\right)^{2 q} & \\equiv 1 \\quad(\\bmod M)\n\\end{aligned}\n$$\n\nCase 1: $q \\geqslant 5$.\n\nConsider an arbitrary prime divisor $r$ of $M$. Notice that $M$ is odd, so $r \\geqslant 3$. By (2), the multiplicative order of $\\left((p+q) \\cdot(p-q)^{-1}\\right)$ modulo $r$ is a divisor of the exponent $2 q$ in $(2)$, so it can be $1,2, q$ or $2 q$.\n\nBy Fermat's theorem, the order divides $r-1$. So, if the order is $q$ or $2 q$ then $r \\equiv 1$ (mod $q)$. If the order is 1 or 2 then $r \\mid(p+q)^{2}-(p-q)^{2}=4 p q$, so $r=p$ or $r=q$. The case $r=p$ is not possible, because, by applying Fermat's theorem,\n\n$M=(p+q)^{p-q}(p-q)^{p+q}-1 \\equiv q^{p-q}(-q)^{p+q}-1=\\left(q^{2}\\right)^{p}-1 \\equiv q^{2}-1=(q+1)(q-1) \\quad(\\bmod p)$\n\nand the last factors $q-1$ and $q+1$ are less than $p$ and thus $p \\nmid M$. Hence, all prime divisors of $M$ are either $q$ or of the form $k q+1$; it follows that all positive divisors of $M$ are congruent to 0 or 1 modulo $q$.\n\nNow notice that\n\n$$\nM=\\left((p+q)^{\\frac{p-q}{2}}(p-q)^{\\frac{p+q}{2}}-1\\right)\\left((p+q)^{\\frac{p-q}{2}}(p-q)^{\\frac{p+q}{2}}+1\\right)\n$$\n\nis the product of two consecutive positive odd numbers; both should be congruent to 0 or 1 modulo $q$. But this is impossible by the assumption $q \\geqslant 5$. So, there is no solution in Case 1 .\n\nCase 2: $q=2$.\n\nBy (1), we have $M \\mid(p+q)^{2 q}-(p-q)^{2 q}=(p+2)^{4}-(p-2)^{4}$, so\n\n$$\n\\begin{gathered}\n(p+2)^{p-2}(p-2)^{p+2}-1=M \\leqslant(p+2)^{4}-(p-2)^{4} \\leqslant(p+2)^{4}-1, \\\\\n(p+2)^{p-6}(p-2)^{p+2} \\leqslant 1 .\n\\end{gathered}\n$$\n\nIf $p \\geqslant 7$ then the left-hand side is obviously greater than 1 . For $p=5$ we have $(p+2)^{p-6}(p-2)^{p+2}=7^{-1} \\cdot 3^{7}$ which is also too large.\n\nThere remains only one candidate, $p=3$, which provides a solution:\n\n$$\n\\frac{(p+q)^{p+q}(p-q)^{p-q}-1}{(p+q)^{p-q}(p-q)^{p+q}-1}=\\frac{5^{5} \\cdot 1^{1}-1}{5^{1} \\cdot 1^{5}-1}=\\frac{3124}{4}=781\n$$\n\nSo in Case 2 the only solution is $(p, q)=(3,2)$. Case 3: $q=3$.\n\nSimilarly to Case 2, we have\n\n$$\nM \\mid(p+q)^{2 q}-(p-q)^{2 q}=64 \\cdot\\left(\\left(\\frac{p+3}{2}\\right)^{6}-\\left(\\frac{p-3}{2}\\right)^{6}\\right) .\n$$\n\nSince $M$ is odd, we conclude that\n\n$$\nM \\mid\\left(\\frac{p+3}{2}\\right)^{6}-\\left(\\frac{p-3}{2}\\right)^{6}\n$$\n\nand\n\n$$\n\\begin{gathered}\n(p+3)^{p-3}(p-3)^{p+3}-1=M \\leqslant\\left(\\frac{p+3}{2}\\right)^{6}-\\left(\\frac{p-3}{2}\\right)^{6} \\leqslant\\left(\\frac{p+3}{2}\\right)^{6}-1, \\\\\n64(p+3)^{p-9}(p-3)^{p+3} \\leqslant 1\n\\end{gathered}\n$$\n\nIf $p \\geqslant 11$ then the left-hand side is obviously greater than 1 . If $p=7$ then the left-hand side is $64 \\cdot 10^{-2} \\cdot 4^{10}>1$. If $p=5$ then the left-hand side is $64 \\cdot 8^{-4} \\cdot 2^{8}=2^{2}>1$. Therefore, there is no solution in Case 3."
  },
  {
    "id": "fimo_2017_number_theory_p6",
    "enunciado": "Find the smallest positive integer $n$, or show that no such $n$ exists, with the following property: there are infinitely many distinct $n$-tuples of positive rational numbers $\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)$ such that both\n\n$$\na_{1}+a_{2}+\\cdots+a_{n} \\quad \\text { and } \\quad \\frac{1}{a_{1}}+\\frac{1}{a_{2}}+\\cdots+\\frac{1}{a_{n}}\n$$\n\nare integers.\n\nThe final answer is $n=3$.",
    "solucao": "For $n=1, a_{1} \\in \\mathbb{Z}_{>0}$ and $\\frac{1}{a_{1}} \\in \\mathbb{Z}_{>0}$ if and only if $a_{1}=1$. Next we show that\n\n(i) There are finitely many $(x, y) \\in \\mathbb{Q}_{>0}^{2}$ satisfying $x+y \\in \\mathbb{Z}$ and $\\frac{1}{x}+\\frac{1}{y} \\in \\mathbb{Z}$\n\nWrite $x=\\frac{a}{b}$ and $y=\\frac{c}{d}$ with $a, b, c, d \\in \\mathbb{Z}_{>0}$ and $\\operatorname{gcd}(a, b)=\\operatorname{gcd}(c, d)=1$. Then $x+y \\in \\mathbb{Z}$ and $\\frac{1}{x}+\\frac{1}{y} \\in \\mathbb{Z}$ is equivalent to the two divisibility conditions\n\n$$\nb d \\mid a d+b c(1) \\quad \\text { and } \\quad a c \\mid a d+b c \\quad(2)\n$$\n\nCondition (1) implies that $d|a d+b c \\Longleftrightarrow d| b c \\Longleftrightarrow d \\mid b$ since $\\operatorname{gcd}(c, d)=1$. Still from (1) we get $b|a d+b c \\Longleftrightarrow b| a d \\Longleftrightarrow b \\mid d$ since $\\operatorname{gcd}(a, b)=1$. From $b \\mid d$ and $d \\mid b$ we have $b=d$.\n\nAn analogous reasoning with condition (2) shows that $a=c$. Hence $x=\\frac{a}{b}=\\frac{c}{d}=y$, i.e., the problem amounts to finding all $x \\in \\mathbb{Q}_{>0}$ such that $2 x \\in \\mathbb{Z}_{>0}$ and $\\frac{2}{x} \\in \\mathbb{Z}_{>0}$. Letting $n=2 x \\in \\mathbb{Z}_{>0}$, we have that $\\frac{2}{x} \\in \\mathbb{Z}_{>0} \\Longleftrightarrow \\frac{4}{n} \\in \\mathbb{Z}_{>0} \\Longleftrightarrow n=1,2$ or 4 , and there are finitely many solutions, namely $(x, y)=\\left(\\frac{1}{2}, \\frac{1}{2}\\right),(1,1)$ or $(2,2)$.\n\n(ii) There are infinitely many triples $(x, y, z) \\in \\mathbb{Q}_{>0}^{2}$ such that $x+y+z \\in \\mathbb{Z}$ and $\\frac{1}{x}+\\frac{1}{y}+\\frac{1}{z} \\in \\mathbb{Z}$. We will look for triples such that $x+y+z=1$, so we may write them in the form\n\n$$\n(x, y, z)=\\left(\\frac{a}{a+b+c}, \\frac{b}{a+b+c}, \\frac{c}{a+b+c}\\right) \\quad \\text { with } a, b, c \\in \\mathbb{Z}_{>0}\n$$\n\nWe want these to satisfy\n\n$$\n\\frac{1}{x}+\\frac{1}{y}+\\frac{1}{z}=\\frac{a+b+c}{a}+\\frac{a+b+c}{b}+\\frac{a+b+c}{c} \\in \\mathbb{Z} \\Longleftrightarrow \\frac{b+c}{a}+\\frac{a+c}{b}+\\frac{a+b}{c} \\in \\mathbb{Z}\n$$\n\nFixing $a=1$, it suffices to find infinitely many pairs $(b, c) \\in \\mathbb{Z}_{>0}^{2}$ such that\n\n$$\n\\frac{1}{b}+\\frac{1}{c}+\\frac{c}{b}+\\frac{b}{c}=3 \\Longleftrightarrow b^{2}+c^{2}-3 b c+b+c=0\n$$\n\nTo show that equation $(*)$ has infinitely many solutions, we use Vieta jumping (also known as root flipping): starting with $b=2, c=3$, the following algorithm generates infinitely many solutions. Let $c \\geqslant b$, and view $(*)$ as a quadratic equation in $b$ for $c$ fixed:\n\n$$\nb^{2}-(3 c-1) \\cdot b+\\left(c^{2}+c\\right)=0\n$$\n\nThen there exists another root $b_{0} \\in \\mathbb{Z}$ of $(* *)$ which satisfies $b+b_{0}=3 c-1$ and $b \\cdot b_{0}=c^{2}+c$. Since $c \\geqslant b$ by assumption,\n\n$$\nb_{0}=\\frac{c^{2}+c}{b} \\geqslant \\frac{c^{2}+c}{c}>c\n$$\n\nHence from the solution $(b, c)$ we obtain another one $\\left(c, b_{0}\\right)$ with $b_{0}>c$, and we can then \"jump\" again, this time with $c$ as the \"variable\" in the quadratic $(*)$. This algorithm will generate an infinite sequence of distinct solutions, whose first terms are\n\n$(2,3),(3,6),(6,14),(14,35),(35,90),(90,234),(234,611),(611,1598),(1598,4182), \\ldots$"
  },
  {
    "id": "fimo_2017_number_theory_p7",
    "enunciado": "Say that an ordered pair $(x, y)$ of integers is an irreducible lattice point if $x$ and $y$ are relatively prime. For any finite set $S$ of irreducible lattice points, show that there is a homogenous polynomial in two variables, $f(x, y)$, with integer coefficients, of degree at least 1 , such that $f(x, y)=1$ for each $(x, y)$ in the set $S$.\n\nNote: A homogenous polynomial of degree $n$ is any nonzero polynomial of the form\n\n$$\nf(x, y)=a_{0} x^{n}+a_{1} x^{n-1} y+a_{2} x^{n-2} y^{2}+\\cdots+a_{n-1} x y^{n-1}+a_{n} y^{n} .\n$$",
    "solucao": "First of all, we note that finding a homogenous polynomial $f(x, y)$ such that $f(x, y)=\\pm 1$ is enough, because we then have $f^{2}(x, y)=1$. Label the irreducible lattice points $\\left(x_{1}, y_{1}\\right)$ through $\\left(x_{n}, y_{n}\\right)$. If any two of these lattice points $\\left(x_{i}, y_{i}\\right)$ and $\\left(x_{j}, y_{j}\\right)$ lie on the same line through the origin, then $\\left(x_{j}, y_{j}\\right)=\\left(-x_{i},-y_{i}\\right)$ because both of the points are irreducible. We then have $f\\left(x_{j}, y_{j}\\right)=\\pm f\\left(x_{i}, y_{i}\\right)$ whenever $f$ is homogenous, so we can assume that no two of the lattice points are collinear with the origin by ignoring the extra lattice points.\n\nConsider the homogenous polynomials $\\ell_{i}(x, y)=y_{i} x-x_{i} y$ and define\n\n$$\ng_{i}(x, y)=\\prod_{j \\neq i} \\ell_{j}(x, y)\n$$\n\nThen $\\ell_{i}\\left(x_{j}, y_{j}\\right)=0$ if and only if $j=i$, because there is only one lattice point on each line through the origin. Thus, $g_{i}\\left(x_{j}, y_{j}\\right)=0$ for all $j \\neq i$. Define $a_{i}=g_{i}\\left(x_{i}, y_{i}\\right)$, and note that $a_{i} \\neq 0$\n\nNote that $g_{i}(x, y)$ is a degree $n-1$ polynomial with the following two properties:\n\n\\begin{enumerate}\n  \\item $g_{i}\\left(x_{j}, y_{j}\\right)=0$ if $j \\neq i$.\n\n  \\item $g_{i}\\left(x_{i}, y_{i}\\right)=a_{i}$.\n\n\\end{enumerate}\n\nFor any $N \\geqslant n-1$, there also exists a polynomial of degree $N$ with the same two properties. Specifically, let $I_{i}(x, y)$ be a degree 1 homogenous polynomial such that $I_{i}\\left(x_{i}, y_{i}\\right)=1$, which exists since $\\left(x_{i}, y_{i}\\right)$ is irreducible. Then $I_{i}(x, y)^{N-(n-1)} g_{i}(x, y)$ satisfies both of the above properties and has degree $N$.\n\nWe may now reduce the problem to the following claim:\n\nClaim: For each positive integer a, there is a homogenous polynomial $f_{a}(x, y)$, with integer coefficients, of degree at least 1, such that $f_{a}(x, y) \\equiv 1(\\bmod a)$ for all relatively prime $(x, y)$.\n\nTo see that this claim solves the problem, take $a$ to be the least common multiple of the numbers $a_{i}(1 \\leqslant i \\leqslant n)$. Take $f_{a}$ given by the claim, choose some power $f_{a}(x, y)^{k}$ that has degree at least $n-1$, and subtract appropriate multiples of the $g_{i}$ constructed above to obtain the desired polynomial.\n\nWe prove the claim by factoring $a$. First, if $a$ is a power of a prime $\\left(a=p^{k}\\right)$, then we may choose either:\n\n\\begin{itemize}\n  \\item $f_{a}(x, y)=\\left(x^{p-1}+y^{p-1}\\right)^{\\phi(a)}$ if $p$ is odd;\n\n  \\item $f_{a}(x, y)=\\left(x^{2}+x y+y^{2}\\right)^{\\phi(a)}$ if $p=2$.\n\n\\end{itemize}\n\nNow suppose $a$ is any positive integer, and let $a=q_{1} q_{2} \\cdots q_{k}$, where the $q_{i}$ are prime powers, pairwise relatively prime. Let $f_{q_{i}}$ be the polynomials just constructed, and let $F_{q_{i}}$ be powers of these that all have the same degree. Note that\n\n$$\n\\frac{a}{q_{i}} F_{q_{i}}(x, y) \\equiv \\frac{a}{q_{i}} \\quad(\\bmod a)\n$$\n\nfor any relatively prime $x, y$. By Bzout's lemma, there is an integer linear combination of the $\\frac{a}{q_{i}}$ that equals 1 . Thus, there is a linear combination of the $F_{q_{i}}$ such that $F_{q_{i}}(x, y) \\equiv 1$ $(\\bmod a)$ for any relatively prime $(x, y)$; and this polynomial is homogenous because all the $F_{q_{i}}$ have the same degree."
  },
  {
    "id": "fimo_2017_number_theory_p8",
    "enunciado": "Let $p$ be an odd prime number and $\\mathbb{Z}_{>0}$ be the set of positive integers. Suppose that a function $f: \\mathbb{Z}_{>0} \\times \\mathbb{Z}_{>0} \\rightarrow\\{0,1\\}$ satisfies the following properties:\n\n\\begin{itemize}\n  \\item $f(1,1)=0$\n\n  \\item $f(a, b)+f(b, a)=1$ for any pair of relatively prime positive integers $(a, b)$ not both equal to 1\n\n  \\item $f(a+b, b)=f(a, b)$ for any pair of relatively prime positive integers $(a, b)$.\n\n\\end{itemize}\n\nProve that\n\n$$\n\\sum_{n=1}^{p-1} f\\left(n^{2}, p\\right) \\geqslant \\sqrt{2 p}-2\n$$",
    "solucao": "Denote by $\\mathbb{A}$ the set of all pairs of coprime positive integers. Notice that for every $(a, b) \\in \\mathbb{A}$ there exists a pair $(u, v) \\in \\mathbb{Z}^{2}$ with $u a+v b=1$. Moreover, if $\\left(u_{0}, v_{0}\\right)$ is one such pair, then all such pairs are of the form $(u, v)=\\left(u_{0}+k b, v_{0}-k a\\right)$, where $k \\in \\mathbb{Z}$. So there exists a unique such pair $(u, v)$ with $-b / 2<u \\leqslant b / 2$; we denote this pair by $(u, v)=g(a, b)$.\n\nLemma. Let $(a, b) \\in \\mathbb{A}$ and $(u, v)=g(a, b)$. Then $f(a, b)=1 \\Longleftrightarrow u>0$.\n\nProof. We induct on $a+b$. The base case is $a+b=2$. In this case, we have that $a=b=1$, $g(a, b)=g(1,1)=(0,1)$ and $f(1,1)=0$, so the claim holds.\n\nAssume now that $a+b>2$, and so $a \\neq b$, since $a$ and $b$ are coprime. Two cases are possible. Case 1: $a>b$.\n\nNotice that $g(a-b, b)=(u, v+u)$, since $u(a-b)+(v+u) b=1$ and $u \\in(-b / 2, b / 2]$. Thus $f(a, b)=1 \\Longleftrightarrow f(a-b, b)=1 \\Longleftrightarrow u>0$ by the induction hypothesis.\n\nCase 2: $a<b$. (Then, clearly, $b \\geqslant 2$.)\n\nNow we estimate $v$. Since $v b=1-u a$, we have\n\n$$\n1+\\frac{a b}{2}>v b \\geqslant 1-\\frac{a b}{2}, \\quad \\text { so } \\quad \\frac{1+a}{2} \\geqslant \\frac{1}{b}+\\frac{a}{2}>v \\geqslant \\frac{1}{b}-\\frac{a}{2}>-\\frac{a}{2}\n$$\n\nThus $1+a>2 v>-a$, so $a \\geqslant 2 v>-a$, hence $a / 2 \\geqslant v>-a / 2$, and thus $g(b, a)=(v, u)$.\n\nObserve that $f(a, b)=1 \\Longleftrightarrow f(b, a)=0 \\Longleftrightarrow f(b-a, a)=0$. We know from Case 1 that $g(b-a, a)=(v, u+v)$. We have $f(b-a, a)=0 \\Longleftrightarrow v \\leqslant 0$ by the inductive hypothesis. Then, since $b>a \\geqslant 1$ and $u a+v b=1$, we have $v \\leqslant 0 \\Longleftrightarrow u>0$, and we are done.\n\nThe Lemma proves that, for all $(a, b) \\in \\mathbb{A}, f(a, b)=1$ if and only if the inverse of $a$ modulo $b$, taken in $\\{1,2, \\ldots, b-1\\}$, is at most $b / 2$. Then, for any odd prime $p$ and integer $n$ such that $n \\not \\equiv 0(\\bmod p), f\\left(n^{2}, p\\right)=1$ iff the inverse of $n^{2} \\bmod p$ is less than $p / 2$. Since $\\left\\{n^{2} \\bmod p: 1 \\leqslant n \\leqslant p-1\\right\\}=\\left\\{n^{-2} \\bmod p: 1 \\leqslant n \\leqslant p-1\\right\\}$, including multiplicities (two for each quadratic residue in each set), we conclude that the desired sum is twice the number of quadratic residues that are less than $p / 2$, i.e.,\n\n$$\n\\sum_{n=1}^{p-1} f\\left(n^{2}, p\\right)=2 \\mid\\left\\{k: 1 \\leqslant k \\leqslant \\frac{p-1}{2} \\text { and } k^{2} \\bmod p<\\frac{p}{2}\\right\\} \\mid .\n$$\n\nSince the number of perfect squares in the interval $[1, p / 2)$ is $\\lfloor\\sqrt{p / 2}\\rfloor>\\sqrt{p / 2}-1$, we conclude that\n\n$$\n\\sum_{n=1}^{p-1} f\\left(n^{2}, p\\right)>2\\left(\\sqrt{\\frac{p}{2}}-1\\right)=\\sqrt{2 p}-2\n$$"
  },
  {
    "id": "fimo_2018_algebra_p1",
    "enunciado": "Let $\\mathbb{Q}_{>0}$ denote the set of all positive rational numbers. Determine all functions $f: \\mathbb{Q}>0 \\rightarrow \\mathbb{Q}>0$ satisfying\n\n$$\nf\\left(x^{2} f(y)^{2}\\right)=f(x)^{2} f(y)\n$$\n\nfor all $x, y \\in \\mathbb{Q}>0$.\n\nThe final answer is $f(x)=1$ for all $x \\in \\mathbb{Q}>0$.",
    "solucao": "Take any $a, b \\in \\mathbb{Q}_{>0}$. By substituting $x=f(a), y=b$ and $x=f(b), y=a$ into $(*)$ we get\n\n$$\nf(f(a))^{2} f(b)=f\\left(f(a)^{2} f(b)^{2}\\right)=f(f(b))^{2} f(a)\n$$\n\nwhich yields\n\n$$\n\\frac{f(f(a))^{2}}{f(a)}=\\frac{f(f(b))^{2}}{f(b)} \\quad \\text { for all } a, b \\in \\mathbb{Q}_{>0} .\n$$\n\nIn other words, this shows that there exists a constant $C \\in \\mathbb{Q}_{>0}$ such that $f(f(a))^{2}=C f(a)$, or\n\n$$\n\\left(\\frac{f(f(a))}{C}\\right)^{2}=\\frac{f(a)}{C} \\quad \\text { for all } a \\in \\mathbb{Q}>0 .\n$$\n\nDenote by $f^{n}(x)=\\underbrace{f(f(\\ldots(f}_{n}(x)) \\ldots))$ the $n^{\\text {th }}$ iteration of $f$. Equality (1) yields\n\n$$\n\\frac{f(a)}{C}=\\left(\\frac{f^{2}(a)}{C}\\right)^{2}=\\left(\\frac{f^{3}(a)}{C}\\right)^{4}=\\cdots=\\left(\\frac{f^{n+1}(a)}{C}\\right)^{2^{n}}\n$$\n\nfor all positive integer $n$. So, $f(a) / C$ is the $2^{n}$-th power of a rational number for all positive integer $n$. This is impossible unless $f(a) / C=1$, since otherwise the exponent of some prime in the prime decomposition of $f(a) / C$ is not divisible by sufficiently large powers of 2 . Therefore, $f(a)=C$ for all $a \\in \\mathbb{Q}>0$.\n\nFinally, after substituting $f \\equiv C$ into $(*)$ we get $C=C^{3}$, whence $C=1$. So $f(x) \\equiv 1$ is the unique function satisfying $(*)$."
  },
  {
    "id": "fimo_2018_algebra_p2",
    "enunciado": "Find all positive integers $n \\geqslant 3$ for which there exist real numbers $a_{1}, a_{2}, \\ldots, a_{n}$, $a_{n+1}=a_{1}, a_{n+2}=a_{2}$ such that\n\n$$\na_{i} a_{i+1}+1=a_{i+2}\n$$\n\nfor all $i=1,2, \\ldots, n$.\n\nThe answer is that $n$ can be any multiple of 3 .",
    "solucao": "For the sake of convenience, extend the sequence $a_{1}, \\ldots, a_{n+2}$ to an infinite periodic sequence with period $n$. ( $n$ is not necessarily the shortest period.)\n\nIf $n$ is divisible by 3 , then $\\left(a_{1}, a_{2}, \\ldots\\right)=(-1,-1,2,-1,-1,2, \\ldots)$ is an obvious solution.\n\nWe will show that in every periodic sequence satisfying the recurrence, each positive term is followed by two negative values, and after them the next number is positive again. From this, it follows that $n$ is divisible by 3 .\n\nIf the sequence contains two consecutive positive numbers $a_{i}, a_{i+1}$, then $a_{i+2}=a_{i} a_{i+1}+1>1$, so the next value is positive as well; by induction, all numbers are positive and greater than 1. But then $a_{i+2}=a_{i} a_{i+1}+1 \\geqslant 1 \\cdot a_{i+1}+1>a_{i+1}$ for every index $i$, which is impossible: our sequence is periodic, so it cannot increase everywhere.\n\nIf the number 0 occurs in the sequence, $a_{i}=0$ for some index $i$, then it follows that $a_{i+1}=a_{i-1} a_{i}+1$ and $a_{i+2}=a_{i} a_{i+1}+1$ are two consecutive positive elements in the sequences and we get the same contradiction again.\n\nNotice that after any two consecutive negative numbers the next one must be positive: if $a_{i}<0$ and $a_{i+1}<0$, then $a_{i+2}=a_{1} a_{i+1}+1>1>0$. Hence, the positive and negative numbers follow each other in such a way that each positive term is followed by one or two negative values and then comes the next positive term.\n\nConsider the case when the positive and negative values alternate. So, if $a_{i}$ is a negative value then $a_{i+1}$ is positive, $a_{i+2}$ is negative and $a_{i+3}$ is positive again.\n\nNotice that $a_{i} a_{i+1}+1=a_{i+2}<0<a_{i+3}=a_{i+1} a_{i+2}+1$; by $a_{i+1}>0$ we conclude $a_{i}<a_{i+2}$. Hence, the negative values form an infinite increasing subsequence, $a_{i}<a_{i+2}<a_{i+4}<\\ldots$, which is not possible, because the sequence is periodic.\n\nThe only case left is when there are consecutive negative numbers in the sequence. Suppose that $a_{i}$ and $a_{i+1}$ are negative; then $a_{i+2}=a_{i} a_{i+1}+1>1$. The number $a_{i+3}$ must be negative. We show that $a_{i+4}$ also must be negative.\n\nNotice that $a_{i+3}$ is negative and $a_{i+4}=a_{i+2} a_{i+3}+1<1<a_{i} a_{i+1}+1=a_{i+2}$, so\n\n$$\na_{i+5}-a_{i+4}=\\left(a_{i+3} a_{i+4}+1\\right)-\\left(a_{i+2} a_{i+3}+1\\right)=a_{i+3}\\left(a_{i+4}-a_{i+2}\\right)>0,\n$$\n\ntherefore $a_{i+5}>a_{i+4}$. Since at most one of $a_{i+4}$ and $a_{i+5}$ can be positive, that means that $a_{i+4}$ must be negative.\n\nNow $a_{i+3}$ and $a_{i+4}$ are negative and $a_{i+5}$ is positive; so after two negative and a positive terms, the next three terms repeat the same pattern. That completes the solution."
  },
  {
    "id": "fimo_2018_algebra_p3",
    "enunciado": "Given any set $S$ of positive integers, show that at least one of the following two assertions holds:\n\n(1) There exist distinct finite subsets $F$ and $G$ of $S$ such that $\\sum_{x \\in F} 1 / x=\\sum_{x \\in G} 1 / x$;\n\n(2) There exists a positive rational number $r<1$ such that $\\sum_{x \\in F} 1 / x \\neq r$ for all finite subsets $F$ of $S$.",
    "solucao": "Argue indirectly. Agree, as usual, that the empty sum is 0 to consider rationals in $[0,1)$; adjoining 0 causes no harm, since $\\sum_{x \\in F} 1 / x=0$ for no nonempty finite subset $F$ of $S$. For every rational $r$ in $[0,1)$, let $F_{r}$ be the unique finite subset of $S$ such that $\\sum_{x \\in F_{r}} 1 / x=r$. The argument hinges on the lemma below.\n\nLemma. If $x$ is a member of $S$ and $q$ and $r$ are rationals in [0,1) such that $q-r=1 / x$, then $x$ is a member of $F_{q}$ if and only if it is not one of $F_{r}$.\n\nProof. If $x$ is a member of $F_{q}$, then\n\n$$\n\\sum_{y \\in F_{q} \\backslash\\{x\\}} \\frac{1}{y}=\\sum_{y \\in F_{q}} \\frac{1}{y}-\\frac{1}{x}=q-\\frac{1}{x}=r=\\sum_{y \\in F_{r}} \\frac{1}{y},\n$$\n\nso $F_{r}=F_{q} \\backslash\\{x\\}$, and $x$ is not a member of $F_{r}$. Conversely, if $x$ is not a member of $F_{r}$, then\n\n$$\n\\sum_{y \\in F_{r} \\cup\\{x\\}} \\frac{1}{y}=\\sum_{y \\in F_{r}} \\frac{1}{y}+\\frac{1}{x}=r+\\frac{1}{x}=q=\\sum_{y \\in F_{q}} \\frac{1}{y},\n$$\n\nso $F_{q}=F_{r} \\cup\\{x\\}$, and $x$ is a member of $F_{q}$.\n\nConsider now an element $x$ of $S$ and a positive rational $r<1$. Let $n=\\lfloor r x\\rfloor$ and consider the sets $F_{r-k / x}, k=0, \\ldots, n$. Since $0 \\leqslant r-n / x<1 / x$, the set $F_{r-n / x}$ does not contain $x$, and a repeated application of the lemma shows that the $F_{r-(n-2 k) / x}$ do not contain $x$, whereas the $F_{r-(n-2 k-1) / x}$ do. Consequently, $x$ is a member of $F_{r}$ if and only if $n$ is odd.\n\nFinally, consider $F_{2 / 3}$. By the preceding, $\\lfloor 2 x / 3\\rfloor$ is odd for each $x$ in $F_{2 / 3}$, so $2 x / 3$ is not integral. Since $F_{2 / 3}$ is finite, there exists a positive rational $\\varepsilon$ such that $\\lfloor(2 / 3-\\varepsilon) x\\rfloor=\\lfloor 2 x / 3\\rfloor$ for all $x$ in $F_{2 / 3}$. This implies that $F_{2 / 3}$ is a subset of $F_{2 / 3-\\varepsilon}$ which is impossible."
  },
  {
    "id": "fimo_2018_algebra_p4",
    "enunciado": "Let $a_{0}, a_{1}, a_{2}, \\ldots$ be a sequence of real numbers such that $a_{0}=0, a_{1}=1$, and for every $n \\geqslant 2$ there exists $1 \\leqslant k \\leqslant n$ satisfying\n\n$$\na_{n}=\\frac{a_{n-1}+\\cdots+a_{n-k}}{k}\n$$\n\nFind the maximal possible value of $a_{2018}-a_{2017}$.\n\nThe final answer is that the maximal value is $\\frac{2016}{2017^{2}}$.",
    "solucao": "The claimed maximal value is achieved at\n\n$$\n\\begin{gathered}\na_{1}=a_{2}=\\cdots=a_{2016}=1, \\quad a_{2017}=\\frac{a_{2016}+\\cdots+a_{0}}{2017}=1-\\frac{1}{2017}, \\\\\na_{2018}=\\frac{a_{2017}+\\cdots+a_{1}}{2017}=1-\\frac{1}{2017^{2}} .\n\\end{gathered}\n$$\n\nNow we need to show that this value is optimal. For brevity, we use the notation\n\n$$\nS(n, k)=a_{n-1}+a_{n-2}+\\cdots+a_{n-k} \\quad \\text { for nonnegative integers } k \\leqslant n \\text {. }\n$$\n\nIn particular, $S(n, 0)=0$ and $S(n, 1)=a_{n-1}$. In these terms, for every integer $n \\geqslant 2$ there exists a positive integer $k \\leqslant n$ such that $a_{n}=S(n, k) / k$.\n\nFor every integer $n \\geqslant 1$ we define\n\n$$\nM_{n}=\\max _{1 \\leqslant k \\leqslant n} \\frac{S(n, k)}{k}, \\quad m_{n}=\\min _{1 \\leqslant k \\leqslant n} \\frac{S(n, k)}{k}, \\quad \\text { and } \\quad \\Delta_{n}=M_{n}-m_{n} \\geqslant 0 .\n$$\n\nBy definition, $a_{n} \\in\\left[m_{n}, M_{n}\\right]$ for all $n \\geqslant 2$; on the other hand, $a_{n-1}=S(n, 1) / 1 \\in\\left[m_{n}, M_{n}\\right]$. Therefore,\n\n$$\na_{2018}-a_{2017} \\leqslant M_{2018}-m_{2018}=\\Delta_{2018}\n$$\n\nand we are interested in an upper bound for $\\Delta_{2018}$.\n\nAlso by definition, for any $0<k \\leqslant n$ we have $k m_{n} \\leqslant S(n, k) \\leqslant k M_{n}$; notice that these inequalities are also valid for $k=0$.\n\nClaim 1. For every $n>2$, we have $\\Delta_{n} \\leqslant \\frac{n-1}{n} \\Delta_{n-1}$.\n\nProof. Choose positive integers $k, \\ell \\leqslant n$ such that $M_{n}=S(n, k) / k$ and $m_{n}=S(n, \\ell) / \\ell$. We have $S(n, k)=a_{n-1}+S(n-1, k-1)$, so\n\n$$\nk\\left(M_{n}-a_{n-1}\\right)=S(n, k)-k a_{n-1}=S(n-1, k-1)-(k-1) a_{n-1} \\leqslant(k-1)\\left(M_{n-1}-a_{n-1}\\right),\n$$\n\nsince $S(n-1, k-1) \\leqslant(k-1) M_{n-1}$. Similarly, we get\n\n$$\n\\ell\\left(a_{n-1}-m_{n}\\right)=(\\ell-1) a_{n-1}-S(n-1, \\ell-1) \\leqslant(\\ell-1)\\left(a_{n-1}-m_{n-1}\\right) .\n$$\n\nSince $m_{n-1} \\leqslant a_{n-1} \\leqslant M_{n-1}$ and $k, \\ell \\leqslant n$, the obtained inequalities yield\n\n$$\n\\begin{aligned}\n& M_{n}-a_{n-1} \\leqslant \\frac{k-1}{k}\\left(M_{n-1}-a_{n-1}\\right) \\leqslant \\frac{n-1}{n}\\left(M_{n-1}-a_{n-1}\\right) \\quad \\text { and } \\\\\n& a_{n-1}-m_{n} \\leqslant \\frac{\\ell-1}{\\ell}\\left(a_{n-1}-m_{n-1}\\right) \\leqslant \\frac{n-1}{n}\\left(a_{n-1}-m_{n-1}\\right) .\n\\end{aligned}\n$$\n\nTherefore,\n\n$$\n\\Delta_{n}=\\left(M_{n}-a_{n-1}\\right)+\\left(a_{n-1}-m_{n}\\right) \\leqslant \\frac{n-1}{n}\\left(\\left(M_{n-1}-a_{n-1}\\right)+\\left(a_{n-1}-m_{n-1}\\right)\\right)=\\frac{n-1}{n} \\Delta_{n-1} .\n$$\n\nBack to the problem, if $a_{n}=1$ for all $n \\leqslant 2017$, then $a_{2018} \\leqslant 1$ and hence $a_{2018}-a_{2017} \\leqslant 0$. Otherwise, let $2 \\leqslant q \\leqslant 2017$ be the minimal index with $a_{q}<1$. We have $S(q, i)=i$ for all $i=1,2, \\ldots, q-1$, while $S(q, q)=q-1$. Therefore, $a_{q}<1$ yields $a_{q}=S(q, q) / q=1-\\frac{1}{q}$.\n\nNow we have $S(q+1, i)=i-\\frac{1}{q}$ for $i=1,2, \\ldots, q$, and $S(q+1, q+1)=q-\\frac{1}{q}$. This gives us\n\n$$\nm_{q+1}=\\frac{S(q+1,1)}{1}=\\frac{S(q+1, q+1)}{q+1}=\\frac{q-1}{q} \\quad \\text { and } \\quad M_{q+1}=\\frac{S(q+1, q)}{q}=\\frac{q^{2}-1}{q^{2}}\n$$\n\nso $\\Delta_{q+1}=M_{q+1}-m_{q+1}=(q-1) / q^{2}$. Denoting $N=2017 \\geqslant q$ and using Claim 1 for $n=q+2, q+3, \\ldots, N+1$ we finally obtain\n\n$$\n\\Delta_{N+1} \\leqslant \\frac{q-1}{q^{2}} \\cdot \\frac{q+1}{q+2} \\cdot \\frac{q+2}{q+3} \\cdots \\frac{N}{N+1}=\\frac{1}{N+1}\\left(1-\\frac{1}{q^{2}}\\right) \\leqslant \\frac{1}{N+1}\\left(1-\\frac{1}{N^{2}}\\right)=\\frac{N-1}{N^{2}},\n$$\n\nas required."
  },
  {
    "id": "fimo_2018_algebra_p5",
    "enunciado": "Determine all functions $f:(0, \\infty) \\rightarrow \\mathbb{R}$ satisfying\n\n$$\n\\left(x+\\frac{1}{x}\\right) f(y)=f(x y)+f\\left(\\frac{y}{x}\\right)\n$$\n\nfor all $x, y>0$.\n\nThe final answer is $f(x)=C_{1} x+\\frac{C_{2}}{x}$ with arbitrary constants $C_{1}$ and $C_{2}$.",
    "solucao": "Fix a real number $a>1$, and take a new variable $t$. For the values $f(t), f\\left(t^{2}\\right)$, $f(a t)$ and $f\\left(a^{2} t^{2}\\right)$, the relation (1) provides a system of linear equations:\n\n$$\n\\begin{aligned}\n& x=y=t: \\quad\\left(t+\\frac{1}{t}\\right) f(t) \\quad=f\\left(t^{2}\\right)+f(1) \\\\\n& x=\\frac{t}{a}, y=a t: \\quad\\left(\\frac{t}{a}+\\frac{a}{t}\\right) f(a t)=f\\left(t^{2}\\right)+f\\left(a^{2}\\right) \\\\\n& x=a^{2} t, y=t: \\quad\\left(a^{2} t+\\frac{1}{a^{2} t}\\right) f(t)=f\\left(a^{2} t^{2}\\right)+f\\left(\\frac{1}{a^{2}}\\right) \\\\\n& x=y=a t: \\quad\\left(a t+\\frac{1}{a t}\\right) f(a t)=f\\left(a^{2} t^{2}\\right)+f(1)\n\\end{aligned}\n$$\n\nIn order to eliminate $f\\left(t^{2}\\right)$, take the difference of $(2 \\mathrm{a})$ and (2b); from (2c) and (2d) eliminate $f\\left(a^{2} t^{2}\\right)$; then by taking a linear combination, eliminate $f(a t)$ as well:\n\n$$\n\\begin{gathered}\n\\left(t+\\frac{1}{t}\\right) f(t)-\\left(\\frac{t}{a}+\\frac{a}{t}\\right) f(a t)=f(1)-f\\left(a^{2}\\right) \\text { and } \\\\\n\\left(a^{2} t+\\frac{1}{a^{2} t}\\right) f(t)-\\left(a t+\\frac{1}{a t}\\right) f(a t)=f\\left(1 / a^{2}\\right)-f(1), \\quad \\text { so } \\\\\n\\left(\\left(a t+\\frac{1}{a t}\\right)\\left(t+\\frac{1}{t}\\right)-\\left(\\frac{t}{a}+\\frac{a}{t}\\right)\\left(a^{2} t+\\frac{1}{a^{2} t}\\right)\\right) f(t) \\\\\n=\\left(a t+\\frac{1}{a t}\\right)\\left(f(1)-f\\left(a^{2}\\right)\\right)-\\left(\\frac{t}{a}+\\frac{a}{t}\\right)\\left(f\\left(1 / a^{2}\\right)-f(1)\\right) .\n\\end{gathered}\n$$\n\nNotice that on the left-hand side, the coefficient of $f(t)$ is nonzero and does not depend on $t$ :\n\n$$\n\\left(a t+\\frac{1}{a t}\\right)\\left(t+\\frac{1}{t}\\right)-\\left(\\frac{t}{a}+\\frac{a}{t}\\right)\\left(a^{2} t+\\frac{1}{a^{2} t}\\right)=a+\\frac{1}{a}-\\left(a^{3}+\\frac{1}{a^{3}}\\right)<0 .\n$$\n\nAfter dividing by this fixed number, we get\n\n$$\nf(t)=C_{1} t+\\frac{C_{2}}{t}\n$$\n\nwhere the numbers $C_{1}$ and $C_{2}$ are expressed in terms of $a, f(1), f\\left(a^{2}\\right)$ and $f\\left(1 / a^{2}\\right)$, and they do not depend on $t$.\n\nThe functions of the form (3) satisfy the equation:\n\n$$\n\\left(x+\\frac{1}{x}\\right) f(y)=\\left(x+\\frac{1}{x}\\right)\\left(C_{1} y+\\frac{C_{2}}{y}\\right)=\\left(C_{1} x y+\\frac{C_{2}}{x y}\\right)+\\left(C_{1} \\frac{y}{x}+C_{2} \\frac{x}{y}\\right)=f(x y)+f\\left(\\frac{y}{x}\\right) .\n$$"
  },
  {
    "id": "fimo_2018_algebra_p6",
    "enunciado": "Let $m, n \\geqslant 2$ be integers. Let $f\\left(x_{1}, \\ldots, x_{n}\\right)$ be a polynomial with real coefficients such that\n\n$$\nf\\left(x_{1}, \\ldots, x_{n}\\right)=\\left\\lfloor\\frac{x_{1}+\\ldots+x_{n}}{m}\\right\\rfloor \\quad \\text { for every } x_{1}, \\ldots, x_{n} \\in\\{0,1, \\ldots, m-1\\} .\n$$\n\nProve that the total degree of $f$ is at least $n$.",
    "solucao": "We transform the problem to a single variable question by the following\n\nLemma . Let $a_{1}, \\ldots, a_{n}$ be nonnegative integers and let $G(x)$ be a nonzero polynomial with $\\operatorname{deg} G \\leqslant a_{1}+\\ldots+a_{n}$. Suppose that some polynomial $F\\left(x_{1}, \\ldots, x_{n}\\right)$ satisfies\n\n$$\nF\\left(x_{1}, \\ldots, x_{n}\\right)=G\\left(x_{1}+\\ldots+x_{n}\\right) \\text { for }\\left(x_{1}, \\ldots, x_{n}\\right) \\in\\left\\{0,1, \\ldots, a_{1}\\right\\} \\times \\ldots \\times\\left\\{0,1, \\ldots, a_{n}\\right\\} .\n$$\n\nThen $F$ cannot be the zero polynomial, and $\\operatorname{deg} F \\geqslant \\operatorname{deg} G$.\n\nFor proving the lemma, we will use forward differences of polynomials. If $p(x)$ is a polynomial with a single variable, then define $(\\Delta p)(x)=p(x+1)-p(x)$. It is well-known that if $p$ is a nonconstant polynomial then $\\operatorname{deg} \\Delta p=\\operatorname{deg} p-1$.\n\nIf $p\\left(x_{1}, \\ldots, x_{n}\\right)$ is a polynomial with $n$ variables and $1 \\leqslant k \\leqslant n$ then let\n\n$$\n\\left(\\Delta_{k} p\\right)\\left(x_{1}, \\ldots, x_{n}\\right)=p\\left(x_{1}, \\ldots, x_{k-1}, x_{k}+1, x_{k+1}, \\ldots, x_{n}\\right)-p\\left(x_{1}, \\ldots, x_{n}\\right) .\n$$\n\nIt is also well-known that either $\\Delta_{k} p$ is the zero polynomial or $\\operatorname{deg}\\left(\\Delta_{k} p\\right) \\leqslant \\operatorname{deg} p-1$.\n\nProof of the lemma. We apply induction on the degree of $G$. If $G$ is a constant polynomial then we have $F(0, \\ldots, 0)=G(0) \\neq 0$, so $F$ cannot be the zero polynomial.\n\nSuppose that $\\operatorname{deg} G \\geqslant 1$ and the lemma holds true for lower degrees. Since $a_{1}+\\ldots+a_{n} \\geqslant$ $\\operatorname{deg} G>0$, at least one of $a_{1}, \\ldots, a_{n}$ is positive; without loss of generality suppose $a_{1} \\geqslant 1$.\n\nConsider the polynomials $F_{1}=\\Delta_{1} F$ and $G_{1}=\\Delta G$. On the grid $\\left\\{0, \\ldots, a_{1}-1\\right\\} \\times\\left\\{0, \\ldots, a_{2}\\right\\} \\times$ $\\ldots \\times\\left\\{0, \\ldots, a_{n}\\right\\}$ we have\n\n$$\n\\begin{aligned}\nF_{1}\\left(x_{1}, \\ldots, x_{n}\\right) & =F\\left(x_{1}+1, x_{2}, \\ldots, x_{n}\\right)-F\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)= \\\\\n& =G\\left(x_{1}+\\ldots+x_{n}+1\\right)-G\\left(x_{1}+\\ldots+x_{n}\\right)=G_{1}\\left(x_{1}+\\ldots+x_{n}\\right) .\n\\end{aligned}\n$$\n\nSince $G$ is nonconstant, we have $\\operatorname{deg} G_{1}=\\operatorname{deg} G-1 \\leqslant\\left(a_{1}-1\\right)+a_{2}+\\ldots+a_{n}$. Therefore we can apply the induction hypothesis to $F_{1}$ and $G_{1}$ and conclude that $F_{1}$ is not the zero polynomial and $\\operatorname{deg} F_{1} \\geqslant \\operatorname{deg} G_{1}$. Hence, $\\operatorname{deg} F \\geqslant \\operatorname{deg} F_{1}+1 \\geqslant \\operatorname{deg} G_{1}+1=\\operatorname{deg} G$. That finishes the proof.\n\nTo prove the problem statement, take the unique polynomial $g(x)$ so that $g(x)=\\left\\lfloor\\frac{x}{m}\\right\\rfloor$ for $x \\in\\{0,1, \\ldots, n(m-1)\\}$ and $\\operatorname{deg} g \\leqslant n(m-1)$. Notice that precisely $n(m-1)+1$ values of $g$ are prescribed, so $g(x)$ indeed exists and is unique. Notice further that the constraints $g(0)=g(1)=0$ and $g(m)=1$ together enforce $\\operatorname{deg} g \\geqslant 2$.\n\nBy applying the lemma to $a_{1}=\\ldots=a_{n}=m-1$ and the polynomials $f$ and $g$, we achieve $\\operatorname{deg} f \\geqslant \\operatorname{deg} g$. Hence we just need a suitable lower bound on $\\operatorname{deg} g$.\n\nConsider the polynomial $h(x)=g(x+m)-g(x)-1$. The degree of $g(x+m)-g(x)$ is $\\operatorname{deg} g-1 \\geqslant 1$, so $\\operatorname{deg} h=\\operatorname{deg} g-1 \\geqslant 1$, and therefore $h$ cannot be the zero polynomial. On the other hand, $h$ vanishes at the points $0,1, \\ldots, n(m-1)-m$, so $h$ has at least $(n-1)(m-1)$ roots. Hence,\n\n$$\n\\operatorname{deg} f \\geqslant \\operatorname{deg} g=\\operatorname{deg} h+1 \\geqslant(n-1)(m-1)+1 \\geqslant n\n$$"
  },
  {
    "id": "fimo_2018_algebra_p7",
    "enunciado": "Find the maximal value of\n\n$$\nS=\\sqrt[3]{\\frac{a}{b+7}}+\\sqrt[3]{\\frac{b}{c+7}}+\\sqrt[3]{\\frac{c}{d+7}}+\\sqrt[3]{\\frac{d}{a+7}}\n$$\n\nwhere $a, b, c, d$ are nonnegative real numbers which satisfy $a+b+c+d=100$.\n\nThe final answer is $\\frac{8}{\\sqrt[3]{7}}$, reached when $(a, b, c, d)$ is a cyclic permutation of $(1,49,1,49)$.",
    "solucao": "Since the value $8 / \\sqrt[3]{7}$ is reached, it suffices to prove that $S \\leqslant 8 / \\sqrt[3]{7}$.\n\nAssume that $x, y, z, t$ is a permutation of the variables, with $x \\leqslant y \\leqslant z \\leqslant t$. Then, by the rearrangement inequality,\n\n$$\nS \\leqslant\\left(\\sqrt[3]{\\frac{x}{t+7}}+\\sqrt[3]{\\frac{t}{x+7}}\\right)+\\left(\\sqrt[3]{\\frac{y}{z+7}}+\\sqrt[3]{\\frac{z}{y+7}}\\right)\n$$\n\nClaim. The first bracket above does not exceed $\\sqrt[3]{\\frac{x+t+14}{7}}$.\n\nProof. Since\n\n$$\nX^{3}+Y^{3}+3 X Y Z-Z^{3}=\\frac{1}{2}(X+Y-Z)\\left((X-Y)^{2}+(X+Z)^{2}+(Y+Z)^{2}\\right),\n$$\n\nthe inequality $X+Y \\leqslant Z$ is equivalent (when $X, Y, Z \\geqslant 0$ ) to $X^{3}+Y^{3}+3 X Y Z \\leqslant Z^{3}$. Therefore, the claim is equivalent to\n\n$$\n\\frac{x}{t+7}+\\frac{t}{x+7}+3 \\sqrt[3]{\\frac{x t(x+t+14)}{7(x+7)(t+7)}} \\leqslant \\frac{x+t+14}{7} .\n$$\n\nNotice that\n\n$$\n\\begin{aligned}\n& 3 \\sqrt[3]{\\frac{x t(x+t+14)}{7(x+7)(t+7)}}=3 \\sqrt[3]{\\frac{t(x+7)}{7(t+7)} \\cdot \\frac{x(t+7)}{7(x+7)}} \\cdot \\frac{7(x+t+14)}{(t+7)(x+7)} \\\\\n& \\leqslant \\frac{t(x+7)}{7(t+7)}+\\frac{x(t+7)}{7(x+7)}+\\frac{7(x+t+14)}{(t+7)(x+7)}\n\\end{aligned}\n$$\n\nby the AM-GM inequality, so it suffices to prove\n\n$$\n\\frac{x}{t+7}+\\frac{t}{x+7}+\\frac{t(x+7)}{7(t+7)}+\\frac{x(t+7)}{7(x+7)}+\\frac{7(x+t+14)}{(t+7)(x+7)} \\leqslant \\frac{x+t+14}{7} .\n$$\n\nA straightforward check verifies that the last inequality is in fact an equality.\n\nThe claim leads now to\n\n$$\nS \\leqslant \\sqrt[3]{\\frac{x+t+14}{7}}+\\sqrt[3]{\\frac{y+z+14}{7}} \\leqslant 2 \\sqrt[3]{\\frac{x+y+z+t+28}{14}}=\\frac{8}{\\sqrt[3]{7}},\n$$\n\nthe last inequality being due to the AM-CM inequality (or to the fact that $\\sqrt[3]{\\text { is concave on }}$ $[0, \\infty))$."
  },
  {
    "id": "fimo_2018_number_theory_p1",
    "enunciado": "Determine all pairs $(n, k)$ of distinct positive integers such that there exists a positive integer $s$ for which the numbers of divisors of $s n$ and of $s k$ are equal.\n\nThe final answers are all pairs $(n, k)$ such that $n \\nmid k$ and $k \\nmid n$.",
    "solucao": "As usual, the number of divisors of a positive integer $n$ is denoted by $d(n)$. If $n=\\prod_{i} p_{i}^{\\alpha_{i}}$ is the prime factorisation of $n$, then $d(n)=\\prod_{i}\\left(\\alpha_{i}+1\\right)$.\n\nWe start by showing that one cannot find any suitable number $s$ if $k \\mid n$ or $n \\mid k$ (and $k \\neq n)$. Suppose that $n \\mid k$, and choose any positive integer $s$. Then the set of divisors of $s n$ is a proper subset of that of $s k$, hence $d(s n)<d(s k)$. Therefore, the pair $(n, k)$ does not satisfy the problem requirements. The case $k \\mid n$ is similar.\n\nNow assume that $n \\nmid k$ and $k \\nmid n$. Let $p_{1}, \\ldots, p_{t}$ be all primes dividing $n k$, and consider the prime factorisations\n\n$$\nn=\\prod_{i=1}^{t} p_{i}^{\\alpha_{i}} \\quad \\text { and } \\quad k=\\prod_{i=1}^{t} p_{i}^{\\beta_{i}} .\n$$\n\nIt is reasonable to search for the number $s$ having the form\n\n$$\ns=\\prod_{i=1}^{t} p_{i}^{\\gamma_{i}}\n$$\n\nThe (nonnegative integer) exponents $\\gamma_{i}$ should be chosen so as to satisfy\n\n$$\n\\frac{d(s n)}{d(s k)}=\\prod_{i=1}^{t} \\frac{\\alpha_{i}+\\gamma_{i}+1}{\\beta_{i}+\\gamma_{i}+1}=1 .\n$$\n\nFirst of all, if $\\alpha_{i}=\\beta_{i}$ for some $i$, then, regardless of the value of $\\gamma_{i}$, the corresponding factor in (1) equals 1 and does not affect the product. So we may assume that there is no such index $i$. For the other factors in (1), the following lemma is useful.\n\nLemma. Let $\\alpha>\\beta$ be nonnegative integers. Then, for every integer $M \\geqslant \\beta+1$, there exists a nonnegative integer $\\gamma$ such that\n\n$$\n\\frac{\\alpha+\\gamma+1}{\\beta+\\gamma+1}=1+\\frac{1}{M}=\\frac{M+1}{M}\n$$\n\nProof.\n\n$$\n\\frac{\\alpha+\\gamma+1}{\\beta+\\gamma+1}=1+\\frac{1}{M} \\Longleftrightarrow \\frac{\\alpha-\\beta}{\\beta+\\gamma+1}=\\frac{1}{M} \\Longleftrightarrow \\gamma=M(\\alpha-\\beta)-(\\beta+1) \\geqslant 0\n$$\n\nNow we can finish the solution. Without loss of generality, there exists an index $u$ such that $\\alpha_{i}>\\beta_{i}$ for $i=1,2, \\ldots, u$, and $\\alpha_{i}<\\beta_{i}$ for $i=u+1, \\ldots, t$. The conditions $n \\nmid k$ and $k \\nmid n$ mean that $1 \\leqslant u \\leqslant t-1$.\n\nChoose an integer $X$ greater than all the $\\alpha_{i}$ and $\\beta_{i}$. By the lemma, we can define the numbers $\\gamma_{i}$ so as to satisfy\n\n$$\n\\begin{array}{ll}\n\\frac{\\alpha_{i}+\\gamma_{i}+1}{\\beta_{i}+\\gamma_{i}+1}=\\frac{u X+i}{u X+i-1} & \\text { for } i=1,2, \\ldots, u, \\text { and } \\\\\n\\frac{\\beta_{u+i}+\\gamma_{u+i}+1}{\\alpha_{u+i}+\\gamma_{u+i}+1}=\\frac{(t-u) X+i}{(t-u) X+i-1} & \\text { for } i=1,2, \\ldots, t-u .\n\\end{array}\n$$\n\nThen we will have\n\n$$\n\\frac{d(s n)}{d(s k)}=\\prod_{i=1}^{u} \\frac{u X+i}{u X+i-1} \\cdot \\prod_{i=1}^{t-u} \\frac{(t-u) X+i-1}{(t-u) X+i}=\\frac{u(X+1)}{u X} \\cdot \\frac{(t-u) X}{(t-u)(X+1)}=1,\n$$\n\nas required."
  },
  {
    "id": "fimo_2018_number_theory_p2",
    "enunciado": "Let $n>1$ be a positive integer. Each cell of an $n \\times n$ table contains an integer. Suppose that the following conditions are satisfied:\n\n(i) Each number in the table is congruent to 1 modulo $n$;\n\n(ii) The sum of numbers in any row, as well as the sum of numbers in any column, is congruent to $n$ modulo $n^{2}$.\n\nLet $R_{i}$ be the product of the numbers in the $i^{\\text {th }}$ row, and $C_{j}$ be the product of the numbers in the $j^{\\text {th }}$ column. Prove that the sums $R_{1}+\\cdots+R_{n}$ and $C_{1}+\\cdots+C_{n}$ are congruent modulo $n^{4}$.",
    "solucao": "Let $A_{i, j}$ be the entry in the $i^{\\text {th }}$ row and the $j^{\\text {th }}$ column; let $P$ be the product of all $n^{2}$ entries. For convenience, denote $a_{i, j}=A_{i, j}-1$ and $r_{i}=R_{i}-1$. We show that\n\n$$\n\\sum_{i=1}^{n} R_{i} \\equiv(n-1)+P \\quad\\left(\\bmod n^{4}\\right)\n$$\n\nDue to symmetry of the problem conditions, the sum of all the $C_{j}$ is also congruent to $(n-1)+P$ modulo $n^{4}$, whence the conclusion.\n\nBy condition $(i)$, the number $n$ divides $a_{i, j}$ for all $i$ and $j$. So, every product of at least two of the $a_{i, j}$ is divisible by $n^{2}$, hence\n\n$R_{i}=\\prod_{j=1}^{n}\\left(1+a_{i, j}\\right)=1+\\sum_{j=1}^{n} a_{i, j}+\\sum_{1 \\leqslant j_{1}<j_{2} \\leqslant n} a_{i, j_{1}} a_{i, j_{2}}+\\cdots \\equiv 1+\\sum_{j=1}^{n} a_{i, j} \\equiv 1-n+\\sum_{j=1}^{n} A_{i, j} \\quad\\left(\\bmod n^{2}\\right)$\n\nfor every index $i$. Using condition $(i i)$, we obtain $R_{i} \\equiv 1\\left(\\bmod n^{2}\\right)$, and so $n^{2} \\mid r_{i}$.\n\nTherefore, every product of at least two of the $r_{i}$ is divisible by $n^{4}$. Repeating the same argument, we obtain\n\n$$\nP=\\prod_{i=1}^{n} R_{i}=\\prod_{i=1}^{n}\\left(1+r_{i}\\right) \\equiv 1+\\sum_{i=1}^{n} r_{i} \\quad\\left(\\bmod n^{4}\\right)\n$$\n\nwhence\n\n$$\n\\sum_{i=1}^{n} R_{i}=n+\\sum_{i=1}^{n} r_{i} \\equiv n+(P-1) \\quad\\left(\\bmod n^{4}\\right)\n$$\n\nas desired."
  },
  {
    "id": "fimo_2018_number_theory_p3",
    "enunciado": "Define the sequence $a_{0}, a_{1}, a_{2}, \\ldots$ by $a_{n}=2^{n}+2^{\\lfloor n / 2\\rfloor}$. Prove that there are infinitely many terms of the sequence which can be expressed as a sum of (two or more) distinct terms of the sequence, as well as infinitely many of those which cannot be expressed in such a way.",
    "solucao": "Call a nonnegative integer representable if it equals the sum of several (possibly 0 or 1 ) distinct terms of the sequence. We say that two nonnegative integers $b$ and $c$ are equivalent (written as $b \\sim c$ ) if they are either both representable or both non-representable.\n\nOne can easily compute\n\n$$\nS_{n-1}:=a_{0}+\\cdots+a_{n-1}=2^{n}+2^{\\lceil n / 2]}+2^{\\lfloor n / 2]}-3 .\n$$\n\nIndeed, we have $S_{n}-S_{n-1}=2^{n}+2^{\\lfloor n / 2\\rfloor}=a_{n}$ so we can use the induction. In particular, $S_{2 k-1}=2^{2 k}+2^{k+1}-3$\n\nNote that, if $n \\geqslant 3$, then $2^{[n / 2]} \\geqslant 2^{2}>3$, so\n\n$$\nS_{n-1}=2^{n}+2^{[n / 2]}+2^{\\lfloor n / 2\\rfloor}-3>2^{n}+2^{\\lfloor n / 2\\rfloor}=a_{n} .\n$$\n\nAlso notice that $S_{n-1}-a_{n}=2^{\\lceil n / 2]}-3<a_{n}$.\n\nThe main tool of the solution is the following claim.\n\nClaim 1. Assume that $b$ is a positive integer such that $S_{n-1}-a_{n}<b<a_{n}$ for some $n \\geqslant 3$. Then $b \\sim S_{n-1}-b$.\n\nProof. As seen above, we have $S_{n-1}>a_{n}$. Denote $c=S_{n-1}-b$; then $S_{n-1}-a_{n}<c<a_{n}$, so the roles of $b$ and $c$ are symmetrical.\n\nAssume that $b$ is representable. The representation cannot contain $a_{i}$ with $i \\geqslant n$, since $b<a_{n}$. So $b$ is the sum of some subset of $\\left\\{a_{0}, a_{1}, \\ldots, a_{n-1}\\right\\}$; then $c$ is the sum of the complement. The converse is obtained by swapping $b$ and $c$.\n\nWe also need the following version of this claim.\n\nClaim 2. For any $n \\geqslant 3$, the number $a_{n}$ can be represented as a sum of two or more distinct terms of the sequence if and only if $S_{n-1}-a_{n}=2^{[n / 2]}-3$ is representable.\n\nProof. Denote $c=S_{n-1}-a_{n}<a_{n}$. If $a_{n}$ satisfies the required condition, then it is the sum of some subset of $\\left\\{a_{0}, a_{1}, \\ldots, a_{n-1}\\right\\}$; then $c$ is the sum of the complement. Conversely, if $c$ is representable, then its representation consists only of the numbers from $\\left\\{a_{0}, \\ldots, a_{n-1}\\right\\}$, so $a_{n}$ is the sum of the complement.\n\nBy Claim 2, in order to prove the problem statement, it suffices to find infinitely many representable numbers of the form $2^{t}-3$, as well as infinitely many non-representable ones. Claim 3. For every $t \\geqslant 3$, we have $2^{t}-3 \\sim 2^{4 t-6}-3$, and $2^{4 t-6}-3>2^{t}-3$.\n\nProof. The inequality follows from $t \\geqslant 3$. In order to prove the equivalence, we apply Claim 1 twice in the following manner.\n\nFirst, since $S_{2 t-3}-a_{2 t-2}=2^{t-1}-3<2^{t}-3<2^{2 t-2}+2^{t-1}=a_{2 t-2}$, by Claim 1 we have $2^{t}-3 \\sim S_{2 t-3}-\\left(2^{t}-3\\right)=2^{2 t-2}$.\n\nSecond, since $S_{4 t-7}-a_{4 t-6}=2^{2 t-3}-3<2^{2 t-2}<2^{4 t-6}+2^{2 t-3}=a_{4 t-6}$, by Claim 1 we have $2^{2 t-2} \\sim S_{4 t-7}-2^{2 t-2}=2^{4 t-6}-3$.\n\nTherefore, $2^{t}-3 \\sim 2^{2 t-2} \\sim 2^{4 t-6}-3$, as required.\n\nNow it is easy to find the required numbers. Indeed, the number $2^{3}-3=5=a_{0}+a_{1}$ is representable, so Claim 3 provides an infinite sequence of representable numbers\n\n$$\n2^{3}-3 \\sim 2^{6}-3 \\sim 2^{18}-3 \\sim \\cdots \\sim 2^{t}-3 \\sim 2^{4 t-6}-3 \\sim \\cdots .\n$$\n\nOn the other hand, the number $2^{7}-3=125$ is non-representable (since by Claim 1 we have $125 \\sim S_{6}-125=24 \\sim S_{4}-24=17 \\sim S_{3}-17=4$ which is clearly non-representable). So Claim 3 provides an infinite sequence of non-representable numbers\n\n$$\n2^{7}-3 \\sim 2^{22}-3 \\sim 2^{82}-3 \\sim \\cdots \\sim 2^{t}-3 \\sim 2^{4 t-6}-3 \\sim \\cdots\n$$"
  },
  {
    "id": "fimo_2018_number_theory_p4",
    "enunciado": "Let $a_{1}, a_{2}, \\ldots, a_{n}, \\ldots$ be a sequence of positive integers such that\n\n$$\n\\frac{a_{1}}{a_{2}}+\\frac{a_{2}}{a_{3}}+\\cdots+\\frac{a_{n-1}}{a_{n}}+\\frac{a_{n}}{a_{1}}\n$$\n\nis an integer for all $n \\geqslant k$, where $k$ is some positive integer. Prove that there exists a positive integer $m$ such that $a_{n}=a_{n+1}$ for all $n \\geqslant m$.",
    "solucao": "The argument hinges on the following two facts: Let $a, b, c$ be positive integers such that $N=b / c+(c-b) / a$ is an integer.\n\n(1) If $\\operatorname{gcd}(a, c)=1$, then $c$ divides $b$; and\n\n(2) If $\\operatorname{gcd}(a, b, c)=1$, then $\\operatorname{gcd}(a, b)=1$.\n\nTo prove $(\\mathbf{1})$, write $a b=c(a N+b-c)$. Since $\\operatorname{gcd}(a, c)=1$, it follows that $c$ divides $b$. To prove $(2)$, write $c^{2}-b c=a(c N-b)$ to infer that $a$ divides $c^{2}-b c$. Letting $d=\\operatorname{gcd}(a, b)$, it follows that $d$ divides $c^{2}$, and since the two are relatively prime by hypothesis, $d=1$.\n\nNow, let $s_{n}=a_{1} / a_{2}+a_{2} / a_{3}+\\cdots+a_{n-1} / a_{n}+a_{n} / a_{1}$, let $\\delta_{n}=\\operatorname{gcd}\\left(a_{1}, a_{n}, a_{n+1}\\right)$ and write\n\n$$\ns_{n+1}-s_{n}=\\frac{a_{n}}{a_{n+1}}+\\frac{a_{n+1}-a_{n}}{a_{1}}=\\frac{a_{n} / \\delta_{n}}{a_{n+1} / \\delta_{n}}+\\frac{a_{n+1} / \\delta_{n}-a_{n} / \\delta_{n}}{a_{1} / \\delta_{n}} .\n$$\n\nLet $n \\geqslant k$. Since $\\operatorname{gcd}\\left(a_{1} / \\delta_{n}, a_{n} / \\delta_{n}, a_{n+1} / \\delta_{n}\\right)=1$, it follows by (2) that $\\operatorname{gcd}\\left(a_{1} / \\delta_{n}, a_{n} / \\delta_{n}\\right)=1$. Let $d_{n}=\\operatorname{gcd}\\left(a_{1}, a_{n}\\right)$. Then $d_{n}=\\delta_{n} \\cdot \\operatorname{gcd}\\left(a_{1} / \\delta_{n}, a_{n} / \\delta_{n}\\right)=\\delta_{n}$, so $d_{n}$ divides $a_{n+1}$, and therefore $d_{n}$ divides $d_{n+1}$.\n\nConsequently, from some rank on, the $d_{n}$ form a nondecreasing sequence of integers not exceeding $a_{1}$, so $d_{n}=d$ for all $n \\geqslant \\ell$, where $\\ell$ is some positive integer.\n\nFinally, since $\\operatorname{gcd}\\left(a_{1} / d, a_{n+1} / d\\right)=1$, it follows by (1) that $a_{n+1} / d$ divides $a_{n} / d$, so $a_{n} \\geqslant a_{n+1}$ for all $n \\geqslant \\ell$. The conclusion follows."
  },
  {
    "id": "fimo_2018_number_theory_p5",
    "enunciado": "Four positive integers $x, y, z$, and $t$ satisfy the relations\n\n$$\nx y-z t=x+y=z+t\n$$\n\nIs it possible that both $x y$ and $z t$ are perfect squares?\n\nThe final answer is no.",
    "solucao": "Arguing indirectly, assume that $x y=a^{2}$ and $z t=c^{2}$ with $a, c>0$.\n\nSuppose that the number $x+y=z+t$ is odd. Then $x$ and $y$ have opposite parity, as well as $z$ and $t$. This means that both $x y$ and $z t$ are even, as well as $x y-z t=x+y$; a contradiction. Thus, $x+y$ is even, so the number $s=\\frac{x+y}{2}=\\frac{z+t}{2}$ is a positive integer.\n\nNext, we set $b=\\frac{|x-y|}{2}, d=\\frac{|z-t|}{2}$. Now the problem conditions yield\n\n$$\ns^{2}=a^{2}+b^{2}=c^{2}+d^{2}\n$$\n\nand\n\n$$\n2 s=a^{2}-c^{2}=d^{2}-b^{2}\n$$\n\n(the last equality in (2) follows from (1)). We readily get from (2) that $a, d>0$.\n\nIn the sequel we will use only the relations (1) and (2), along with the fact that $a, d, s$ are positive integers, while $b$ and $c$ are nonnegative integers, at most one of which may be zero. Since both relations are symmetric with respect to the simultaneous swappings $a \\leftrightarrow d$ and $b \\leftrightarrow c$, we assume, without loss of generality, that $b \\geqslant c$ (and hence $b>0$ ). Therefore, $d^{2}=2 s+b^{2}>c^{2}$, whence\n\n$$\nd^{2}>\\frac{c^{2}+d^{2}}{2}=\\frac{s^{2}}{2}\n$$\n\nOn the other hand, since $d^{2}-b^{2}$ is even by (2), the numbers $b$ and $d$ have the same parity, so $0<b \\leqslant d-2$. Therefore,\n\n$$\n2 s=d^{2}-b^{2} \\geqslant d^{2}-(d-2)^{2}=4(d-1), \\quad \\text { i.e., } \\quad d \\leqslant \\frac{s}{2}+1\n$$\n\nCombining (3) and (4) we obtain\n\n$$\n2 s^{2}<4 d^{2} \\leqslant 4\\left(\\frac{s}{2}+1\\right)^{2}, \\quad \\text { or } \\quad(s-2)^{2}<8\n$$\n\nwhich yields $s \\leqslant 4$.\n\nFinally, an easy check shows that each number of the form $s^{2}$ with $1 \\leqslant s \\leqslant 4$ has a unique representation as a sum of two squares, namely $s^{2}=s^{2}+0^{2}$. Thus, (1) along with $a, d>0$ imply $b=c=0$, which is impossible."
  },
  {
    "id": "fimo_2018_number_theory_p6",
    "enunciado": "Let $f:\\{1,2,3, \\ldots\\} \\rightarrow\\{2,3, \\ldots\\}$ be a function such that $f(m+n) \\mid f(m)+f(n)$ for all pairs $m, n$ of positive integers. Prove that there exists a positive integer $c>1$ which divides all values of $f$.",
    "solucao": "For every positive integer $m$, define $S_{m}=\\{n: m \\mid f(n)\\}$.\n\nLemma. If the set $S_{m}$ is infinite, then $S_{m}=\\{d, 2 d, 3 d, \\ldots\\}=d \\cdot \\mathbb{Z}_{>0}$ for some positive integer $d$.\n\nProof. Let $d=\\min S_{m}$; the definition of $S_{m}$ yields $m \\mid f(d)$.\n\nWhenever $n \\in S_{m}$ and $n>d$, we have $m|f(n)| f(n-d)+f(d)$, so $m \\mid f(n-d)$ and therefore $n-d \\in S_{m}$. Let $r \\leqslant d$ be the least positive integer with $n \\equiv r(\\bmod d)$; repeating the same step, we can see that $n-d, n-2 d, \\ldots, r \\in S_{m}$. By the minimality of $d$, this shows $r=d$ and therefore $d \\mid n$.\n\nStarting from an arbitrarily large element of $S_{m}$, the process above reaches all multiples of $d$; so they all are elements of $S_{m}$.\n\nThe solution for the problem will be split into two cases.\n\nCase 1: The function $f$ is bounded.\n\nCall a prime $p$ frequent if the set $S_{p}$ is infinite, i.e., if $p$ divides $f(n)$ for infinitely many positive integers $n$; otherwise call $p$ sporadic. Since the function $f$ is bounded, there are only a finite number of primes that divide at least one $f(n)$; so altogether there are finitely many numbers $n$ such that $f(n)$ has a sporadic prime divisor. Let $N$ be a positive integer, greater than all those numbers $n$.\n\nLet $p_{1}, \\ldots, p_{k}$ be the frequent primes. By the lemma we have $S_{p_{i}}=d_{i} \\cdot \\mathbb{Z}_{>0}$ for some $d_{i}$. Consider the number\n\n$$\nn=N d_{1} d_{2} \\cdots d_{k}+1\n$$\n\nDue to $n>N$, all prime divisors of $f(n)$ are frequent primes. Let $p_{i}$ be any frequent prime divisor of $f(n)$. Then $n \\in S_{p_{i}}$, and therefore $d_{i} \\mid n$. But $n \\equiv 1\\left(\\bmod d_{i}\\right)$, which means $d_{i}=1$. Hence $S_{p_{i}}=1 \\cdot \\mathbb{Z}_{>0}=\\mathbb{Z}_{>0}$ and therefore $p_{i}$ is a common divisor of all values $f(n)$.\n\nCase 2: $f$ is unbounded.\n\nWe prove that $f(1)$ divides all $f(n)$.\n\nLet $a=f(1)$. Since $1 \\in S_{a}$, by the lemma it suffices to prove that $S_{a}$ is an infinite set.\n\nCall a positive integer $p$ a peak if $f(p)>\\max (f(1), \\ldots, f(p-1))$. Since $f$ is not bounded, there are infinitely many peaks. Let $1=p_{1}<p_{2}<\\ldots$ be the sequence of all peaks, and let $h_{k}=f\\left(p_{k}\\right)$. Notice that for any peak $p_{i}$ and for any $k<p_{i}$, we have $f\\left(p_{i}\\right) \\mid f(k)+f\\left(p_{i}-k\\right)<$ $2 f\\left(p_{i}\\right)$, hence\n\n$$\nf(k)+f\\left(p_{i}-k\\right)=f\\left(p_{i}\\right)=h_{i}\n$$\n\nBy the pigeonhole principle, among the numbers $h_{1}, h_{2}, \\ldots$ there are infinitely many that are congruent modulo $a$. Let $k_{0}<k_{1}<k_{2}<\\ldots$ be an infinite sequence of positive integers such that $h_{k_{0}} \\equiv h_{k_{1}} \\equiv \\ldots(\\bmod a)$. Notice that\n\n$$\nf\\left(p_{k_{i}}-p_{k_{0}}\\right)=f\\left(p_{k_{i}}\\right)-f\\left(p_{k_{0}}\\right)=h_{k_{i}}-h_{k_{0}} \\equiv 0 \\quad(\\bmod a)\n$$\n\nso $p_{k_{i}}-p_{k_{0}} \\in S_{a}$ for all $i=1,2, \\ldots$ This provides infinitely many elements in $S_{a}$.\n\nHence, $S_{a}$ is an infinite set, and therefore $f(1)=a$ divides $f(n)$ for every $n$."
  },
  {
    "id": "fimo_2018_number_theory_p7",
    "enunciado": "Let $n \\geqslant 2018$ be an integer, and let $a_{1}, a_{2}, \\ldots, a_{n}, b_{1}, b_{2}, \\ldots, b_{n}$ be pairwise distinct positive integers not exceeding $5 n$. Suppose that the sequence\n\n$$\n\\frac{a_{1}}{b_{1}}, \\frac{a_{2}}{b_{2}}, \\ldots, \\frac{a_{n}}{b_{n}}\n$$\n\nforms an arithmetic progression. Prove that the terms of the sequence are equal.",
    "solucao": "Suppose that (1) is an arithmetic progression with nonzero difference. Let the difference be $\\Delta=\\frac{c}{d}$, where $d>0$ and $c, d$ are coprime.\n\nWe will show that too many denominators $b_{i}$ should be divisible by $d$. To this end, for any $1 \\leqslant i \\leqslant n$ and any prime divisor $p$ of $d$, say that the index $i$ is $p$-wrong, if $v_{p}\\left(b_{i}\\right)<v_{p}(d) .\\left(v_{p}(x)\\right.$ stands for the exponent of $p$ in the prime factorisation of $x$.)\n\nClaim 1. For any prime $p$, all $p$-wrong indices are congruent modulo $p$. In other words, the $p$-wrong indices (if they exist) are included in an arithmetic progression with difference $p$.\n\nProof. Let $\\alpha=v_{p}(d)$. For the sake of contradiction, suppose that $i$ and $j$ are $p$-wrong indices (i.e., none of $b_{i}$ and $b_{j}$ is divisible by $\\left.p^{\\alpha}\\right)$ such that $i \\not \\equiv j(\\bmod p)$. Then the least common denominator of $\\frac{a_{i}}{b_{i}}$ and $\\frac{a_{j}}{b_{j}}$ is not divisible by $p^{\\alpha}$. But this is impossible because in their difference, $(i-j) \\Delta=\\frac{(i-j) c}{d}$, the numerator is coprime to $p$, but $p^{\\alpha}$ divides the denominator $d$.\n\nClaim 2. $d$ has no prime divisors greater than 5.\n\nProof. Suppose that $p \\geqslant 7$ is a prime divisor of $d$. Among the indices $1,2, \\ldots, n$, at most $\\left\\lceil\\frac{n}{p}\\right\\rceil<\\frac{n}{p}+1$ are $p$-wrong, so $p$ divides at least $\\frac{p-1}{p} n-1$ of $b_{1}, \\ldots, b_{n}$. Since these denominators are distinct,\n\n$$\n5 n \\geqslant \\max \\left\\{b_{i}: p \\mid b_{i}\\right\\} \\geqslant\\left(\\frac{p-1}{p} n-1\\right) p=(p-1)(n-1)-1 \\geqslant 6(n-1)-1>5 n,\n$$\n\na contradiction.\n\nClaim 3. For every $0 \\leqslant k \\leqslant n-30$, among the denominators $b_{k+1}, b_{k+2}, \\ldots, b_{k+30}$, at least $\\varphi(30)=8$ are divisible by $d$.\n\nProof. By Claim 1, the 2-wrong, 3-wrong and 5-wrong indices can be covered by three arithmetic progressions with differences 2,3 and 5 . By a simple inclusion-exclusion, $(2-1) \\cdot(3-1) \\cdot(5-1)=8$ indices are not covered; by Claim 2, we have $d \\mid b_{i}$ for every uncovered index $i$.\n\nClaim 4. $|\\Delta|<\\frac{20}{n-2}$ and $d>\\frac{n-2}{20}$.\n\nProof. From the sequence (1), remove all fractions with $b_{n}<\\frac{n}{2}$, There remain at least $\\frac{n}{2}$ fractions, and they cannot exceed $\\frac{5 n}{n / 2}=10$. So we have at least $\\frac{n}{2}$ elements of the arithmetic progression (1) in the interval $(0,10]$, hence the difference must be below $\\frac{10}{n / 2-1}=\\frac{20}{n-2}$.\n\nThe second inequality follows from $\\frac{1}{d} \\leqslant \\frac{|c|}{d}=|\\Delta|$.\n\nNow we have everything to get the final contradiction. By Claim 3, we have $d \\mid b_{i}$ for at least $\\left\\lfloor\\frac{n}{30}\\right\\rfloor \\cdot 8$ indices $i$. By Claim 4, we have $d \\geqslant \\frac{n-2}{20}$. Therefore,\n\n$$\n5 n \\geqslant \\max \\left\\{b_{i}: d \\mid b_{i}\\right\\} \\geqslant\\left(\\left\\lfloor\\frac{n}{30}\\right\\rfloor \\cdot 8\\right) \\cdot d>\\left(\\frac{n}{30}-1\\right) \\cdot 8 \\cdot \\frac{n-2}{20}>5 n .\n$$"
  },
  {
    "id": "fimo_2019_algebra_p1",
    "enunciado": "Let $\\mathbb{Z}$ be the set of integers. Determine all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that, for all integers $a$ and $b$\n\n$$\nf(2 a)+2 f(b)=f(f(a+b))\n$$\n\nThe final answers are $f(n)=0$ and $f(n)=2 n+K$ for any constant $K \\in \\mathbb{Z}$.",
    "solucao": "Most solutions to this problem first prove that $f$ must be linear, before determining all linear functions satisfying (1).\n\nSubstituting $a=0, b=n+1$ gives $f(f(n+1))=f(0)+2 f(n+1)$. Substituting $a=1, b=n$ gives $f(f(n+1))=f(2)+2 f(n)$.\n\nIn particular, $f(0)+2 f(n+1)=f(2)+2 f(n)$, and so $f(n+1)-f(n)=\\frac{1}{2}(f(2)-f(0))$. Thus $f(n+1)-f(n)$ must be constant. Since $f$ is defined only on $\\mathbb{Z}$, this tells us that $f$ must be a linear function; write $f(n)=M n+K$ for arbitrary constants $M$ and $K$, and we need only determine which choices of $M$ and $K$ work.\n\nNow, (1) becomes\n\n$$\n2 M a+K+2(M b+K)=M(M(a+b)+K)+K\n$$\n\nwhich we may rearrange to form\n\n$$\n(M-2)(M(a+b)+K)=0 .\n$$\n\nThus, either $M=2$, or $M(a+b)+K=0$ for all values of $a+b$. In particular, the only possible solutions are $f(n)=0$ and $f(n)=2 n+K$ for any constant $K \\in \\mathbb{Z}$, and these are easily seen to work."
  },
  {
    "id": "fimo_2019_algebra_p2",
    "enunciado": "Let $u_{1}, u_{2}, \\ldots, u_{2019}$ be real numbers satisfying\n\n$$\nu_{1}+u_{2}+\\cdots+u_{2019}=0 \\text { and } u_{1}^{2}+u_{2}^{2}+\\cdots+u_{2019}^{2}=1 .\n$$\n\nLet $a=\\min \\left(u_{1}, u_{2}, \\ldots, u_{2019}\\right)$ and $b=\\max \\left(u_{1}, u_{2}, \\ldots, u_{2019}\\right)$. Prove that\n\n$$\na b \\leqslant-\\frac{1}{2019} .\n$$",
    "solucao": "Notice first that $b>0$ and $a<0$. Indeed, since $\\sum_{i=1}^{2019} u_{i}^{2}=1$, the variables $u_{i}$ cannot be all zero, and, since $\\sum_{i=1}^{2019} u_{i}=0$, the nonzero elements cannot be all positive or all negative.\n\nLet $P=\\left\\{i: u_{i}>0\\right\\}$ and $N=\\left\\{i: u_{i} \\leqslant 0\\right\\}$ be the indices of positive and nonpositive elements in the sequence, and let $p=|P|$ and $n=|N|$ be the sizes of these sets; then $p+n=2019$. By the condition $\\sum_{i=1}^{2019} u_{i}=0$ we have $0=\\sum_{i=1}^{2019} u_{i}=\\sum_{i \\in P} u_{i}-\\sum_{i \\in N}\\left|u_{i}\\right|$, so\n\n$$\n\\sum_{i \\in P} u_{i}=\\sum_{i \\in N}\\left|u_{i}\\right|\n$$\n\nAfter this preparation, estimate the sum of squares of the positive and nonpositive elements as follows:\n\n$$\n\\begin{aligned}\n& \\sum_{i \\in P} u_{i}^{2} \\leqslant \\sum_{i \\in P} b u_{i}=b \\sum_{i \\in P} u_{i}=b \\sum_{i \\in N}\\left|u_{i}\\right| \\leqslant b \\sum_{i \\in N}|a|=-n a b ; \\\\\n& \\sum_{i \\in N} u_{i}^{2} \\leqslant \\sum_{i \\in N}|a| \\cdot\\left|u_{i}\\right|=|a| \\sum_{i \\in N}\\left|u_{i}\\right|=|a| \\sum_{i \\in P} u_{i} \\leqslant|a| \\sum_{i \\in P} b=-p a b .\n\\end{aligned}\n$$\n\nThe sum of these estimates is\n\n$$\n1=\\sum_{i=1}^{2019} u_{i}^{2}=\\sum_{i \\in P} u_{i}^{2}+\\sum_{i \\in N} u_{i}^{2} \\leqslant-(p+n) a b=-2019 a b \\text {; }\n$$\n\nthat proves $a b \\leqslant \\frac{-1}{2019}$."
  },
  {
    "id": "fimo_2019_algebra_p3",
    "enunciado": "Let $n \\geqslant 3$ be a positive integer and let $\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)$ be a strictly increasing sequence of $n$ positive real numbers with sum equal to 2. Let $X$ be a subset of $\\{1,2, \\ldots, n\\}$ such that the value of\n\n$$\n\\left|1-\\sum_{i \\in X} a_{i}\\right|\n$$\n\nis minimised. Prove that there exists a strictly increasing sequence of $n$ positive real numbers $\\left(b_{1}, b_{2}, \\ldots, b_{n}\\right)$ with sum equal to 2 such that\n\n$$\n\\sum_{i \\in X} b_{i}=1\n$$",
    "solucao": "In all solutions, we say an index set $X$ is $\\left(a_{i}\\right)$-minimising if it has the property in the problem for the given sequence $\\left(a_{i}\\right)$. Write $X^{c}$ for the complement of $X$, and $[a, b]$ for the interval of integers $k$ such that $a \\leqslant k \\leqslant b$. Note that\n\n$$\n\\left|1-\\sum_{i \\in X} a_{i}\\right|=\\left|1-\\sum_{i \\in X^{c}} a_{i}\\right|,\n$$\n\nso we may exchange $X$ and $X^{c}$ where convenient. Let\n\n$$\n\\Delta=\\sum_{i \\in X^{c}} a_{i}-\\sum_{i \\in X} a_{i}\n$$\n\nand note that $X$ is $\\left(a_{i}\\right)$-minimising if and only if it minimises $|\\Delta|$, and that $\\sum_{i \\in X} a_{i}=1$ if and only if $\\Delta=0$.\n\nIn some solutions, a scaling process is used. If we have a strictly increasing sequence of positive real numbers $c_{i}$ (typically obtained by perturbing the $a_{i}$ in some way) such that\n\n$$\n\\sum_{i \\in X} c_{i}=\\sum_{i \\in X^{c}} c_{i}\n$$\n\nthen we may put $b_{i}=2 c_{i} / \\sum_{j=1}^{n} c_{j}$. So it suffices to construct such a sequence without needing its sum to be 2 .\n\nThe solutions below show various possible approaches to the problem. Solutions 1 and 2 perturb a few of the $a_{i}$ to form the $b_{i}$ (with scaling in the case of Solution 1 , without scaling in the case of Solution 2). Solutions 3 and 4 look at properties of the index set $X$. Solution 3 then perturbs many of the $a_{i}$ to form the $b_{i}$, together with scaling. Rather than using such perturbations, Solution 4 constructs a sequence $\\left(b_{i}\\right)$ directly from the set $X$ with the required properties. Solution 4 can be used to give a complete description of sets $X$ that are $\\left(a_{i}\\right)$-minimising for some $\\left(a_{i}\\right)$.\n\nWithout loss of generality, assume $\\sum_{i \\in X} a_{i} \\leqslant 1$, and we may assume strict inequality as otherwise $b_{i}=a_{i}$ works. Also, $X$ clearly cannot be empty.\n\nIf $n \\in X$, add $\\Delta$ to $a_{n}$, producing a sequence of $c_{i}$ with $\\sum_{i \\in X} c_{i}=\\sum_{i \\in X^{c}} c_{i}$, and then scale as described above to make the sum equal to 2. Otherwise, there is some $k$ with $k \\in X$ and $k+1 \\in X^{c}$. Let $\\delta=a_{k+1}-a_{k}$.\n\n\\begin{itemize}\n  \\item If $\\delta>\\Delta$, add $\\Delta$ to $a_{k}$ and then scale.\n\n  \\item If $\\delta<\\Delta$, then considering $X \\cup\\{k+1\\} \\backslash\\{k\\}$ contradicts $X$ being $\\left(a_{i}\\right)$-minimising.\n\n  \\item If $\\delta=\\Delta$, choose any $j \\neq k, k+1$ (possible since $n \\geqslant 3$ ), and any $\\epsilon$ less than the least of $a_{1}$ and all the differences $a_{i+1}-a_{i}$. If $j \\in X$ then add $\\Delta-\\epsilon$ to $a_{k}$ and $\\epsilon$ to $a_{j}$, then scale; otherwise, add $\\Delta$ to $a_{k}$ and $\\epsilon / 2$ to $a_{k+1}$, and subtract $\\epsilon / 2$ from $a_{j}$, then scale.\n\n\\end{itemize}\n"
  },
  {
    "id": "fimo_2019_algebra_p4",
    "enunciado": "Let $n \\geqslant 2$ be a positive integer and $a_{1}, a_{2}, \\ldots, a_{n}$ be real numbers such that\n\n$$\na_{1}+a_{2}+\\cdots+a_{n}=0\n$$\n\nDefine the set $A$ by\n\n$$\nA=\\left\\{(i, j)|1 \\leqslant i<j \\leqslant n,| a_{i}-a_{j} \\mid \\geqslant 1\\right\\}\n$$\n\nProve that, if $A$ is not empty, then\n\n$$\n\\sum_{(i, j) \\in A} a_{i} a_{j}<0\n$$",
    "solucao": "Define sets $B$ and $C$ by\n\n$$\n\\begin{aligned}\n& B=\\left\\{(i, j)|1 \\leqslant i, j \\leqslant n,| a_{i}-a_{j} \\mid \\geqslant 1\\right\\}, \\\\\n& C=\\left\\{(i, j)|1 \\leqslant i, j \\leqslant n,| a_{i}-a_{j} \\mid<1\\right\\} .\n\\end{aligned}\n$$\n\nWe have\n\n$$\n\\begin{aligned}\n\\sum_{(i, j) \\in A} a_{i} a_{j} & =\\frac{1}{2} \\sum_{(i, j) \\in B} a_{i} a_{j} \\\\\n\\sum_{(i, j) \\in B} a_{i} a_{j} & =\\sum_{1 \\leqslant i, j \\leqslant n} a_{i} a_{j}-\\sum_{(i, j) \\notin B} a_{i} a_{j}=0-\\sum_{(i, j) \\in C} a_{i} a_{j} .\n\\end{aligned}\n$$\n\nSo it suffices to show that if $A$ (and hence $B$ ) are nonempty, then\n\n$$\n\\sum_{(i, j) \\in C} a_{i} a_{j}>0\n$$\n\nPartition the indices into sets $P, Q, R$, and $S$ such that\n\n$$\n\\begin{array}{ll}\nP=\\left\\{i \\mid a_{i} \\leqslant-1\\right\\} & R=\\left\\{i \\mid 0<a_{i}<1\\right\\} \\\\\nQ=\\left\\{i \\mid-1<a_{i} \\leqslant 0\\right\\} & S=\\left\\{i \\mid 1 \\leqslant a_{i}\\right\\} .\n\\end{array}\n$$\n\nThen\n\n$$\n\\sum_{(i, j) \\in C} a_{i} a_{j} \\geqslant \\sum_{i \\in P \\cup S} a_{i}^{2}+\\sum_{i, j \\in Q \\cup R} a_{i} a_{j}=\\sum_{i \\in P \\cup S} a_{i}^{2}+\\left(\\sum_{i \\in Q \\cup R} a_{i}\\right)^{2} \\geqslant 0 .\n$$\n\nThe first inequality holds because all of the positive terms in the RHS are also in the LHS, and all of the negative terms in the LHS are also in the RHS. The first inequality attains equality only if both sides have the same negative terms, which implies $\\left|a_{i}-a_{j}\\right|<1$ whenever $i, j \\in Q \\cup R$; the second inequality attains equality only if $P=S=\\varnothing$. But then we would have $A=\\varnothing$. So $A$ nonempty implies that the inequality holds strictly, as required."
  },
  {
    "id": "fimo_2019_algebra_p5",
    "enunciado": "Let $x_{1}, x_{2}, \\ldots, x_{n}$ be different real numbers. Prove that\n\n$$\n\\sum_{1 \\leqslant i \\leqslant n} \\prod_{j \\neq i} \\frac{1-x_{i} x_{j}}{x_{i}-x_{j}}= \\begin{cases}0, & \\text { if } n \\text { is even } \\\\ 1, & \\text { if } n \\text { is odd }\\end{cases}\n$$",
    "solucao": "Let $G\\left(x_{1}, x_{2}, \\ldots, x_{n}\\right)$ be the function of the $n$ variables $x_{1}, x_{2}, \\ldots, x_{n}$ on the LHS of the required identity.\n\nSince both sides of the identity are rational functions, it suffices to prove it when all $x_{i} \\notin\\{\\pm 1\\}$. Define\n\n$$\nf(t)=\\prod_{i=1}^{n}\\left(1-x_{i} t\\right)\n$$\n\nand note that\n\n$$\nf\\left(x_{i}\\right)=\\left(1-x_{i}^{2}\\right) \\prod_{j \\neq i} 1-x_{i} x_{j}\n$$\n\nUsing the nodes $+1,-1, x_{1}, \\ldots, x_{n}$, the Lagrange interpolation formula gives us the following expression for $f$ :\n\n$$\n\\sum_{i=1}^{n} f\\left(x_{i}\\right) \\frac{(x-1)(x+1)}{\\left(x_{i}-1\\right)\\left(x_{i}+1\\right)} \\prod_{j \\neq i} \\frac{x-x_{j}}{x_{i}-x_{j}}+f(1) \\frac{x+1}{1+1} \\prod_{1 \\leqslant i \\leqslant n} \\frac{x-x_{i}}{1-x_{i}}+f(-1) \\frac{x-1}{-1-1} \\prod_{1 \\leqslant i \\leqslant n} \\frac{x-x_{i}}{1-x_{i}} .\n$$\n\nThe coefficient of $t^{n+1}$ in $f(t)$ is 0 , since $f$ has degree $n$. The coefficient of $t^{n+1}$ in the above expression of $f$ is\n\n$$\n\\begin{aligned}\n0 & =\\sum_{1 \\leqslant i \\leqslant n} \\frac{f\\left(x_{i}\\right)}{\\prod_{j \\neq i}\\left(x_{i}-x_{j}\\right) \\cdot\\left(x_{i}-1\\right)\\left(x_{i}+1\\right)}+\\frac{f(1)}{\\prod_{1 \\leqslant j \\leqslant n}\\left(1-x_{j}\\right) \\cdot(1+1)}+\\frac{f(-1)}{\\prod_{1 \\leqslant j \\leqslant n}\\left(-1-x_{j}\\right) \\cdot(-1-1)} \\\\\n& =-G\\left(x_{1}, \\ldots, x_{n}\\right)+\\frac{1}{2}+\\frac{(-1)^{n+1}}{2} .\n\\end{aligned}\n$$"
  },
  {
    "id": "fimo_2019_algebra_p6",
    "enunciado": "A polynomial $P(x, y, z)$ in three variables with real coefficients satisfies the identities\n\n$$\nP(x, y, z)=P(x, y, x y-z)=P(x, z x-y, z)=P(y z-x, y, z) .\n$$\n\nProve that there exists a polynomial $F(t)$ in one variable such that\n\n$$\nP(x, y, z)=F\\left(x^{2}+y^{2}+z^{2}-x y z\\right)\n$$",
    "solucao": "The polynomial $x^{2}+y^{2}+z^{2}-x y z$ satisfies the condition $(*)$, so every polynomial of the form $F\\left(x^{2}+y^{2}+z^{2}-x y z\\right)$ does satisfy $(*)$. We will use without comment the fact that two polynomials have the same coefficients if and only if they are equal as functions.\n\nIn the first two steps, we deal with any polynomial $P(x, y, z)$ satisfying $P(x, y, z)=$ $P(x, y, x y-z)$. Call such a polynomial weakly symmetric, and call a polynomial satisfying the full conditions in the problem symmetric.\n\nStep 1. We start with the description of weakly symmetric polynomials. We claim that they are exactly the polynomials in $x, y$, and $z(x y-z)$. Clearly, all such polynomials are weakly symmetric. For the converse statement, consider $P_{1}(x, y, z):=P\\left(x, y, z+\\frac{1}{2} x y\\right)$, which satisfies $P_{1}(x, y, z)=P_{1}(x, y,-z)$ and is therefore a polynomial in $x, y$, and $z^{2}$. This means that $P$ is a polynomial in $x, y$, and $\\left(z-\\frac{1}{2} x y\\right)^{2}=-z(x y-z)+\\frac{1}{4} x^{2} y^{2}$, and therefore a polynomial in $x, y$, and $z(x y-z)$.\n\nStep 2. Suppose that $P$ is weakly symmetric. Consider the monomials in $P(x, y, z)$ of highest total degree. Our aim is to show that in each such monomial $\\mu x^{a} y^{b} z^{c}$ we have $a, b \\geqslant c$. Consider the expansion\n\n$$\nP(x, y, z)=\\sum_{i, j, k} \\mu_{i j k} x^{i} y^{j}(z(x y-z))^{k} .\n$$\n\nThe maximal total degree of a summand in (1.1) is $m=\\max _{i, j, k: \\mu_{i j k} \\neq 0}(i+j+3 k)$. Now, for any $i, j, k$ satisfying $i+j+3 k=m$ the summand $\\mu_{i, j, k} x^{i} y^{j}(z(x y-z))^{k}$ has leading term of the form $\\mu x^{i+k} y^{j+k} z^{k}$. No other nonzero summand in (1.1) may have a term of this form in its expansion, hence this term does not cancel in the whole sum. Therefore, $\\operatorname{deg} P=m$, and the leading component of $P$ is exactly\n\n$$\n\\sum_{i+j+3 k=m} \\mu_{i, j, k} x^{i+k} y^{j+k} z^{k}\n$$\n\nand each summand in this sum satisfies the condition claimed above.\n\nStep 3. We now prove the problem statement by induction on $m=\\operatorname{deg} P$. For $m=0$ the claim is trivial. Consider now a symmetric polynomial $P$ with $\\operatorname{deg} P>0$. By Step 2, each of its monomials $\\mu x^{a} y^{b} z^{c}$ of the highest total degree satisfies $a, b \\geqslant c$. Applying other weak symmetries, we obtain $a, c \\geqslant b$ and $b, c \\geqslant a$; therefore, $P$ has a unique leading monomial of the form $\\mu(x y z)^{c}$. The polynomial $P_{0}(x, y, z)=P(x, y, z)-\\mu\\left(x y z-x^{2}-y^{2}-z^{2}\\right)^{c}$ has smaller total degree. Since $P_{0}$ is symmetric, it is representable as a polynomial function of $x y z-x^{2}-y^{2}-z^{2}$. Then $P$ is also of this form, completing the inductive step."
  },
  {
    "id": "fimo_2019_algebra_p7_1",
    "enunciado": "Let $\\mathbb{Z}$ be the set of integers. We consider functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ satisfying\n\n$$\nf(f(x+y)+y)=f(f(x)+y)\n$$\n\nfor all integers $x$ and $y$. For such a function, we say that an integer $v$ is $f$-rare if the set\n\n$$\nX_{v}=\\{x \\in \\mathbb{Z}: f(x)=v\\}\n$$\n\nis finite and nonempty.\n\nProve that there exists such a function $f$ for which there is an $f$-rare integer.",
    "solucao": "Let $f$ be the function where $f(0)=0$ and $f(x)$ is the largest power of 2 dividing $2 x$ for $x \\neq 0$. The integer 0 is evidently $f$-rare, so it remains to verify the functional equation.\n\nSince $f(2 x)=2 f(x)$ for all $x$, it suffices to verify the functional equation when at least one of $x$ and $y$ is odd (the case $x=y=0$ being trivial). If $y$ is odd, then we have\n\n$$\nf(f(x+y)+y)=2=f(f(x)+y)\n$$\n\nsince all the values attained by $f$ are even. If, on the other hand, $x$ is odd and $y$ is even, then we already have\n\n$$\nf(x+y)=2=f(x)\n$$\n\nfrom which the functional equation follows immediately."
  },
  {
    "id": "fimo_2019_algebra_p7_2",
    "enunciado": "Let $\\mathbb{Z}$ be the set of integers. We consider functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ satisfying\n\n$$\nf(f(x+y)+y)=f(f(x)+y)\n$$\n\nfor all integers $x$ and $y$. For such a function, we say that an integer $v$ is $f$-rare if the set\n\n$$\nX_{v}=\\{x \\in \\mathbb{Z}: f(x)=v\\}\n$$\n\nis finite and nonempty.\n\nProve that no such function $f$ can have more than one $f$-rare integer.",
    "solucao": "An easy inductive argument (substituting $x+k y$ for $x)$ shows that\n\n$$\nf(f(x+k y)+y)=f(f(x)+y)\n$$\n\nfor all integers $x, y$ and $k$. If $v$ is an $f$-rare integer and $a$ is the least element of $X_{v}$, then by substituting $y=a-f(x)$ in the above, we see that\n\n$$\nf(x+k \\cdot(a-f(x)))-f(x)+a \\in X_{v}\n$$\n\nfor all integers $x$ and $k$, so that in particular\n\n$$\nf(x+k \\cdot(a-f(x))) \\geqslant f(x)\n$$\n\nfor all integers $x$ and $k$, by assumption on $a$. This says that on the (possibly degenerate) arithmetic progression through $x$ with common difference $a-f(x)$, the function $f$ attains its minimal value at $x$.\n\nRepeating the same argument with $a$ replaced by the greatest element $b$ of $X_{v}$ shows that\n\n$$\nf(x+k \\cdot(b-f(x)) \\leqslant f(x)\n$$\n\nfor all integers $x$ and $k$. Combined with the above inequality, we therefore have\n\n$$\nf(x+k \\cdot(a-f(x)) \\cdot(b-f(x)))=f(x)\n$$\n\nfor all integers $x$ and $k$.\n\nThus if $f(x) \\neq a, b$, then the set $X_{f(x)}$ contains a nondegenerate arithmetic progression, so is infinite. So the only possible $f$-rare integers are $a$ and $b$.\n\nIn particular, the $f$-rare integer $v$ we started with must be one of $a$ or $b$, so that $f(v)=$ $f(a)=f(b)=v$. This means that there cannot be any other $f$-rare integers $v^{\\prime}$, as they would on the one hand have to be either $a$ or $b$, and on the other would have to satisfy $f\\left(v^{\\prime}\\right)=v^{\\prime}$. Thus $v$ is the unique $f$-rare integer."
  },
  {
    "id": "fimo_2019_number_theory_p1",
    "enunciado": "Find all pairs $(m, n)$ of positive integers satisfying the equation\n\n$$\n\\left(2^{n}-1\\right)\\left(2^{n}-2\\right)\\left(2^{n}-4\\right) \\cdots\\left(2^{n}-2^{n-1}\\right)=m !\n$$\n\nThe final answer is that the only such pairs are $(1,1)$ and $(3,2)$.",
    "solucao": "In all solutions, for any prime $p$ and positive integer $N$, we will denote by $v_{p}(N)$ the exponent of the largest power of $p$ that divides $N$. The left-hand side of (1) will be denoted by $L_{n}$; that is, $L_{n}=\\left(2^{n}-1\\right)\\left(2^{n}-2\\right)\\left(2^{n}-4\\right) \\cdots\\left(2^{n}-2^{n-1}\\right)$.\n\nWe will get an upper bound on $n$ from the speed at which $v_{2}\\left(L_{n}\\right)$ grows.\n\nFrom\n\n$$\nL_{n}=\\left(2^{n}-1\\right)\\left(2^{n}-2\\right) \\cdots\\left(2^{n}-2^{n-1}\\right)=2^{1+2+\\cdots+(n-1)}\\left(2^{n}-1\\right)\\left(2^{n-1}-1\\right) \\cdots\\left(2^{1}-1\\right)\n$$\n\nwe read\n\n$$\nv_{2}\\left(L_{n}\\right)=1+2+\\cdots+(n-1)=\\frac{n(n-1)}{2} .\n$$\n\nOn the other hand, $v_{2}(m !)$ is expressed by the Legendre formula as\n\n$$\nv_{2}(m !)=\\sum_{i=1}^{\\infty}\\left\\lfloor\\frac{m}{2^{i}}\\right\\rfloor\n$$\n\nAs usual, by omitting the floor functions,\n\n$$\nv_{2}(m !)<\\sum_{i=1}^{\\infty} \\frac{m}{2^{i}}=m .\n$$\n\nThus, $L_{n}=m$ ! implies the inequality\n\n$$\n\\frac{n(n-1)}{2}<m\n$$\n\nIn order to obtain an opposite estimate, observe that\n\n$$\nL_{n}=\\left(2^{n}-1\\right)\\left(2^{n}-2\\right) \\cdots\\left(2^{n}-2^{n-1}\\right)<\\left(2^{n}\\right)^{n}=2^{n^{2}} .\n$$\n\nWe claim that\n\n$$\n2^{n^{2}}<\\left(\\frac{n(n-1)}{2}\\right) ! \\quad \\text { for } n \\geqslant 6 .\n$$\n\nFor $n=6$ the estimate $(3)$ is true because $2^{6^{2}}<6.9 \\cdot 10^{10}$ and $\\left(\\frac{n(n-1)}{2}\\right) !=15 !>1.3 \\cdot 10^{12}$.\n\nFor $n \\geqslant 7$ we prove (3) by the following inequalities:\n\n$$\n\\begin{aligned}\n\\left(\\frac{n(n-1)}{2}\\right) ! & =15 ! \\cdot 16 \\cdot 17 \\cdots \\frac{n(n-1)}{2}>2^{36} \\cdot 16^{\\frac{n(n-1)}{2}-15} \\\\\n& =2^{2 n(n-1)-24}=2^{n^{2}} \\cdot 2^{n(n-2)-24}>2^{n^{2}}\n\\end{aligned}\n$$\n\nPutting together (2) and (3), for $n \\geqslant 6$ we get a contradiction, since\n\n$$\nL_{n}<2^{n^{2}}<\\left(\\frac{n(n-1)}{2}\\right) !<m !=L_{n}\n$$\n\nHence $n \\geqslant 6$ is not possible.\n\nChecking manually the cases $n \\leqslant 5$ we find\n\n$$\n\\begin{gathered}\nL_{1}=1=1 !, \\quad L_{2}=6=3 !, \\quad 5 !<L_{3}=168<6 !, \\\\\n7 !<L_{4}=20160<8 ! \\quad \\text { and } \\quad 10 !<L_{5}=9999360<11 !\n\\end{gathered}\n$$\n\nSo, there are two solutions:\n\n$$\n(m, n) \\in\\{(1,1),(3,2)\\}\n$$"
  },
  {
    "id": "fimo_2019_number_theory_p2",
    "enunciado": "Find all triples $(a, b, c)$ of positive integers such that $a^{3}+b^{3}+c^{3}=(a b c)^{2}$.\n\nThe final answers are $(1,2,3)$ and its permutations.",
    "solucao": "Note that the equation is symmetric. In all solutions, we will assume without loss of generality that $a \\geqslant b \\geqslant c$, and prove that the only solution is $(a, b, c)=(3,2,1)$.\n\nThe first two solutions all start by proving that $c=1$.\n\nWe will start by proving that $c=1$. Note that\n\n$$\n3 a^{3} \\geqslant a^{3}+b^{3}+c^{3}>a^{3}\n$$\n\nSo $3 a^{3} \\geqslant(a b c)^{2}>a^{3}$ and hence $3 a \\geqslant b^{2} c^{2}>a$. Now $b^{3}+c^{3}=a^{2}\\left(b^{2} c^{2}-a\\right) \\geqslant a^{2}$, and so\n\n$$\n18 b^{3} \\geqslant 9\\left(b^{3}+c^{3}\\right) \\geqslant 9 a^{2} \\geqslant b^{4} c^{4} \\geqslant b^{3} c^{5}\n$$\n\nso $18 \\geqslant c^{5}$ which yields $c=1$.\n\nNow, note that we must have $a>b$, as otherwise we would have $2 b^{3}+1=b^{4}$ which has no positive integer solutions. So\n\n$$\na^{3}-b^{3} \\geqslant(b+1)^{3}-b^{3}>1\n$$\n\nand\n\n$$\n2 a^{3}>1+a^{3}+b^{3}>a^{3}\n$$\n\nwhich implies $2 a^{3}>a^{2} b^{2}>a^{3}$ and so $2 a>b^{2}>a$. Therefore\n\n$$\n4\\left(1+b^{3}\\right)=4 a^{2}\\left(b^{2}-a\\right) \\geqslant 4 a^{2}>b^{4}\n$$\n\nso $4>b^{3}(b-4)$; that is, $b \\leqslant 4$.\n\nNow, for each possible value of $b$ with $2 \\leqslant b \\leqslant 4$ we obtain a cubic equation for $a$ with constant coefficients. These are as follows:\n\n$$\n\\begin{array}{ll}\nb=2: & a^{3}-4 a^{2}+9=0 \\\\\nb=3: & a^{3}-9 a^{2}+28=0 \\\\\nb=4: & a^{3}-16 a^{2}+65=0 .\n\\end{array}\n$$\n\nThe only case with an integer solution for $a$ with $b \\leqslant a$ is $b=2$, leading to $(a, b, c)=(3,2,1)$."
  },
  {
    "id": "fimo_2019_number_theory_p3",
    "enunciado": "We say that a set $S$ of integers is rootiful if, for any positive integer $n$ and any $a_{0}, a_{1}, \\ldots, a_{n} \\in S$, all integer roots of the polynomial $a_{0}+a_{1} x+\\cdots+a_{n} x^{n}$ are also in $S$. Find all rootiful sets of integers that contain all numbers of the form $2^{a}-2^{b}$ for positive integers $a$ and $b$.\n\nThe final answer is that the set $\\mathbb{Z}$ of all integers is the only such rootiful set.",
    "solucao": "The set $\\mathbb{Z}$ of all integers is clearly rootiful. We shall prove that any rootiful set $S$ containing all the numbers of the form $2^{a}-2^{b}$ for $a, b \\in \\mathbb{Z}_{>0}$ must be all of $\\mathbb{Z}$.\n\nFirst, note that $0=2^{1}-2^{1} \\in S$ and $2=2^{2}-2^{1} \\in S$. Now, $-1 \\in S$, since it is a root of $2 x+2$, and $1 \\in S$, since it is a root of $2 x^{2}-x-1$. Also, if $n \\in S$ then $-n$ is a root of $x+n$, so it suffices to prove that all positive integers must be in $S$.\n\nNow, we claim that any positive integer $n$ has a multiple in $S$. Indeed, suppose that $n=2^{\\alpha} \\cdot t$ for $\\alpha \\in \\mathbb{Z}_{\\geqslant 0}$ and $t$ odd. Then $t \\mid 2^{\\phi(t)}-1$, so $n \\mid 2^{\\alpha+\\phi(t)+1}-2^{\\alpha+1}$. Moreover, $2^{\\alpha+\\phi(t)+1}-2^{\\alpha+1} \\in S$, and so $S$ contains a multiple of every positive integer $n$.\n\nWe will now prove by induction that all positive integers are in $S$. Suppose that $0,1, \\ldots, n-$ $1 \\in S$; furthermore, let $N$ be a multiple of $n$ in $S$. Consider the base- $n$ expansion of $N$, say $N=a_{k} n^{k}+a_{k-1} n^{k-1}+\\cdots+a_{1} n+a_{0}$. Since $0 \\leqslant a_{i}<n$ for each $a_{i}$, we have that all the $a_{i}$ are in $S$. Furthermore, $a_{0}=0$ since $N$ is a multiple of $n$. Therefore, $a_{k} n^{k}+a_{k-1} n^{k-1}+\\cdots+a_{1} n-N=0$, so $n$ is a root of a polynomial with coefficients in $S$. This tells us that $n \\in S$, completing the induction."
  },
  {
    "id": "fimo_2019_number_theory_p4",
    "enunciado": "Let $\\mathbb{Z}_{>0}$ be the set of positive integers. A positive integer constant $C$ is given. Find all functions $f: \\mathbb{Z}_{>0} \\rightarrow \\mathbb{Z}_{>0}$ such that, for all positive integers $a$ and $b$ satisfying $a+b>C$,\n\n$$\na+f(b) \\mid a^{2}+b f(a)\n$$\n\nThe final answers are exactly the functions $f(a)=k a$ for some constant $k \\in \\mathbb{Z}_{>0}$ (irrespective of the value of $C$ ).",
    "solucao": "It is easy to verify that the functions $f(a)=k a$ satisfy $(*)$. Thus, in the proofs below, we will only focus on the converse implication: that condition $(*)$ implies that $f=k a$.\n\nA common minor part of these solutions is the derivation of some relatively easy bounds on the function $f$. An upper bound is easily obtained by setting $a=1$ in (*), giving the inequality\n\n$$\nf(b) \\leqslant b \\cdot f(1)\n$$\n\nfor all sufficiently large $b$. The corresponding lower bound is only marginally more difficult to obtain: substituting $b=1$ in the original equation shows that\n\n$$\na+f(1) \\mid\\left(a^{2}+f(a)\\right)-(a-f(1)) \\cdot(a+f(1))=f(1)^{2}+f(a)\n$$\n\nfor all sufficiently large $a$. It follows from this that one has the lower bound\n\n$$\nf(a) \\geqslant a+f(1) \\cdot(1-f(1))\n$$\n\nagain for all sufficiently large $a$.\n\nEach of the following proofs makes use of at least one of these bounds.\n\nFirst, we show that $b \\mid f(b)^{2}$ for all $b$. To do this, we choose a large positive integer $n$ so that $n b-f(b) \\geqslant C$. Setting $a=n b-f(b)$ in $(*)$ then shows that\n\n$$\nn b \\mid(n b-f(b))^{2}+b f(n b-f(b))\n$$\n\nso that $b \\mid f(b)^{2}$ as claimed.\n\nNow in particular we have that $p \\mid f(p)$ for every prime $p$. If we write $f(p)=k(p) \\cdot p$, then the bound $f(p) \\leqslant f(1) \\cdot p$ (valid for $p$ sufficiently large) shows that some value $k$ of $k(p)$ must be attained for infinitely many $p$. We will show that $f(a)=k a$ for all positive integers $a$. To do this, we substitute $b=p$ in $(*)$, where $p$ is any sufficiently large prime for which $k(p)=k$, obtaining\n\n$$\na+k p \\mid\\left(a^{2}+p f(a)\\right)-a(a+k p)=p f(a)-p k a .\n$$\n\nFor suitably large $p$ we have $\\operatorname{gcd}(a+k p, p)=1$, and hence we have\n\n$$\na+k p \\mid f(a)-k a\n$$\n\nBut the only way this can hold for arbitrarily large $p$ is if $f(a)-k a=0$. This concludes the proof."
  },
  {
    "id": "fimo_2019_number_theory_p5",
    "enunciado": "Let $a$ be a positive integer. We say that a positive integer $b$ is $a-\\operatorname{good}$ if $\\left(\\begin{array}{c}a n \\\\ b\\end{array}\\right)-1$ is divisible by $a n+1$ for all positive integers $n$ with $a n \\geqslant b$. Suppose $b$ is a positive integer such that $b$ is $a$-good, but $b+2$ is not $a$-good. Prove that $b+1$ is prime.",
    "solucao": "For $p$ a prime and $n$ a nonzero integer, we write $v_{p}(n)$ for the $p$-adic valuation of $n$ : the largest integer $t$ such that $p^{t} \\mid n$.\n\nWe first show that $b$ is $a$-good if and only if $b$ is even, and $p \\mid a$ for all primes $p \\leqslant b$.\n\nTo start with, the condition that $a n+1 \\mid\\left(\\begin{array}{c}a n \\\\ b\\end{array}\\right)-1$ can be rewritten as saying that\n\n$$\n\\frac{a n(a n-1) \\cdots(a n-b+1)}{b !} \\equiv 1 \\quad(\\bmod a n+1)\n$$\n\nSuppose, on the one hand, there is a prime $p \\leqslant b$ with $p \\nmid a$. Take $t=v_{p}(b !)$. Then there exist positive integers $c$ such that $a c \\equiv 1\\left(\\bmod p^{t+1}\\right)$. If we take $c$ big enough, and then take $n=(p-1) c$, then $a n=a(p-1) c \\equiv p-1\\left(\\bmod p^{t+1}\\right)$ and $a n \\geqslant b$. Since $p \\leqslant b$, one of the terms of the numerator an $(a n-1) \\cdots(a n-b+1)$ is an $-p+1$, which is divisible by $p^{t+1}$. Hence the $p$-adic valuation of the numerator is at least $t+1$, but that of the denominator is exactly $t$. This means that $p \\mid\\left(\\begin{array}{c}a n \\\\ b\\end{array}\\right)$, so $p \\nmid\\left(\\begin{array}{c}a n \\\\ b\\end{array}\\right)-1$. As $p \\mid a n+1$, we get that $a n+1 \\nmid\\left(\\begin{array}{c}a n \\\\ b\\end{array}\\right)$, so $b$ is not $a-g o o d$.\n\nOn the other hand, if for all primes $p \\leqslant b$ we have $p \\mid a$, then every factor of $b$ ! is coprime to $a n+1$, and hence invertible modulo $a n+1$ : hence $b$ ! is also invertible modulo $a n+1$. Then equation (1) reduces to:\n\n$$\na n(a n-1) \\cdots(a n-b+1) \\equiv b ! \\quad(\\bmod a n+1)\n$$\n\nHowever, we can rewrite the left-hand side as follows:\n\n$$\n\\operatorname{an}(a n-1) \\cdots(a n-b+1) \\equiv(-1)(-2) \\cdots(-b) \\equiv(-1)^{b} b ! \\quad(\\bmod a n+1) .\n$$\n\nProvided that an $>1$, if $b$ is even we deduce $(-1)^{b} b ! \\equiv b$ ! as needed. On the other hand, if $b$ is odd, and we take $a n+1>2(b !)$, then we will not have $(-1)^{b} b ! \\equiv b$ !, so $b$ is not $a$-good. This completes the claim.\n\nTo conclude from here, suppose that $b$ is $a$-good, but $b+2$ is not. Then $b$ is even, and $p \\mid a$ for all primes $p \\leqslant b$, but there is a prime $q \\leqslant b+2$ for which $q \\nmid a$ : so $q=b+1$ or $q=b+2$. We cannot have $q=b+2$, as that is even too, so we have $q=b+1$ : in other words, $b+1$ is prime."
  },
  {
    "id": "fimo_2019_number_theory_p6",
    "enunciado": "Let $H=\\left\\{\\lfloor i \\sqrt{2}\\rfloor: i \\in \\mathbb{Z}_{>0}\\right\\}=\\{1,2,4,5,7, \\ldots\\}$, and let $n$ be a positive integer. Prove that there exists a constant $C$ such that, if $A \\subset\\{1,2, \\ldots, n\\}$ satisfies $|A| \\geqslant C \\sqrt{n}$, then there exist $a, b \\in A$ such that $a-b \\in H$. (Here $\\mathbb{Z}_{>0}$ is the set of positive integers, and $\\lfloor z\\rfloor$ denotes the greatest integer less than or equal to $z$.)",
    "solucao": "In all solutions, we will assume that $A$ is a set such that $\\{a-b: a, b \\in A\\}$ is disjoint from $H$, and prove that $|A|<C \\sqrt{n}$.\n\nFirst, observe that if $n$ is a positive integer, then $n \\in H$ exactly when\n\n$$\n\\left\\{\\frac{n}{\\sqrt{2}}\\right\\}>1-\\frac{1}{\\sqrt{2}}\n$$\n\nTo see why, observe that $n \\in H$ if and only if $0<i \\sqrt{2}-n<1$ for some $i \\in \\mathbb{Z}_{>0}$. In other words, $0<i-n / \\sqrt{2}<1 / \\sqrt{2}$, which is equivalent to (1).\n\nNow, write $A=\\left\\{a_{1}<a_{2}<\\cdots<a_{k}\\right\\}$, where $k=|A|$. Observe that the set of differences is not altered by shifting $A$, so we may assume that $A \\subseteq\\{0,1, \\ldots, n-1\\}$ with $a_{1}=0$.\n\nFrom (1), we learn that $\\left\\{a_{i} / \\sqrt{2}\\right\\}<1-1 / \\sqrt{2}$ for each $i>1$ since $a_{i}-a_{1} \\notin H$. Furthermore, we must have $\\left\\{a_{i} / \\sqrt{2}\\right\\}<\\left\\{a_{j} / \\sqrt{2}\\right\\}$ whenever $i<j$; otherwise, we would have\n\n$$\n-\\left(1-\\frac{1}{\\sqrt{2}}\\right)<\\left\\{\\frac{a_{j}}{\\sqrt{2}}\\right\\}-\\left\\{\\frac{a_{i}}{\\sqrt{2}}\\right\\}<0\n$$\n\nSince $\\left\\{\\left(a_{j}-a_{i}\\right) / \\sqrt{2}\\right\\}=\\left\\{a_{j} / \\sqrt{2}\\right\\}-\\left\\{a_{i} / \\sqrt{2}\\right\\}+1$, this implies that $\\left\\{\\left(a_{j}-a_{i}\\right) / \\sqrt{2}\\right\\}>1 / \\sqrt{2}>$ $1-1 / \\sqrt{2}$, contradicting $(1)$\n\nNow, we have a sequence $0=a_{1}<a_{2}<\\cdots<a_{k}<n$, with\n\n$$\n0=\\left\\{\\frac{a_{1}}{\\sqrt{2}}\\right\\}<\\left\\{\\frac{a_{2}}{\\sqrt{2}}\\right\\}<\\cdots<\\left\\{\\frac{a_{k}}{\\sqrt{2}}\\right\\}<1-\\frac{1}{\\sqrt{2}}\n$$\n\nWe use the following fact: for any $d \\in \\mathbb{Z}$, we have\n\n$$\n\\left\\{\\frac{d}{\\sqrt{2}}\\right\\}>\\frac{1}{2 d \\sqrt{2}}\n$$\n\nTo see why this is the case, let $h=\\lfloor d / \\sqrt{2}\\rfloor$, so $\\{d / \\sqrt{2}\\}=d / \\sqrt{2}-h$. Then\n\n$$\n\\left\\{\\frac{d}{\\sqrt{2}}\\right\\}\\left(\\frac{d}{\\sqrt{2}}+h\\right)=\\frac{d^{2}-2 h^{2}}{2} \\geqslant \\frac{1}{2}\n$$\n\nsince the numerator is a positive integer. Because $d / \\sqrt{2}+h<2 d / \\sqrt{2}$, inequality (2) follows.\n\nLet $d_{i}=a_{i+1}-a_{i}$, for $1 \\leqslant i<k$. Then $\\left\\{a_{i+1} / \\sqrt{2}\\right\\}-\\left\\{a_{i} / \\sqrt{2}\\right\\}=\\left\\{d_{i} / \\sqrt{2}\\right\\}$, and we have\n\n$$\n1-\\frac{1}{\\sqrt{2}}>\\sum_{i}\\left\\{\\frac{d_{i}}{\\sqrt{2}}\\right\\}>\\frac{1}{2 \\sqrt{2}} \\sum_{i} \\frac{1}{d_{i}} \\geqslant \\frac{(k-1)^{2}}{2 \\sqrt{2}} \\frac{1}{\\sum_{i} d_{i}}>\\frac{(k-1)^{2}}{2 \\sqrt{2}} \\cdot \\frac{1}{n} .\n$$\n\nHere, the first inequality holds because $\\left\\{a_{k} / \\sqrt{2}\\right\\}<1-1 / \\sqrt{2}$, the second follows from (2), the third follows from an easy application of the AM-HM inequality (or Cauchy-Schwarz), and the fourth follows from the fact that $\\sum_{i} d_{i}=a_{k}<n$.\n\nRearranging this, we obtain\n\n$$\n\\sqrt{2 \\sqrt{2}-2} \\cdot \\sqrt{n}>k-1\n$$\n\nwhich provides the required bound on $k$."
  },
  {
    "id": "fimo_2019_number_theory_p7",
    "enunciado": "Prove that there is a constant $c>0$ and infinitely many positive integers $n$ with the following property: there are infinitely many positive integers that cannot be expressed as the sum of fewer than $c n \\log (n)$ pairwise coprime $n^{\\text {th }}$ powers.",
    "solucao": "Suppose, for an integer $n$, that we can find another integer $N$ satisfying the following property:\n\n$$\nn \\text { is divisible by } \\varphi\\left(p^{e}\\right) \\text { for every prime power } p^{e} \\text { exactly dividing } N \\text {. }\n$$\n\nThis property ensures that all $n^{\\text {th }}$ powers are congruent to 0 or 1 modulo each such prime power $p^{e}$, and hence that any sum of $m$ pairwise coprime $n^{\\text {th }}$ powers is congruent to $m$ or $m-1$ modulo $p^{e}$, since at most one of the $n^{\\text {th }}$ powers is divisible by $p$. Thus, if $k$ denotes the number of distinct prime factors of $N$, we find by the Chinese Remainder Theorem at most $2^{k} m$ residue classes modulo $N$ which are sums of at most $m$ pairwise coprime $n^{\\text {th }}$ powers. In particular, if $N>2^{k} m$ then there are infinitely many positive integers not expressible as a sum of at most $m$ pairwise coprime $n^{\\text {th }}$ powers.\n\nIt thus suffices to prove that there are arbitrarily large pairs $(n, N)$ of integers satisfying ( $\\dagger)$ such that\n\n$$\nN>c \\cdot 2^{k} n \\log (n)\n$$\n\nfor some positive constant $c$.\n\nWe construct such pairs as follows. Fix a positive integer $t$ and choose (distinct) prime numbers $p \\mid 2^{2^{t-1}}+1$ and $q \\mid 2^{2^{t}}+1$; we set $N=p q$. It is well-known that $2^{t} \\mid p-1$ and $2^{t+1} \\mid q-1$, hence\n\n$$\nn=\\frac{(p-1)(q-1)}{2^{t}}\n$$\n\nis an integer and the pair $(n, N)$ satisfies $(\\dagger)$.\n\nEstimating the size of $N$ and $n$ is now straightforward. We have\n\n$$\n\\log _{2}(n) \\leqslant 2^{t-1}+2^{t}-t<2^{t+1}<2 \\cdot \\frac{N}{n}\n$$\n\nwhich rearranges to\n\n$$\nN>\\frac{1}{8} \\cdot 2^{2} n \\log _{2}(n)\n$$\n\nand so we are done if we choose $c<\\frac{1}{8 \\log (2)} \\approx 0.18$."
  },
  {
    "id": "fimo_2019_number_theory_p8",
    "enunciado": "Let $a$ and $b$ be two positive integers. Prove that the integer\n\n$$\na^{2}+\\left\\lceil\\frac{4 a^{2}}{b}\\right\\rceil\n$$\n\nis not a square. (Here $\\lceil z\\rceil$ denotes the least integer greater than or equal to $z$.)",
    "solucao": "Arguing indirectly, assume that\n\n$$\na^{2}+\\left\\lceil\\frac{4 a^{2}}{b}\\right\\rceil=(a+k)^{2}, \\quad \\text { or } \\quad\\left\\lceil\\frac{(2 a)^{2}}{b}\\right\\rceil=(2 a+k) k .\n$$\n\nClearly, $k \\geqslant 1$. In other words, the equation\n\n$$\n\\left\\lceil\\frac{c^{2}}{b}\\right\\rceil=(c+k) k\n$$\n\nhas a positive integer solution $(c, k)$, with an even value of $c$.\n\nChoose a positive integer solution of (1) with minimal possible value of $k$, without regard to the parity of $c$. From\n\n$$\n\\frac{c^{2}}{b}>\\left\\lceil\\frac{c^{2}}{b}\\right\\rceil-1=c k+k^{2}-1 \\geqslant c k\n$$\n\nand\n\n$$\n\\frac{(c-k)(c+k)}{b}<\\frac{c^{2}}{b} \\leqslant\\left\\lceil\\frac{c^{2}}{b}\\right\\rceil=(c+k) k\n$$\n\nit can be seen that $c>b k>c-k$, so\n\n$$\nc=k b+r \\quad \\text { with some } 0<r<k .\n$$\n\nBy substituting this in (1) we get\n\n$$\n\\left\\lceil\\frac{c^{2}}{b}\\right\\rceil=\\left\\lceil\\frac{(b k+r)^{2}}{b}\\right\\rceil=k^{2} b+2 k r+\\left\\lceil\\frac{r^{2}}{b}\\right\\rceil\n$$\n\nand\n\n$$\n(c+k) k=(k b+r+k) k=k^{2} b+2 k r+k(k-r)\n$$\n\nso\n\n$$\n\\left\\lceil\\frac{r^{2}}{b}\\right\\rceil=k(k-r)\n$$\n\nNotice that relation (2) provides another positive integer solution of (1), namely $c^{\\prime}=r$ and $k^{\\prime}=k-r$, with $c^{\\prime}>0$ and $0<k^{\\prime}<k$. That contradicts the minimality of $k$, and hence finishes the solution."
  },
  {
    "id": "fimo_2020_algebra_p1_1",
    "enunciado": "Let $n$ be a positive integer, and set $N=2^{n}$. Determine the smallest real number $a_{n}$ such that, for all real $x$,\n\n$$\n\\sqrt[N]{\\frac{x^{2 N}+1}{2}} \\leqslant a_{n}(x-1)^{2}+x\n$$\n\nThe final answer is $a_{n}=N / 2$.",
    "solucao": "First of all, assume that $a_{n}<N / 2$ satisfies the condition. Take $x=1+t$ for $t>0$, we should have\n\n$$\n\\frac{(1+t)^{2 N}+1}{2} \\leqslant\\left(1+t+a_{n} t^{2}\\right)^{N}\n$$\n\nExpanding the brackets we get\n\n$$\n\\left(1+t+a_{n} t^{2}\\right)^{N}-\\frac{(1+t)^{2 N}+1}{2}=\\left(N a_{n}-\\frac{N^{2}}{2}\\right) t^{2}+c_{3} t^{3}+\\ldots+c_{2 N} t^{2 N}\n$$\n\nwith some coefficients $c_{3}, \\ldots, c_{2 N}$. Since $a_{n}<N / 2$, the right hand side of (1) is negative for sufficiently small $t$. A contradiction.\n\nIt remains to prove the following inequality\n\n$$\n\\sqrt[N]{\\frac{1+x^{2 N}}{2}} \\leqslant x+\\frac{N}{2}(x-1)^{2}\n$$\n\nwhere $N=2^{n}$.\n\nUse induction in $n$. The base case $n=0$ is trivial: $N=1$ and both sides of $\\mathcal{I}(N, x)$ are equal to $\\left(1+x^{2}\\right) / 2$. For completing the induction we prove $\\mathcal{I}(2 N, x)$ assuming that $\\mathcal{I}(N, y)$ is established for all real $y$. We have\n\n$$\n\\begin{aligned}\n\\left(x+N(x-1)^{2}\\right)^{2} & =x^{2}+N^{2}(x-1)^{4}+N(x-1)^{2} \\frac{(x+1)^{2}-(x-1)^{2}}{2} \\\\\n& =x^{2}+\\frac{N}{2}\\left(x^{2}-1\\right)^{2}+\\left(N^{2}-\\frac{N}{2}\\right)(x-1)^{4} \\geqslant x^{2}+\\frac{N}{2}\\left(x^{2}-1\\right)^{2} \\geqslant \\sqrt[N]{\\frac{1+x^{4 N}}{2}},\n\\end{aligned}\n$$\n\nwhere the last inequality is $\\mathcal{I}\\left(N, x^{2}\\right)$. Since\n\n$$\nx+N(x-1)^{2} \\geqslant x+\\frac{(x-1)^{2}}{2}=\\frac{x^{2}+1}{2} \\geqslant 0,\n$$\n\ntaking square root we get $\\mathcal{I}(2 N, x)$. The inductive step is complete."
  },
  {
    "id": "fimo_2020_algebra_p1_2",
    "enunciado": "For every positive integer $N$, determine the smallest real number $b_{N}$ such that, for all real $x$,\n\n$$\n\\sqrt[N]{\\frac{x^{2 N}+1}{2}} \\leqslant b_{N}(x-1)^{2}+x\n$$\n\nThe final answer is $b_{n}=N / 2$.",
    "solucao": "First of all, assume that $b_{n}<N / 2$ satisfies the condition. Take $x=1+t$ for $t>0$, we should have\n\n$$\n\\frac{(1+t)^{2 N}+1}{2} \\leqslant\\left(1+t+b_{n} t^{2}\\right)^{N}\n$$\n\nExpanding the brackets we get\n\n$$\n\\left(1+t+b_{n} t^{2}\\right)^{N}-\\frac{(1+t)^{2 N}+1}{2}=\\left(N b_{n}-\\frac{N^{2}}{2}\\right) t^{2}+c_{3} t^{3}+\\ldots+c_{2 N} t^{2 N}\n$$\n\nwith some coefficients $c_{3}, \\ldots, c_{2 N}$. Since $b_{n}<N / 2$, the right hand side of (1) is negative for sufficiently small $t$. A contradiction.\n\nWe conclude that $b_{N} \\geqslant N / 2$. It remains to prove the inequality $\\mathcal{I}(N, x)$ for an arbitrary positive integer $N$.\n\nFirst of all, $\\mathcal{I}(N, 0)$ is obvious. Further, if $x>0$, then the left hand sides of $\\mathcal{I}(N,-x)$ and $\\mathcal{I}(N, x)$ coincide, while the right hand side of $\\mathcal{I}(N,-x)$ is larger than that of $\\mathcal{I}(N,-x)$ (their difference equals $2(N-1) x \\geqslant 0)$. Therefore, $\\mathcal{I}(N,-x)$ follows from $\\mathcal{I}(N, x)$. So, hereafter we suppose that $x>0$.\n\nDivide $\\mathcal{I}(N, x)$ by $x$ and let $t=(x-1)^{2} / x=x-2+1 / x$; then $\\mathcal{I}(n, x)$ reads as\n\n$$\nf_{N}:=\\frac{x^{N}+x^{-N}}{2} \\leqslant\\left(1+\\frac{N}{2} t\\right)^{N}\n$$\n\nThe key identity is the expansion of $f_{N}$ as a polynomial in $t$ :\n\nLemma.\n\n$$\nf_{N}=N \\sum_{k=0}^{N} \\frac{1}{N+k}\\left(\\begin{array}{c}\nN+k \\\\\n2 k\n\\end{array}\\right) t^{k}\n$$\n\nProof. Apply induction on $N$. We will make use of the straightforward recurrence relation\n\n$$\nf_{N+1}+f_{N-1}=(x+1 / x) f_{N}=(2+t) f_{N}\n$$\n\nThe base cases $N=1,2$ are straightforward:\n\n$$\nf_{1}=1+\\frac{t}{2}, \\quad f_{2}=\\frac{1}{2} t^{2}+2 t+1\n$$\n\nFor the induction step from $N-1$ and $N$ to $N+1$, we compute the coefficient of $t^{k}$ in $f_{N+1}$ using the formula $f_{N+1}=(2+t) f_{N}-f_{N-1}$. For $k=0$ that coefficient equals 1 , for $k>0$ it equals\n\n$$\n\\begin{aligned}\n& 2 \\frac{N}{N+k}\\left(\\begin{array}{c}\nN+k \\\\\n2 k\n\\end{array}\\right)+\\frac{N}{N+k-1}\\left(\\begin{array}{c}\nN+k-1 \\\\\n2 k-2\n\\end{array}\\right)-\\frac{N-1}{N+k-1}\\left(\\begin{array}{c}\nN+k-1 \\\\\n2 k\n\\end{array}\\right) \\\\\n& =\\frac{(N+k-1) !}{(2 k) !(N-k) !}\\left(2 N+\\frac{2 k(2 k-1) N}{(N+k-1)(N-k+1)}-\\frac{(N-1)(N-k)}{N+k-1}\\right) \\\\\n& =\\frac{(N+k-1) !}{(2 k) !(N-k+1) !}\\left(2 N(N-k+1)+3 k N+k-N^{2}-N\\right)=\\frac{\\left(\\begin{array}{c}\nN+k+1 \\\\\n2 k\n\\end{array}\\right)}{(N+k+1)}(N+1) \\text {, }\n\\end{aligned}\n$$\n\nthat completes the induction.\n\nTurning back to the problem, in order to prove (2) we write\n\n$$\n\\left(1+\\frac{N}{2} t\\right)^{N}-f_{N}=\\left(1+\\frac{N}{2} t\\right)^{N}-N \\sum_{k=0}^{N} \\frac{1}{N+k}\\left(\\begin{array}{c}\nN+k \\\\\n2 k\n\\end{array}\\right) t^{k}=\\sum_{k=0}^{N} \\alpha_{k} t^{k}\n$$\n\nwhere\n\n$$\n\\begin{aligned}\n\\alpha_{k} & =\\left(\\frac{N}{2}\\right)^{k}\\left(\\begin{array}{l}\nN \\\\\nk\n\\end{array}\\right)-\\frac{N}{N+k}\\left(\\begin{array}{c}\nN+k \\\\\n2 k\n\\end{array}\\right) \\\\\n& =\\left(\\frac{N}{2}\\right)^{k}\\left(\\begin{array}{l}\nN \\\\\nk\n\\end{array}\\right)\\left(1-2^{k} \\frac{(1+1 / N)(1+2 / N) \\cdot \\ldots \\cdot(1+(k-1) / N)}{(k+1) \\cdot \\ldots \\cdot(2 k)}\\right) \\\\\n& \\geqslant\\left(\\frac{N}{2}\\right)^{k}\\left(\\begin{array}{l}\nN \\\\\nk\n\\end{array}\\right)\\left(1-2^{k} \\frac{2 \\cdot 3 \\cdot \\ldots \\cdot k}{(k+1) \\cdot \\ldots \\cdot(2 k)}\\right)=\\left(\\frac{N}{2}\\right)^{k}\\left(\\begin{array}{c}\nN \\\\\nk\n\\end{array}\\right)\\left(1-\\prod_{j=1}^{k} \\frac{2 j}{k+j}\\right) \\geqslant 0\n\\end{aligned}\n$$\n\nand (2) follows."
  },
  {
    "id": "fimo_2020_algebra_p2",
    "enunciado": "Let $\\mathcal{A}$ denote the set of all polynomials in three variables $x, y, z$ with integer coefficients. Let $\\mathcal{B}$ denote the subset of $\\mathcal{A}$ formed by all polynomials which can be expressed as\n\n$$\n(x+y+z) P(x, y, z)+(x y+y z+z x) Q(x, y, z)+x y z R(x, y, z)\n$$\n\nwith $P, Q, R \\in \\mathcal{A}$. Find the smallest non-negative integer $n$ such that $x^{i} y^{j} z^{k} \\in \\mathcal{B}$ for all nonnegative integers $i, j, k$ satisfying $i+j+k \\geqslant n$.\n\nThe final answer is $n=4$.",
    "solucao": "We start by showing that $n \\leqslant 4$, i.e., any monomial $f=x^{i} y^{j} z^{k}$ with $i+j+k \\geqslant 4$ belongs to $\\mathcal{B}$. Assume that $i \\geqslant j \\geqslant k$, the other cases are analogous.\n\nLet $x+y+z=p, x y+y z+z x=q$ and $x y z=r$. Then\n\n$$\n0=(x-x)(x-y)(x-z)=x^{3}-p x^{2}+q x-r\n$$\n\ntherefore $x^{3} \\in \\mathcal{B}$. Next, $x^{2} y^{2}=x y q-(x+y) r \\in \\mathcal{B}$.\n\nIf $k \\geqslant 1$, then $r$ divides $f$, thus $f \\in \\mathcal{B}$. If $k=0$ and $j \\geqslant 2$, then $x^{2} y^{2}$ divides $f$, thus we have $f \\in \\mathcal{B}$ again. Finally, if $k=0, j \\leqslant 1$, then $x^{3}$ divides $f$ and $f \\in \\mathcal{B}$ in this case also.\n\nIn order to prove that $n \\geqslant 4$, we show that the monomial $x^{2} y$ does not belong to $\\mathcal{B}$. Assume the contrary:\n\n$$\nx^{2} y=p P+q Q+r R\n$$\n\nfor some polynomials $P, Q, R$. If polynomial $P$ contains the monomial $x^{2}$ (with nonzero coefficient), then $p P+q Q+r R$ contains the monomial $x^{3}$ with the same nonzero coefficient. So $P$ does not contain $x^{2}, y^{2}, z^{2}$ and we may write\n\n$$\nx^{2} y=(x+y+z)(a x y+b y z+c z x)+(x y+y z+z x)(d x+e y+f z)+g x y z,\n$$\n\nwhere $a, b, c ; d, e, f ; g$ are the coefficients of $x y, y z, z x ; x, y, z ; x y z$ in the polynomials $P$; $Q ; R$, respectively (the remaining coefficients do not affect the monomials of degree 3 in $p P+q Q+r R)$. By considering the coefficients of $x y^{2}$ we get $e=-a$, analogously $e=-b$, $f=-b, f=-c, d=-c$, thus $a=b=c$ and $f=e=d=-a$, but then the coefficient of $x^{2} y$ in the right hand side equals $a+d=0 \\neq 1$."
  },
  {
    "id": "fimo_2020_algebra_p3",
    "enunciado": "Suppose that $a, b, c, d$ are positive real numbers satisfying $(a+c)(b+d)=a c+b d$. Find the smallest possible value of\n\n$$\nS=\\frac{a}{b}+\\frac{b}{c}+\\frac{c}{d}+\\frac{d}{a}\n$$\n\nThe final answer is that the smallest possible value is 8 .",
    "solucao": "To show that $S \\geqslant 8$, apply the AM-GM inequality twice as follows:\n\n$$\n\\left(\\frac{a}{b}+\\frac{c}{d}\\right)+\\left(\\frac{b}{c}+\\frac{d}{a}\\right) \\geqslant 2 \\sqrt{\\frac{a c}{b d}}+2 \\sqrt{\\frac{b d}{a c}}=\\frac{2(a c+b d)}{\\sqrt{a b c d}}=\\frac{2(a+c)(b+d)}{\\sqrt{a b c d}} \\geqslant 2 \\cdot \\frac{2 \\sqrt{a c} \\cdot 2 \\sqrt{b d}}{\\sqrt{a b c d}}=8\n$$\n\nThe above inequalities turn into equalities when $a=c$ and $b=d$. Then the condition $(a+c)(b+d)=a c+b d$ can be rewritten as $4 a b=a^{2}+b^{2}$. So it is satisfied when $a / b=2 \\pm \\sqrt{3}$. Hence, $S$ attains value 8 , e.g., when $a=c=1$ and $b=d=2+\\sqrt{3}$."
  },
  {
    "id": "fimo_2020_algebra_p4",
    "enunciado": "Let $a, b, c, d$ be four real numbers such that $a \\geqslant b \\geqslant c \\geqslant d>0$ and $a+b+c+d=1$. Prove that\n\n$$\n(a+2 b+3 c+4 d) a^{a} b^{b} c^{c} d^{d}<1\n$$",
    "solucao": "The weighted AM-GM inequality with weights $a, b, c, d$ gives\n\n$$\na^{a} b^{b} c^{c} d^{d} \\leqslant a \\cdot a+b \\cdot b+c \\cdot c+d \\cdot d=a^{2}+b^{2}+c^{2}+d^{2}\n$$\n\nso it suffices to prove that $(a+2 b+3 c+4 d)\\left(a^{2}+b^{2}+c^{2}+d^{2}\\right)<1=(a+b+c+d)^{3}$. This can be done in various ways, for example:\n\n$$\n\\begin{aligned}\n(a+b+c+d)^{3}> & a^{2}(a+3 b+3 c+3 d)+b^{2}(3 a+b+3 c+3 d) \\\\\n& +c^{2}(3 a+3 b+c+3 d)+d^{2}(3 a+3 b+3 c+d) \\\\\n\\geqslant & \\left(a^{2}+b^{2}+c^{2}+d^{2}\\right) \\cdot(a+2 b+3 c+4 d) .\n\\end{aligned}\n$$"
  },
  {
    "id": "fimo_2020_algebra_p5",
    "enunciado": "A magician intends to perform the following trick. She announces a positive integer $n$, along with $2 n$ real numbers $x_{1}<\\ldots<x_{2 n}$, to the audience. A member of the audience then secretly chooses a polynomial $P(x)$ of degree $n$ with real coefficients, computes the $2 n$ values $P\\left(x_{1}\\right), \\ldots, P\\left(x_{2 n}\\right)$, and writes down these $2 n$ values on the blackboard in non-decreasing order. After that the magician announces the secret polynomial to the audience.\n\nCan the magician find a strategy to perform such a trick?\n\nThe final answer is that no, she cannot.",
    "solucao": "Let $x_{1}<x_{2}<\\ldots<x_{2 n}$ be real numbers chosen by the magician. We will construct two distinct polynomials $P(x)$ and $Q(x)$, each of degree $n$, such that the member of audience will write down the same sequence for both polynomials. This will mean that the magician cannot distinguish $P$ from $Q$.\n\nClaim. There exists a polynomial $P(x)$ of degree $n$ such that $P\\left(x_{2 i-1}\\right)+P\\left(x_{2 i}\\right)=0$ for $i=$ $1,2, \\ldots, n$.\n\nProof. We want to find a polynomial $a_{n} x^{n}+\\ldots+a_{1} x+a_{0}$ satisfying the following system of equations:\n\n$$\n\\left\\{\\begin{array}{l}\n\\left(x_{1}^{n}+x_{2}^{n}\\right) a_{n}+\\left(x_{1}^{n-1}+x_{2}^{n-1}\\right) a_{n-1}+\\ldots+2 a_{0}=0 \\\\\n\\left(x_{3}^{n}+x_{4}^{n}\\right) a_{n}+\\left(x_{3}^{n-1}+x_{4}^{n-1}\\right) a_{n-1}+\\ldots+2 a_{0}=0 \\\\\n\\cdots \\\\\n\\left(x_{2 n-1}^{n}+x_{2 n}^{n}\\right) a_{n}+\\left(x_{2 n-1}^{n-1}+x_{2 n}^{n-1}\\right) a_{n-1}+\\ldots+2 a_{0}=0\n\\end{array}\\right.\n$$\n\nWe use the well known fact that a homogeneous system of $n$ linear equations in $n+1$ variables has a nonzero solution. (This fact can be proved using induction on $n$, via elimination of variables.) Applying this fact to the above system, we find a nonzero polynomial $P(x)$ of degree not exceeding $n$ such that its coefficients $a_{0}, \\ldots, a_{n}$ satisfy this system. Therefore $P\\left(x_{2 i-1}\\right)+P\\left(x_{2 i}\\right)=0$ for all $i=1,2, \\ldots, n$. Notice that $P$ has a root on each segment $\\left[x_{2 i-1}, x_{2 i}\\right]$ by the Intermediate Value theorem, so $n$ roots in total. Since $P$ is nonzero, we get $\\operatorname{deg} P=n$\n\nNow consider a polynomial $P(x)$ provided by the Claim, and take $Q(x)=-P(x)$. The properties of $P(x)$ yield that $P\\left(x_{2 i-1}\\right)=Q\\left(x_{2 i}\\right)$ and $Q\\left(x_{2 i-1}\\right)=P\\left(x_{2 i}\\right)$ for all $i=1,2, \\ldots, n$. It is also clear that $P \\neq-P=Q$ and $\\operatorname{deg} Q=\\operatorname{deg} P=n$."
  },
  {
    "id": "fimo_2020_algebra_p6",
    "enunciado": "Determine all functions $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ such that\n\n$$\nf^{a^{2}+b^{2}}(a+b)=a f(a)+b f(b) \\quad \\text { for every } a, b \\in \\mathbb{Z} .\n$$\n\nHere, $f^{n}$ denotes the $n^{\\text {th }}$ iteration of $f$, i.e., $f^{0}(x)=x$ and $f^{n+1}(x)=f\\left(f^{n}(x)\\right)$ for all $n \\geqslant 0$.\n\nThe final answer is either $f(x)=0$ for all $x \\in \\mathbb{Z}$, or $f(x)=x+1$ for all $x \\in \\mathbb{Z}$.",
    "solucao": "Refer to the main equation as $E(a, b)$.\n\n$E(0, b)$ reads as $f^{b^{2}}(b)=b f(b)$. For $b=-1$ this gives $f(-1)=0$.\n\nNow $E(a,-1)$ reads as\n\n$$\nf^{a^{2}+1}(a-1)=a f(a)=f^{a^{2}}(a) .\n$$\n\nFor $x \\in \\mathbb{Z}$ define the orbit of $x$ by $\\mathcal{O}(x)=\\{x, f(x), f(f(x)), \\ldots\\} \\subseteq \\mathbb{Z}$. We see that the orbits $\\mathcal{O}(a-1)$ and $\\mathcal{O}(a)$ differ by finitely many terms. Hence, any two orbits differ by finitely many terms. In particular, this implies that either all orbits are finite or all orbits are infinite.\n\nCase 1: All orbits are finite.\n\nThen $\\mathcal{O}(0)$ is finite. Using $E(a,-a)$ we get\n\n$$\na(f(a)-f(-a))=a f(a)-a f(-a)=f^{2 a^{2}}(0) \\in \\mathcal{O}(0) .\n$$\n\nFor $|a|>\\max _{z \\in \\mathcal{O}(0)}|z|$, this yields $f(a)=f(-a)$ and $f^{2 a^{2}}(0)=0$. Therefore, the sequence $\\left(f^{k}(0): k=0,1, \\ldots\\right)$ is purely periodic with a minimal period $T$ which divides $2 a^{2}$. Analogously, $T$ divides $2(a+1)^{2}$, therefore, $T \\mid \\operatorname{gcd}\\left(2 a^{2}, 2(a+1)^{2}\\right)=2$, i.e., $f(f(0))=0$ and $a(f(a)-f(-a))=f^{2 a^{2}}(0)=0$ for all $a$. Thus,\n\n$$\n\\begin{array}{ll}\nf(a) & =f(-a) \\quad \\text { for all } a \\neq 0\n\\end{array}\n$$\n\nNext, for each $n \\in \\mathbb{Z}$, by $E(n, 1-n)$ we get\n\n$$\nn f(n)+(1-n) f(1-n)=f^{n^{2}+(1-n)^{2}}(1)=f^{2 n^{2}-2 n}(0)=0 .\n$$\n\nAssume that there exists some $m \\neq 0$ such that $f(m) \\neq 0$. Choose such an $m$ for which $|m|$ is minimal possible. Then $|m|>1$ due to $(1)$; $f(|m|) \\neq 0$ due to $(2)$; and $f(1-|m|) \\neq 0$ due to $(3)$ for $n=|m|$. This contradicts to the minimality assumption.\n\nSo, $f(n)=0$ for $n \\neq 0$. Finally, $f(0)=f^{3}(0)=f^{4}(2)=2 f(2)=0$. Clearly, the function $f(x) \\equiv 0$ satisfies the problem condition, which provides the first of the two answers.\n\nCase 2: All orbits are infinite.\n\nSince the orbits $\\mathcal{O}(a)$ and $\\mathcal{O}(a-1)$ differ by finitely many terms for all $a \\in \\mathbb{Z}$, each two orbits $\\mathcal{O}(a)$ and $\\mathcal{O}(b)$ have infinitely many common terms for arbitrary $a, b \\in \\mathbb{Z}$.\n\nFor a minute, fix any $a, b \\in \\mathbb{Z}$. We claim that all pairs $(n, m)$ of nonnegative integers such that $f^{n}(a)=f^{m}(b)$ have the same difference $n-m$. Arguing indirectly, we have $f^{n}(a)=f^{m}(b)$ and $f^{p}(a)=f^{q}(b)$ with, say, $n-m>p-q$, then $f^{p+m+k}(b)=f^{p+n+k}(a)=f^{q+n+k}(b)$, for all nonnegative integers $k$. This means that $f^{\\ell+(n-m)-(p-q)}(b)=f^{\\ell}(b)$ for all sufficiently large $\\ell$, i.e., that the sequence $\\left(f^{n}(b)\\right)$ is eventually periodic, so $\\mathcal{O}(b)$ is finite, which is impossible.\n\nNow, for every $a, b \\in \\mathbb{Z}$, denote the common difference $n-m$ defined above by $X(a, b)$. We have $X(a-1, a)=1$ by (1). Trivially, $X(a, b)+X(b, c)=X(a, c)$, as if $f^{n}(a)=f^{m}(b)$ and $f^{p}(b)=f^{q}(c)$, then $f^{p+n}(a)=f^{p+m}(b)=f^{q+m}(c)$. These two properties imply that $X(a, b)=b-a$ for all $a, b \\in \\mathbb{Z}$. But (1) yields $f^{a^{2}+1}(f(a-1))=f^{a^{2}}(f(a))$, so\n\n$$\n1=X(f(a-1), f(a))=f(a)-f(a-1) \\quad \\text { for all } a \\in \\mathbb{Z} .\n$$\n\nRecalling that $f(-1)=0$, we conclude by (two-sided) induction on $x$ that $f(x)=x+1$ for all $x \\in \\mathbb{Z}$\n\nFinally, the obtained function also satisfies the assumption. Indeed, $f^{n}(x)=x+n$ for all $n \\geqslant 0$, so\n\n$$\nf^{a^{2}+b^{2}}(a+b)=a+b+a^{2}+b^{2}=a f(a)+b f(b)\n$$"
  },
  {
    "id": "fimo_2020_algebra_p7",
    "enunciado": "Let $n$ and $k$ be positive integers. Prove that for $a_{1}, \\ldots, a_{n} \\in\\left[1,2^{k}\\right]$ one has\n\n$$\n\\sum_{i=1}^{n} \\frac{a_{i}}{\\sqrt{a_{1}^{2}+\\ldots+a_{i}^{2}}} \\leqslant 4 \\sqrt{k n}\n$$",
    "solucao": "Partition the set of indices $\\{1,2, \\ldots, n\\}$ into disjoint subsets $M_{1}, M_{2}, \\ldots, M_{k}$ so that $a_{\\ell} \\in\\left[2^{j-1}, 2^{j}\\right]$ for $\\ell \\in M_{j}$. Then, if $\\left|M_{j}\\right|=: p_{j}$, we have\n\n$$\n\\sum_{\\ell \\in M_{j}} \\frac{a_{\\ell}}{\\sqrt{a_{1}^{2}+\\ldots+a_{\\ell}^{2}}} \\leqslant \\sum_{i=1}^{p_{j}} \\frac{2^{j}}{2^{j-1} \\sqrt{i}}=2 \\sum_{i=1}^{p_{j}} \\frac{1}{\\sqrt{i}}\n$$\n\nwhere we used that $a_{\\ell} \\leqslant 2^{j}$ and in the denominator every index from $M_{j}$ contributes at least $\\left(2^{j-1}\\right)^{2}$. Now, using $\\sqrt{i}-\\sqrt{i-1}=\\frac{1}{\\sqrt{i}+\\sqrt{i-1}} \\geqslant \\frac{1}{2 \\sqrt{i}}$, we deduce that\n\n$$\n\\sum_{\\ell \\in M_{j}} \\frac{a_{\\ell}}{\\sqrt{a_{1}^{2}+\\ldots+a_{\\ell}^{2}}} \\leqslant 2 \\sum_{i=1}^{p_{j}} \\frac{1}{\\sqrt{i}} \\leqslant 2 \\sum_{i=1}^{p_{j}} 2(\\sqrt{i}-\\sqrt{i-1})=4 \\sqrt{p_{j}} .\n$$\n\nTherefore, summing over $j=1, \\ldots, k$ and using the QM-AM inequality, we obtain\n\n$$\n\\sum_{\\ell=1}^{n} \\frac{a_{\\ell}}{\\sqrt{a_{1}^{2}+\\ldots+a_{\\ell}^{2}}} \\leqslant 4 \\sum_{j=1}^{k} \\sqrt{\\left|M_{j}\\right|} \\leqslant 4 \\sqrt{k \\sum_{j=1}^{k}\\left|M_{j}\\right|}=4 \\sqrt{k n} .\n$$"
  },
  {
    "id": "fimo_2020_algebra_p8",
    "enunciado": "Let $\\mathbb{R}^{+}$be the set of positive real numbers. Determine all functions $f: \\mathbb{R}^{+} \\rightarrow \\mathbb{R}^{+}$ such that, for all positive real numbers $x$ and $y$,\n\n$$\nf(x+f(x y))+y=f(x) f(y)+1\n$$\n\nThe final answer is $f(x)=x+1$.",
    "solucao": "A straightforward check shows that $f(x)=x+1$ satisfies $(*)$. We divide the proof of the converse statement into a sequence of steps.\n\nStep 1: $f$ is injective.\n\nPut $x=1$ in $(*)$ and rearrange the terms to get\n\n$$\ny=f(1) f(y)+1-f(1+f(y))\n$$\n\nTherefore, if $f\\left(y_{1}\\right)=f\\left(y_{2}\\right)$, then $y_{1}=y_{2}$.\n\nStep 2: $f$ is (strictly) monotone increasing.\n\nFor any fixed $y \\in \\mathbb{R}^{+}$, the function\n\n$$\ng(x):=f(x+f(x y))=f(x) f(y)+1-y\n$$\n\nis injective by Step 1. Therefore, $x_{1}+f\\left(x_{1} y\\right) \\neq x_{2}+f\\left(x_{2} y\\right)$ for all $y, x_{1}, x_{2} \\in \\mathbb{R}^{+}$with $x_{1} \\neq x_{2}$. Plugging in $z_{i}=x_{i} y$, we arrive at\n\n$$\n\\frac{z_{1}-z_{2}}{y} \\neq f\\left(z_{2}\\right)-f\\left(z_{1}\\right), \\quad \\text { or } \\quad \\frac{1}{y} \\neq \\frac{f\\left(z_{2}\\right)-f\\left(z_{1}\\right)}{z_{1}-z_{2}}\n$$\n\nfor all $y, z_{1}, z_{2} \\in \\mathbb{R}^{+}$with $z_{1} \\neq z_{2}$. This means that the right-hand side of the rightmost relation is always non-positive, i.e., $f$ is monotone non-decreasing. Since $f$ is injective, it is strictly monotone.\n\nStep 3: There exist constants $a$ and $b$ such that $f(y)=a y+b$ for all $y \\in \\mathbb{R}^{+}$.\n\nSince $f$ is monotone and bounded from below by 0 , for each $x_{0} \\geqslant 0$, there exists a right limit $\\lim _{x \\searrow x_{0}} f(x) \\geqslant 0$. Put $p=\\lim _{x \\searrow 0} f(x)$ and $q=\\lim _{x \\searrow p} f(x)$.\n\nFix an arbitrary $y$ and take the limit of $(*)$ as $x \\searrow 0$. We have $f(x y) \\searrow p$ and hence $f(x+f(x y)) \\searrow q$; therefore, we obtain\n\n$$\nq+y=p f(y)+1, \\quad \\text { or } \\quad f(y)=\\frac{q+y-1}{p} .\n$$\n\n(Notice that $p \\neq 0$, otherwise $q+y=1$ for all $y$, which is absurd.) The claim is proved. Step 4: $f(x)=x+1$ for all $x \\in \\mathbb{R}^{+}$.\n\nBased on the previous step, write $f(x)=a x+b$. Putting this relation into $(*)$ we get\n\n$$\na(x+a x y+b)+b+y=(a x+b)(a y+b)+1,\n$$\n\nwhich can be rewritten as\n\n$$\n(a-a b) x+(1-a b) y+a b+b-b^{2}-1=0 \\quad \\text { for all } x, y \\in \\mathbb{R}^{+} .\n$$\n\nThis identity may hold only if all the coefficients are 0, i.e.,\n\n$$\na-a b=1-a b=a b+b-b^{2}-1=0 .\n$$\n\nHence, $a=b=1$."
  },
  {
    "id": "fimo_2020_number_theory_p1",
    "enunciado": "Given a positive integer $k$, show that there exists a prime $p$ such that one can choose distinct integers $a_{1}, a_{2}, \\ldots, a_{k+3} \\in\\{1,2, \\ldots, p-1\\}$ such that $p$ divides $a_{i} a_{i+1} a_{i+2} a_{i+3}-i$ for all $i=1,2, \\ldots, k$.",
    "solucao": "First we choose distinct positive rational numbers $r_{1}, \\ldots, r_{k+3}$ such that\n\n$$\nr_{i} r_{i+1} r_{i+2} r_{i+3}=i \\text { for } 1 \\leqslant i \\leqslant k .\n$$\n\nLet $r_{1}=x, r_{2}=y, r_{3}=z$ be some distinct primes greater than $k$; the remaining terms satisfy $r_{4}=\\frac{1}{r_{1} r_{2} r_{3}}$ and $r_{i+4}=\\frac{i+1}{i} r_{i}$. It follows that if $r_{i}$ are represented as irreducible fractions, the numerators are divisible by $x$ for $i \\equiv 1(\\bmod 4)$, by $y$ for $i \\equiv 2(\\bmod 4)$, by $z$ for $i \\equiv 3(\\bmod 4)$ and by none for $i \\equiv 0(\\bmod 4)$. Notice that $r_{i}<r_{i+4}$; thus the sequences $r_{1}<r_{5}<r_{9}<\\ldots$, $r_{2}<r_{6}<r_{10}<\\ldots, r_{3}<r_{7}<r_{11}<\\ldots, r_{4}<r_{8}<r_{12}<\\ldots$ are increasing and have no common terms, that is, all $r_{i}$ are distinct.\n\nIf each $r_{i}$ is represented by an irreducible fraction $\\frac{u_{i}}{v_{i}}$, choose a prime $p$ which divides neither $v_{i}, 1 \\leqslant i \\leqslant k+1$, nor $v_{i} v_{j}\\left(r_{i}-r_{j}\\right)=v_{j} u_{i}-v_{i} u_{j}$ for $i<j$, and define $a_{i}$ by the congruence $a_{i} v_{i} \\equiv u_{i}(\\bmod p)$. Since $r_{i} r_{i+1} r_{i+2} r_{i+3}=i$, we have\n\n$$\n\\begin{aligned}\ni v_{i} v_{i+1} v_{i+2} v_{i+3}=r_{i} v_{i} r_{i+1} v_{i+1} r_{i+2} & v_{i+2} r_{i+3} v_{i+3} \\\\\n& =u_{i} u_{i+1} u_{i+2} u_{i+3} \\equiv a_{i} v_{i} a_{i+1} v_{i+1} a_{i+2} v_{i+2} a_{i+3} v_{i+3} \\quad(\\bmod p)\n\\end{aligned}\n$$\n\nand therefore $a_{i} a_{i+1} a_{i+2} a_{i+3} \\equiv i(\\bmod p)$ for $1 \\leqslant i \\leqslant k$.\n\nIf $a_{i} \\equiv a_{j}(\\bmod p)$, then $u_{i} v_{j} \\equiv a_{i} v_{i} v_{j} \\equiv u_{j} v_{i}(\\bmod p)$, a contradiction."
  },
  {
    "id": "fimo_2020_number_theory_p2",
    "enunciado": "For each prime $p$, there is a kingdom of $p$-Landia consisting of $p$ islands numbered $1,2, \\ldots, p$. Two distinct islands numbered $n$ and $m$ are connected by a bridge if and only if $p$ divides $\\left(n^{2}-m+1\\right)\\left(m^{2}-n+1\\right)$. The bridges may pass over each other, but cannot cross. Prove that for infinitely many $p$ there are two islands in $p$-Landia not connected by a chain of bridges.",
    "solucao": "We prove that for each prime $p>3$ dividing a number of the form $x^{2}-x+1$ with integer $x$ there are two unconnected islands in $p$-Landia.\n\nFor brevity's sake, when a bridge connects the islands numbered $m$ and $n$, we shall speak simply that it connects $m$ and $n$.\n\nA bridge connects $m$ and $n$ if $n \\equiv m^{2}+1(\\bmod p)$ or $m \\equiv n^{2}+1(\\bmod p)$. If $m^{2}+1 \\equiv n$ $(\\bmod p)$, we draw an arrow starting at $m$ on the bridge connecting $m$ and $n$. Clearly only one arrow starts at $m$ if $m^{2}+1 \\not \\equiv m(\\bmod p)$, and no arrows otherwise. The total number of bridges does not exceed the total number of arrows.\n\nSuppose $x^{2}-x+1 \\equiv 0(\\bmod p)$. We may assume that $1 \\leqslant x \\leqslant p$; then there is no arrow starting at $x$. Since $(1-x)^{2}-(1-x)+1=x^{2}-x+1,(p+1-x)^{2}+1 \\equiv(p+1-x)(\\bmod p)$, and there is also no arrow starting at $p+1-x$. If $x=p+1-x$, that is, $x=\\frac{p+1}{2}$, then $4\\left(x^{2}-x+1\\right)=p^{2}+3$ and therefore $x^{2}-x+1$ is not divisible by $p$. Thus the islands $x$ and $p+1-x$ are different, and no arrows start at either of them. It follows that the total number of bridges in $p$-Landia does not exceed $p-2$.\n\nLet $1,2, \\ldots, p$ be the vertices of a graph $G_{p}$, where an edge connects $m$ and $n$ if and only if there is a bridge between $m$ and $n$. The number of vertices of $G_{p}$ is $p$ and the number of edges is less than $p-1$. This means that the graph is not connected, which means that there are two islands not connected by a chain of bridges.\n\nIt remains to prove that there are infinitely many primes $p$ dividing $x^{2}-x+1$ for some integer $x$. Let $p_{1}, p_{2}, \\ldots, p_{k}$ be any finite set of such primes. The number $\\left(p_{1} p_{2} \\cdot \\ldots \\cdot p_{k}\\right)^{2}-p_{1} p_{2} \\cdot \\ldots \\cdot p_{k}+1$ is greater than 1 and not divisible by any $p_{i}$; therefore it has another prime divisor with the required property."
  },
  {
    "id": "fimo_2020_number_theory_p3",
    "enunciado": "Let $n$ be an integer with $n \\geqslant 2$. Does there exist a sequence $\\left(a_{1}, \\ldots, a_{n}\\right)$ of positive integers with not all terms being equal such that the arithmetic mean of every two terms is equal to the geometric mean of some (one or more) terms in this sequence?\n\nThe final answer is that no such sequence exists.",
    "solucao": "Suppose that $a_{1}, \\ldots, a_{n}$ satisfy the required properties. Let $d=\\operatorname{gcd}\\left(a_{1} \\ldots, a_{n}\\right)$. If $d>1$ then replace the numbers $a_{1}, \\ldots, a_{n}$ by $\\frac{a_{1}}{d}, \\ldots, \\frac{a_{n}}{d}$; all arithmetic and all geometric means will be divided by $d$, so we obtain another sequence satisfying the condition. Hence, without loss of generality, we can assume that $\\operatorname{gcd}\\left(a_{1} \\ldots, a_{n}\\right)=1$.\n\nWe show two numbers, $a_{m}$ and $a_{k}$ such that their arithmetic mean, $\\frac{a_{m}+a_{k}}{2}$ is different from the geometric mean of any (nonempty) subsequence of $a_{1} \\ldots, a_{n}$. That proves that there cannot exist such a sequence.\n\nChoose the index $m \\in\\{1, \\ldots, n\\}$ such that $a_{m}=\\max \\left(a_{1}, \\ldots, a_{n}\\right)$. Note that $a_{m} \\geqslant 2$, because $a_{1}, \\ldots, a_{n}$ are not all equal. Let $p$ be a prime divisor of $a_{m}$.\n\nLet $k \\in\\{1, \\ldots, n\\}$ be an index such that $a_{k}=\\max \\left\\{a_{i}: p \\nmid a_{i}\\right\\}$. Due to $\\operatorname{gcd}\\left(a_{1} \\ldots, a_{n}\\right)=1$, not all $a_{i}$ are divisible by $p$, so such a $k$ exists. Note that $a_{m}>a_{k}$ because $a_{m} \\geqslant a_{k}, p \\mid a_{m}$ and $p \\nmid a_{k}$.\n\nLet $b=\\frac{a_{m}+a_{k}}{2}$; we will show that $b$ cannot be the geometric mean of any subsequence of $a_{1}, \\ldots, a_{n}$.\n\nConsider the geometric mean, $g=\\sqrt[t]{a_{i_{1}} \\cdot \\ldots \\cdot a_{i_{t}}}$ of an arbitrary subsequence of $a_{1}, \\ldots, a_{n}$. If none of $a_{i_{1}}, \\ldots, a_{i_{t}}$ is divisible by $p$, then they are not greater than $a_{k}$, so\n\n$$\ng=\\sqrt[t]{a_{i_{1}} \\cdot \\ldots \\cdot a_{i_{t}}} \\leqslant a_{k}<\\frac{a_{m}+a_{k}}{2}=b\n$$\n\nand therefore $g \\neq b$.\n\nOtherwise, if at least one of $a_{i_{1}}, \\ldots, a_{i_{t}}$ is divisible by $p$, then $2 g=2 \\sqrt[t]{a_{i_{1}} \\cdot \\ldots \\cdot a_{i_{t}}}$ is either not an integer or is divisible by $p$, while $2 b=a_{m}+a_{k}$ is an integer not divisible by $p$, so $g \\neq b$ again."
  },
  {
    "id": "fimo_2020_number_theory_p4_1",
    "enunciado": "For any odd prime $p$ and any integer $n$, let $d_{p}(n) \\in\\{0,1, \\ldots, p-1\\}$ denote the remainder when $n$ is divided by $p$. We say that $\\left(a_{0}, a_{1}, a_{2}, \\ldots\\right)$ is a $p$-sequence, if $a_{0}$ is a positive integer coprime to $p$, and $a_{n+1}=a_{n}+d_{p}\\left(a_{n}\\right)$ for $n \\geqslant 0$.\n\nDo there exist infinitely many primes $p$ for which there exist $p$-sequences $\\left(a_{0}, a_{1}, a_{2}, \\ldots\\right)$ and $\\left(b_{0}, b_{1}, b_{2}, \\ldots\\right)$ such that $a_{n}>b_{n}$ for infinitely many $n$, and $b_{n}>a_{n}$ for infinitely many $n$ ?\n\nThe final answer is yes.",
    "solucao": "Fix some odd prime $p$, and let $T$ be the smallest positive integer such that $p \\mid 2^{T}-1$; in other words, $T$ is the multiplicative order of 2 modulo $p$.\n\nConsider any $p$-sequence $\\left(x_{n}\\right)=\\left(x_{0}, x_{1}, x_{2}, \\ldots\\right)$. Obviously, $x_{n+1} \\equiv 2 x_{n}(\\bmod p)$ and therefore $x_{n} \\equiv 2^{n} x_{0}(\\bmod p)$. This yields $x_{n+T} \\equiv x_{n}(\\bmod p)$ and therefore $d\\left(x_{n+T}\\right)=d\\left(x_{n}\\right)$ for all $n \\geqslant 0$. It follows that the sum $d\\left(x_{n}\\right)+d\\left(x_{n+1}\\right)+\\ldots+d\\left(x_{n+T-1}\\right)$ does not depend on $n$ and is thus a function of $x_{0}$ (and $p$ ) only; we shall denote this sum by $S_{p}\\left(x_{0}\\right)$, and extend the function $S_{p}(\\cdot)$ to all (not necessarily positive) integers. Therefore, we have $x_{n+k T}=x_{n}+k S_{p}\\left(x_{0}\\right)$ for all positive integers $n$ and $k$. Clearly, $S_{p}\\left(x_{0}\\right)=S_{p}\\left(2^{t} x_{0}\\right)$ for every integer $t \\geqslant 0$.\n\nIn both parts, we use the notation\n\n$$\nS_{p}^{+}=S_{p}(1)=\\sum_{i=0}^{T-1} d_{p}\\left(2^{i}\\right) \\quad \\text { and } \\quad S_{p}^{-}=S_{p}(-1)=\\sum_{i=0}^{T-1} d_{p}\\left(p-2^{i}\\right) .\n$$\n\nLet $q>3$ be a prime and $p$ a prime divisor of $2^{q}+1$ that is greater than 3 . We will show that $p$ is suitable for part (a). Notice that $9 \\nmid 2^{q}+1$, so that such a $p$ exists. Moreover, for any two odd primes $q<r$ we have $\\operatorname{gcd}\\left(2^{q}+1,2^{r}+1\\right)=2^{\\operatorname{gcd}(q, r)}+1=3$, thus there exist infinitely many such primes $p$.\n\nFor the chosen $p$, we have $T=2 q$. Since $2^{q} \\equiv-1(\\bmod p)$, we have $S_{p}^{+}=S_{p}^{-}$. Now consider the $p$-sequences $\\left(a_{n}\\right)$ and $\\left(b_{n}\\right)$ with $a_{0}=p+1$ and $b_{0}=p-1$; we claim that these sequences satisfy the required conditions. We have $a_{0}>b_{0}$ and $a_{1}=p+2<b_{1}=2 p-2$. It follows then that\n\n$$\na_{k \\cdot 2 q}=a_{0}+k S_{p}^{+}>b_{0}+k S_{p}^{+}=b_{k \\cdot 2 q} \\quad \\text { and } \\quad a_{k \\cdot 2 q+1}=a_{1}+k S_{p}^{+}<b_{1}+k S_{p}^{+}=b_{k \\cdot 2 q+1}\n$$\n\nfor all $k=0,1, \\ldots$, as desired."
  },
  {
    "id": "fimo_2020_number_theory_p4_2",
    "enunciado": "For any odd prime $p$ and any integer $n$, let $d_{p}(n) \\in\\{0,1, \\ldots, p-1\\}$ denote the remainder when $n$ is divided by $p$. We say that $\\left(a_{0}, a_{1}, a_{2}, \\ldots\\right)$ is a $p$-sequence, if $a_{0}$ is a positive integer coprime to $p$, and $a_{n+1}=a_{n}+d_{p}\\left(a_{n}\\right)$ for $n \\geqslant 0$.\n\nDo there exist infinitely many primes $p$ for which there exist $p$-sequences $\\left(a_{0}, a_{1}, a_{2}, \\ldots\\right)$ and $\\left(b_{0}, b_{1}, b_{2}, \\ldots\\right)$ such that $a_{0}<b_{0}$, but $a_{n}>b_{n}$ for all $n \\geqslant 1$ ?\n\nThe final answer is yes.",
    "solucao": "Fix some odd prime $p$, and let $T$ be the smallest positive integer such that $p \\mid 2^{T}-1$; in other words, $T$ is the multiplicative order of 2 modulo $p$.\n\nConsider any $p$-sequence $\\left(x_{n}\\right)=\\left(x_{0}, x_{1}, x_{2}, \\ldots\\right)$. Obviously, $x_{n+1} \\equiv 2 x_{n}(\\bmod p)$ and therefore $x_{n} \\equiv 2^{n} x_{0}(\\bmod p)$. This yields $x_{n+T} \\equiv x_{n}(\\bmod p)$ and therefore $d\\left(x_{n+T}\\right)=d\\left(x_{n}\\right)$ for all $n \\geqslant 0$. It follows that the sum $d\\left(x_{n}\\right)+d\\left(x_{n+1}\\right)+\\ldots+d\\left(x_{n+T-1}\\right)$ does not depend on $n$ and is thus a function of $x_{0}$ (and $p$ ) only; we shall denote this sum by $S_{p}\\left(x_{0}\\right)$, and extend the function $S_{p}(\\cdot)$ to all (not necessarily positive) integers. Therefore, we have $x_{n+k T}=x_{n}+k S_{p}\\left(x_{0}\\right)$ for all positive integers $n$ and $k$. Clearly, $S_{p}\\left(x_{0}\\right)=S_{p}\\left(2^{t} x_{0}\\right)$ for every integer $t \\geqslant 0$.\n\nIn both parts, we use the notation\n\n$$\nS_{p}^{+}=S_{p}(1)=\\sum_{i=0}^{T-1} d_{p}\\left(2^{i}\\right) \\quad \\text { and } \\quad S_{p}^{-}=S_{p}(-1)=\\sum_{i=0}^{T-1} d_{p}\\left(p-2^{i}\\right) .\n$$\n\nLet $q$ be an odd prime and $p$ a prime divisor of $2^{q}-1$; thus we have $T=q$. We will show that $p$ is suitable for part (b). Notice that the numbers of the form $2^{q}-1$ are pairwise coprime (since $\\operatorname{gcd}\\left(2^{q}-1,2^{r}-1\\right)=2^{\\operatorname{gcd}(q, r)}-1=1$ for any two distinct primes $q$ and $r$ ), thus there exist infinitely many such primes $p$. Notice that $d_{p}(x)+d_{p}(p-x)=p$ for all $x$ with $p \\nmid x$, so that the sum $S_{p}^{+}+S_{p}^{-}=p q$ is odd, which yields $S_{p}^{+}=S_{p}(1) \\neq S_{p}(-1)=S_{p}^{-}$.\n\nAssume that $\\left(x_{n}\\right)$ and $\\left(y_{n}\\right)$ are two $p$-sequences with $S_{p}\\left(x_{0}\\right)>S_{p}\\left(y_{0}\\right)$ but $x_{0}<y_{0}$. The first condition yields that\n\n$$\nx_{M q+r}-y_{M q+r}=\\left(x_{r}-y_{r}\\right)+M\\left(S_{p}\\left(x_{0}\\right)-S_{p}\\left(y_{0}\\right)\\right) \\geqslant\\left(x_{r}-y_{r}\\right)+M\n$$\n\nfor all nonnegative integers $M$ and every $r=0,1, \\ldots, q-1$. Thus, we have $x_{n}>y_{n}$ for every $n \\geqslant q+q \\cdot \\max \\left\\{y_{r}-x_{r}: r=0,1, \\ldots, q-1\\right\\}$. Now, since $x_{0}<y_{0}$, there exists the largest $n_{0}$ with $x_{n_{0}}<y_{n_{0}}$. In this case the $p$-sequences $a_{n}=x_{n-n_{0}}$ and $b_{n}=y_{n-n_{0}}$ possess the desired property (notice here that $x_{n} \\neq y_{n}$ for all $n \\geqslant 0$, as otherwise we would have $\\left.S_{p}\\left(x_{0}\\right)=S_{p}\\left(x_{n}\\right)=S_{p}\\left(y_{n}\\right)=S_{p}\\left(y_{0}\\right)\\right)$. It remains to find $p$-sequences $\\left(x_{n}\\right)$ and $\\left(y_{n}\\right)$ satisfying the two conditions. Recall that $S_{p}^{+} \\neq S_{p}^{-}$. Now, if $S_{p}^{+}>S_{p}^{-}$, then we can put $x_{0}=1$ and $y_{0}=p-1$. Otherwise, if $S_{p}^{+}<S_{p}^{-}$, then we put $x_{0}=p-1$ and $y_{0}=p+1$."
  },
  {
    "id": "fimo_2020_number_theory_p5",
    "enunciado": "Determine all functions $f$ defined on the set of all positive integers and taking non-negative integer values, satisfying the three conditions:\n\n(i) $f(n) \\neq 0$ for at least one $n$;\n\n(ii) $f(x y)=f(x)+f(y)$ for every positive integers $x$ and $y$;\n\n(iii) there are infinitely many positive integers $n$ such that $f(k)=f(n-k)$ for all $k<n$.\n\nThe final answer is that the sought functions are those of the form $f(n)=c \\cdot \\nu_{p}(n)$, where $p$ is some prime, $c$ is a nonnegative integer, and $\\nu_{p}(n)$ denotes the exponent of $p$ in the prime decomposition of $n$.\n",
    "solucao": "If a number $n$ is a product of primes, $n=p_{1} p_{2} \\cdot \\ldots \\cdot p_{k}$, then\n\n$$\nf(n)=f\\left(p_{1}\\right)+\\ldots+f\\left(p_{k}\\right)\n$$\n\nin particular, $f(1)=0$ (since $f(1)=f(1)+f(1)$ ).\n\nIt is also clear that $f(n)=0$ implies $f(p)=0$ for all primes $p$ dividing $n$.\n\nLet us call positive integer $n \\operatorname{good}$ if $f(k)=f(n-k)$ for $0<k<n$. If $n$ is good then each its divisor $d$ is also good; indeed, if $n=d m$ then\n\n$$\nf(k)=f(m k)-f(m)=f(n-m k)-f(m)=f(m(d-k))-f(m)=f(d-k)\n$$\n\nfor $0<k<d$. Thus, good numbers are products of good primes.\n\nIt follows immediately from (i) that there exists a prime $p$ such that $f(p) \\neq 0$; let $p$ be the smallest such prime. Then $f(r)=0$ for all $r<p$ (since all prime divisors of $r<p$ are less than $p$ ). Now every good number $n>p$ must be divisible by $p$. Indeed, if $n=p k+r$ is a good number, $k>0,0<r<p$, then $f(p) \\leqslant f(p k)=f(n-p k)=f(r)=0$, a contradiction. Since any divisor of a good number is also good, this means that if a divisor $r$ of a good number is not divisible by $p$, it is less than $p$. Thus all good numbers have the form $r \\cdot p^{k}$ with $r<p$. The condition (iii) implies that $k$ can be arbitrarily large, consequently all powers of $p$ are good.\n\nIf $q \\neq p$ is a prime, $p^{q-1}-1$ is divisible by $q$ and $p^{q-1}$ is good. Then $f(q) \\leqslant f\\left(p^{q-1}-1\\right)=$ $f(1)=0$, that is, $f(q)=0$.\n\nNow we see that $f(n)=\\nu_{p}(n) \\cdot c$, where $c=f(p)$. The conditions (i) and (ii) for all such functions with $c \\neq 0$ are obvious; the condition (iii) holds for all $n=p^{m}$, since $\\nu_{p}\\left(p^{m}-k\\right)=\\nu_{p}(k)$ when $0<k<p^{m}$."
  },
  {
    "id": "fimo_2020_number_theory_p6",
    "enunciado": "For a positive integer $n$, let $d(n)$ be the number of positive divisors of $n$, and let $\\varphi(n)$ be the number of positive integers not exceeding $n$ which are coprime to $n$. Does there exist a constant $C$ such that\n\n$$\n\\frac{\\varphi(d(n))}{d(\\varphi(n))} \\leqslant C\n$$\n\nfor all $n \\geqslant 1$ ?\n\nThe final answer is no, such constant does not exist.",
    "solucao": "Fix $N>1$, let $p_{1}, \\ldots, p_{k}$ be all primes between 1 and $N$ and $p_{k+1}, \\ldots, p_{k+s}$ be all primes between $N+1$ and $2 N$. Since for $j \\leqslant k+s$ all prime divisors of $p_{j}-1$ do not exceed $N$, we have\n\n$$\n\\prod_{j=1}^{k+s}\\left(p_{j}-1\\right)=\\prod_{i=1}^{k} p_{i}^{c_{i}}\n$$\n\nwith some fixed exponents $c_{1}, \\ldots, c_{k}$. Choose a huge prime number $q$ and consider a number\n\n$$\nn=\\left(p_{1} \\cdot \\ldots \\cdot p_{k}\\right)^{q-1} \\cdot\\left(p_{k+1} \\cdot \\ldots \\cdot p_{k+s}\\right)\n$$\n\nThen\n\n$$\n\\varphi(d(n))=\\varphi\\left(q^{k} \\cdot 2^{s}\\right)=q^{k-1}(q-1) 2^{s-1}\n$$\n\nand\n\n$$\nd(\\varphi(n))=d\\left(\\left(p_{1} \\cdot \\ldots \\cdot p_{k}\\right)^{q-2} \\prod_{i=1}^{k+s}\\left(p_{i}-1\\right)\\right)=d\\left(\\prod_{i=1}^{k} p_{i}^{q-2+c_{i}}\\right)=\\prod_{i=1}^{k}\\left(q-1+c_{i}\\right),\n$$\n\nso\n\n$$\n\\frac{\\varphi(d(n))}{d(\\varphi(n))}=\\frac{q^{k-1}(q-1) 2^{s-1}}{\\prod_{i=1}^{k}\\left(q-1+c_{i}\\right)}=2^{s-1} \\cdot \\frac{q-1}{q} \\cdot \\prod_{i=1}^{k} \\frac{q}{q-1+c_{i}}\n$$\n\nwhich can be made arbitrarily close to $2^{s-1}$ by choosing $q$ large enough. It remains to show that $s$ can be arbitrarily large, i.e. that there can be arbitrarily many primes between $N$ and $2 N$.\n\nThis follows, for instance, from the well-known fact that $\\sum \\frac{1}{p}=\\infty$, where the sum is taken over the set $\\mathbb{P}$ of prime numbers. Indeed, if, for some constant $C$, there were always at most $C$ primes between $2^{\\ell}$ and $2^{\\ell+1}$, we would have\n\n$$\n\\sum_{p \\in \\mathbb{P}} \\frac{1}{p}=\\sum_{\\ell=0}^{\\infty} \\sum_{\\substack{p \\in \\mathbb{P} \\\\ p \\in\\left[2^{\\ell}, 2^{\\ell+1}\\right)}} \\frac{1}{p} \\leqslant \\sum_{\\ell=0}^{\\infty} \\frac{C}{2^{\\ell}}<\\infty\n$$\n\nwhich is a contradiction."
  },
  {
    "id": "fimo_2020_number_theory_p7",
    "enunciado": "Let $\\mathcal{S}$ be a set consisting of $n \\geqslant 3$ positive integers, none of which is a sum of two other distinct members of $\\mathcal{S}$. Prove that the elements of $\\mathcal{S}$ may be ordered as $a_{1}, a_{2}, \\ldots, a_{n}$ so that $a_{i}$ does not divide $a_{i-1}+a_{i+1}$ for all $i=2,3, \\ldots, n-1$.",
    "solucao": "We call a set $\\mathcal{S}$ of positive integers good if no its element is a sum of two other distinct members of $\\mathcal{S}$. We will use the following simple observation.\n\nObservation A. If $a, b$, and $c$ are three distinct elements of a good set $\\mathcal{S}$ with $b>a, c$, then $b \\nmid a+c$. Otherwise, since $b \\neq a+c$, we would have $b \\leqslant(a+c) / 2<\\max \\{a, c\\}$.\n\nWe prove the following stronger statement.\n\nClaim. Let $\\mathcal{S}$ be a good set consisting of $n \\geqslant 2$ positive integers. Then the elements of $\\mathcal{S}$ may be ordered as $a_{1}, a_{2}, \\ldots, a_{n}$ so that $a_{i} \\nmid a_{i-1}+a_{i+1}$ and $a_{i} \\nmid a_{i-1}-a_{i+1}$, for all $i=2,3, \\ldots, n-1$.\n\nProof. Say that the ordering $a_{1}, \\ldots, a_{n}$ of $\\mathcal{S}$ is nice if it satisfies the required property.\n\nWe proceed by induction on $n$. The base case $n=2$ is trivial, as there are no restrictions on the ordering.\n\nTo perform the step of induction, suppose that $n \\geqslant 3$. Let $a=\\max \\mathcal{S}$, and set $\\mathcal{T}=\\mathcal{S} \\backslash\\{a\\}$. Use the inductive hypothesis to find a nice ordering $b_{1}, \\ldots, b_{n-1}$ of $\\mathcal{T}$. We will show that a may be inserted into this sequence so as to reach a nice ordering of $\\mathcal{S}$. In other words, we will show that there exists a $j \\in\\{1,2, \\ldots, n\\}$ such that the ordering\n\n$$\nN_{j}=\\left(b_{1}, \\ldots, b_{j-1}, a, b_{j}, b_{j+1}, \\ldots, b_{n-1}\\right)\n$$\n\nis nice.\n\nAssume that, for some $j$, the ordering $N_{j}$ is not nice, so that some element $x$ in it divides either the sum or the difference of two adjacent ones. This did not happen in the ordering of $\\mathcal{T}$, hence $x \\in\\left\\{b_{j-1}, a, b_{j}\\right\\}$ (if, say, $b_{j-1}$ does not exist, then $x \\in\\left\\{a, b_{j}\\right\\}$; a similar agreement is applied hereafter). But the case $x=a$ is impossible: $a$ cannot divide $b_{j-1}-b_{j}$, since $0<\\left|b_{j-1}-b_{j}\\right|<a$, while $a \\nmid b_{j-1}+b_{j}$ by Observation A. Therefore $x \\in\\left\\{b_{j-1}, b_{j}\\right\\}$. In this case, assign the number $x$ to the index $j$.\n\nSuppose now that none of the $N_{j}$ is nice. Since there are $n$ possible indices $j$, and only $n-1$ elements in $\\mathcal{T}$, one of those elements $\\left(\\right.$ say, $\\left.b_{k}\\right)$ is assigned to two different indices, which then should equal $k$ and $k+1$. This means that $b_{k}$ divides the numbers $b_{k-1}+\\varepsilon_{1} a$ and $a+\\varepsilon_{2} b_{k+1}$, for some signs $\\varepsilon_{1}, \\varepsilon_{2} \\in\\{-1,1\\}$. But then\n\n$$\nb_{k-1} \\equiv-\\varepsilon_{1} a \\equiv \\varepsilon_{1} \\varepsilon_{2} b_{k+1} \\quad\\left(\\bmod b_{k}\\right)\n$$\n\nand therefore $b_{k} \\mid b_{k-1}-\\varepsilon_{1} \\varepsilon_{2} b_{k+1}$, which means that the ordering of $\\mathcal{T}$ was not nice. This contradiction proves the step of induction."
  },
  {
    "id": "fimo_2021_algebra_p1",
    "enunciado": "Let $n$ be an integer, and let $A$ be a subset of $\\left\\{0,1,2,3, \\ldots, 5^{n}\\right\\}$ consisting of $4 n+2$ numbers. Prove that there exist $a, b, c \\in A$ such that $a<b<c$ and $c+2 a>3 b$.",
    "solucao": "(By contradiction) Suppose that there exist $4 n+2$ non-negative integers $x_{0}<$ $x_{1}<\\cdots<x_{4 n+1}$ that violate the problem statement. Then in particular $x_{4 n+1}+2 x_{i} \\leqslant 3 x_{i+1}$ for all $i=0, \\ldots, 4 n-1$, which gives\n\n$$\nx_{4 n+1}-x_{i} \\geqslant \\frac{3}{2}\\left(x_{4 n+1}-x_{i+1}\\right)\n$$\n\nBy a trivial induction we then get\n\n$$\nx_{4 n+1}-x_{i} \\geqslant\\left(\\frac{3}{2}\\right)^{4 n-i}\\left(x_{4 n+1}-x_{4 n}\\right)\n$$\n\nwhich for $i=0$ yields the contradiction\n\n$$\nx_{4 n+1}-x_{0} \\geqslant\\left(\\frac{3}{2}\\right)^{4 n}\\left(x_{4 n+1}-x_{4 n}\\right)=\\left(\\frac{81}{16}\\right)^{n}\\left(x_{4 n+1}-x_{4 n}\\right)>5^{n} \\cdot 1 .\n$$"
  },
  {
    "id": "fimo_2021_algebra_p2",
    "enunciado": "For every integer $n \\geqslant 1$ consider the $n \\times n$ table with entry $\\left\\lfloor\\frac{i j}{n+1}\\right\\rfloor$ at the intersection of row $i$ and column $j$, for every $i=1, \\ldots, n$ and $j=1, \\ldots, n$. Determine all integers $n \\geqslant 1$ for which the sum of the $n^{2}$ entries in the table is equal to $\\frac{1}{4} n^{2}(n-1)$.\n\nThe final answers are all integers $n$ for which $n+1$ is a prime.",
    "solucao": "First, observe that every pair $x, y$ of real numbers for which the sum $x+y$ is integer satisfies\n\n$$\n\\lfloor x\\rfloor+\\lfloor y\\rfloor \\geqslant x+y-1\n$$\n\nThe inequality is strict if $x$ and $y$ are integers, and it holds with equality otherwise.\n\nWe estimate the sum $S$ as follows.\n\n$$\n\\begin{array}{r}\n2 S=\\sum_{1 \\leqslant i, j \\leqslant n}\\left(\\left\\lfloor\\frac{i j}{n+1}\\right\\rfloor+\\left\\lfloor\\frac{i j}{n+1}\\right\\rfloor\\right)=\\sum_{1 \\leqslant i, j \\leqslant n}\\left(\\left\\lfloor\\frac{i j}{n+1}\\right\\rfloor+\\left\\lfloor\\frac{(n+1-i) j}{n+1}\\right\\rfloor\\right) \\\\\n\\geqslant \\sum_{1 \\leqslant i, j \\leqslant n}(j-1)=\\frac{(n-1) n^{2}}{2} .\n\\end{array}\n$$\n\nThe inequality in the last line follows from (1) by setting $x=i j /(n+1)$ and $y=(n+1-$ i) $j /(n+1)$, so that $x+y=j$ is integral.\n\nNow $S=\\frac{1}{4} n^{2}(n-1)$ if and only if the inequality in the last line holds with equality, which means that none of the values $i j /(n+1)$ with $1 \\leqslant i, j \\leqslant n$ may be integral.\n\nHence, if $n+1$ is composite with factorisation $n+1=a b$ for $2 \\leqslant a, b \\leqslant n$, one gets a strict inequality for $i=a$ and $j=b$. If $n+1$ is a prime, then $i j /(n+1)$ is never integral and $S=\\frac{1}{4} n^{2}(n-1)$"
  },
  {
    "id": "fimo_2021_algebra_p3",
    "enunciado": "Given a positive integer $n$, find the smallest value of $\\left\\lfloor\\frac{a_{1}}{1}\\right\\rfloor+\\left\\lfloor\\frac{a_{2}}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{a_{n}}{n}\\right\\rfloor$ over all permutations $\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)$ of $(1,2, \\ldots, n)$.\n\nThe final answer is that the minimum of such sums is $\\left\\lfloor\\log _{2} n\\right\\rfloor+1$; so if $2^{k} \\leqslant n<2^{k+1}$, the minimum is $k+1$.",
    "solucao": "Suppose that $2^{k} \\leqslant n<2^{k+1}$ with some nonnegative integer $k$. First we show a permutation $\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)$ such that $\\left\\lfloor\\frac{a_{1}}{1}\\right\\rfloor+\\left\\lfloor\\frac{a_{2}}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{a_{n}}{n}\\right\\rfloor=k+1$; then we will prove that $\\left\\lfloor\\frac{a_{1}}{1}\\right\\rfloor+\\left\\lfloor\\frac{a_{2}}{2}\\right\\rfloor+\\cdots+\\left\\lfloor\\frac{a_{n}}{n}\\right\\rfloor \\geqslant k+1$ for every permutation. Hence, the minimal possible value will be $k+1$\n\nI. Consider the permutation\n\n$$\n\\begin{gathered}\n\\left(a_{1}\\right)=(1), \\quad\\left(a_{2}, a_{3}\\right)=(3,2), \\quad\\left(a_{4}, a_{5}, a_{6}, a_{7}\\right)=(7,4,5,6), \\quad \\ldots \\\\\n\\left(a_{2^{k-1}}, \\ldots, a_{2^{k}-1}\\right)=\\left(2^{k}-1,2^{k-1}, 2^{k-1}+1, \\ldots, 2^{k}-2\\right), \\\\\n\\left(a_{2^{k}}, \\ldots, a_{n}\\right)=\\left(n, 2^{k}, 2^{k}+1, \\ldots, n-1\\right) .\n\\end{gathered}\n$$\n\nThis permutation consists of $k+1$ cycles. In every cycle $\\left(a_{p}, \\ldots, a_{q}\\right)=(q, p, p+1, \\ldots, q-1)$ we have $q<2 p$, so\n\n$$\n\\sum_{i=p}^{q}\\left\\lfloor\\frac{a_{i}}{i}\\right\\rfloor=\\left\\lfloor\\frac{q}{p}\\right\\rfloor+\\sum_{i=p+1}^{q}\\left\\lfloor\\frac{i-1}{i}\\right\\rfloor=1\n$$\n\nThe total sum over all cycles is precisely $k+1$.\n\nII. In order to establish the lower bound, we prove a more general statement.\n\nClaim. If $b_{1}, \\ldots, b_{2^{k}}$ are distinct positive integers then\n\n$$\n\\sum_{i=1}^{2^{k}}\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor \\geqslant k+1\n$$\n\nFrom the Claim it follows immediately that $\\sum_{i=1}^{n}\\left\\lfloor\\frac{a_{i}}{i}\\right\\rfloor \\geqslant \\sum_{i=1}^{2^{k}}\\left\\lfloor\\frac{a_{i}}{i}\\right\\rfloor \\geqslant k+1$.\n\nProof of the Claim. Apply induction on $k$. For $k=1$ the claim is trivial, $\\left\\lfloor\\frac{b_{1}}{1}\\right\\rfloor \\geqslant 1$. Suppose the Claim holds true for some positive integer $k$, and consider $k+1$.\n\nIf there exists an index $j$ such that $2^{k}<j \\leqslant 2^{k+1}$ and $b_{j} \\geqslant j$ then\n\n$$\n\\sum_{i=1}^{2^{k+1}}\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor \\geqslant \\sum_{i=1}^{2^{k}}\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor+\\left\\lfloor\\frac{b_{j}}{j}\\right\\rfloor \\geqslant(k+1)+1\n$$\n\nby the induction hypothesis, so the Claim is satisfied.\n\nOtherwise we have $b_{j}<j \\leqslant 2^{k+1}$ for every $2^{k}<j \\leqslant 2^{k+1}$. Among the $2^{k+1}$ distinct numbers $b_{1}, \\ldots, b_{2^{k+1}}$ there is some $b_{m}$ which is at least $2^{k+1}$; that number must be among $b_{1} \\ldots, b_{2^{k}}$. Hence, $1 \\leqslant m \\leqslant 2^{k}$ and $b_{m} \\geqslant 2^{k+1}$.\n\nWe will apply the induction hypothesis to the numbers\n\n$$\nc_{1}=b_{1}, \\ldots, c_{m-1}=b_{m-1}, \\quad c_{m}=b_{2^{k}+1}, \\quad c_{m+1}=b_{m+1}, \\ldots, c_{2^{k}}=b_{2^{k}}\n$$\n\nso take the first $2^{k}$ numbers but replace $b_{m}$ with $b_{2^{k}+1}$. Notice that\n\n$$\n\\left\\lfloor\\frac{b_{m}}{m}\\right\\rfloor \\geqslant\\left\\lfloor\\frac{2^{k+1}}{m}\\right\\rfloor=\\left\\lfloor\\frac{2^{k}+2^{k}}{m}\\right\\rfloor \\geqslant\\left\\lfloor\\frac{b_{2^{k}+1}+m}{m}\\right\\rfloor=\\left\\lfloor\\frac{c_{m}}{m}\\right\\rfloor+1\n$$\n\nFor the other indices $i$ with $1 \\leqslant i \\leqslant 2^{k}, i \\neq m$ we have $\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor=\\left\\lfloor\\frac{c_{i}}{i}\\right\\rfloor$, so\n\n$$\n\\sum_{i=1}^{2^{k+1}}\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor=\\sum_{i=1}^{2^{k}}\\left\\lfloor\\frac{b_{i}}{i}\\right\\rfloor \\geqslant \\sum_{i=1}^{2^{k}}\\left\\lfloor\\frac{c_{i}}{i}\\right\\rfloor+1 \\geqslant(k+1)+1 .\n$$\n\nThat proves the Claim and hence completes the solution."
  },
  {
    "id": "fimo_2021_algebra_p4",
    "enunciado": "Show that for all real numbers $x_{1}, \\ldots, x_{n}$ the following inequality holds:\n\n$$\n\\sum_{i=1}^{n} \\sum_{j=1}^{n} \\sqrt{\\left|x_{i}-x_{j}\\right|} \\leqslant \\sum_{i=1}^{n} \\sum_{j=1}^{n} \\sqrt{\\left|x_{i}+x_{j}\\right|}\n$$",
    "solucao": "If we add $t$ to all the variables then the left-hand side remains constant and the right-hand side becomes\n\n$$\nH(t):=\\sum_{i=1}^{n} \\sum_{j=1}^{n} \\sqrt{\\left|x_{i}+x_{j}+2 t\\right|}\n$$\n\nLet $T$ be large enough such that both $H(-T)$ and $H(T)$ are larger than the value $L$ of the lefthand side of the inequality we want to prove. Not necessarily distinct points $p_{i, j}:=-\\left(x_{i}+x_{j}\\right) / 2$ together with $T$ and $-T$ split the real line into segments and two rays such that on each of these segments and rays the function $H(t)$ is concave since $f(t):=\\sqrt{|\\ell+2 t|}$ is concave on both intervals $(-\\infty,-\\ell / 2]$ and $[-\\ell / 2,+\\infty)$. Let $[a, b]$ be the segment containing zero. Then concavity implies $H(0) \\geqslant \\min \\{H(a), H(b)\\}$ and, since $H(\\pm T)>L$, it suffices to prove the inequalities $H\\left(-\\left(x_{i}+x_{j}\\right) / 2\\right) \\geqslant L$, that is to prove the original inequality in the case when all numbers are shifted in such a way that two variables $x_{i}$ and $x_{j}$ add up to zero. In the following we denote the shifted variables still by $x_{i}$.\n\nIf $i=j$, i.e. $x_{i}=0$ for some index $i$, then we can remove $x_{i}$ which will decrease both sides by $2 \\sum_{k} \\sqrt{\\left|x_{k}\\right|}$. Similarly, if $x_{i}+x_{j}=0$ for distinct $i$ and $j$ we can remove both $x_{i}$ and $x_{j}$ which decreases both sides by\n\n$$\n2 \\sqrt{2\\left|x_{i}\\right|}+2 \\cdot \\sum_{k \\neq i, j}\\left(\\sqrt{\\left|x_{k}+x_{i}\\right|}+\\sqrt{\\left|x_{k}+x_{j}\\right|}\\right)\n$$\n\nIn either case we reduced our inequality to the case of smaller $n$. It remains to note that for $n=0$ and $n=1$ the inequality is trivial."
  },
  {
    "id": "fimo_2021_algebra_p5",
    "enunciado": "Let $n \\geqslant 2$ be an integer, and let $a_{1}, a_{2}, \\ldots, a_{n}$ be positive real numbers such that $a_{1}+a_{2}+\\cdots+a_{n}=1$. Prove that\n\n$$\n\\sum_{k=1}^{n} \\frac{a_{k}}{1-a_{k}}\\left(a_{1}+a_{2}+\\cdots+a_{k-1}\\right)^{2}<\\frac{1}{3} .\n$$",
    "solucao": "For all $k \\leqslant n$, let\n\n$$\ns_{k}=a_{1}+a_{2}+\\cdots+a_{k} \\quad \\text { and } \\quad b_{k}=\\frac{a_{k} s_{k-1}^{2}}{1-a_{k}},\n$$\n\nwith the convention that $s_{0}=0$. Note that $b_{k}$ is exactly a summand in the sum we need to estimate. We shall prove the inequality\n\n$$\nb_{k}<\\frac{s_{k}^{3}-s_{k-1}^{3}}{3}\n$$\n\nIndeed, it suffices to check that\n\n$$\n\\begin{aligned}\n(1) & \\Longleftrightarrow 0<\\left(1-a_{k}\\right)\\left(\\left(s_{k-1}+a_{k}\\right)^{3}-s_{k-1}^{3}\\right)-3 a_{k} s_{k-1}^{2} \\\\\n& \\Longleftrightarrow 0<\\left(1-a_{k}\\right)\\left(3 s_{k-1}^{2}+3 s_{k-1} a_{k}+a_{k}^{2}\\right)-3 s_{k-1}^{2} \\\\\n& \\Longleftrightarrow 0<-3 a_{k} s_{k-1}^{2}+3\\left(1-a_{k}\\right) s_{k-1} a_{k}+\\left(1-a_{k}\\right) a_{k}^{2} \\\\\n& \\Longleftrightarrow 0<3\\left(1-a_{k}-s_{k-1}\\right) s_{k-1} a_{k}+\\left(1-a_{k}\\right) a_{k}^{2}\n\\end{aligned}\n$$\n\nwhich holds since $a_{k}+s_{k-1}=s_{k} \\leqslant 1$ and $a_{k} \\in(0,1)$.\n\nThus, adding inequalities (1) for $k=1, \\ldots, n$, we conclude that\n\n$$\nb_{1}+b_{2}+\\cdots+b_{n}<\\frac{s_{n}^{3}-s_{0}^{3}}{3}=\\frac{1}{3},\n$$\n\nas desired."
  },
  {
    "id": "fimo_2021_algebra_p6",
    "enunciado": "Let $A$ be a finite set of (not necessarily positive) integers, and let $m \\geqslant 2$ be an integer. Assume that there exist non-empty subsets $B_{1}, B_{2}, B_{3}, \\ldots, B_{m}$ of $A$ whose elements add up to the sums $m^{1}, m^{2}, m^{3}, \\ldots, m^{m}$, respectively. Prove that $A$ contains at least $m / 2$ elements.",
    "solucao": "Let $A=\\left\\{a_{1}, \\ldots, a_{k}\\right\\}$. Assume that, on the contrary, $k=|A|<m / 2$. Let\n\n$$\ns_{i}:=\\sum_{j: a_{j} \\in B_{i}} a_{j}\n$$\n\nbe the sum of elements of $B_{i}$. We are given that $s_{i}=m^{i}$ for $i=1, \\ldots, m$.\n\nNow consider all $m^{m}$ expressions of the form\n\n$$\nf\\left(c_{1}, \\ldots, c_{m}\\right):=c_{1} s_{1}+c_{2} s_{2}+\\ldots+c_{m} s_{m}, c_{i} \\in\\{0,1, \\ldots, m-1\\} \\text { for all } i=1,2, \\ldots, m\n$$\n\nNote that every number $f\\left(c_{1}, \\ldots, c_{m}\\right)$ has the form\n\n$$\n\\alpha_{1} a_{1}+\\ldots+\\alpha_{k} a_{k}, \\alpha_{i} \\in\\{0,1, \\ldots, m(m-1)\\}\n$$\n\nHence, there are at most $(m(m-1)+1)^{k}<m^{2 k}<m^{m}$ distinct values of our expressions; therefore, at least two of them coincide.\n\nSince $s_{i}=m^{i}$, this contradicts the uniqueness of representation of positive integers in the base- $m$ system."
  },
  {
    "id": "fimo_2021_algebra_p7",
    "enunciado": "Let $n \\geqslant 1$ be an integer, and let $x_{0}, x_{1}, \\ldots, x_{n+1}$ be $n+2$ non-negative real numbers that satisfy $x_{i} x_{i+1}-x_{i-1}^{2} \\geqslant 1$ for all $i=1,2, \\ldots, n$. Show that\n\n$$\nx_{0}+x_{1}+\\cdots+x_{n}+x_{n+1}>\\left(\\frac{2 n}{3}\\right)^{3 / 2}\n$$",
    "solucao": "Lemma 1.1. If $a, b, c$ are non-negative numbers such that $a b-c^{2} \\geqslant 1$, then\n\n$$\n(a+2 b)^{2} \\geqslant(b+2 c)^{2}+6\n$$\n\nProof. $(a+2 b)^{2}-(b+2 c)^{2}=(a-b)^{2}+2(b-c)^{2}+6\\left(a b-c^{2}\\right) \\geqslant 6$.\n\nLemma 1.2. $\\sqrt{1}+\\cdots+\\sqrt{n}>\\frac{2}{3} n^{3 / 2}$.\n\nProof. Bernoulli's inequality $(1+t)^{3 / 2}>1+\\frac{3}{2} t$ for $0>t \\geqslant-1$ (or, alternatively, a straightforward check) gives\n\n$$\n(k-1)^{3 / 2}=k^{3 / 2}\\left(1-\\frac{1}{k}\\right)^{3 / 2}>k^{3 / 2}\\left(1-\\frac{3}{2 k}\\right)=k^{3 / 2}-\\frac{3}{2} \\sqrt{k}\n$$\n\nSumming up $(*)$ over $k=1,2, \\ldots, n$ yields\n\n$$\n0>n^{3 / 2}-\\frac{3}{2}(\\sqrt{1}+\\cdots+\\sqrt{n})\n$$\n\nNow put $y_{i}:=2 x_{i}+x_{i+1}$ for $i=0,1, \\ldots, n$. We get $y_{0} \\geqslant 0$ and $y_{i}^{2} \\geqslant y_{i-1}^{2}+6$ for $i=1,2, \\ldots, n$ by Lemma 1.1. Thus, an easy induction on $i$ gives $y_{i} \\geqslant \\sqrt{6 i}$. Using this estimate and Lemma $1.2$ we get\n\n$$\n3\\left(x_{0}+\\ldots+x_{n+1}\\right) \\geqslant y_{1}+\\ldots+y_{n} \\geqslant \\sqrt{6}(\\sqrt{1}+\\sqrt{2}+\\ldots+\\sqrt{n})>\\sqrt{6} \\cdot \\frac{2}{3} n^{3 / 2}=3\\left(\\frac{2 n}{3}\\right)^{3 / 2} .\n$$"
  },
  {
    "id": "fimo_2021_algebra_p8",
    "enunciado": "Determine all functions $f: \\mathbb{R} \\rightarrow \\mathbb{R}$ that satisfy\n\n$$\n(f(a)-f(b))(f(b)-f(c))(f(c)-f(a))=f\\left(a b^{2}+b c^{2}+c a^{2}\\right)-f\\left(a^{2} b+b^{2} c+c^{2} a\\right)\n$$\n\nfor all real numbers $a, b, c$.\n\nThe final answer is $f(x)=\\alpha x+\\beta$ or $f(x)=\\alpha x^{3}+\\beta$ where $\\alpha \\in\\{-1,0,1\\}$ and $\\beta \\in \\mathbb{R}$.",
    "solucao": "It is straightforward to check that above functions satisfy the equation. Now let $f(x)$ satisfy the equation, which we denote $E(a, b, c)$. Then clearly $f(x)+C$ also does; therefore, we may suppose without loss of generality that $f(0)=0$. We start with proving\n\nLemma. Either $f(x) \\equiv 0$ or $f$ is injective.\n\nProof. Denote by $\\Theta \\subseteq \\mathbb{R}^{2}$ the set of points $(a, b)$ for which $f(a)=f(b)$. Let $\\Theta^{*}=\\{(x, y) \\in \\Theta$ : $x \\neq y\\}$. The idea is that if $(a, b) \\in \\Theta$, then by $E(a, b, x)$ we get\n\n$$\nH_{a, b}(x):=\\left(a b^{2}+b x^{2}+x a^{2}, a^{2} b+b^{2} x+x^{2} a\\right) \\in \\Theta\n$$\n\nfor all real $x$. Reproducing this argument starting with $(a, b) \\in \\Theta^{*}$, we get more and more points in $\\Theta$. There are many ways to fill in the details, we give below only one of them.\n\nAssume that $(a, b) \\in \\Theta^{*}$. Note that\n\n$$\ng_{-}(x):=\\left(a b^{2}+b x^{2}+x a^{2}\\right)-\\left(a^{2} b+b^{2} x+x^{2} a\\right)=(a-b)(b-x)(x-a)\n$$\n\nand\n\n$$\ng_{+}(x):=\\left(a b^{2}+b x^{2}+x a^{2}\\right)+\\left(a^{2} b+b^{2} x+x^{2} a\\right)=\\left(x^{2}+a b\\right)(a+b)+x\\left(a^{2}+b^{2}\\right)\n$$\n\nHence, there exists $x$ for which both $g_{-}(x) \\neq 0$ and $g_{+}(x) \\neq 0$. This gives a point $(\\alpha, \\beta)=$ $H_{a, b}(x) \\in \\Theta^{*}$ for which $\\alpha \\neq-\\beta$. Now compare $E(\\alpha, 1,0)$ and $E(\\beta, 1,0)$. The left-hand side expressions coincide, on right-hand side we get $f(\\alpha)-f\\left(\\alpha^{2}\\right)=f(\\beta)-f\\left(\\beta^{2}\\right)$, respectively. Hence, $f\\left(\\alpha^{2}\\right)=f\\left(\\beta^{2}\\right)$ and we get a point $\\left(\\alpha_{1}, \\beta_{1}\\right):=\\left(\\alpha^{2}, \\beta^{2}\\right) \\in \\Theta^{*}$ with both coordinates $\\alpha_{1}, \\beta_{1}$ non-negative. Continuing squaring the coordinates, we get a point $(\\gamma, \\delta) \\in \\Theta^{*}$ for which $\\delta>5 \\gamma \\geqslant 0$. Our nearest goal is to get a point $(0, r) \\in \\Theta^{*}$. If $\\gamma=0$, this is already done. If $\\gamma>0$, denote by $x$ a real root of the quadratic equation $\\delta \\gamma^{2}+\\gamma x^{2}+x \\delta^{2}=0$, which exists since the discriminant $\\delta^{4}-4 \\delta \\gamma^{3}$ is positive. Also $x<0$ since this equation cannot have non-negative root. For the point $H_{\\delta, \\gamma}(x)=:(0, r) \\in \\Theta$ the first coordinate is 0 . The difference of coordinates equals $-r=(\\delta-\\gamma)(\\gamma-x)(x-\\delta)<0$, so $r \\neq 0$ as desired.\n\nNow, let $(0, r) \\in \\Theta^{*}$. We get $H_{0, r}(x)=\\left(r x^{2}, r^{2} x\\right) \\in \\Theta$. Thus $f\\left(r x^{2}\\right)=f\\left(r^{2} x\\right)$ for all $x \\in \\mathbb{R}$. Replacing $x$ to $-x$ we get $f\\left(r x^{2}\\right)=f\\left(r^{2} x\\right)=f\\left(-r^{2} x\\right)$, so $f$ is even: $(a,-a) \\in \\Theta$ for all $a$. Then $H_{a,-a}(x)=\\left(a^{3}-a x^{2}+x a^{2},-a^{3}+a^{2} x+x^{2} a\\right) \\in \\Theta$ for all real $a, x$. Putting $x=\\frac{1+\\sqrt{5}}{2} a$ we obtain $\\left(0,(1+\\sqrt{5}) a^{3}\\right) \\in \\Theta$ which means that $f(y)=f(0)=0$ for every real $y$.\n\nHereafter we assume that $f$ is injective and $f(0)=0$. By $E(a, b, 0)$ we get\n\n$$\nf(a) f(b)(f(a)-f(b))=f\\left(a^{2} b\\right)-f\\left(a b^{2}\\right)\n$$\n\nLet $\\kappa:=f(1)$ and note that $\\kappa=f(1) \\neq f(0)=0$ by injectivity. Putting $b=1$ in $(1)$ we get\n\n$$\n\\kappa f(a)(f(a)-\\kappa)=f\\left(a^{2}\\right)-f(a)\n$$\n\nSubtracting the same equality for $-a$ we get\n\n$$\n\\kappa(f(a)-f(-a))(f(a)+f(-a)-\\kappa)=f(-a)-f(a)\n$$\n\nNow, if $a \\neq 0$, by injectivity we get $f(a)-f(-a) \\neq 0$ and thus\n\n$$\nf(a)+f(-a)=\\kappa-\\kappa^{-1}=: \\lambda\n$$\n\nIt follows that\n\n$$\nf(a)-f(b)=f(-b)-f(-a)\n$$\n\nfor all non-zero $a, b$. Replace non-zero numbers $a, b$ in $(1)$ with $-a,-b$, respectively, and add the two equalities. Due to $(3)$ we get\n\n$$\n(f(a)-f(b))(f(a) f(b)-f(-a) f(-b))=0\n$$\n\nthus $f(a) f(b)=f(-a) f(-b)=(\\lambda-f(a))(\\lambda-f(b))$ for all non-zero $a \\neq b$. If $\\lambda \\neq 0$, this implies $f(a)+f(b)=\\lambda$ that contradicts injectivity when we vary $b$ with fixed $a$. Therefore, $\\lambda=0$ and $\\kappa=\\pm 1$. Thus $f$ is odd. Replacing $f$ with $-f$ if necessary (this preserves the original equation) we may suppose that $f(1)=1$.\n\nNow, $(2)$ yields $f\\left(a^{2}\\right)=f^{2}(a)$. Summing relations $(1)$ for pairs $(a, b)$ and $(a,-b)$, we get $-2 f(a) f^{2}(b)=-2 f\\left(a b^{2}\\right)$, i.e. $f(a) f\\left(b^{2}\\right)=f\\left(a b^{2}\\right)$. Putting $b=\\sqrt{x}$ for each non-negative $x$ we get $f(a x)=f(a) f(x)$ for all real $a$ and non-negative $x$. Since $f$ is odd, this multiplicativity relation is true for all $a, x$. Also, from $f\\left(a^{2}\\right)=f^{2}(a)$ we see that $f(x) \\geqslant 0$ for $x \\geqslant 0$. Next, $f(x)>0$ for $x>0$ by injectivity.\n\nAssume that $f(x)$ for $x>0$ does not have the form $f(x)=x^{\\tau}$ for a constant $\\tau$. The known property of multiplicative functions yields that the graph of $f$ is dense on $(0, \\infty)^{2}$. In particular, we may find positive $b<1 / 10$ for which $f(b)>1$. Also, such $b$ can be found if $f(x)=x^{\\tau}$ for some $\\tau<0$. Then for all $x$ we have $x^{2}+x b^{2}+b \\geqslant 0$ and so $E(1, b, x)$ implies that\n\n$$\nf\\left(b^{2}+b x^{2}+x\\right)=f\\left(x^{2}+x b^{2}+b\\right)+(f(b)-1)(f(x)-f(b))(f(x)-1) \\geqslant 0-\\left((f(b)-1)^{3} / 4\\right.\n$$\n\nis bounded from below (the quadratic trinomial bound $(t-f(1))(t-f(b)) \\geqslant-(f(b)-1)^{2} / 4$ for $t=f(x)$ is used). Hence, $f$ is bounded from below on $\\left(b^{2}-\\frac{1}{4 b},+\\infty\\right)$, and since $f$ is odd it is bounded from above on $\\left(0, \\frac{1}{4 b}-b^{2}\\right)$. This is absurd if $f(x)=x^{\\tau}$ for $\\tau<0$, and contradicts to the above dense graph condition otherwise.\n\nTherefore, $f(x)=x^{\\tau}$ for $x>0$ and some constant $\\tau>0$. Dividing $E(a, b, c)$ by $(a-b)(b-$ $c)(c-a)=\\left(a b^{2}+b c^{2}+c a^{2}\\right)-\\left(a^{2} b+b^{2} c+c^{2} a\\right)$ and taking a limit when $a, b, c$ all go to 1 (the divided ratios tend to the corresponding derivatives, say, $\\frac{a^{\\tau}-b^{\\tau}}{a-b} \\rightarrow\\left(x^{\\tau}\\right)_{x=1}^{\\prime}=\\tau$ ), we get $\\tau^{3}=\\tau \\cdot 3^{\\tau-1}, \\tau^{2}=3^{\\tau-1}, F(\\tau):=3^{\\tau / 2-1 / 2}-\\tau=0$. Since function $F$ is strictly convex, it has at most two roots, and we get $\\tau \\in\\{1,3\\}$."
  },
  {
    "id": "fimo_2021_number_theory_p1",
    "enunciado": "Determine all integers $n \\geqslant 1$ for which there exists a pair of positive integers $(a, b)$ such that no cube of a prime divides $a^{2}+b+3$ and\n\n$$\n\\frac{a b+3 b+8}{a^{2}+b+3}=n\n$$\n\nThe final answer is that the only integer with that property is $n=2$.",
    "solucao": "As $b \\equiv-a^{2}-3\\left(\\bmod a^{2}+b+3\\right)$, the numerator of the given fraction satisfies\n\n$$\na b+3 b+8 \\equiv a\\left(-a^{2}-3\\right)+3\\left(-a^{2}-3\\right)+8 \\equiv-(a+1)^{3} \\quad\\left(\\bmod a^{2}+b+3\\right) .\n$$\n\nAs $a^{2}+b+3$ is not divisible by $p^{3}$ for any prime $p$, if $a^{2}+b+3$ divides $(a+1)^{3}$ then it does also divide $(a+1)^{2}$. Since\n\n$$\n0<(a+1)^{2}<2\\left(a^{2}+b+3\\right)\n$$\n\nwe conclude $(a+1)^{2}=a^{2}+b+3$. This yields $b=2(a-1)$ and $n=2$. The choice $(a, b)=(2,2)$ with $a^{2}+b+3=9$ shows that $n=2$ indeed is a solution."
  },
  {
    "id": "fimo_2021_number_theory_p2",
    "enunciado": "Let $n \\geqslant 100$ be an integer. The numbers $n, n+1, \\ldots, 2 n$ are written on $n+1$ cards, one number per card. The cards are shuffled and divided into two piles. Prove that one of the piles contains two cards such that the sum of their numbers is a perfect square.",
    "solucao": "To solve the problem it suffices to find three squares and three cards with numbers $a, b, c$ on them such that pairwise sums $a+b, b+c, a+c$ are equal to the chosen squares. By choosing the three consecutive squares $(2 k-1)^{2},(2 k)^{2},(2 k+1)^{2}$ we arrive at the triple\n\n$$\n(a, b, c)=\\left(2 k^{2}-4 k, \\quad 2 k^{2}+1, \\quad 2 k^{2}+4 k\\right)\n$$\n\nWe need a value for $k$ such that\n\n$$\nn \\leqslant 2 k^{2}-4 k, \\quad \\text { and } 2 k^{2}+4 k \\leqslant 2 n .\n$$\n\nA concrete $k$ is suitable for all $n$ with\n\n$$\nn \\in\\left[k^{2}+2 k, 2 k^{2}-4 k+1\\right]=: I_{k}\n$$\n\nFor $k \\geqslant 9$ the intervals $I_{k}$ and $I_{k+1}$ overlap because\n\n$$\n(k+1)^{2}+2(k+1) \\leqslant 2 k^{2}-4 k+1\n$$\n\nHence $I_{9} \\cup I_{10} \\cup \\ldots=[99, \\infty)$, which proves the statement for $n \\geqslant 99$."
  },
  {
    "id": "fimo_2021_number_theory_p3",
    "enunciado": "Find all positive integers $n$ with the following property: the $k$ positive divisors of $n$ have a permutation $\\left(d_{1}, d_{2}, \\ldots, d_{k}\\right)$ such that for every $i=1,2, \\ldots, k$, the number $d_{1}+\\cdots+d_{i}$ is a perfect square.\n\nThe final answers are $n=1$ and $n=3$.",
    "solucao": "For $i=1,2, \\ldots, k$ let $d_{1}+\\ldots+d_{i}=s_{i}^{2}$, and define $s_{0}=0$ as well. Obviously $0=s_{0}<s_{1}<s_{2}<\\ldots<s_{k}$, so\n\n$$\ns_{i} \\geqslant i \\quad \\text { and } \\quad d_{i}=s_{i}^{2}-s_{i-1}^{2}=\\left(s_{i}+s_{i-1}\\right)\\left(s_{i}-s_{i-1}\\right) \\geqslant s_{i}+s_{i-1} \\geqslant 2 i-1 .\n$$\n\nThe number 1 is one of the divisors $d_{1}, \\ldots, d_{k}$ but, due to $d_{i} \\geqslant 2 i-1$, the only possibility is $d_{1}=1$.\n\nNow consider $d_{2}$ and $s_{2} \\geqslant 2$. By definition, $d_{2}=s_{2}^{2}-1=\\left(s_{2}-1\\right)\\left(s_{2}+1\\right)$, so the numbers $s_{2}-1$ and $s_{2}+1$ are divisors of $n$. In particular, there is some index $j$ such that $d_{j}=s_{2}+1$.\n\nNotice that\n\n$$\ns_{2}+s_{1}=s_{2}+1=d_{j} \\geqslant s_{j}+s_{j-1}\n$$\n\nsince the sequence $s_{0}<s_{1}<\\ldots<s_{k}$ increases, the index $j$ cannot be greater than 2. Hence, the divisors $s_{2}-1$ and $s_{2}+1$ are listed among $d_{1}$ and $d_{2}$. That means $s_{2}-1=d_{1}=1$ and $s_{2}+1=d_{2} ;$ therefore $s_{2}=2$ and $d_{2}=3$.\n\nWe can repeat the above process in general.\n\nClaim. $d_{i}=2 i-1$ and $s_{i}=i$ for $i=1,2, \\ldots, k$.\n\nProof. Apply induction on $i$. The Claim has been proved for $i=1,2$. Suppose that we have already proved $d=1, d_{2}=3, \\ldots, d_{i}=2 i-1$, and consider the next divisor $d_{i+1}$ :\n\n$$\nd_{i+1}=s_{i+1}^{2}-s_{i}^{2}=s_{i+1}^{2}-i^{2}=\\left(s_{i+1}-i\\right)\\left(s_{i+1}+i\\right)\n$$\n\nThe number $s_{i+1}+i$ is a divisor of $n$, so there is some index $j$ such that $d_{j}=s_{i+1}+i$.\n\nSimilarly to (2), by (1) we have\n\n$$\ns_{i+1}+s_{i}=s_{i+1}+i=d_{j} \\geqslant s_{j}+s_{j-1}\n$$\n\nsince the sequence $s_{0}<s_{1}<\\ldots<s_{k}$ increases, (3) forces $j \\leqslant i+1$. On the other hand, $d_{j}=s_{i+1}+i>2 i>d_{i}>d_{i-1}>\\ldots>d_{1}$, so $j \\leqslant i$ is not possible. The only possibility is $j=i+1$\n\nHence,\n\n$$\n\\begin{gathered}\ns_{i+1}+i=d_{i+1}=s_{i+1}^{2}-s_{i}^{2}=s_{i+1}^{2}-i^{2} ; \\\\\ns_{i+1}^{2}-s_{i+1}=i(i+1) .\n\\end{gathered}\n$$\n\nBy solving this equation we get $s_{i+1}=i+1$ and $d_{i+1}=2 i+1$, that finishes the proof.\n\nNow we know that the positive divisors of the number $n$ are $1,3,5, \\ldots, n-2, n$. The greatest divisor is $d_{k}=2 k-1=n$ itself, so $n$ must be odd. The second greatest divisor is $d_{k-1}=n-2$; then $n-2$ divides $n=(n-2)+2$, so $n-2$ divides 2 . Therefore, $n$ must be 1 or 3 .\n\nThe numbers $n=1$ and $n=3$ obviously satisfy the requirements: for $n=1$ we have $k=1$ and $d_{1}=1^{2}$; for $n=3$ we have $k=2, d_{1}=1^{2}$ and $d_{1}+d_{2}=1+3=2^{2}$."
  },
  {
    "id": "fimo_2021_number_theory_p4",
    "enunciado": "Alice is given a rational number $r>1$ and a line with two points $B \\neq R$, where point $R$ contains a red bead and point $B$ contains a blue bead. Alice plays a solitaire game by performing a sequence of moves. In every move, she chooses a (not necessarily positive) integer $k$, and a bead to move. If that bead is placed at point $X$, and the other bead is placed at $Y$, then Alice moves the chosen bead to point $X^{\\prime}$ with $\\overrightarrow{Y X^{\\prime}}=r^{k} \\overrightarrow{Y X}$.\n\nAlice's goal is to move the red bead to the point $B$. Find all rational numbers $r>1$ such that Alice can reach her goal in at most 2021 moves.\n\nThe final answers are all $r=(b+1) / b$ with $b=1, \\ldots, 1010$.",
    "solucao": "Denote the red and blue beads by $\\mathcal{R}$ and $\\mathcal{B}$, respectively. Introduce coordinates on the line and identify the points with their coordinates so that $R=0$ and $B=1$. Then, during the game, the coordinate of $\\mathcal{R}$ is always smaller than the coordinate of $\\mathcal{B}$. Moreover, the distance between the beads always has the form $r^{\\ell}$ with $\\ell \\in \\mathbb{Z}$, since it only multiplies by numbers of this form. Denote the value of the distance after the $m^{\\text {th }}$ move by $d_{m}=r^{\\alpha_{m}}$, $m=0,1,2, \\ldots$ (after the $0^{\\text {th }}$ move we have just the initial position, so $\\alpha_{0}=0$ ).\n\nIf some bead is moved in two consecutive moves, then Alice could instead perform a single move (and change the distance from $d_{i}$ directly to $d_{i+2}$ ) which has the same effect as these two moves. So, if Alice can achieve her goal, then she may as well achieve it in fewer (or the same) number of moves by alternating the moves of $\\mathcal{B}$ and $\\mathcal{R}$. In the sequel, we assume that Alice alternates the moves, and that $\\mathcal{R}$ is shifted altogether $t$ times.\n\nIf $\\mathcal{R}$ is shifted in the $m^{\\text {th }}$ move, then its coordinate increases by $d_{m}-d_{m+1}$. Therefore, the total increment of $\\mathcal{R}$ 's coordinate, which should be 1 , equals\n\n$$\n\\begin{aligned}\n\\text { either } & \\left(d_{0}-d_{1}\\right)+\\left(d_{2}-d_{3}\\right)+\\cdots+\\left(d_{2 t-2}-d_{2 t-1}\\right)=1+\\sum_{i=1}^{t-1} r^{\\alpha_{2 i}}-\\sum_{i=1}^{t} r^{\\alpha_{2 i-1}}, \\\\\n\\text { or } & \\left(d_{1}-d_{2}\\right)+\\left(d_{3}-d_{4}\\right)+\\cdots+\\left(d_{2 t-1}-d_{2 t}\\right)=\\sum_{i=1}^{t} r^{\\alpha_{2 i-1}}-\\sum_{i=1}^{t} r^{\\alpha_{2 i}},\n\\end{aligned}\n$$\n\ndepending on whether $\\mathcal{R}$ or $\\mathcal{B}$ is shifted in the first move. Moreover, in the former case we should have $t \\leqslant 1011$, while in the latter one we need $t \\leqslant 1010$. So both cases reduce to an equation\n\n$$\n\\sum_{i=1}^{n} r^{\\beta_{i}}=\\sum_{i=1}^{n-1} r^{\\gamma_{i}}, \\quad \\beta_{i}, \\gamma_{i} \\in \\mathbb{Z},\n$$\n\nfor some $n \\leqslant 1011$. Thus, if Alice can reach her goal, then this equation has a solution for $n=1011$ (we can add equal terms to both sums in order to increase $n$ ).\n\nConversely, if (1) has a solution for $n=1011$, then Alice can compose a corresponding sequence of distances $d_{0}, d_{1}, d_{2}, \\ldots, d_{2021}$ and then realise it by a sequence of moves. So the problem reduces to the solvability of $(1)$ for $n=1011$.\n\nAssume that, for some rational $r$, there is a solution of (1). Write $r$ in lowest terms as $r=a / b$. Substitute this into (1), multiply by the common denominator, and collect all terms on the left hand side to get\n\n$$\n\\sum_{i=1}^{2 n-1}(-1)^{i} a^{\\mu_{i}} b^{N-\\mu_{i}}=0, \\quad \\mu_{i} \\in\\{0,1, \\ldots, N\\},\n$$\n\nfor some $N \\geqslant 0$. We assume that there exist indices $j_{-}$and $j_{+}$such that $\\mu_{j_{-}}=0$ and $\\mu_{j_{+}}=N$. Reducing (2) modulo $a-b$ (so that $a \\equiv b$ ), we get\n\n$$\n0=\\sum_{i=1}^{2 n-1}(-1)^{i} a^{\\mu_{i}} b^{N-\\mu_{i}} \\equiv \\sum_{i=1}^{2 n-1}(-1)^{i} b^{\\mu_{i}} b^{N-\\mu_{i}}=-b^{N} \\quad \\bmod (a-b)\n$$\n\nSince $\\operatorname{gcd}(a-b, b)=1$, this is possible only if $a-b=1$.\n\nReducing (2) modulo $a+b$ (so that $a \\equiv-b$ ), we get\n\n$$\n0=\\sum_{i=1}^{2 n-1}(-1)^{i} a^{\\mu_{i}} b^{N-\\mu_{i}} \\equiv \\sum_{i=1}^{2 n-1}(-1)^{i}(-1)^{\\mu_{i}} b^{\\mu_{i}} b^{N-\\mu_{i}}=S b^{N} \\quad \\bmod (a+b)\n$$\n\nfor some odd (thus nonzero) $S$ with $|S| \\leqslant 2 n-1$. Since $\\operatorname{gcd}(a+b, b)=1$, this is possible only if $a+b \\mid S$. So $a+b \\leqslant 2 n-1$, and hence $b=a-1 \\leqslant n-1=1010$.\n\nThus we have shown that any sought $r$ has the form indicated in the answer. It remains to show that for any $b=1,2, \\ldots, 1010$ and $a=b+1$, Alice can reach the goal. For this purpose, in (1) we put $n=a, \\beta_{1}=\\beta_{2}=\\cdots=\\beta_{a}=0$, and $\\gamma_{1}=\\gamma_{2}=\\cdots=\\gamma_{b}=1$."
  },
  {
    "id": "fimo_2021_number_theory_p5",
    "enunciado": "Prove that there are only finitely many quadruples $(a, b, c, n)$ of positive integers such that\n\n$$\nn !=a^{n-1}+b^{n-1}+c^{n-1}\n$$",
    "solucao": "For fixed $n$ there are clearly finitely many solutions; we will show that there is no solution with $n>100$. So, assume $n>100$. By the AM-GM inequality,\n\n$$\n\\begin{aligned}\nn ! & =2 n(n-1)(n-2)(n-3) \\cdot(3 \\cdot 4 \\cdots(n-4)) \\\\\n& \\leqslant 2(n-1)^{4}\\left(\\frac{3+\\cdots+(n-4)}{n-6}\\right)^{n-6}=2(n-1)^{4}\\left(\\frac{n-1}{2}\\right)^{n-6}<\\left(\\frac{n-1}{2}\\right)^{n-1}\n\\end{aligned}\n$$\n\nthus $a, b, c<(n-1) / 2$.\n\nFor every prime $p$ and integer $m \\neq 0$, let $\\nu_{p}(m)$ denote the $p$-adic valuation of $m$; that is, the greatest non-negative integer $k$ for which $p^{k}$ divides $m$. Legendre's formula states that\n\n$$\n\\nu_{p}(n !)=\\sum_{s=1}^{\\infty}\\left\\lfloor\\frac{n}{p^{s}}\\right\\rfloor\n$$\n\nand a well-know corollary of this formula is that\n\n$$\n\\nu_{p}(n !)<\\sum_{s=1}^{\\infty} \\frac{n}{p^{s}}=\\frac{n}{p-1}\n$$\n\nIf $n$ is odd then $a^{n-1}, b^{n-1}, c^{n-1}$ are squares, and by considering them modulo 4 we conclude that $a, b$ and $c$ must be even. Hence, $2^{n-1} \\mid n$ ! but that is impossible for odd $n$ because $\\nu_{2}(n !)=\\nu_{2}((n-1) !)<n-1$ by $(\\nabla)$\n\nFrom now on we assume that $n$ is even. If all three numbers $a+b, b+c, c+a$ are powers of 2 then $a, b, c$ have the same parity. If they all are odd, then $n !=a^{n-1}+b^{n-1}+c^{n-1}$ is also odd which is absurd. If all $a, b, c$ are divisible by 4 , this contradicts $\\nu_{2}(n !) \\leqslant n-1$. If, say, $a$ is not divisible by 4 , then $2 a=(a+b)+(a+c)-(b+c)$ is not divisible by 8 , and since all $a+b, b+c$, $c+a$ are powers of 2 , we get that one of these sums equals 4 , so two of the numbers of $a, b, c$ are equal to 2. Say, $a=b=2$, then $c=2^{r}-2$ and, since $c \\mid n$ !, we must have $c \\mid a^{n-1}+b^{n-1}=2^{n}$ implying $r=2$, and so $c=2$, which is impossible because $n ! \\equiv 0 \\not \\equiv 3 \\cdot 2^{n-1}(\\bmod 5)$.\n\nSo now we assume that the sum of two numbers among $a, b, c$, say $a+b$, is not a power of 2 , so it is divisible by some odd prime $p$. Then $p \\leqslant a+b<n$ and so $c^{n-1}=n !-\\left(a^{n-1}+b^{n-1}\\right)$ is divisible by $p$. If $p$ divides $a$ and $b$, we get $p^{n-1} \\mid n$ !, contradicting $(\\odot)$. Next, using ( $\\left.\\nabla\\right)$ and the Lifting the Exponent Lemma we get\n\n$$\n\\nu_{p}(1)+\\nu_{p}(2)+\\cdots+\\nu_{p}(n)=\\nu_{p}(n !)=\\nu_{p}\\left(n !-c^{n-1}\\right)=\\nu_{p}\\left(a^{n-1}+b^{n-1}\\right)=\\nu_{p}(a+b)+\\nu_{p}(n-1) .(\\diamond)\n$$\n\nIn view of $(\\diamond)$, no number of $1,2, \\ldots, n$ can be divisible by $p$, except $a+b$ and $n-1>a+b$. On the other hand, $p \\mid c$ implies that $p<n / 2$ and so there must be at least two such numbers. Hence, there are two multiples of $p$ among $1,2, \\ldots, n$, namely $a+b=p$ and $n-1=2 p$. But this is another contradiction because $n-1$ is odd. This final contradiction shows that there is no solution of the equation for $n>100$."
  },
  {
    "id": "fimo_2021_number_theory_p6",
    "enunciado": "Determine all integers $n \\geqslant 2$ with the following property: every $n$ pairwise distinct integers whose sum is not divisible by $n$ can be arranged in some order $a_{1}, a_{2}, \\ldots, a_{n}$ so that $n$ divides $1 \\cdot a_{1}+2 \\cdot a_{2}+\\cdots+n \\cdot a_{n}$.\n\nThe final answers are all odd integers and all powers of 2.",
    "solucao": "If $n=2^{k} a$, where $a \\geqslant 3$ is odd and $k$ is a positive integer, we can consider a set containing the number $2^{k}+1$ and $n-1$ numbers congruent to 1 modulo $n$. The sum of these numbers is congruent to $2^{k}$ modulo $n$ and therefore is not divisible by $n$; for any permutation $\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)$ of these numbers\n\n$$\n1 \\cdot a_{1}+2 \\cdot a_{2}+\\cdots+n \\cdot a_{n} \\equiv 1+\\cdots+n \\equiv 2^{k-1} a\\left(2^{k} a+1\\right) \\not \\equiv 0 \\quad\\left(\\bmod 2^{k}\\right)\n$$\n\nand a fortiori $1 \\cdot a_{1}+2 \\cdot a_{2}+\\cdots+n \\cdot a_{n}$ is not divisible by $n$.\n\nFrom now on, we suppose that $n$ is either odd or a power of 2 . Let $S$ be the given set of integers, and $s$ be the sum of elements of $S$.\n\nLemma 1. If there is a permutation $\\left(a_{i}\\right)$ of $S$ such that $(n, s)$ divides $\\sum_{i=1}^{n} i a_{i}$, then there is a permutation $\\left(b_{i}\\right)$ of $S$ such that $n$ divides $\\sum_{i=1}^{n} i b_{i}$.\n\nProof. Let $r=\\sum_{i=1}^{n} i a_{i}$. Consider the permutation $\\left(b_{i}\\right)$ defined by $b_{i}=a_{i+x}$, where $a_{j+n}=a_{j}$. For this permutation, we have\n\n$$\n\\sum_{i=1}^{n} i b_{i}=\\sum_{i=1}^{n} i a_{i+x} \\equiv \\sum_{i=1}^{n}(i-x) a_{i} \\equiv r-s x \\quad(\\bmod n) .\n$$\n\nSince $(n, s)$ divides $r$, the congruence $r-s x \\equiv 0(\\bmod n)$ admits a solution.\n\nLemma 2. Every set $T$ of $k m$ integers, $m>1$, can be partitioned into $m$ sets of $k$ integers so that in every set either the sum of elements is not divisible by $k$ or all the elements leave the same remainder upon division by $k$.\n\nProof. The base case, $m=2$. If $T$ contains $k$ elements leaving the same remainder upon division by $k$, we form one subset $A$ of these elements; the remaining elements form a subset $B$. If $k$ does not divide the sum of all elements of $B$, we are done. Otherwise it is enough to exchange any element of $A$ with any element of $B$ not congruent to it modulo $k$, thus making sums of both $A$ and $B$ not divisible by $k$. This cannot be done only when all the elements of $T$ are congruent modulo $k$; in this case any partition will do.\n\nIf no $k$ elements of $T$ have the same residue modulo $k$, there are three elements $a, b, c \\in T$ leaving pairwise distinct remainders upon division by $k$. Let $t$ be the sum of elements of $T$. It suffices to find $A \\subset T$ such that $|A|=k$ and $\\sum_{x \\in A} x \\not \\equiv 0, t(\\bmod k)$ : then neither the sum of elements of $A$ nor the sum of elements of $B=T \\backslash A$ is divisible by $k$. Consider $U^{\\prime} \\subset T \\backslash\\{a, b, c\\}$ with $\\left|U^{\\prime}\\right|=k-1$. The sums of elements of three sets $U^{\\prime} \\cup\\{a\\}, U^{\\prime} \\cup\\{b\\}, U^{\\prime} \\cup\\{c\\}$ leave three different remainders upon division by $k$, and at least one of them is not congruent either to 0 or to $t$.\n\nNow let $m>2$. If $T$ contains $k$ elements leaving the same remainder upon division by $k$, we form one subset $A$ of these elements and apply the inductive hypothesis to the remaining $k(m-1)$ elements. Otherwise, we choose any $U \\subset T,|U|=k-1$. Since all the remaining elements cannot be congruent modulo $k$, there is $a \\in T \\backslash U$ such that $a \\not \\equiv-\\sum_{x \\in U} x(\\bmod k)$. Now we can take $A=U \\cup\\{a\\}$ and apply the inductive hypothesis to $T \\backslash A$. Now we are ready to prove the statement of the problem for all odd $n$ and $n=2^{k}$. The proof is by induction.\n\nIf $n$ is prime, the statement follows immediately from Lemma 1, since in this case $(n, s)=1$. Turning to the general case, we can find prime $p$ and an integer $t$ such that $p^{t} \\mid n$ and $p^{t} \\nmid s$. By Lemma 2, we can partition $S$ into $p$ sets of $\\frac{n}{p}=k$ elements so that in every set either the sum of numbers is not divisible by $k$ or all numbers have the same residue modulo $k$.\n\nFor sets in the first category, by the inductive hypothesis there is a permutation $\\left(a_{i}\\right)$ such that $k \\mid \\sum_{i=1}^{k} i a_{i}$\n\nIf $n$ (and therefore $k$ ) is odd, then for each permutation $\\left(b_{i}\\right)$ of a set in the second category we have\n\n$$\n\\sum_{i=1}^{k} i b_{i} \\equiv b_{1} \\frac{k(k+1)}{2} \\equiv 0 \\quad(\\bmod k)\n$$\n\nBy combining such permutation for all sets of the partition, we get a permutation $\\left(c_{i}\\right)$ of $S$ such that $k \\mid \\sum_{i=1}^{n} i c_{i}$. Since this sum is divisible by $k$, and $k$ is divisible by $(n, s)$, we are done by Lemma 1 .\n\nIf $n=2^{s}$, we have $p=2$ and $k=2^{s-1}$. Then for each of the subsets there is a permutation $\\left(a_{1}, \\ldots, a_{k}\\right)$ such that $\\sum_{i=1}^{k} i a_{i}$ is divisible by $2^{s-2}=\\frac{k}{2}$ : if the subset belongs to the first category, the expression is divisible even by $k$, and if it belongs to the second one,\n\n$$\n\\sum_{i=1}^{k} i a_{i} \\equiv a_{1} \\frac{k(k+1)}{2} \\equiv 0\\left(\\bmod \\frac{k}{2}\\right) \\text {. }\n$$\n\nNow the numbers of each permutation should be multiplied by all the odd or all the even numbers not exceeding $n$ in increasing order so that the resulting sums are divisible by $k$ :\n\n$$\n\\sum_{i=1}^{k}(2 i-1) a_{i} \\equiv \\sum_{i=1}^{k} 2 i a_{i} \\equiv 2 \\sum_{i=1}^{k} i a_{i} \\equiv 0 \\quad(\\bmod k) .\n$$\n\nCombining these two sums, we again get a permutation $\\left(c_{i}\\right)$ of $S$ such that $k \\mid \\sum_{i=1}^{n} i c_{i}$, and finish the case by applying Lemma 1."
  },
  {
    "id": "fimo_2021_number_theory_p7",
    "enunciado": "Let $a_{1}, a_{2}, a_{3}, \\ldots$ be an infinite sequence of positive integers such that $a_{n+2 m}$ divides $a_{n}+a_{n+m}$ for all positive integers $n$ and $m$. Prove that this sequence is eventually periodic, i.e. there exist positive integers $N$ and $d$ such that $a_{n}=a_{n+d}$ for all $n>N$.",
    "solucao": "We will make repeated use of the following simple observation:\n\nLemma 1. If a positive integer $d$ divides $a_{n}$ and $a_{n-m}$ for some $m$ and $n>2 m$, it also divides $a_{n-2 m}$. If $d$ divides $a_{n}$ and $a_{n-2 m}$, it also divides $a_{n-m}$.\n\nProof. Both parts are obvious since $a_{n}$ divides $a_{n-2 m}+a_{n-m}$.\n\nClaim. The sequence $\\left(a_{n}\\right)$ is bounded.\n\nProof. Suppose the contrary. Then there exist infinitely many indices $n$ such that $a_{n}$ is greater than each of the previous terms $a_{1}, a_{2}, \\ldots, a_{n-1}$. Let $a_{n}=k$ be such a term, $n>10$. For each $s<\\frac{n}{2}$ the number $a_{n}=k$ divides $a_{n-s}+a_{n-2 s}<2 k$, therefore\n\n$$\na_{n-s}+a_{n-2 s}=k\n$$\n\nIn particular,\n\n$$\na_{n}=a_{n-1}+a_{n-2}=a_{n-2}+a_{n-4}=a_{n-4}+a_{n-8}\n$$\n\nthat is, $a_{n-1}=a_{n-4}$ and $a_{n-2}=a_{n-8}$. It follows from Lemma 1 that $a_{n-1}$ divides $a_{n-1-3 s}$ for $3 s<n-1$ and $a_{n-2}$ divides $a_{n-2-6 s}$ for $6 s<n-2$. Since at least one of the numbers $a_{n-1}$ and $a_{n-2}$ is at least $a_{n} / 2$, so is some $a_{i}$ with $i \\leqslant 6$. However, $a_{n}$ can be arbitrarily large, a contradiction.\n\nSince $\\left(a_{n}\\right)$ is bounded, there exist only finitely many $i$ for which $a_{i}$ appears in the sequence finitely many times. In other words, there exists $N$ such that if $a_{i}=t$ and $i>N$, then $a_{j}=t$ for infinitely many $j$.\n\nClearly the sequence $\\left(a_{n+N}\\right)_{n>0}$ satisfies the divisibility condition, and it is enough to prove that this sequence is eventually periodic. Thus truncating the sequence if necessary, we can assume that each number appears infinitely many times in the sequence. Let $k$ be the maximum number appearing in the sequence.\n\nLemma 2. If a positive integer $d$ divides $a_{n}$ for some $n$, then the numbers $i$ such that $d$ divides $a_{i}$ form an arithmetical progression with an odd difference.\n\nProof. Let $i_{1}<i_{2}<i_{3}<\\ldots$ be all the indices $i$ such that $d$ divides $a_{i}$. If $i_{s}+i_{s+1}$ is even, it follows from Lemma 1 that $d$ also divides $a_{\\frac{i_{s}+i_{s+1}}{2}}$, impossible since $i_{s}<\\frac{i_{s}+i_{s+1}}{2}<i_{s+1}$. Thus $i_{s}$ and $i_{s+1}$ are always of different parity, and therefore $i_{s}+i_{s+2}$ is even. Applying Lemma 1 again, we see that $d$ divides $a_{\\frac{i_{s}+i_{s+2}}{2}}^{2}$, hence $\\frac{i_{s}+i_{s+2}}{2}=i_{s+1}$,\n\nWe are ready now to solve the problem.\n\nThe number of positive divisors of all terms of the progression is finite. Let $d_{s}$ be the difference of the progression corresponding to $s$, that is, $s$ divides $a_{n}$ if and only if it divides $a_{n+t d_{s}}$ for any positive integer $t$. Let $D$ be the product of all $d_{s}$. Then each $s$ dividing a term of the progression divides $a_{n}$ if and only if it divides $a_{n+D}$. This means that the sets of divisors of $a_{n}$ and $a_{n+D}$ coincide, and $a_{n+D}=a_{n}$. Thus $D$ is a period of the sequence."
  },
  {
    "id": "fimo_2021_number_theory_p8_1",
    "enunciado": "For a polynomial $P(x)$ with integer coefficients let $P^{1}(x)=P(x)$ and $P^{k+1}(x)=$ $P\\left(P^{k}(x)\\right)$ for $k \\geqslant 1$. Find all positive integers $n$ for which there exists a polynomial $P(x)$ with integer coefficients such that for every integer $m \\geqslant 1$, the numbers $P^{m}(1), \\ldots, P^{m}(n)$ leave exactly $\\left\\lceil n / 2^{m}\\right\\rceil$ distinct remainders when divided by $n$.\n\nThe final answers are all powers of 2 and all primes.",
    "solucao": "Denote the set of residues modulo $\\ell$ by $\\mathbb{Z}_{\\ell}$. Observe that $P$ can be regarded as a function $\\mathbb{Z}_{\\ell} \\rightarrow \\mathbb{Z}_{\\ell}$ for any positive integer $\\ell$. Denote the cardinality of the set $P^{m}\\left(\\mathbb{Z}_{\\ell}\\right)$ by $f_{m, \\ell}$. Note that $f_{m, n}=\\left\\lceil n / 2^{m}\\right\\rceil$ for all $m \\geqslant 1$ if and only if $f_{m+1, n}=\\left\\lceil f_{m, n} / 2\\right\\rceil$ for all $m \\geqslant 0$.\n\nPart 1. The required polynomial exists when $n$ is a power of 2 or a prime.\n\nIf $n$ is a power of 2 , set $P(x)=2 x$.\n\nIf $n=p$ is an odd prime, every function $f: \\mathbb{Z}_{p} \\rightarrow \\mathbb{Z}_{p}$ coincides with some polynomial with integer coefficients. So we can pick the function that sends $x \\in\\{0,1, \\ldots, p-1\\}$ to $\\lfloor x / 2\\rfloor$.\n\nPart 2. The required polynomial does not exist when $n$ is not a prime power.\n\nLet $n=a b$ where $a, b>1$ and $\\operatorname{gcd}(a, b)=1$. Note that, $\\operatorname{since} \\operatorname{gcd}(a, b)=1$,\n\n$$\nf_{m, a b}=f_{m, a} f_{m, b}\n$$\n\nby the Chinese remainder theorem. Also, note that, if $f_{m, \\ell}=f_{m+1, \\ell}$, then $P$ permutes the image of $P^{m}$ on $\\mathbb{Z}_{\\ell}$, and therefore $f_{s, \\ell}=f_{m, \\ell}$ for all $s>m$. So, as $f_{m, a b}=1$ for sufficiently large $m$, we have for each $m$\n\n$$\nf_{m, a}>f_{m+1, a} \\quad \\text { or } \\quad f_{m, a}=1, \\quad f_{m, b}>f_{m+1, b} \\quad \\text { or } \\quad f_{m, b}=1\n$$\n\nChoose the smallest $m$ such that $f_{m+1, a}=1$ or $f_{m+1, b}=1$. Without loss of generality assume that $f_{m+1, a}=1$. Then $f_{m+1, a b}=f_{m+1, b}<f_{m, b} \\leqslant f_{m, a b} / 2 \\leqslant f_{m+1, a b}$, a contradiction.\n\nPart 3. The required polynomial does not exist when $n$ is an odd prime power that is not a prime.\n\nLet $n=p^{k}$, where $p \\geqslant 3$ is prime and $k \\geqslant 2$. For $r \\in \\mathbb{Z}_{p}$ let $S_{r}$ denote the subset of $\\mathbb{Z}_{p^{k}}$ consisting of numbers congruent to $r$ modulo $p$. We denote the cardinality of a set $S$ by $|S|$. Claim. For any residue $r$ modulo $p$, either $\\left|P\\left(S_{r}\\right)\\right|=p^{k-1}$ or $\\left|P\\left(S_{r}\\right)\\right| \\leqslant p^{k-2}$.\n\nProof. Recall that $P(r+h)=P(r)+h P^{\\prime}(r)+h^{2} Q(r, h)$, where $Q$ is an integer polynomial.\n\nIf $p \\mid P^{\\prime}(r)$, then $P(r+p s) \\equiv P(r)\\left(\\bmod p^{2}\\right)$, hence all elements of $P\\left(S_{r}\\right)$ are congruent modulo $p^{2}$. So in this case $\\left|P\\left(S_{r}\\right)\\right| \\leqslant p^{k-2}$.\n\nNow we show that $p \\nmid P^{\\prime}(r)$ implies $\\left|P\\left(S_{r}\\right)\\right|=p^{k-1}$ for all $k$.\n\nSuppose the contrary: $\\left|P\\left(S_{r}\\right)\\right|<p^{k-1}$ for some $k>1$. Let us choose the smallest $k$ for which this is so. To each residue in $P\\left(S_{r}\\right)$ we assign its residue modulo $p^{k-1}$; denote the resulting set by $\\bar{P}(S, r)$. We have $|\\bar{P}(S, r)|=p^{k-2}$ by virtue of minimality of $k$. Then $\\left|P\\left(S_{r}\\right)\\right|<p^{k-1}=p \\cdot|\\bar{P}(S, r)|$, that is, there is $u=P(x) \\in P\\left(S_{r}\\right)(x \\equiv r(\\bmod p))$ and $t \\not \\equiv 0$ $(\\bmod p)$ such that $u+p^{k-1} t \\notin P\\left(S_{r}\\right)$.\n\nNote that $P\\left(x+p^{k-1} s\\right) \\equiv u+p^{k-1} s P^{\\prime}(x)\\left(\\bmod p^{k}\\right)$. Since $P\\left(x+p^{k-1} s\\right) \\not \\equiv u+p^{k-1} t$ $\\left(\\bmod p^{k}\\right)$, the congruence $p^{k-1} s P^{\\prime}(x) \\equiv p^{k-1} t\\left(\\bmod p^{k}\\right)$ has no solutions. So the congruence $s P^{\\prime}(x) \\equiv t(\\bmod p)$ has no solutions, which contradicts $p \\nmid P^{\\prime}(r)$. Since the image of $P^{m}$ consists of one element for sufficiently large $m$, we can take the smallest $m$ such that $\\left|P^{m-1}\\left(S_{r}\\right)\\right|=p^{k-1}$ for some $r \\in \\mathbb{Z}_{p}$, but $\\left|P^{m}\\left(S_{q}\\right)\\right| \\leqslant p^{k-2}$ for all $q \\in \\mathbb{Z}_{p}$.\n\nFrom now on, we fix $m$ and $r$.\n\nSince the image of $P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m-1}\\left(S_{r}\\right)$ under $P$ contains $P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m}\\left(S_{r}\\right)$, we have\n\n$$\na:=\\left|P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m}\\left(S_{r}\\right)\\right| \\leqslant\\left|P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m-1}\\left(S_{r}\\right)\\right|\n$$\n\nthus\n\n$$\na+p^{k-1} \\leqslant f_{m-1, p^{k}} \\leqslant 2 f_{m, p^{k}} \\leqslant 2 p^{k-2}+2 a\n$$\n\nso\n\n$$\n(p-2) p^{k-2} \\leqslant a\n$$\n\nSince $f_{i, p}=1$ for sufficiently large $i$, there is exactly one $t \\in \\mathbb{Z}_{p}$ such that $P(t) \\equiv t(\\bmod p)$. Moreover, as $i$ increases, the cardinality of the set $\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{i}(s) \\equiv t(\\bmod p)\\right\\}$ increases (strictly), until it reaches the value $p$. So either\n\n$$\n\\left|\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{m-1}(s) \\equiv t \\quad(\\bmod p)\\right\\}\\right|=p \\quad \\text { or } \\quad\\left|\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{m-1}(s) \\equiv t \\quad(\\bmod p)\\right\\}\\right| \\geqslant m .\n$$\n\nTherefore, either $f_{m-1, p}=1$ or there exists a subset $X \\subset \\mathbb{Z}_{p}$ of cardinality at least $m$ such that $P^{m-1}(x) \\equiv t(\\bmod p)$ for all $x \\in X$.\n\nIn the first case $\\left|P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant p^{k-1}=\\left|P^{m-1}\\left(S_{r}\\right)\\right|$, so $a=0$, a contradiction.\n\nIn the second case let $Y$ be the set of all elements of $\\mathbb{Z}_{p^{k}}$ congruent to some element of $X$ modulo $p$. Let $Z=\\mathbb{Z}_{p^{k}} \\backslash Y$. Then $P^{m-1}(Y) \\subset S_{t}, P\\left(S_{t}\\right) \\subsetneq S_{t}$, and $Z=\\bigcup_{i \\in \\mathbb{Z}_{p} \\backslash X} S_{i}$, so\n\n$$\n\\left|P^{m}(Y)\\right| \\leqslant\\left|P\\left(S_{t}\\right)\\right| \\leqslant p^{k-2} \\text { and }\\left|P^{m}(Z)\\right| \\leqslant\\left|\\mathbb{Z}_{p} \\backslash X\\right| \\cdot p^{k-2} \\leqslant(p-m) p^{k-2} .\n$$\n\nHence,\n\n$$\n(p-2) p^{k-2} \\leqslant a<\\left|P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant\\left|P^{m}(Y)\\right|+\\left|P^{m}(Z)\\right| \\leqslant(p-m+1) p^{k-2}\n$$\n\nand $m<3$. Then $\\left|P^{2}\\left(S_{q}\\right)\\right| \\leqslant p^{k-2}$ for all $q \\in \\mathbb{Z}_{p}$, so\n\n$$\np^{k} / 4 \\leqslant\\left|P^{2}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant p^{k-1}\n$$\n\nwhich is impossible for $p \\geqslant 5$. It remains to consider the case $p=3$.\n\nAs before, let $t$ be the only residue modulo 3 such that $P(t) \\equiv t(\\bmod 3)$.\n\nIf $3 \\nmid P^{\\prime}(t)$, then $P\\left(S_{t}\\right)=S_{t}$ by the proof of the Claim above, which is impossible.\n\nSo $3 \\mid P^{\\prime}(t)$. By substituting $h=3^{i} s$ into the formula $P(t+h)=P(t)+h P^{\\prime}(t)+h^{2} Q(t, h)$, we obtain $P\\left(t+3^{i} s\\right) \\equiv P(t)\\left(\\bmod 3^{i+1}\\right)$. Using induction on $i$ we see that all elements of $P^{i}\\left(S_{t}\\right)$ are congruent modulo $3^{i+1}$. Thus, $\\left|P^{k-1}\\left(S_{t}\\right)\\right|=1$.\n\nNote that $f_{1,3} \\leqslant 2$ and $f_{2,3} \\leqslant 1$, so $P^{2}\\left(\\mathbb{Z}_{3^{k}}\\right) \\subset S_{t}$. Therefore, $\\left|P^{k+1}\\left(\\mathbb{Z}_{3^{k}}\\right)\\right| \\leqslant\\left|P^{k-1}\\left(S_{t}\\right)\\right|=1$. It follows that $3^{k} \\leqslant 2^{k+1}$, which is impossible for $k \\geqslant 2$."
  },
  {
    "id": "fimo_2021_number_theory_p8_2",
    "enunciado": "A function $f: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ is chosen so that $a-b \\mid f(a)-f(b)$ for all $a, b \\in \\mathbb{Z}$ with $a \\neq b$. Let $S_{0}=\\mathbb{Z}$, and for each positive integer $m$, let $S_{m}$ denote the image of $f$ on the set $S_{m-1}$. It is given that, for each nonnegative integer $m$, there are exactly $\\left\\lceil n / 2^{m}\\right\\rceil$ distinct residues modulo $n$ in the set $S_{m}$. Find all possible values of $n$.\n\nThe final answers are all powers of primes.",
    "solucao": "Observe that $f$ can be regarded as a function $\\mathbb{Z}_{\\ell} \\rightarrow \\mathbb{Z}_{\\ell}$ for any positive integer $\\ell$. We use notations $f^{m}$ and $f_{m, \\ell}$ as in the above solution. Part 1. There exists a function $f: \\mathbb{Z}_{p^{k}} \\rightarrow \\mathbb{Z}_{p^{k}}$ satisfying the desired properties.\n\nFor $x \\in \\mathbb{Z}_{p^{k}}$, let $\\operatorname{rev}(x)$ denote the reversal of the base- $p$ digits of $x$ (we write every $x \\in \\mathbb{Z}_{p^{k}}$ with exactly $k$ digits, adding zeroes at the beginning if necessary). Choose\n\n$$\nf(x)=\\operatorname{rev}\\left(\\left\\lfloor\\frac{\\operatorname{rev}(x)}{2}\\right\\rfloor\\right)\n$$\n\nwhere, for dividing by $2, \\operatorname{rev}(x)$ is interpreted as an integer in the range $\\left[0, p^{k}\\right)$. It is easy to see that $f_{m+1, k}=\\left\\lceil f_{m, k} / 2\\right\\rceil$\n\nWe claim that if $a, b \\in \\mathbb{Z}_{p^{k}}$ so that $p^{m} \\mid a-b$, then $p^{m} \\mid f(a)-f(b)$. Let $x=\\operatorname{rev}(a), y=\\operatorname{rev}(b)$. The first $m$ digits of $x$ and $y$ are the same, i.e $\\left\\lfloor x / p^{m-k}\\right\\rfloor=\\left\\lfloor y / p^{m-k}\\right\\rfloor$. For every positive integers $c, d$ and $z$ we have $\\lfloor\\lfloor z / c\\rfloor / d\\rfloor=\\lfloor z /(c d)\\rfloor=\\lfloor[z / d\\rfloor / c\\rfloor$, so\n\n$$\n\\left\\lfloor\\lfloor x / 2\\rfloor / p^{m-k}\\right\\rfloor=\\left\\lfloor\\left\\lfloor x / p^{m-k}\\right\\rfloor / 2\\right\\rfloor=\\left\\lfloor\\left\\lfloor y / p^{m-k}\\right\\rfloor / 2\\right\\rfloor=\\left\\lfloor\\lfloor y / 2\\rfloor / p^{m-k}\\right\\rfloor .\n$$\n\nThus, the first $m$ digits of $\\lfloor x / 2\\rfloor$ and $\\lfloor y / 2\\rfloor$ are the same. So the last $m$ digits of $f(a)$ and $f(b)$ are the same, i.e. $p^{m} \\mid f(a)-f(b)$.\n\nPart 2. Lifting the function $f: \\mathbb{Z}_{p^{k}} \\rightarrow \\mathbb{Z}_{p^{k}}$ to a function on all of $\\mathbb{Z}$.\n\nWe show that, for any function $f: \\mathbb{Z}_{p^{k}} \\rightarrow \\mathbb{Z}_{p^{k}}$ for which $\\operatorname{gcd}\\left(p^{k}, a-b\\right) \\mid f(a)-f(b)$, there is a corresponding function $g: \\mathbb{Z} \\rightarrow \\mathbb{Z}$ for which $a-b \\mid g(a)-g(b)$ for all distinct integers $a, b$ and $g(x) \\equiv f(x)\\left(\\bmod p^{k}\\right)$ for all $x \\in \\mathbb{Z}$, whence the proof will be completed. We will construct the values of such a function inductively; assume that we have constructed it for some interval $[a, b)$ and wish to define $g(b)$. (We will define $g(a-1)$ similarly.)\n\nFor every prime $q \\leqslant|a-b|$, we choose the maximal $\\alpha_{q}$ for which there exists $c_{q} \\in[a, b)$, such that $b-c_{q} \\vdots q^{\\alpha_{q}}$, and choose one such $c_{q}$.\n\nWe apply Chinese remainder theorem to find $g(b)$ satisfying the following conditions:\n\n$$\n\\begin{gathered}\ng(b) \\equiv g\\left(c_{q}\\right) \\quad\\left(\\bmod q^{\\alpha_{q}}\\right) \\quad \\text { for } q \\neq p, \\quad \\text { and } \\\\\ng(b) \\equiv g\\left(c_{p}\\right) \\quad\\left(\\bmod q^{\\alpha_{p}}\\right) \\quad \\text { if } \\quad \\alpha_{p} \\geqslant k, \\quad g(b) \\equiv f(b) \\quad\\left(\\bmod p^{k}\\right) \\quad \\text { if } \\quad \\alpha_{p}<k\n\\end{gathered}\n$$\n\nIt is not hard to verify that $b-c \\mid g(b)-g(c)$ for every $c \\in[a, b)$ and $g(b) \\equiv f(b)\\left(\\bmod p^{k}\\right)$.\n\nPart 3. The required function does not exist if $n$ has at least two different prime divisors.\n\nLet $n=p^{k}$, where $p \\geqslant 3$ is prime and $k \\geqslant 2$. For $r \\in \\mathbb{Z}_{p}$ let $S_{r}$ denote the subset of $\\mathbb{Z}_{p^{k}}$ consisting of numbers congruent to $r$ modulo $p$. We denote the cardinality of a set $S$ by $|S|$. Claim. For any residue $r$ modulo $p$, either $\\left|P\\left(S_{r}\\right)\\right|=p^{k-1}$ or $\\left|P\\left(S_{r}\\right)\\right| \\leqslant p^{k-2}$.\n\nProof. Recall that $P(r+h)=P(r)+h P^{\\prime}(r)+h^{2} Q(r, h)$, where $Q$ is an integer polynomial.\n\nIf $p \\mid P^{\\prime}(r)$, then $P(r+p s) \\equiv P(r)\\left(\\bmod p^{2}\\right)$, hence all elements of $P\\left(S_{r}\\right)$ are congruent modulo $p^{2}$. So in this case $\\left|P\\left(S_{r}\\right)\\right| \\leqslant p^{k-2}$.\n\nNow we show that $p \\nmid P^{\\prime}(r)$ implies $\\left|P\\left(S_{r}\\right)\\right|=p^{k-1}$ for all $k$.\n\nSuppose the contrary: $\\left|P\\left(S_{r}\\right)\\right|<p^{k-1}$ for some $k>1$. Let us choose the smallest $k$ for which this is so. To each residue in $P\\left(S_{r}\\right)$ we assign its residue modulo $p^{k-1}$; denote the resulting set by $\\bar{P}(S, r)$. We have $|\\bar{P}(S, r)|=p^{k-2}$ by virtue of minimality of $k$. Then $\\left|P\\left(S_{r}\\right)\\right|<p^{k-1}=p \\cdot|\\bar{P}(S, r)|$, that is, there is $u=P(x) \\in P\\left(S_{r}\\right)(x \\equiv r(\\bmod p))$ and $t \\not \\equiv 0$ $(\\bmod p)$ such that $u+p^{k-1} t \\notin P\\left(S_{r}\\right)$.\n\nNote that $P\\left(x+p^{k-1} s\\right) \\equiv u+p^{k-1} s P^{\\prime}(x)\\left(\\bmod p^{k}\\right)$. Since $P\\left(x+p^{k-1} s\\right) \\not \\equiv u+p^{k-1} t$ $\\left(\\bmod p^{k}\\right)$, the congruence $p^{k-1} s P^{\\prime}(x) \\equiv p^{k-1} t\\left(\\bmod p^{k}\\right)$ has no solutions. So the congruence $s P^{\\prime}(x) \\equiv t(\\bmod p)$ has no solutions, which contradicts $p \\nmid P^{\\prime}(r)$. Since the image of $P^{m}$ consists of one element for sufficiently large $m$, we can take the smallest $m$ such that $\\left|P^{m-1}\\left(S_{r}\\right)\\right|=p^{k-1}$ for some $r \\in \\mathbb{Z}_{p}$, but $\\left|P^{m}\\left(S_{q}\\right)\\right| \\leqslant p^{k-2}$ for all $q \\in \\mathbb{Z}_{p}$.\n\nFrom now on, we fix $m$ and $r$.\n\nSince the image of $P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m-1}\\left(S_{r}\\right)$ under $P$ contains $P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m}\\left(S_{r}\\right)$, we have\n\n$$\na:=\\left|P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m}\\left(S_{r}\\right)\\right| \\leqslant\\left|P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right) \\backslash P^{m-1}\\left(S_{r}\\right)\\right|\n$$\n\nthus\n\n$$\na+p^{k-1} \\leqslant f_{m-1, p^{k}} \\leqslant 2 f_{m, p^{k}} \\leqslant 2 p^{k-2}+2 a\n$$\n\nso\n\n$$\n(p-2) p^{k-2} \\leqslant a\n$$\n\nSince $f_{i, p}=1$ for sufficiently large $i$, there is exactly one $t \\in \\mathbb{Z}_{p}$ such that $P(t) \\equiv t(\\bmod p)$. Moreover, as $i$ increases, the cardinality of the set $\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{i}(s) \\equiv t(\\bmod p)\\right\\}$ increases (strictly), until it reaches the value $p$. So either\n\n$$\n\\left|\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{m-1}(s) \\equiv t \\quad(\\bmod p)\\right\\}\\right|=p \\quad \\text { or } \\quad\\left|\\left\\{s \\in \\mathbb{Z}_{p} \\mid P^{m-1}(s) \\equiv t \\quad(\\bmod p)\\right\\}\\right| \\geqslant m .\n$$\n\nTherefore, either $f_{m-1, p}=1$ or there exists a subset $X \\subset \\mathbb{Z}_{p}$ of cardinality at least $m$ such that $P^{m-1}(x) \\equiv t(\\bmod p)$ for all $x \\in X$.\n\nIn the first case $\\left|P^{m-1}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant p^{k-1}=\\left|P^{m-1}\\left(S_{r}\\right)\\right|$, so $a=0$, a contradiction.\n\nIn the second case let $Y$ be the set of all elements of $\\mathbb{Z}_{p^{k}}$ congruent to some element of $X$ modulo $p$. Let $Z=\\mathbb{Z}_{p^{k}} \\backslash Y$. Then $P^{m-1}(Y) \\subset S_{t}, P\\left(S_{t}\\right) \\subsetneq S_{t}$, and $Z=\\bigcup_{i \\in \\mathbb{Z}_{p} \\backslash X} S_{i}$, so\n\n$$\n\\left|P^{m}(Y)\\right| \\leqslant\\left|P\\left(S_{t}\\right)\\right| \\leqslant p^{k-2} \\text { and }\\left|P^{m}(Z)\\right| \\leqslant\\left|\\mathbb{Z}_{p} \\backslash X\\right| \\cdot p^{k-2} \\leqslant(p-m) p^{k-2} .\n$$\n\nHence,\n\n$$\n(p-2) p^{k-2} \\leqslant a<\\left|P^{m}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant\\left|P^{m}(Y)\\right|+\\left|P^{m}(Z)\\right| \\leqslant(p-m+1) p^{k-2}\n$$\n\nand $m<3$. Then $\\left|P^{2}\\left(S_{q}\\right)\\right| \\leqslant p^{k-2}$ for all $q \\in \\mathbb{Z}_{p}$, so\n\n$$\np^{k} / 4 \\leqslant\\left|P^{2}\\left(\\mathbb{Z}_{p^{k}}\\right)\\right| \\leqslant p^{k-1}\n$$\n\nwhich is impossible for $p \\geqslant 5$. It remains to consider the case $p=3$.\n\nAs before, let $t$ be the only residue modulo 3 such that $P(t) \\equiv t(\\bmod 3)$.\n\nIf $3 \\nmid P^{\\prime}(t)$, then $P\\left(S_{t}\\right)=S_{t}$ by the proof of the Claim above, which is impossible.\n\nSo $3 \\mid P^{\\prime}(t)$. By substituting $h=3^{i} s$ into the formula $P(t+h)=P(t)+h P^{\\prime}(t)+h^{2} Q(t, h)$, we obtain $P\\left(t+3^{i} s\\right) \\equiv P(t)\\left(\\bmod 3^{i+1}\\right)$. Using induction on $i$ we see that all elements of $P^{i}\\left(S_{t}\\right)$ are congruent modulo $3^{i+1}$. Thus, $\\left|P^{k-1}\\left(S_{t}\\right)\\right|=1$.\n\nNote that $f_{1,3} \\leqslant 2$ and $f_{2,3} \\leqslant 1$, so $P^{2}\\left(\\mathbb{Z}_{3^{k}}\\right) \\subset S_{t}$. Therefore, $\\left|P^{k+1}\\left(\\mathbb{Z}_{3^{k}}\\right)\\right| \\leqslant\\left|P^{k-1}\\left(S_{t}\\right)\\right|=1$. It follows that $3^{k} \\leqslant 2^{k+1}$, which is impossible for $k \\geqslant 2$."
  }
]